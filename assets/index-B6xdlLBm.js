function PA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var SA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yT={exports:{}},Wd={},_T={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu=Symbol.for("react.element"),IA=Symbol.for("react.portal"),CA=Symbol.for("react.fragment"),AA=Symbol.for("react.strict_mode"),kA=Symbol.for("react.profiler"),bA=Symbol.for("react.provider"),RA=Symbol.for("react.context"),LA=Symbol.for("react.forward_ref"),NA=Symbol.for("react.suspense"),MA=Symbol.for("react.memo"),OA=Symbol.for("react.lazy"),_v=Symbol.iterator;function VA(t){return t===null||typeof t!="object"?null:(t=_v&&t[_v]||t["@@iterator"],typeof t=="function"?t:null)}var vT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wT=Object.assign,TT={};function Ua(t,e,n){this.props=t,this.context=e,this.refs=TT,this.updater=n||vT}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xT(){}xT.prototype=Ua.prototype;function Ug(t,e,n){this.props=t,this.context=e,this.refs=TT,this.updater=n||vT}var Hg=Ug.prototype=new xT;Hg.constructor=Ug;wT(Hg,Ua.prototype);Hg.isPureReactComponent=!0;var vv=Array.isArray,ET=Object.prototype.hasOwnProperty,Wg={current:null},PT={key:!0,ref:!0,__self:!0,__source:!0};function ST(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)ET.call(e,i)&&!PT.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Wu,type:t,key:o,ref:a,props:r,_owner:Wg.current}}function DA(t,e){return{$$typeof:Wu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $g(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wu}function jA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wv=/\/+/g;function Yf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jA(""+t.key):e.toString(36)}function _h(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Wu:case IA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Yf(a,0):i,vv(r)?(n="",t!=null&&(n=t.replace(wv,"$&/")+"/"),_h(r,e,n,"",function(f){return f})):r!=null&&($g(r)&&(r=DA(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(wv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",vv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+Yf(o,u);a+=_h(o,e,n,h,r)}else if(h=VA(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+Yf(o,u++),a+=_h(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $c(t,e,n){if(t==null)return t;var i=[],r=0;return _h(t,i,"","",function(o){return e.call(n,o,r++)}),i}function zA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},vh={transition:null},BA={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:vh,ReactCurrentOwner:Wg};function IT(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:$c,forEach:function(t,e,n){$c(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $c(t,function(){e++}),e},toArray:function(t){return $c(t,function(e){return e})||[]},only:function(t){if(!$g(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Ua;Ie.Fragment=CA;Ie.Profiler=kA;Ie.PureComponent=Ug;Ie.StrictMode=AA;Ie.Suspense=NA;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BA;Ie.act=IT;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=wT({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Wg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)ET.call(e,h)&&!PT.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Wu,type:t.type,key:r,ref:o,props:i,_owner:a}};Ie.createContext=function(t){return t={$$typeof:RA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bA,_context:t},t.Consumer=t};Ie.createElement=ST;Ie.createFactory=function(t){var e=ST.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:LA,render:t}};Ie.isValidElement=$g;Ie.lazy=function(t){return{$$typeof:OA,_payload:{_status:-1,_result:t},_init:zA}};Ie.memo=function(t,e){return{$$typeof:MA,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=vh.transition;vh.transition={};try{t()}finally{vh.transition=e}};Ie.unstable_act=IT;Ie.useCallback=function(t,e){return Jt.current.useCallback(t,e)};Ie.useContext=function(t){return Jt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Jt.current.useEffect(t,e)};Ie.useId=function(){return Jt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Jt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};Ie.useRef=function(t){return Jt.current.useRef(t)};Ie.useState=function(t){return Jt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Jt.current.useTransition()};Ie.version="18.3.1";_T.exports=Ie;var z=_T.exports;const Zs=gT(z),FA=PA({__proto__:null,default:Zs},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UA=z,HA=Symbol.for("react.element"),WA=Symbol.for("react.fragment"),$A=Object.prototype.hasOwnProperty,qA=UA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GA={key:!0,ref:!0,__self:!0,__source:!0};function CT(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)$A.call(e,i)&&!GA.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:HA,type:t,key:o,ref:a,props:r,_owner:qA.current}}Wd.Fragment=WA;Wd.jsx=CT;Wd.jsxs=CT;yT.exports=Wd;var P=yT.exports,rm={},AT={exports:{}},xn={},kT={exports:{}},bT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,le){var J=Z.length;Z.push(le);e:for(;0<J;){var te=J-1>>>1,Te=Z[te];if(0<r(Te,le))Z[te]=le,Z[J]=Te,J=te;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var le=Z[0],J=Z.pop();if(J!==le){Z[0]=J;e:for(var te=0,Te=Z.length,Ze=Te>>>1;te<Ze;){var Ce=2*(te+1)-1,Ee=Z[Ce],ce=Ce+1,lt=Z[ce];if(0>r(Ee,J))ce<Te&&0>r(lt,Ee)?(Z[te]=lt,Z[ce]=J,te=ce):(Z[te]=Ee,Z[Ce]=J,te=Ce);else if(ce<Te&&0>r(lt,J))Z[te]=lt,Z[ce]=J,te=ce;else break e}}return le}function r(Z,le){var J=Z.sortIndex-le.sortIndex;return J!==0?J:Z.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,v=3,T=!1,R=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var le=n(f);le!==null;){if(le.callback===null)i(f);else if(le.startTime<=Z)i(f),le.sortIndex=le.expirationTime,e(h,le);else break;le=n(f)}}function F(Z){if(b=!1,S(Z),!R)if(n(h)!==null)R=!0,xe(q);else{var le=n(f);le!==null&&Ge(F,le.startTime-Z)}}function q(Z,le){R=!1,b&&(b=!1,I(C),C=-1),T=!0;var J=v;try{for(S(le),g=n(h);g!==null&&(!(g.expirationTime>le)||Z&&!V());){var te=g.callback;if(typeof te=="function"){g.callback=null,v=g.priorityLevel;var Te=te(g.expirationTime<=le);le=t.unstable_now(),typeof Te=="function"?g.callback=Te:g===n(h)&&i(h),S(le)}else i(h);g=n(h)}if(g!==null)var Ze=!0;else{var Ce=n(f);Ce!==null&&Ge(F,Ce.startTime-le),Ze=!1}return Ze}finally{g=null,v=J,T=!1}}var G=!1,N=null,C=-1,k=5,M=-1;function V(){return!(t.unstable_now()-M<k)}function B(){if(N!==null){var Z=t.unstable_now();M=Z;var le=!0;try{le=N(!0,Z)}finally{le?O():(G=!1,N=null)}}else G=!1}var O;if(typeof E=="function")O=function(){E(B)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Ve=oe.port2;oe.port1.onmessage=B,O=function(){Ve.postMessage(null)}}else O=function(){j(B,0)};function xe(Z){N=Z,G||(G=!0,O())}function Ge(Z,le){C=j(function(){Z(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){R||T||(R=!0,xe(q))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var le=3;break;default:le=v}var J=v;v=le;try{return Z()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var J=v;v=Z;try{return le()}finally{v=J}},t.unstable_scheduleCallback=function(Z,le,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,Z){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=J+Te,Z={id:m++,callback:le,priorityLevel:Z,startTime:J,expirationTime:Te,sortIndex:-1},J>te?(Z.sortIndex=J,e(f,Z),n(h)===null&&Z===n(f)&&(b?(I(C),C=-1):b=!0,Ge(F,J-te))):(Z.sortIndex=Te,e(h,Z),R||T||(R=!0,xe(q))),Z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Z){var le=v;return function(){var J=v;v=le;try{return Z.apply(this,arguments)}finally{v=J}}}})(bT);kT.exports=bT;var ZA=kT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KA=z,wn=ZA;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RT=new Set,du={};function so(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(du[t]=e,t=0;t<e.length;t++)RT.add(e[t])}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sm=Object.prototype.hasOwnProperty,QA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tv={},xv={};function XA(t){return sm.call(xv,t)?!0:sm.call(Tv,t)?!1:QA.test(t)?xv[t]=!0:(Tv[t]=!0,!1)}function YA(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JA(t,e,n,i){if(e===null||typeof e>"u"||YA(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var qg=/[\-:]([a-z])/g;function Gg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qg,Gg);Ot[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qg,Gg);Ot[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qg,Gg);Ot[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zg(t,e,n,i){var r=Ot.hasOwnProperty(e)?Ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JA(e,n,r,i)&&(n=null),i||r===null?XA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var lr=KA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),Kg=Symbol.for("react.strict_mode"),om=Symbol.for("react.profiler"),LT=Symbol.for("react.provider"),NT=Symbol.for("react.context"),Qg=Symbol.for("react.forward_ref"),am=Symbol.for("react.suspense"),lm=Symbol.for("react.suspense_list"),Xg=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),MT=Symbol.for("react.offscreen"),Ev=Symbol.iterator;function Cl(t){return t===null||typeof t!="object"?null:(t=Ev&&t[Ev]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,Jf;function Dl(t){if(Jf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jf=e&&e[1]||""}return`
`+Jf+t}var ep=!1;function tp(t,e){if(!t||ep)return"";ep=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{ep=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dl(t):""}function ek(t){switch(t.tag){case 5:return Dl(t.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return t=tp(t.type,!1),t;case 11:return t=tp(t.type.render,!1),t;case 1:return t=tp(t.type,!0),t;default:return""}}function um(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Qo:return"Portal";case om:return"Profiler";case Kg:return"StrictMode";case am:return"Suspense";case lm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NT:return(t.displayName||"Context")+".Consumer";case LT:return(t._context.displayName||"Context")+".Provider";case Qg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xg:return e=t.displayName||null,e!==null?e:um(t.type)||"Memo";case Pr:e=t._payload,t=t._init;try{return um(t(e))}catch{}}return null}function tk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return um(e);case 8:return e===Kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nk(t){var e=OT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gc(t){t._valueTracker||(t._valueTracker=nk(t))}function VT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=OT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Uh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cm(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DT(t,e){e=e.checked,e!=null&&Zg(t,"checked",e,!1)}function hm(t,e){DT(t,e);var n=Jr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dm(t,e.type,n):e.hasOwnProperty("defaultValue")&&dm(t,e.type,Jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dm(t,e,n){(e!=="number"||Uh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jl=Array.isArray;function fa(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Jr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function fm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Iv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(jl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jr(n)}}function jT(t,e){var n=Jr(e.value),i=Jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Cv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zc,BT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ik=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(t){ik.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ql[e]=ql[t]})});function FT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ql.hasOwnProperty(t)&&ql[t]?(""+e).trim():e+"px"}function UT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=FT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var rk=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mm(t,e){if(e){if(rk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function gm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ym=null;function Yg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _m=null,pa=null,ma=null;function Av(t){if(t=Gu(t)){if(typeof _m!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Kd(e),_m(t.stateNode,t.type,e))}}function HT(t){pa?ma?ma.push(t):ma=[t]:pa=t}function WT(){if(pa){var t=pa,e=ma;if(ma=pa=null,Av(t),e)for(t=0;t<e.length;t++)Av(e[t])}}function $T(t,e){return t(e)}function qT(){}var np=!1;function GT(t,e,n){if(np)return t(e,n);np=!0;try{return $T(t,e,n)}finally{np=!1,(pa!==null||ma!==null)&&(qT(),WT())}}function pu(t,e){var n=t.stateNode;if(n===null)return null;var i=Kd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var vm=!1;if(Yi)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){vm=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{vm=!1}function sk(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Gl=!1,Hh=null,Wh=!1,wm=null,ok={onError:function(t){Gl=!0,Hh=t}};function ak(t,e,n,i,r,o,a,u,h){Gl=!1,Hh=null,sk.apply(ok,arguments)}function lk(t,e,n,i,r,o,a,u,h){if(ak.apply(this,arguments),Gl){if(Gl){var f=Hh;Gl=!1,Hh=null}else throw Error(Y(198));Wh||(Wh=!0,wm=f)}}function oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ZT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kv(t){if(oo(t)!==t)throw Error(Y(188))}function uk(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return kv(r),t;if(o===i)return kv(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function KT(t){return t=uk(t),t!==null?QT(t):null}function QT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QT(t);if(e!==null)return e;t=t.sibling}return null}var XT=wn.unstable_scheduleCallback,bv=wn.unstable_cancelCallback,ck=wn.unstable_shouldYield,hk=wn.unstable_requestPaint,ht=wn.unstable_now,dk=wn.unstable_getCurrentPriorityLevel,Jg=wn.unstable_ImmediatePriority,YT=wn.unstable_UserBlockingPriority,$h=wn.unstable_NormalPriority,fk=wn.unstable_LowPriority,JT=wn.unstable_IdlePriority,$d=null,gi=null;function pk(t){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot($d,t,void 0,(t.current.flags&128)===128)}catch{}}var ei=Math.clz32?Math.clz32:yk,mk=Math.log,gk=Math.LN2;function yk(t){return t>>>=0,t===0?32:31-(mk(t)/gk|0)|0}var Kc=64,Qc=4194304;function zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=zl(u):(o&=a,o!==0&&(i=zl(o)))}else a=n&~r,a!==0?i=zl(a):o!==0&&(i=zl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ei(e),r=1<<n,i|=t[n],e&=~r;return i}function _k(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ei(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=_k(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ex(){var t=Kc;return Kc<<=1,!(Kc&4194240)&&(Kc=64),t}function ip(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $u(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ei(e),t[e]=n}function wk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ei(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function ey(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ei(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ue=0;function tx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nx,ty,ix,rx,sx,xm=!1,Xc=[],Dr=null,jr=null,zr=null,mu=new Map,gu=new Map,Cr=[],Tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rv(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":mu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(e.pointerId)}}function kl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Gu(e),e!==null&&ty(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function xk(t,e,n,i,r){switch(e){case"focusin":return Dr=kl(Dr,t,e,n,i,r),!0;case"dragenter":return jr=kl(jr,t,e,n,i,r),!0;case"mouseover":return zr=kl(zr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return mu.set(o,kl(mu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,gu.set(o,kl(gu.get(o)||null,t,e,n,i,r)),!0}return!1}function ox(t){var e=js(t.target);if(e!==null){var n=oo(e);if(n!==null){if(e=n.tag,e===13){if(e=ZT(n),e!==null){t.blockedOn=e,sx(t.priority,function(){ix(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Em(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ym=i,n.target.dispatchEvent(i),ym=null}else return e=Gu(n),e!==null&&ty(e),t.blockedOn=n,!1;e.shift()}return!0}function Lv(t,e,n){wh(t)&&n.delete(e)}function Ek(){xm=!1,Dr!==null&&wh(Dr)&&(Dr=null),jr!==null&&wh(jr)&&(jr=null),zr!==null&&wh(zr)&&(zr=null),mu.forEach(Lv),gu.forEach(Lv)}function bl(t,e){t.blockedOn===e&&(t.blockedOn=null,xm||(xm=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,Ek)))}function yu(t){function e(r){return bl(r,t)}if(0<Xc.length){bl(Xc[0],t);for(var n=1;n<Xc.length;n++){var i=Xc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Dr!==null&&bl(Dr,t),jr!==null&&bl(jr,t),zr!==null&&bl(zr,t),mu.forEach(e),gu.forEach(e),n=0;n<Cr.length;n++)i=Cr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)ox(n),n.blockedOn===null&&Cr.shift()}var ga=lr.ReactCurrentBatchConfig,Gh=!0;function Pk(t,e,n,i){var r=Ue,o=ga.transition;ga.transition=null;try{Ue=1,ny(t,e,n,i)}finally{Ue=r,ga.transition=o}}function Sk(t,e,n,i){var r=Ue,o=ga.transition;ga.transition=null;try{Ue=4,ny(t,e,n,i)}finally{Ue=r,ga.transition=o}}function ny(t,e,n,i){if(Gh){var r=Em(t,e,n,i);if(r===null)fp(t,e,i,Zh,n),Rv(t,i);else if(xk(r,t,e,n,i))i.stopPropagation();else if(Rv(t,i),e&4&&-1<Tk.indexOf(t)){for(;r!==null;){var o=Gu(r);if(o!==null&&nx(o),o=Em(t,e,n,i),o===null&&fp(t,e,i,Zh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else fp(t,e,i,null,n)}}var Zh=null;function Em(t,e,n,i){if(Zh=null,t=Yg(i),t=js(t),t!==null)if(e=oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ZT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zh=t,null}function ax(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dk()){case Jg:return 1;case YT:return 4;case $h:case fk:return 16;case JT:return 536870912;default:return 16}default:return 16}}var Nr=null,iy=null,Th=null;function lx(){if(Th)return Th;var t,e=iy,n=e.length,i,r="value"in Nr?Nr.value:Nr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Th=r.slice(t,1<i?1-i:void 0)}function xh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yc(){return!0}function Nv(){return!1}function En(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Yc:Nv,this.isPropagationStopped=Nv,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yc)},persist:function(){},isPersistent:Yc}),e}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ry=En(Ha),qu=it({},Ha,{view:0,detail:0}),Ik=En(qu),rp,sp,Rl,qd=it({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rl&&(Rl&&t.type==="mousemove"?(rp=t.screenX-Rl.screenX,sp=t.screenY-Rl.screenY):sp=rp=0,Rl=t),rp)},movementY:function(t){return"movementY"in t?t.movementY:sp}}),Mv=En(qd),Ck=it({},qd,{dataTransfer:0}),Ak=En(Ck),kk=it({},qu,{relatedTarget:0}),op=En(kk),bk=it({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),Rk=En(bk),Lk=it({},Ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nk=En(Lk),Mk=it({},Ha,{data:0}),Ov=En(Mk),Ok={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dk[t])?!!e[t]:!1}function sy(){return jk}var zk=it({},qu,{key:function(t){if(t.key){var e=Ok[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sy,charCode:function(t){return t.type==="keypress"?xh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bk=En(zk),Fk=it({},qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vv=En(Fk),Uk=it({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sy}),Hk=En(Uk),Wk=it({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),$k=En(Wk),qk=it({},qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gk=En(qk),Zk=[9,13,27,32],oy=Yi&&"CompositionEvent"in window,Zl=null;Yi&&"documentMode"in document&&(Zl=document.documentMode);var Kk=Yi&&"TextEvent"in window&&!Zl,ux=Yi&&(!oy||Zl&&8<Zl&&11>=Zl),Dv=" ",jv=!1;function cx(t,e){switch(t){case"keyup":return Zk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yo=!1;function Qk(t,e){switch(t){case"compositionend":return hx(e);case"keypress":return e.which!==32?null:(jv=!0,Dv);case"textInput":return t=e.data,t===Dv&&jv?null:t;default:return null}}function Xk(t,e){if(Yo)return t==="compositionend"||!oy&&cx(t,e)?(t=lx(),Th=iy=Nr=null,Yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ux&&e.locale!=="ko"?null:e.data;default:return null}}var Yk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yk[t.type]:e==="textarea"}function dx(t,e,n,i){HT(i),e=Kh(e,"onChange"),0<e.length&&(n=new ry("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Kl=null,_u=null;function Jk(t){Ex(t,0)}function Gd(t){var e=ta(t);if(VT(e))return t}function eb(t,e){if(t==="change")return e}var fx=!1;if(Yi){var ap;if(Yi){var lp="oninput"in document;if(!lp){var Bv=document.createElement("div");Bv.setAttribute("oninput","return;"),lp=typeof Bv.oninput=="function"}ap=lp}else ap=!1;fx=ap&&(!document.documentMode||9<document.documentMode)}function Fv(){Kl&&(Kl.detachEvent("onpropertychange",px),_u=Kl=null)}function px(t){if(t.propertyName==="value"&&Gd(_u)){var e=[];dx(e,_u,t,Yg(t)),GT(Jk,e)}}function tb(t,e,n){t==="focusin"?(Fv(),Kl=e,_u=n,Kl.attachEvent("onpropertychange",px)):t==="focusout"&&Fv()}function nb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gd(_u)}function ib(t,e){if(t==="click")return Gd(e)}function rb(t,e){if(t==="input"||t==="change")return Gd(e)}function sb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ni=typeof Object.is=="function"?Object.is:sb;function vu(t,e){if(ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!sm.call(e,r)||!ni(t[r],e[r]))return!1}return!0}function Uv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hv(t,e){var n=Uv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uv(n)}}function mx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gx(){for(var t=window,e=Uh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uh(t.document)}return e}function ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ob(t){var e=gx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mx(n.ownerDocument.documentElement,n)){if(i!==null&&ay(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Hv(n,o);var a=Hv(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ab=Yi&&"documentMode"in document&&11>=document.documentMode,Jo=null,Pm=null,Ql=null,Sm=!1;function Wv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sm||Jo==null||Jo!==Uh(i)||(i=Jo,"selectionStart"in i&&ay(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ql&&vu(Ql,i)||(Ql=i,i=Kh(Pm,"onSelect"),0<i.length&&(e=new ry("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Jo)))}function Jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ea={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionend:Jc("Transition","TransitionEnd")},up={},yx={};Yi&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function Zd(t){if(up[t])return up[t];if(!ea[t])return t;var e=ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yx)return up[t]=e[n];return t}var _x=Zd("animationend"),vx=Zd("animationiteration"),wx=Zd("animationstart"),Tx=Zd("transitionend"),xx=new Map,$v="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(t,e){xx.set(t,e),so(e,[t])}for(var cp=0;cp<$v.length;cp++){var hp=$v[cp],lb=hp.toLowerCase(),ub=hp[0].toUpperCase()+hp.slice(1);cs(lb,"on"+ub)}cs(_x,"onAnimationEnd");cs(vx,"onAnimationIteration");cs(wx,"onAnimationStart");cs("dblclick","onDoubleClick");cs("focusin","onFocus");cs("focusout","onBlur");cs(Tx,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function qv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,lk(i,e,void 0,t),t.currentTarget=null}function Ex(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;qv(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;qv(r,u,f),o=h}}}if(Wh)throw t=wm,Wh=!1,wm=null,t}function Ke(t,e){var n=e[bm];n===void 0&&(n=e[bm]=new Set);var i=t+"__bubble";n.has(i)||(Px(e,t,2,!1),n.add(i))}function dp(t,e,n){var i=0;e&&(i|=4),Px(n,t,i,e)}var eh="_reactListening"+Math.random().toString(36).slice(2);function wu(t){if(!t[eh]){t[eh]=!0,RT.forEach(function(n){n!=="selectionchange"&&(cb.has(n)||dp(n,!1,t),dp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eh]||(e[eh]=!0,dp("selectionchange",!1,e))}}function Px(t,e,n,i){switch(ax(e)){case 1:var r=Pk;break;case 4:r=Sk;break;default:r=ny}n=r.bind(null,e,n,t),r=void 0,!vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function fp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=js(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}GT(function(){var f=o,m=Yg(n),g=[];e:{var v=xx.get(t);if(v!==void 0){var T=ry,R=t;switch(t){case"keypress":if(xh(n)===0)break e;case"keydown":case"keyup":T=Bk;break;case"focusin":R="focus",T=op;break;case"focusout":R="blur",T=op;break;case"beforeblur":case"afterblur":T=op;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Mv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Ak;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Hk;break;case _x:case vx:case wx:T=Rk;break;case Tx:T=$k;break;case"scroll":T=Ik;break;case"wheel":T=Gk;break;case"copy":case"cut":case"paste":T=Nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Vv}var b=(e&4)!==0,j=!b&&t==="scroll",I=b?v!==null?v+"Capture":null:v;b=[];for(var E=f,S;E!==null;){S=E;var F=S.stateNode;if(S.tag===5&&F!==null&&(S=F,I!==null&&(F=pu(E,I),F!=null&&b.push(Tu(E,F,S)))),j)break;E=E.return}0<b.length&&(v=new T(v,R,null,n,m),g.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==ym&&(R=n.relatedTarget||n.fromElement)&&(js(R)||R[Ji]))break e;if((T||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,T?(R=n.relatedTarget||n.toElement,T=f,R=R?js(R):null,R!==null&&(j=oo(R),R!==j||R.tag!==5&&R.tag!==6)&&(R=null)):(T=null,R=f),T!==R)){if(b=Mv,F="onMouseLeave",I="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=Vv,F="onPointerLeave",I="onPointerEnter",E="pointer"),j=T==null?v:ta(T),S=R==null?v:ta(R),v=new b(F,E+"leave",T,n,m),v.target=j,v.relatedTarget=S,F=null,js(m)===f&&(b=new b(I,E+"enter",R,n,m),b.target=S,b.relatedTarget=j,F=b),j=F,T&&R)t:{for(b=T,I=R,E=0,S=b;S;S=Ho(S))E++;for(S=0,F=I;F;F=Ho(F))S++;for(;0<E-S;)b=Ho(b),E--;for(;0<S-E;)I=Ho(I),S--;for(;E--;){if(b===I||I!==null&&b===I.alternate)break t;b=Ho(b),I=Ho(I)}b=null}else b=null;T!==null&&Gv(g,v,T,b,!1),R!==null&&j!==null&&Gv(g,j,R,b,!0)}}e:{if(v=f?ta(f):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var q=eb;else if(zv(v))if(fx)q=rb;else{q=nb;var G=tb}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=ib);if(q&&(q=q(t,f))){dx(g,q,n,m);break e}G&&G(t,v,f),t==="focusout"&&(G=v._wrapperState)&&G.controlled&&v.type==="number"&&dm(v,"number",v.value)}switch(G=f?ta(f):window,t){case"focusin":(zv(G)||G.contentEditable==="true")&&(Jo=G,Pm=f,Ql=null);break;case"focusout":Ql=Pm=Jo=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,Wv(g,n,m);break;case"selectionchange":if(ab)break;case"keydown":case"keyup":Wv(g,n,m)}var N;if(oy)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Yo?cx(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(ux&&n.locale!=="ko"&&(Yo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Yo&&(N=lx()):(Nr=m,iy="value"in Nr?Nr.value:Nr.textContent,Yo=!0)),G=Kh(f,C),0<G.length&&(C=new Ov(C,t,null,n,m),g.push({event:C,listeners:G}),N?C.data=N:(N=hx(n),N!==null&&(C.data=N)))),(N=Kk?Qk(t,n):Xk(t,n))&&(f=Kh(f,"onBeforeInput"),0<f.length&&(m=new Ov("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=N))}Ex(g,e)})}function Tu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=pu(t,n),o!=null&&i.unshift(Tu(t,o,r)),o=pu(t,e),o!=null&&i.push(Tu(t,o,r))),t=t.return}return i}function Ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gv(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=pu(n,o),h!=null&&a.unshift(Tu(n,h,u))):r||(h=pu(n,o),h!=null&&a.push(Tu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var hb=/\r\n?/g,db=/\u0000|\uFFFD/g;function Zv(t){return(typeof t=="string"?t:""+t).replace(hb,`
`).replace(db,"")}function th(t,e,n){if(e=Zv(e),Zv(t)!==e&&n)throw Error(Y(425))}function Qh(){}var Im=null,Cm=null;function Am(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var km=typeof setTimeout=="function"?setTimeout:void 0,fb=typeof clearTimeout=="function"?clearTimeout:void 0,Kv=typeof Promise=="function"?Promise:void 0,pb=typeof queueMicrotask=="function"?queueMicrotask:typeof Kv<"u"?function(t){return Kv.resolve(null).then(t).catch(mb)}:km;function mb(t){setTimeout(function(){throw t})}function pp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),yu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);yu(e)}function Br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),mi="__reactFiber$"+Wa,xu="__reactProps$"+Wa,Ji="__reactContainer$"+Wa,bm="__reactEvents$"+Wa,gb="__reactListeners$"+Wa,yb="__reactHandles$"+Wa;function js(t){var e=t[mi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ji]||n[mi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qv(t);t!==null;){if(n=t[mi])return n;t=Qv(t)}return e}t=n,n=t.parentNode}return null}function Gu(t){return t=t[mi]||t[Ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ta(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Kd(t){return t[xu]||null}var Rm=[],na=-1;function hs(t){return{current:t}}function Xe(t){0>na||(t.current=Rm[na],Rm[na]=null,na--)}function $e(t,e){na++,Rm[na]=t.current,t.current=e}var es={},$t=hs(es),cn=hs(!1),Ks=es;function Ia(t,e){var n=t.type.contextTypes;if(!n)return es;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function hn(t){return t=t.childContextTypes,t!=null}function Xh(){Xe(cn),Xe($t)}function Xv(t,e,n){if($t.current!==es)throw Error(Y(168));$e($t,e),$e(cn,n)}function Sx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,tk(t)||"Unknown",r));return it({},n,i)}function Yh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Ks=$t.current,$e($t,t),$e(cn,cn.current),!0}function Yv(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=Sx(t,e,Ks),i.__reactInternalMemoizedMergedChildContext=t,Xe(cn),Xe($t),$e($t,t)):Xe(cn),$e(cn,n)}var Ui=null,Qd=!1,mp=!1;function Ix(t){Ui===null?Ui=[t]:Ui.push(t)}function _b(t){Qd=!0,Ix(t)}function ds(){if(!mp&&Ui!==null){mp=!0;var t=0,e=Ue;try{var n=Ui;for(Ue=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ui=null,Qd=!1}catch(r){throw Ui!==null&&(Ui=Ui.slice(t+1)),XT(Jg,ds),r}finally{Ue=e,mp=!1}}return null}var ia=[],ra=0,Jh=null,ed=0,Nn=[],Mn=0,Qs=null,Hi=1,Wi="";function Ls(t,e){ia[ra++]=ed,ia[ra++]=Jh,Jh=t,ed=e}function Cx(t,e,n){Nn[Mn++]=Hi,Nn[Mn++]=Wi,Nn[Mn++]=Qs,Qs=t;var i=Hi;t=Wi;var r=32-ei(i)-1;i&=~(1<<r),n+=1;var o=32-ei(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Hi=1<<32-ei(e)+r|n<<r|i,Wi=o+t}else Hi=1<<o|n<<r|i,Wi=t}function ly(t){t.return!==null&&(Ls(t,1),Cx(t,1,0))}function uy(t){for(;t===Jh;)Jh=ia[--ra],ia[ra]=null,ed=ia[--ra],ia[ra]=null;for(;t===Qs;)Qs=Nn[--Mn],Nn[Mn]=null,Wi=Nn[--Mn],Nn[Mn]=null,Hi=Nn[--Mn],Nn[Mn]=null}var vn=null,_n=null,Ye=!1,Qn=null;function Ax(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,_n=Br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qs!==null?{id:Hi,overflow:Wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,_n=null,!0):!1;default:return!1}}function Lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nm(t){if(Ye){var e=_n;if(e){var n=e;if(!Jv(t,e)){if(Lm(t))throw Error(Y(418));e=Br(n.nextSibling);var i=vn;e&&Jv(t,e)?Ax(i,n):(t.flags=t.flags&-4097|2,Ye=!1,vn=t)}}else{if(Lm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ye=!1,vn=t}}}function e0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function nh(t){if(t!==vn)return!1;if(!Ye)return e0(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Am(t.type,t.memoizedProps)),e&&(e=_n)){if(Lm(t))throw kx(),Error(Y(418));for(;e;)Ax(t,e),e=Br(e.nextSibling)}if(e0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=Br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=vn?Br(t.stateNode.nextSibling):null;return!0}function kx(){for(var t=_n;t;)t=Br(t.nextSibling)}function Ca(){_n=vn=null,Ye=!1}function cy(t){Qn===null?Qn=[t]:Qn.push(t)}var vb=lr.ReactCurrentBatchConfig;function Ll(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function ih(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function t0(t){var e=t._init;return e(t._payload)}function bx(t){function e(I,E){if(t){var S=I.deletions;S===null?(I.deletions=[E],I.flags|=16):S.push(E)}}function n(I,E){if(!t)return null;for(;E!==null;)e(I,E),E=E.sibling;return null}function i(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function r(I,E){return I=Wr(I,E),I.index=0,I.sibling=null,I}function o(I,E,S){return I.index=S,t?(S=I.alternate,S!==null?(S=S.index,S<E?(I.flags|=2,E):S):(I.flags|=2,E)):(I.flags|=1048576,E)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,E,S,F){return E===null||E.tag!==6?(E=xp(S,I.mode,F),E.return=I,E):(E=r(E,S),E.return=I,E)}function h(I,E,S,F){var q=S.type;return q===Xo?m(I,E,S.props.children,F,S.key):E!==null&&(E.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Pr&&t0(q)===E.type)?(F=r(E,S.props),F.ref=Ll(I,E,S),F.return=I,F):(F=kh(S.type,S.key,S.props,null,I.mode,F),F.ref=Ll(I,E,S),F.return=I,F)}function f(I,E,S,F){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Ep(S,I.mode,F),E.return=I,E):(E=r(E,S.children||[]),E.return=I,E)}function m(I,E,S,F,q){return E===null||E.tag!==7?(E=Ws(S,I.mode,F,q),E.return=I,E):(E=r(E,S),E.return=I,E)}function g(I,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=xp(""+E,I.mode,S),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case qc:return S=kh(E.type,E.key,E.props,null,I.mode,S),S.ref=Ll(I,null,E),S.return=I,S;case Qo:return E=Ep(E,I.mode,S),E.return=I,E;case Pr:var F=E._init;return g(I,F(E._payload),S)}if(jl(E)||Cl(E))return E=Ws(E,I.mode,S,null),E.return=I,E;ih(I,E)}return null}function v(I,E,S,F){var q=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return q!==null?null:u(I,E,""+S,F);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qc:return S.key===q?h(I,E,S,F):null;case Qo:return S.key===q?f(I,E,S,F):null;case Pr:return q=S._init,v(I,E,q(S._payload),F)}if(jl(S)||Cl(S))return q!==null?null:m(I,E,S,F,null);ih(I,S)}return null}function T(I,E,S,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return I=I.get(S)||null,u(E,I,""+F,q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case qc:return I=I.get(F.key===null?S:F.key)||null,h(E,I,F,q);case Qo:return I=I.get(F.key===null?S:F.key)||null,f(E,I,F,q);case Pr:var G=F._init;return T(I,E,S,G(F._payload),q)}if(jl(F)||Cl(F))return I=I.get(S)||null,m(E,I,F,q,null);ih(E,F)}return null}function R(I,E,S,F){for(var q=null,G=null,N=E,C=E=0,k=null;N!==null&&C<S.length;C++){N.index>C?(k=N,N=null):k=N.sibling;var M=v(I,N,S[C],F);if(M===null){N===null&&(N=k);break}t&&N&&M.alternate===null&&e(I,N),E=o(M,E,C),G===null?q=M:G.sibling=M,G=M,N=k}if(C===S.length)return n(I,N),Ye&&Ls(I,C),q;if(N===null){for(;C<S.length;C++)N=g(I,S[C],F),N!==null&&(E=o(N,E,C),G===null?q=N:G.sibling=N,G=N);return Ye&&Ls(I,C),q}for(N=i(I,N);C<S.length;C++)k=T(N,I,C,S[C],F),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?C:k.key),E=o(k,E,C),G===null?q=k:G.sibling=k,G=k);return t&&N.forEach(function(V){return e(I,V)}),Ye&&Ls(I,C),q}function b(I,E,S,F){var q=Cl(S);if(typeof q!="function")throw Error(Y(150));if(S=q.call(S),S==null)throw Error(Y(151));for(var G=q=null,N=E,C=E=0,k=null,M=S.next();N!==null&&!M.done;C++,M=S.next()){N.index>C?(k=N,N=null):k=N.sibling;var V=v(I,N,M.value,F);if(V===null){N===null&&(N=k);break}t&&N&&V.alternate===null&&e(I,N),E=o(V,E,C),G===null?q=V:G.sibling=V,G=V,N=k}if(M.done)return n(I,N),Ye&&Ls(I,C),q;if(N===null){for(;!M.done;C++,M=S.next())M=g(I,M.value,F),M!==null&&(E=o(M,E,C),G===null?q=M:G.sibling=M,G=M);return Ye&&Ls(I,C),q}for(N=i(I,N);!M.done;C++,M=S.next())M=T(N,I,C,M.value,F),M!==null&&(t&&M.alternate!==null&&N.delete(M.key===null?C:M.key),E=o(M,E,C),G===null?q=M:G.sibling=M,G=M);return t&&N.forEach(function(B){return e(I,B)}),Ye&&Ls(I,C),q}function j(I,E,S,F){if(typeof S=="object"&&S!==null&&S.type===Xo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case qc:e:{for(var q=S.key,G=E;G!==null;){if(G.key===q){if(q=S.type,q===Xo){if(G.tag===7){n(I,G.sibling),E=r(G,S.props.children),E.return=I,I=E;break e}}else if(G.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Pr&&t0(q)===G.type){n(I,G.sibling),E=r(G,S.props),E.ref=Ll(I,G,S),E.return=I,I=E;break e}n(I,G);break}else e(I,G);G=G.sibling}S.type===Xo?(E=Ws(S.props.children,I.mode,F,S.key),E.return=I,I=E):(F=kh(S.type,S.key,S.props,null,I.mode,F),F.ref=Ll(I,E,S),F.return=I,I=F)}return a(I);case Qo:e:{for(G=S.key;E!==null;){if(E.key===G)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(I,E.sibling),E=r(E,S.children||[]),E.return=I,I=E;break e}else{n(I,E);break}else e(I,E);E=E.sibling}E=Ep(S,I.mode,F),E.return=I,I=E}return a(I);case Pr:return G=S._init,j(I,E,G(S._payload),F)}if(jl(S))return R(I,E,S,F);if(Cl(S))return b(I,E,S,F);ih(I,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(I,E.sibling),E=r(E,S),E.return=I,I=E):(n(I,E),E=xp(S,I.mode,F),E.return=I,I=E),a(I)):n(I,E)}return j}var Aa=bx(!0),Rx=bx(!1),td=hs(null),nd=null,sa=null,hy=null;function dy(){hy=sa=nd=null}function fy(t){var e=td.current;Xe(td),t._currentValue=e}function Mm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ya(t,e){nd=t,hy=sa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function zn(t){var e=t._currentValue;if(hy!==t)if(t={context:t,memoizedValue:e,next:null},sa===null){if(nd===null)throw Error(Y(308));sa=t,nd.dependencies={lanes:0,firstContext:t}}else sa=sa.next=t;return e}var zs=null;function py(t){zs===null?zs=[t]:zs.push(t)}function Lx(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,py(e)):(n.next=r.next,r.next=n),e.interleaved=n,er(t,i)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sr=!1;function my(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ne&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,er(t,n)}return r=i.interleaved,r===null?(e.next=e,py(i)):(e.next=r.next,r.next=e),i.interleaved=e,er(t,n)}function Eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ey(t,n)}}function n0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,i){var r=t.updateQueue;Sr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var v=u.lane,T=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var R=t,b=u;switch(v=e,T=n,b.tag){case 1:if(R=b.payload,typeof R=="function"){g=R.call(T,g,v);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=b.payload,v=typeof R=="function"?R.call(T,g,v):R,v==null)break e;g=it({},g,v);break e;case 2:Sr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,h=g):m=m.next=T,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Ys|=a,t.lanes=a,t.memoizedState=g}}function i0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var Zu={},yi=hs(Zu),Eu=hs(Zu),Pu=hs(Zu);function Bs(t){if(t===Zu)throw Error(Y(174));return t}function gy(t,e){switch($e(Pu,e),$e(Eu,t),$e(yi,Zu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pm(e,t)}Xe(yi),$e(yi,e)}function ka(){Xe(yi),Xe(Eu),Xe(Pu)}function Mx(t){Bs(Pu.current);var e=Bs(yi.current),n=pm(e,t.type);e!==n&&($e(Eu,t),$e(yi,n))}function yy(t){Eu.current===t&&(Xe(yi),Xe(Eu))}var Je=hs(0);function rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gp=[];function _y(){for(var t=0;t<gp.length;t++)gp[t]._workInProgressVersionPrimary=null;gp.length=0}var Ph=lr.ReactCurrentDispatcher,yp=lr.ReactCurrentBatchConfig,Xs=0,nt=null,vt=null,At=null,sd=!1,Xl=!1,Su=0,wb=0;function jt(){throw Error(Y(321))}function vy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ni(t[n],e[n]))return!1;return!0}function wy(t,e,n,i,r,o){if(Xs=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=t===null||t.memoizedState===null?Pb:Sb,t=n(i,r),Xl){o=0;do{if(Xl=!1,Su=0,25<=o)throw Error(Y(301));o+=1,At=vt=null,e.updateQueue=null,Ph.current=Ib,t=n(i,r)}while(Xl)}if(Ph.current=od,e=vt!==null&&vt.next!==null,Xs=0,At=vt=nt=null,sd=!1,e)throw Error(Y(300));return t}function Ty(){var t=Su!==0;return Su=0,t}function fi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?nt.memoizedState=At=t:At=At.next=t,At}function Bn(){if(vt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=At===null?nt.memoizedState:At.next;if(e!==null)At=e,vt=t;else{if(t===null)throw Error(Y(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},At===null?nt.memoizedState=At=t:At=At.next=t}return At}function Iu(t,e){return typeof e=="function"?e(t):e}function _p(t){var e=Bn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=vt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((Xs&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,nt.lanes|=m,Ys|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,ni(i,e.memoizedState)||(un=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,nt.lanes|=o,Ys|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vp(t){var e=Bn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);ni(o,e.memoizedState)||(un=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Ox(){}function Vx(t,e){var n=nt,i=Bn(),r=e(),o=!ni(i.memoizedState,r);if(o&&(i.memoizedState=r,un=!0),i=i.queue,xy(zx.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Cu(9,jx.bind(null,n,i,r,e),void 0,null),bt===null)throw Error(Y(349));Xs&30||Dx(n,e,r)}return r}function Dx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jx(t,e,n,i){e.value=n,e.getSnapshot=i,Bx(e)&&Fx(t)}function zx(t,e,n){return n(function(){Bx(e)&&Fx(t)})}function Bx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ni(t,n)}catch{return!0}}function Fx(t){var e=er(t,1);e!==null&&ti(e,t,1,-1)}function r0(t){var e=fi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:t},e.queue=t,t=t.dispatch=Eb.bind(null,nt,t),[e.memoizedState,t]}function Cu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ux(){return Bn().memoizedState}function Sh(t,e,n,i){var r=fi();nt.flags|=t,r.memoizedState=Cu(1|e,n,void 0,i===void 0?null:i)}function Xd(t,e,n,i){var r=Bn();i=i===void 0?null:i;var o=void 0;if(vt!==null){var a=vt.memoizedState;if(o=a.destroy,i!==null&&vy(i,a.deps)){r.memoizedState=Cu(e,n,o,i);return}}nt.flags|=t,r.memoizedState=Cu(1|e,n,o,i)}function s0(t,e){return Sh(8390656,8,t,e)}function xy(t,e){return Xd(2048,8,t,e)}function Hx(t,e){return Xd(4,2,t,e)}function Wx(t,e){return Xd(4,4,t,e)}function $x(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qx(t,e,n){return n=n!=null?n.concat([t]):null,Xd(4,4,$x.bind(null,e,t),n)}function Ey(){}function Gx(t,e){var n=Bn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&vy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Zx(t,e){var n=Bn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&vy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Kx(t,e,n){return Xs&21?(ni(n,e)||(n=ex(),nt.lanes|=n,Ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function Tb(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var i=yp.transition;yp.transition={};try{t(!1),e()}finally{Ue=n,yp.transition=i}}function Qx(){return Bn().memoizedState}function xb(t,e,n){var i=Hr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Xx(t))Yx(e,n);else if(n=Lx(t,e,n,i),n!==null){var r=Yt();ti(n,t,i,r),Jx(n,e,i)}}function Eb(t,e,n){var i=Hr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xx(t))Yx(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,ni(u,a)){var h=e.interleaved;h===null?(r.next=r,py(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=Lx(t,e,r,i),n!==null&&(r=Yt(),ti(n,t,i,r),Jx(n,e,i))}}function Xx(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function Yx(t,e){Xl=sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jx(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ey(t,n)}}var od={readContext:zn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},Pb={readContext:zn,useCallback:function(t,e){return fi().memoizedState=[t,e===void 0?null:e],t},useContext:zn,useEffect:s0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sh(4194308,4,$x.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sh(4,2,t,e)},useMemo:function(t,e){var n=fi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=fi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=xb.bind(null,nt,t),[i.memoizedState,t]},useRef:function(t){var e=fi();return t={current:t},e.memoizedState=t},useState:r0,useDebugValue:Ey,useDeferredValue:function(t){return fi().memoizedState=t},useTransition:function(){var t=r0(!1),e=t[0];return t=Tb.bind(null,t[1]),fi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nt,r=fi();if(Ye){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),bt===null)throw Error(Y(349));Xs&30||Dx(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,s0(zx.bind(null,i,o,t),[t]),i.flags|=2048,Cu(9,jx.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=fi(),e=bt.identifierPrefix;if(Ye){var n=Wi,i=Hi;n=(i&~(1<<32-ei(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Su++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sb={readContext:zn,useCallback:Gx,useContext:zn,useEffect:xy,useImperativeHandle:qx,useInsertionEffect:Hx,useLayoutEffect:Wx,useMemo:Zx,useReducer:_p,useRef:Ux,useState:function(){return _p(Iu)},useDebugValue:Ey,useDeferredValue:function(t){var e=Bn();return Kx(e,vt.memoizedState,t)},useTransition:function(){var t=_p(Iu)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:Ox,useSyncExternalStore:Vx,useId:Qx,unstable_isNewReconciler:!1},Ib={readContext:zn,useCallback:Gx,useContext:zn,useEffect:xy,useImperativeHandle:qx,useInsertionEffect:Hx,useLayoutEffect:Wx,useMemo:Zx,useReducer:vp,useRef:Ux,useState:function(){return vp(Iu)},useDebugValue:Ey,useDeferredValue:function(t){var e=Bn();return vt===null?e.memoizedState=t:Kx(e,vt.memoizedState,t)},useTransition:function(){var t=vp(Iu)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:Ox,useSyncExternalStore:Vx,useId:Qx,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Om(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yd={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Yt(),r=Hr(t),o=Zi(i,r);o.payload=e,n!=null&&(o.callback=n),e=Fr(t,o,r),e!==null&&(ti(e,t,r,i),Eh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Yt(),r=Hr(t),o=Zi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Fr(t,o,r),e!==null&&(ti(e,t,r,i),Eh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),i=Hr(t),r=Zi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Fr(t,r,i),e!==null&&(ti(e,t,i,n),Eh(e,t,i))}};function o0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!vu(n,i)||!vu(r,o):!0}function eE(t,e,n){var i=!1,r=es,o=e.contextType;return typeof o=="object"&&o!==null?o=zn(o):(r=hn(e)?Ks:$t.current,i=e.contextTypes,o=(i=i!=null)?Ia(t,r):es),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function a0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Yd.enqueueReplaceState(e,e.state,null)}function Vm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},my(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=zn(o):(o=hn(e)?Ks:$t.current,r.context=Ia(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Om(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Yd.enqueueReplaceState(r,r.state,null),id(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ba(t,e){try{var n="",i=e;do n+=ek(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function wp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Cb=typeof WeakMap=="function"?WeakMap:Map;function tE(t,e,n){n=Zi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ld||(ld=!0,Gm=i),Dm(t,e)},n}function nE(t,e,n){n=Zi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Dm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Dm(t,e),typeof i!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function l0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Cb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Fb.bind(null,t,e,n),e.then(t,t))}function u0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function c0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zi(-1,1),e.tag=2,Fr(n,e,1))),n.lanes|=1),t)}var Ab=lr.ReactCurrentOwner,un=!1;function Xt(t,e,n,i){e.child=t===null?Rx(e,null,n,i):Aa(e,t.child,n,i)}function h0(t,e,n,i,r){n=n.render;var o=e.ref;return ya(e,r),i=wy(t,e,n,i,o,r),n=Ty(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,tr(t,e,r)):(Ye&&n&&ly(e),e.flags|=1,Xt(t,e,i,r),e.child)}function d0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Ry(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,iE(t,e,o,i,r)):(t=kh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:vu,n(a,i)&&t.ref===e.ref)return tr(t,e,r)}return e.flags|=1,t=Wr(o,i),t.ref=e.ref,t.return=e,e.child=t}function iE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(vu(o,i)&&t.ref===e.ref)if(un=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,tr(t,e,r)}return jm(t,e,n,i,r)}function rE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(aa,yn),yn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(aa,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(aa,yn),yn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(aa,yn),yn|=i;return Xt(t,e,r,n),e.child}function sE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jm(t,e,n,i,r){var o=hn(n)?Ks:$t.current;return o=Ia(e,o),ya(e,r),n=wy(t,e,n,i,o,r),i=Ty(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,tr(t,e,r)):(Ye&&i&&ly(e),e.flags|=1,Xt(t,e,n,r),e.child)}function f0(t,e,n,i,r){if(hn(n)){var o=!0;Yh(e)}else o=!1;if(ya(e,r),e.stateNode===null)Ih(t,e),eE(e,n,i),Vm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=zn(f):(f=hn(n)?Ks:$t.current,f=Ia(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&a0(e,a,i,f),Sr=!1;var v=e.memoizedState;a.state=v,id(e,i,a,r),h=e.memoizedState,u!==i||v!==h||cn.current||Sr?(typeof m=="function"&&(Om(e,n,m,i),h=e.memoizedState),(u=Sr||o0(e,n,u,i,v,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Nx(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Zn(e.type,u),a.props=f,g=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=zn(h):(h=hn(n)?Ks:$t.current,h=Ia(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||v!==h)&&a0(e,a,i,h),Sr=!1,v=e.memoizedState,a.state=v,id(e,i,a,r);var R=e.memoizedState;u!==g||v!==R||cn.current||Sr?(typeof T=="function"&&(Om(e,n,T,i),R=e.memoizedState),(f=Sr||o0(e,n,f,i,v,R,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,R,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,R,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=R),a.props=i,a.state=R,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return zm(t,e,n,i,o,r)}function zm(t,e,n,i,r,o){sE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Yv(e,n,!1),tr(t,e,o);i=e.stateNode,Ab.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Aa(e,t.child,null,o),e.child=Aa(e,null,u,o)):Xt(t,e,u,o),e.memoizedState=i.state,r&&Yv(e,n,!0),e.child}function oE(t){var e=t.stateNode;e.pendingContext?Xv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xv(t,e.context,!1),gy(t,e.containerInfo)}function p0(t,e,n,i,r){return Ca(),cy(r),e.flags|=256,Xt(t,e,n,i),e.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function Fm(t){return{baseLanes:t,cachePool:null,transitions:null}}function aE(t,e,n){var i=e.pendingProps,r=Je.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),$e(Je,r&1),t===null)return Nm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=tf(a,i,0,null),t=Ws(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Fm(n),e.memoizedState=Bm,t):Py(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return kb(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Wr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Wr(u,o):(o=Ws(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Fm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Bm,i}return o=t.child,t=o.sibling,i=Wr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Py(t,e){return e=tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rh(t,e,n,i){return i!==null&&cy(i),Aa(e,t.child,null,n),t=Py(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kb(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=wp(Error(Y(422))),rh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=tf({mode:"visible",children:i.children},r,0,null),o=Ws(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Aa(e,t.child,null,a),e.child.memoizedState=Fm(a),e.memoizedState=Bm,o);if(!(e.mode&1))return rh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(Y(419)),i=wp(o,i,void 0),rh(t,e,a,i)}if(u=(a&t.childLanes)!==0,un||u){if(i=bt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,er(t,r),ti(i,t,r,-1))}return by(),i=wp(Error(Y(421))),rh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Ub.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,_n=Br(r.nextSibling),vn=e,Ye=!0,Qn=null,t!==null&&(Nn[Mn++]=Hi,Nn[Mn++]=Wi,Nn[Mn++]=Qs,Hi=t.id,Wi=t.overflow,Qs=e),e=Py(e,i.children),e.flags|=4096,e)}function m0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Mm(t.return,e,n)}function Tp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function lE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Xt(t,e,i.children,n),i=Je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&m0(t,n,e);else if(t.tag===19)m0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(Je,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&rd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Tp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&rd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Tp(e,!0,n,null,o);break;case"together":Tp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ih(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bb(t,e,n){switch(e.tag){case 3:oE(e),Ca();break;case 5:Mx(e);break;case 1:hn(e.type)&&Yh(e);break;case 4:gy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$e(td,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?aE(t,e,n):($e(Je,Je.current&1),t=tr(t,e,n),t!==null?t.sibling:null);$e(Je,Je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return lE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(Je,Je.current),i)break;return null;case 22:case 23:return e.lanes=0,rE(t,e,n)}return tr(t,e,n)}var uE,Um,cE,hE;uE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Um=function(){};cE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Bs(yi.current);var o=null;switch(n){case"input":r=cm(t,r),i=cm(t,i),o=[];break;case"select":r=it({},r,{value:void 0}),i=it({},i,{value:void 0}),o=[];break;case"textarea":r=fm(t,r),i=fm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Qh)}mm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(du.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(du.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ke("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};hE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Nl(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Rb(t,e,n){var i=e.pendingProps;switch(uy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(e),null;case 1:return hn(e.type)&&Xh(),zt(e),null;case 3:return i=e.stateNode,ka(),Xe(cn),Xe($t),_y(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(nh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(Qm(Qn),Qn=null))),Um(t,e),zt(e),null;case 5:yy(e);var r=Bs(Pu.current);if(n=e.type,t!==null&&e.stateNode!=null)cE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return zt(e),null}if(t=Bs(yi.current),nh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[mi]=e,i[xu]=o,t=(e.mode&1)!==0,n){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(r=0;r<Bl.length;r++)Ke(Bl[r],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Pv(i,o),Ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ke("invalid",i);break;case"textarea":Iv(i,o),Ke("invalid",i)}mm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&th(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&th(i.textContent,u,t),r=["children",""+u]):du.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ke("scroll",i)}switch(n){case"input":Gc(i),Sv(i,o,!0);break;case"textarea":Gc(i),Cv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Qh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[mi]=e,t[xu]=i,uE(t,e,!1,!1),e.stateNode=t;e:{switch(a=gm(n,i),n){case"dialog":Ke("cancel",t),Ke("close",t),r=i;break;case"iframe":case"object":case"embed":Ke("load",t),r=i;break;case"video":case"audio":for(r=0;r<Bl.length;r++)Ke(Bl[r],t);r=i;break;case"source":Ke("error",t),r=i;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),r=i;break;case"details":Ke("toggle",t),r=i;break;case"input":Pv(t,i),r=cm(t,i),Ke("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=it({},i,{value:void 0}),Ke("invalid",t);break;case"textarea":Iv(t,i),r=fm(t,i),Ke("invalid",t);break;default:r=i}mm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?UT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&BT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&fu(t,h):typeof h=="number"&&fu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(du.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ke("scroll",t):h!=null&&Zg(t,o,h,a))}switch(n){case"input":Gc(t),Sv(t,i,!1);break;case"textarea":Gc(t),Cv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Jr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?fa(t,!!i.multiple,o,!1):i.defaultValue!=null&&fa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Qh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zt(e),null;case 6:if(t&&e.stateNode!=null)hE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Bs(Pu.current),Bs(yi.current),nh(e)){if(i=e.stateNode,n=e.memoizedProps,i[mi]=e,(o=i.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:th(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&th(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[mi]=e,e.stateNode=i}return zt(e),null;case 13:if(Xe(Je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&_n!==null&&e.mode&1&&!(e.flags&128))kx(),Ca(),e.flags|=98560,o=!1;else if(o=nh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[mi]=e}else Ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),o=!1}else Qn!==null&&(Qm(Qn),Qn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?Tt===0&&(Tt=3):by())),e.updateQueue!==null&&(e.flags|=4),zt(e),null);case 4:return ka(),Um(t,e),t===null&&wu(e.stateNode.containerInfo),zt(e),null;case 10:return fy(e.type._context),zt(e),null;case 17:return hn(e.type)&&Xh(),zt(e),null;case 19:if(Xe(Je),o=e.memoizedState,o===null)return zt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Nl(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=rd(t),a!==null){for(e.flags|=128,Nl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Je,Je.current&1|2),e.child}t=t.sibling}o.tail!==null&&ht()>Ra&&(e.flags|=128,i=!0,Nl(o,!1),e.lanes=4194304)}else{if(!i)if(t=rd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ye)return zt(e),null}else 2*ht()-o.renderingStartTime>Ra&&n!==1073741824&&(e.flags|=128,i=!0,Nl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ht(),e.sibling=null,n=Je.current,$e(Je,i?n&1|2:n&1),e):(zt(e),null);case 22:case 23:return ky(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yn&1073741824&&(zt(e),e.subtreeFlags&6&&(e.flags|=8192)):zt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Lb(t,e){switch(uy(e),e.tag){case 1:return hn(e.type)&&Xh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ka(),Xe(cn),Xe($t),_y(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yy(e),null;case 13:if(Xe(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(Je),null;case 4:return ka(),null;case 10:return fy(e.type._context),null;case 22:case 23:return ky(),null;case 24:return null;default:return null}}var sh=!1,Ht=!1,Nb=typeof WeakSet=="function"?WeakSet:Set,se=null;function oa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ot(t,e,i)}else n.current=null}function Hm(t,e,n){try{n()}catch(i){ot(t,e,i)}}var g0=!1;function Mb(t,e){if(Im=Gh,t=gx(),ay(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,v=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)v=g,g=T;for(;;){if(g===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++m===i&&(h=a),(T=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cm={focusedElem:t,selectionRange:n},Gh=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var b=R.memoizedProps,j=R.memoizedState,I=e.stateNode,E=I.getSnapshotBeforeUpdate(e.elementType===e.type?b:Zn(e.type,b),j);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(F){ot(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return R=g0,g0=!1,R}function Yl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Hm(e,n,o)}r=r.next}while(r!==i)}}function Jd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Wm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dE(t){var e=t.alternate;e!==null&&(t.alternate=null,dE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mi],delete e[xu],delete e[bm],delete e[gb],delete e[yb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fE(t){return t.tag===5||t.tag===3||t.tag===4}function y0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $m(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qh));else if(i!==4&&(t=t.child,t!==null))for($m(t,e,n),t=t.sibling;t!==null;)$m(t,e,n),t=t.sibling}function qm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(qm(t,e,n),t=t.sibling;t!==null;)qm(t,e,n),t=t.sibling}var Rt=null,Kn=!1;function wr(t,e,n){for(n=n.child;n!==null;)pE(t,e,n),n=n.sibling}function pE(t,e,n){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount($d,n)}catch{}switch(n.tag){case 5:Ht||oa(n,e);case 6:var i=Rt,r=Kn;Rt=null,wr(t,e,n),Rt=i,Kn=r,Rt!==null&&(Kn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Kn?(t=Rt,n=n.stateNode,t.nodeType===8?pp(t.parentNode,n):t.nodeType===1&&pp(t,n),yu(t)):pp(Rt,n.stateNode));break;case 4:i=Rt,r=Kn,Rt=n.stateNode.containerInfo,Kn=!0,wr(t,e,n),Rt=i,Kn=r;break;case 0:case 11:case 14:case 15:if(!Ht&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Hm(n,e,a),r=r.next}while(r!==i)}wr(t,e,n);break;case 1:if(!Ht&&(oa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){ot(n,e,u)}wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:n.mode&1?(Ht=(i=Ht)||n.memoizedState!==null,wr(t,e,n),Ht=i):wr(t,e,n);break;default:wr(t,e,n)}}function _0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Nb),e.forEach(function(i){var r=Hb.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Rt=u.stateNode,Kn=!1;break e;case 3:Rt=u.stateNode.containerInfo,Kn=!0;break e;case 4:Rt=u.stateNode.containerInfo,Kn=!0;break e}u=u.return}if(Rt===null)throw Error(Y(160));pE(o,a,r),Rt=null,Kn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){ot(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mE(e,t),e=e.sibling}function mE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),di(t),i&4){try{Yl(3,t,t.return),Jd(3,t)}catch(b){ot(t,t.return,b)}try{Yl(5,t,t.return)}catch(b){ot(t,t.return,b)}}break;case 1:Gn(e,t),di(t),i&512&&n!==null&&oa(n,n.return);break;case 5:if(Gn(e,t),di(t),i&512&&n!==null&&oa(n,n.return),t.flags&32){var r=t.stateNode;try{fu(r,"")}catch(b){ot(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&DT(r,o),gm(u,a);var f=gm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?UT(r,g):m==="dangerouslySetInnerHTML"?BT(r,g):m==="children"?fu(r,g):Zg(r,m,g,f)}switch(u){case"input":hm(r,o);break;case"textarea":jT(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?fa(r,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?fa(r,!!o.multiple,o.defaultValue,!0):fa(r,!!o.multiple,o.multiple?[]:"",!1))}r[xu]=o}catch(b){ot(t,t.return,b)}}break;case 6:if(Gn(e,t),di(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){ot(t,t.return,b)}}break;case 3:if(Gn(e,t),di(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{yu(e.containerInfo)}catch(b){ot(t,t.return,b)}break;case 4:Gn(e,t),di(t);break;case 13:Gn(e,t),di(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Cy=ht())),i&4&&_0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(f=Ht)||m,Gn(e,t),Ht=f):Gn(e,t),di(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(se=t,m=t.child;m!==null;){for(g=se=m;se!==null;){switch(v=se,T=v.child,v.tag){case 0:case 11:case 14:case 15:Yl(4,v,v.return);break;case 1:oa(v,v.return);var R=v.stateNode;if(typeof R.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(b){ot(i,n,b)}}break;case 5:oa(v,v.return);break;case 22:if(v.memoizedState!==null){w0(g);continue}}T!==null?(T.return=v,se=T):w0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=FT("display",a))}catch(b){ot(t,t.return,b)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(b){ot(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Gn(e,t),di(t),i&4&&_0(t);break;case 21:break;default:Gn(e,t),di(t)}}function di(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(fu(r,""),i.flags&=-33);var o=y0(t);qm(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=y0(t);$m(t,u,a);break;default:throw Error(Y(161))}}catch(h){ot(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ob(t,e,n){se=t,gE(t)}function gE(t,e,n){for(var i=(t.mode&1)!==0;se!==null;){var r=se,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||sh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Ht;u=sh;var f=Ht;if(sh=a,(Ht=h)&&!f)for(se=r;se!==null;)a=se,h=a.child,a.tag===22&&a.memoizedState!==null?T0(r):h!==null?(h.return=a,se=h):T0(r);for(;o!==null;)se=o,gE(o),o=o.sibling;se=r,sh=u,Ht=f}v0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,se=o):v0(t)}}function v0(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||Jd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ht)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&i0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}i0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&yu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Ht||e.flags&512&&Wm(e)}catch(v){ot(e,e.return,v)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function w0(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function T0(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jd(4,e)}catch(h){ot(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){ot(e,r,h)}}var o=e.return;try{Wm(e)}catch(h){ot(e,o,h)}break;case 5:var a=e.return;try{Wm(e)}catch(h){ot(e,a,h)}}}catch(h){ot(e,e.return,h)}if(e===t){se=null;break}var u=e.sibling;if(u!==null){u.return=e.return,se=u;break}se=e.return}}var Vb=Math.ceil,ad=lr.ReactCurrentDispatcher,Sy=lr.ReactCurrentOwner,jn=lr.ReactCurrentBatchConfig,Ne=0,bt=null,yt=null,Mt=0,yn=0,aa=hs(0),Tt=0,Au=null,Ys=0,ef=0,Iy=0,Jl=null,ln=null,Cy=0,Ra=1/0,Fi=null,ld=!1,Gm=null,Ur=null,oh=!1,Mr=null,ud=0,eu=0,Zm=null,Ch=-1,Ah=0;function Yt(){return Ne&6?ht():Ch!==-1?Ch:Ch=ht()}function Hr(t){return t.mode&1?Ne&2&&Mt!==0?Mt&-Mt:vb.transition!==null?(Ah===0&&(Ah=ex()),Ah):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:ax(t.type)),t):1}function ti(t,e,n,i){if(50<eu)throw eu=0,Zm=null,Error(Y(185));$u(t,n,i),(!(Ne&2)||t!==bt)&&(t===bt&&(!(Ne&2)&&(ef|=n),Tt===4&&Ar(t,Mt)),dn(t,i),n===1&&Ne===0&&!(e.mode&1)&&(Ra=ht()+500,Qd&&ds()))}function dn(t,e){var n=t.callbackNode;vk(t,e);var i=qh(t,t===bt?Mt:0);if(i===0)n!==null&&bv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&bv(n),e===1)t.tag===0?_b(x0.bind(null,t)):Ix(x0.bind(null,t)),pb(function(){!(Ne&6)&&ds()}),n=null;else{switch(tx(i)){case 1:n=Jg;break;case 4:n=YT;break;case 16:n=$h;break;case 536870912:n=JT;break;default:n=$h}n=PE(n,yE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yE(t,e){if(Ch=-1,Ah=0,Ne&6)throw Error(Y(327));var n=t.callbackNode;if(_a()&&t.callbackNode!==n)return null;var i=qh(t,t===bt?Mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=cd(t,i);else{e=i;var r=Ne;Ne|=2;var o=vE();(bt!==t||Mt!==e)&&(Fi=null,Ra=ht()+500,Hs(t,e));do try{zb();break}catch(u){_E(t,u)}while(!0);dy(),ad.current=o,Ne=r,yt!==null?e=0:(bt=null,Mt=0,e=Tt)}if(e!==0){if(e===2&&(r=Tm(t),r!==0&&(i=r,e=Km(t,r))),e===1)throw n=Au,Hs(t,0),Ar(t,i),dn(t,ht()),n;if(e===6)Ar(t,i);else{if(r=t.current.alternate,!(i&30)&&!Db(r)&&(e=cd(t,i),e===2&&(o=Tm(t),o!==0&&(i=o,e=Km(t,o))),e===1))throw n=Au,Hs(t,0),Ar(t,i),dn(t,ht()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:Ns(t,ln,Fi);break;case 3:if(Ar(t,i),(i&130023424)===i&&(e=Cy+500-ht(),10<e)){if(qh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Yt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=km(Ns.bind(null,t,ln,Fi),e);break}Ns(t,ln,Fi);break;case 4:if(Ar(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ei(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Vb(i/1960))-i,10<i){t.timeoutHandle=km(Ns.bind(null,t,ln,Fi),i);break}Ns(t,ln,Fi);break;case 5:Ns(t,ln,Fi);break;default:throw Error(Y(329))}}}return dn(t,ht()),t.callbackNode===n?yE.bind(null,t):null}function Km(t,e){var n=Jl;return t.current.memoizedState.isDehydrated&&(Hs(t,e).flags|=256),t=cd(t,e),t!==2&&(e=ln,ln=n,e!==null&&Qm(e)),t}function Qm(t){ln===null?ln=t:ln.push.apply(ln,t)}function Db(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ni(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~Iy,e&=~ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ei(e),i=1<<n;t[n]=-1,e&=~i}}function x0(t){if(Ne&6)throw Error(Y(327));_a();var e=qh(t,0);if(!(e&1))return dn(t,ht()),null;var n=cd(t,e);if(t.tag!==0&&n===2){var i=Tm(t);i!==0&&(e=i,n=Km(t,i))}if(n===1)throw n=Au,Hs(t,0),Ar(t,e),dn(t,ht()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ns(t,ln,Fi),dn(t,ht()),null}function Ay(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(Ra=ht()+500,Qd&&ds())}}function Js(t){Mr!==null&&Mr.tag===0&&!(Ne&6)&&_a();var e=Ne;Ne|=1;var n=jn.transition,i=Ue;try{if(jn.transition=null,Ue=1,t)return t()}finally{Ue=i,jn.transition=n,Ne=e,!(Ne&6)&&ds()}}function ky(){yn=aa.current,Xe(aa)}function Hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fb(n)),yt!==null)for(n=yt.return;n!==null;){var i=n;switch(uy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xh();break;case 3:ka(),Xe(cn),Xe($t),_y();break;case 5:yy(i);break;case 4:ka();break;case 13:Xe(Je);break;case 19:Xe(Je);break;case 10:fy(i.type._context);break;case 22:case 23:ky()}n=n.return}if(bt=t,yt=t=Wr(t.current,null),Mt=yn=e,Tt=0,Au=null,Iy=ef=Ys=0,ln=Jl=null,zs!==null){for(e=0;e<zs.length;e++)if(n=zs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}zs=null}return t}function _E(t,e){do{var n=yt;try{if(dy(),Ph.current=od,sd){for(var i=nt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}sd=!1}if(Xs=0,At=vt=nt=null,Xl=!1,Su=0,Sy.current=null,n===null||n.return===null){Tt=1,Au=e,yt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Mt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=u0(a);if(T!==null){T.flags&=-257,c0(T,a,u,o,e),T.mode&1&&l0(o,f,e),e=T,h=f;var R=e.updateQueue;if(R===null){var b=new Set;b.add(h),e.updateQueue=b}else R.add(h);break e}else{if(!(e&1)){l0(o,f,e),by();break e}h=Error(Y(426))}}else if(Ye&&u.mode&1){var j=u0(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),c0(j,a,u,o,e),cy(ba(h,u));break e}}o=h=ba(h,u),Tt!==4&&(Tt=2),Jl===null?Jl=[o]:Jl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=tE(o,h,e);n0(o,I);break e;case 1:u=h;var E=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ur===null||!Ur.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=nE(o,u,e);n0(o,F);break e}}o=o.return}while(o!==null)}TE(n)}catch(q){e=q,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function vE(){var t=ad.current;return ad.current=od,t===null?od:t}function by(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),bt===null||!(Ys&268435455)&&!(ef&268435455)||Ar(bt,Mt)}function cd(t,e){var n=Ne;Ne|=2;var i=vE();(bt!==t||Mt!==e)&&(Fi=null,Hs(t,e));do try{jb();break}catch(r){_E(t,r)}while(!0);if(dy(),Ne=n,ad.current=i,yt!==null)throw Error(Y(261));return bt=null,Mt=0,Tt}function jb(){for(;yt!==null;)wE(yt)}function zb(){for(;yt!==null&&!ck();)wE(yt)}function wE(t){var e=EE(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?TE(t):yt=e,Sy.current=null}function TE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Lb(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,yt=null;return}}else if(n=Rb(n,e,yn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);Tt===0&&(Tt=5)}function Ns(t,e,n){var i=Ue,r=jn.transition;try{jn.transition=null,Ue=1,Bb(t,e,n,i)}finally{jn.transition=r,Ue=i}return null}function Bb(t,e,n,i){do _a();while(Mr!==null);if(Ne&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(wk(t,o),t===bt&&(yt=bt=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oh||(oh=!0,PE($h,function(){return _a(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=jn.transition,jn.transition=null;var a=Ue;Ue=1;var u=Ne;Ne|=4,Sy.current=null,Mb(t,n),mE(n,t),ob(Cm),Gh=!!Im,Cm=Im=null,t.current=n,Ob(n),hk(),Ne=u,Ue=a,jn.transition=o}else t.current=n;if(oh&&(oh=!1,Mr=t,ud=r),o=t.pendingLanes,o===0&&(Ur=null),pk(n.stateNode),dn(t,ht()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ld)throw ld=!1,t=Gm,Gm=null,t;return ud&1&&t.tag!==0&&_a(),o=t.pendingLanes,o&1?t===Zm?eu++:(eu=0,Zm=t):eu=0,ds(),null}function _a(){if(Mr!==null){var t=tx(ud),e=jn.transition,n=Ue;try{if(jn.transition=null,Ue=16>t?16:t,Mr===null)var i=!1;else{if(t=Mr,Mr=null,ud=0,Ne&6)throw Error(Y(331));var r=Ne;for(Ne|=4,se=t.current;se!==null;){var o=se,a=o.child;if(se.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(se=f;se!==null;){var m=se;switch(m.tag){case 0:case 11:case 15:Yl(8,m,o)}var g=m.child;if(g!==null)g.return=m,se=g;else for(;se!==null;){m=se;var v=m.sibling,T=m.return;if(dE(m),m===f){se=null;break}if(v!==null){v.return=T,se=v;break}se=T}}}var R=o.alternate;if(R!==null){var b=R.child;if(b!==null){R.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}se=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,se=a;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Yl(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,se=I;break e}se=o.return}}var E=t.current;for(se=E;se!==null;){a=se;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,se=S;else e:for(a=E;se!==null;){if(u=se,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Jd(9,u)}}catch(q){ot(u,u.return,q)}if(u===a){se=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,se=F;break e}se=u.return}}if(Ne=r,ds(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot($d,t)}catch{}i=!0}return i}finally{Ue=n,jn.transition=e}}return!1}function E0(t,e,n){e=ba(n,e),e=tE(t,e,1),t=Fr(t,e,1),e=Yt(),t!==null&&($u(t,1,e),dn(t,e))}function ot(t,e,n){if(t.tag===3)E0(t,t,n);else for(;e!==null;){if(e.tag===3){E0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ur===null||!Ur.has(i))){t=ba(n,t),t=nE(e,t,1),e=Fr(e,t,1),t=Yt(),e!==null&&($u(e,1,t),dn(e,t));break}}e=e.return}}function Fb(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Mt&n)===n&&(Tt===4||Tt===3&&(Mt&130023424)===Mt&&500>ht()-Cy?Hs(t,0):Iy|=n),dn(t,e)}function xE(t,e){e===0&&(t.mode&1?(e=Qc,Qc<<=1,!(Qc&130023424)&&(Qc=4194304)):e=1);var n=Yt();t=er(t,e),t!==null&&($u(t,e,n),dn(t,n))}function Ub(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xE(t,n)}function Hb(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),xE(t,n)}var EE;EE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,bb(t,e,n);un=!!(t.flags&131072)}else un=!1,Ye&&e.flags&1048576&&Cx(e,ed,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ih(t,e),t=e.pendingProps;var r=Ia(e,$t.current);ya(e,n),r=wy(null,e,i,t,r,n);var o=Ty();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(i)?(o=!0,Yh(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,my(e),r.updater=Yd,e.stateNode=r,r._reactInternals=e,Vm(e,i,t,n),e=zm(null,e,i,!0,o,n)):(e.tag=0,Ye&&o&&ly(e),Xt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ih(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=$b(i),t=Zn(i,t),r){case 0:e=jm(null,e,i,t,n);break e;case 1:e=f0(null,e,i,t,n);break e;case 11:e=h0(null,e,i,t,n);break e;case 14:e=d0(null,e,i,Zn(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zn(i,r),jm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zn(i,r),f0(t,e,i,r,n);case 3:e:{if(oE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,Nx(t,e),id(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=ba(Error(Y(423)),e),e=p0(t,e,i,n,r);break e}else if(i!==r){r=ba(Error(Y(424)),e),e=p0(t,e,i,n,r);break e}else for(_n=Br(e.stateNode.containerInfo.firstChild),vn=e,Ye=!0,Qn=null,n=Rx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),i===r){e=tr(t,e,n);break e}Xt(t,e,i,n)}e=e.child}return e;case 5:return Mx(e),t===null&&Nm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Am(i,r)?a=null:o!==null&&Am(i,o)&&(e.flags|=32),sE(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&Nm(e),null;case 13:return aE(t,e,n);case 4:return gy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Aa(e,null,i,n):Xt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zn(i,r),h0(t,e,i,r,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,$e(td,i._currentValue),i._currentValue=a,o!==null)if(ni(o.value,a)){if(o.children===r.children&&!cn.current){e=tr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=Zi(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Mm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Mm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Xt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ya(e,n),r=zn(r),i=i(r),e.flags|=1,Xt(t,e,i,n),e.child;case 14:return i=e.type,r=Zn(i,e.pendingProps),r=Zn(i.type,r),d0(t,e,i,r,n);case 15:return iE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zn(i,r),Ih(t,e),e.tag=1,hn(i)?(t=!0,Yh(e)):t=!1,ya(e,n),eE(e,i,r),Vm(e,i,r,n),zm(null,e,i,!0,t,n);case 19:return lE(t,e,n);case 22:return rE(t,e,n)}throw Error(Y(156,e.tag))};function PE(t,e){return XT(t,e)}function Wb(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,i){return new Wb(t,e,n,i)}function Ry(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $b(t){if(typeof t=="function")return Ry(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qg)return 11;if(t===Xg)return 14}return 2}function Wr(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Ry(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xo:return Ws(n.children,r,o,e);case Kg:a=8,r|=8;break;case om:return t=Dn(12,n,e,r|2),t.elementType=om,t.lanes=o,t;case am:return t=Dn(13,n,e,r),t.elementType=am,t.lanes=o,t;case lm:return t=Dn(19,n,e,r),t.elementType=lm,t.lanes=o,t;case MT:return tf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LT:a=10;break e;case NT:a=9;break e;case Qg:a=11;break e;case Xg:a=14;break e;case Pr:a=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Dn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Ws(t,e,n,i){return t=Dn(7,t,i,e),t.lanes=n,t}function tf(t,e,n,i){return t=Dn(22,t,i,e),t.elementType=MT,t.lanes=n,t.stateNode={isHidden:!1},t}function xp(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function Ep(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qb(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ly(t,e,n,i,r,o,a,u,h){return t=new qb(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Dn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},my(o),t}function Gb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function SE(t){if(!t)return es;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(hn(n))return Sx(t,n,e)}return e}function IE(t,e,n,i,r,o,a,u,h){return t=Ly(n,i,!0,t,r,o,a,u,h),t.context=SE(null),n=t.current,i=Yt(),r=Hr(n),o=Zi(i,r),o.callback=e??null,Fr(n,o,r),t.current.lanes=r,$u(t,r,i),dn(t,i),t}function nf(t,e,n,i){var r=e.current,o=Yt(),a=Hr(r);return n=SE(n),e.context===null?e.context=n:e.pendingContext=n,e=Zi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Fr(r,e,a),t!==null&&(ti(t,r,a,o),Eh(t,r,a)),a}function hd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ny(t,e){P0(t,e),(t=t.alternate)&&P0(t,e)}function Zb(){return null}var CE=typeof reportError=="function"?reportError:function(t){console.error(t)};function My(t){this._internalRoot=t}rf.prototype.render=My.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));nf(t,e,null,null)};rf.prototype.unmount=My.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Js(function(){nf(null,t,null,null)}),e[Ji]=null}};function rf(t){this._internalRoot=t}rf.prototype.unstable_scheduleHydration=function(t){if(t){var e=rx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&ox(t)}};function Oy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S0(){}function Kb(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=hd(a);o.call(f)}}var a=IE(e,i,t,0,null,!1,!1,"",S0);return t._reactRootContainer=a,t[Ji]=a.current,wu(t.nodeType===8?t.parentNode:t),Js(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=hd(h);u.call(f)}}var h=Ly(t,0,!1,null,null,!1,!1,"",S0);return t._reactRootContainer=h,t[Ji]=h.current,wu(t.nodeType===8?t.parentNode:t),Js(function(){nf(e,h,n,i)}),h}function of(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=hd(a);u.call(h)}}nf(e,a,t,r)}else a=Kb(n,e,t,r,i);return hd(a)}nx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zl(e.pendingLanes);n!==0&&(ey(e,n|1),dn(e,ht()),!(Ne&6)&&(Ra=ht()+500,ds()))}break;case 13:Js(function(){var i=er(t,1);if(i!==null){var r=Yt();ti(i,t,1,r)}}),Ny(t,1)}};ty=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=Yt();ti(e,t,134217728,n)}Ny(t,134217728)}};ix=function(t){if(t.tag===13){var e=Hr(t),n=er(t,e);if(n!==null){var i=Yt();ti(n,t,e,i)}Ny(t,e)}};rx=function(){return Ue};sx=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};_m=function(t,e,n){switch(e){case"input":if(hm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Kd(i);if(!r)throw Error(Y(90));VT(i),hm(i,r)}}}break;case"textarea":jT(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};$T=Ay;qT=Js;var Qb={usingClientEntryPoint:!1,Events:[Gu,ta,Kd,HT,WT,Ay]},Ml={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xb={bundleType:Ml.bundleType,version:Ml.version,rendererPackageName:Ml.rendererPackageName,rendererConfig:Ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KT(t),t===null?null:t.stateNode},findFiberByHostInstance:Ml.findFiberByHostInstance||Zb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{$d=ah.inject(Xb),gi=ah}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qb;xn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oy(e))throw Error(Y(200));return Gb(t,e,null,n)};xn.createRoot=function(t,e){if(!Oy(t))throw Error(Y(299));var n=!1,i="",r=CE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ly(t,1,!1,null,null,n,!1,i,r),t[Ji]=e.current,wu(t.nodeType===8?t.parentNode:t),new My(e)};xn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=KT(e),t=t===null?null:t.stateNode,t};xn.flushSync=function(t){return Js(t)};xn.hydrate=function(t,e,n){if(!sf(e))throw Error(Y(200));return of(null,t,e,!0,n)};xn.hydrateRoot=function(t,e,n){if(!Oy(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=CE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=IE(e,null,t,1,n??null,r,!1,o,a),t[Ji]=e.current,wu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new rf(e)};xn.render=function(t,e,n){if(!sf(e))throw Error(Y(200));return of(null,t,e,!1,n)};xn.unmountComponentAtNode=function(t){if(!sf(t))throw Error(Y(40));return t._reactRootContainer?(Js(function(){of(null,null,t,!1,function(){t._reactRootContainer=null,t[Ji]=null})}),!0):!1};xn.unstable_batchedUpdates=Ay;xn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!sf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return of(t,e,n,!1,i)};xn.version="18.3.1-next-f1338f8080-20240426";function AE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AE)}catch(t){console.error(t)}}AE(),AT.exports=xn;var Yb=AT.exports,I0=Yb;rm.createRoot=I0.createRoot,rm.hydrateRoot=I0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ku(){return ku=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ku.apply(this,arguments)}var Or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Or||(Or={}));const C0="popstate";function Jb(t){t===void 0&&(t={});function e(i,r){let{pathname:o,search:a,hash:u}=i.location;return Xm("",{pathname:o,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:dd(r)}return t2(e,n,null,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function e2(){return Math.random().toString(36).substr(2,8)}function A0(t,e){return{usr:t.state,key:t.key,idx:e}}function Xm(t,e,n,i){return n===void 0&&(n=null),ku({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$a(e):e,{state:n,key:e&&e.key||i||e2()})}function dd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function $a(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function t2(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Or.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(ku({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Or.Pop;let j=m(),I=j==null?null:j-f;f=j,h&&h({action:u,location:b.location,delta:I})}function v(j,I){u=Or.Push;let E=Xm(b.location,j,I);f=m()+1;let S=A0(E,f),F=b.createHref(E);try{a.pushState(S,"",F)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;r.location.assign(F)}o&&h&&h({action:u,location:b.location,delta:1})}function T(j,I){u=Or.Replace;let E=Xm(b.location,j,I);f=m();let S=A0(E,f),F=b.createHref(E);a.replaceState(S,"",F),o&&h&&h({action:u,location:b.location,delta:0})}function R(j){let I=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof j=="string"?j:dd(j);return E=E.replace(/ $/,"%20"),at(I,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,I)}let b={get action(){return u},get location(){return t(r,a)},listen(j){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(C0,g),h=j,()=>{r.removeEventListener(C0,g),h=null}},createHref(j){return e(r,j)},createURL:R,encodeLocation(j){let I=R(j);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:v,replace:T,go(j){return a.go(j)}};return b}var k0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(k0||(k0={}));function n2(t,e,n){return n===void 0&&(n="/"),i2(t,e,n)}function i2(t,e,n,i){let r=typeof e=="string"?$a(e):e,o=La(r.pathname||"/",n);if(o==null)return null;let a=kE(t);r2(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=m2(o);u=f2(a[h],f)}return u}function kE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(at(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=$r([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(at(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),kE(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:h2(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of bE(o.path))r(o,a,h)}),e}function bE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=bE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function r2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const s2=/^:[\w-]+$/,o2=3,a2=2,l2=1,u2=10,c2=-2,b0=t=>t==="*";function h2(t,e){let n=t.split("/"),i=n.length;return n.some(b0)&&(i+=c2),e&&(i+=a2),n.filter(r=>!b0(r)).reduce((r,o)=>r+(s2.test(o)?o2:o===""?l2:u2),i)}function d2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function f2(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=Ym({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),v=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:$r([o,g.pathname]),pathnameBase:w2($r([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=$r([o,g.pathnameBase]))}return a}function Ym(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=p2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:v,isOptional:T}=m;if(v==="*"){let b=u[g]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const R=u[g];return T&&!R?f[v]=void 0:f[v]=(R||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function p2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function m2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function La(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const g2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,y2=t=>g2.test(t);function _2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?$a(t):t,o;if(n)if(y2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Vy(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=R0(n.substring(1),"/"):o=R0(n,e)}else o=e;return{pathname:o,search:T2(i),hash:x2(r)}}function R0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Pp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function v2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function RE(t,e){let n=v2(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function LE(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=$a(t):(r=ku({},t),at(!r.pathname||!r.pathname.includes("?"),Pp("?","pathname","search",r)),at(!r.pathname||!r.pathname.includes("#"),Pp("#","pathname","hash",r)),at(!r.search||!r.search.includes("#"),Pp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}u=g>=0?e[g]:"/"}let h=_2(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const $r=t=>t.join("/").replace(/\/\/+/g,"/"),w2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,x2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function E2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const NE=["post","put","patch","delete"];new Set(NE);const P2=["get",...NE];new Set(P2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bu.apply(this,arguments)}const af=z.createContext(null),ME=z.createContext(null),fs=z.createContext(null),lf=z.createContext(null),ao=z.createContext({outlet:null,matches:[],isDataRoute:!1}),OE=z.createContext(null);function S2(t,e){let{relative:n}=e===void 0?{}:e;Ku()||at(!1);let{basename:i,navigator:r}=z.useContext(fs),{hash:o,pathname:a,search:u}=uf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:$r([i,a])),r.createHref({pathname:h,search:u,hash:o})}function Ku(){return z.useContext(lf)!=null}function qa(){return Ku()||at(!1),z.useContext(lf).location}function VE(t){z.useContext(fs).static||z.useLayoutEffect(t)}function DE(){let{isDataRoute:t}=z.useContext(ao);return t?j2():I2()}function I2(){Ku()||at(!1);let t=z.useContext(af),{basename:e,future:n,navigator:i}=z.useContext(fs),{matches:r}=z.useContext(ao),{pathname:o}=qa(),a=JSON.stringify(RE(r,n.v7_relativeSplatPath)),u=z.useRef(!1);return VE(()=>{u.current=!0}),z.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=LE(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:$r([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function uf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=z.useContext(fs),{matches:r}=z.useContext(ao),{pathname:o}=qa(),a=JSON.stringify(RE(r,i.v7_relativeSplatPath));return z.useMemo(()=>LE(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function C2(t,e){return A2(t,e)}function A2(t,e,n,i){Ku()||at(!1);let{navigator:r}=z.useContext(fs),{matches:o}=z.useContext(ao),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=qa(),m;if(e){var g;let j=typeof e=="string"?$a(e):e;h==="/"||(g=j.pathname)!=null&&g.startsWith(h)||at(!1),m=j}else m=f;let v=m.pathname||"/",T=v;if(h!=="/"){let j=h.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(j.length).join("/")}let R=n2(t,{pathname:T}),b=N2(R&&R.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:$r([h,r.encodeLocation?r.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?h:$r([h,r.encodeLocation?r.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,i);return e&&b?z.createElement(lf.Provider,{value:{location:bu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Or.Pop}},b):b}function k2(){let t=D2(),e=E2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:r},n):null,null)}const b2=z.createElement(k2,null);class R2 extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?z.createElement(ao.Provider,{value:this.props.routeContext},z.createElement(OE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L2(t){let{routeContext:e,match:n,children:i}=t,r=z.useContext(af);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(ao.Provider,{value:e},i)}function N2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||at(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:v,errors:T}=n,R=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||R){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let T,R=!1,b=null,j=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,b=g.route.errorElement||b2,h&&(f<0&&v===0?(z2("route-fallback"),R=!0,j=null):f===v&&(R=!0,j=g.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,v+1)),E=()=>{let S;return T?S=b:R?S=j:g.route.Component?S=z.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=m,z.createElement(L2,{match:g,routeContext:{outlet:m,matches:I,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?z.createElement(R2,{location:n.location,revalidation:n.revalidation,component:b,error:T,children:E(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):E()},null)}var jE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jE||{}),zE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zE||{});function M2(t){let e=z.useContext(af);return e||at(!1),e}function O2(t){let e=z.useContext(ME);return e||at(!1),e}function V2(t){let e=z.useContext(ao);return e||at(!1),e}function BE(t){let e=V2(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function D2(){var t;let e=z.useContext(OE),n=O2(),i=BE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function j2(){let{router:t}=M2(jE.UseNavigateStable),e=BE(zE.UseNavigateStable),n=z.useRef(!1);return VE(()=>{n.current=!0}),z.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,bu({fromRouteId:e},o)))},[t,e])}const L0={};function z2(t,e,n){L0[t]||(L0[t]=!0)}function B2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Wo(t){at(!1)}function F2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Or.Pop,navigator:o,static:a=!1,future:u}=t;Ku()&&at(!1);let h=e.replace(/^\/*/,"/"),f=z.useMemo(()=>({basename:h,navigator:o,static:a,future:bu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=$a(i));let{pathname:m="/",search:g="",hash:v="",state:T=null,key:R="default"}=i,b=z.useMemo(()=>{let j=La(m,h);return j==null?null:{location:{pathname:j,search:g,hash:v,state:T,key:R},navigationType:r}},[h,m,g,v,T,R,r]);return b==null?null:z.createElement(fs.Provider,{value:f},z.createElement(lf.Provider,{children:n,value:b}))}function U2(t){let{children:e,location:n}=t;return C2(Jm(e),n)}new Promise(()=>{});function Jm(t,e){e===void 0&&(e=[]);let n=[];return z.Children.forEach(t,(i,r)=>{if(!z.isValidElement(i))return;let o=[...e,r];if(i.type===z.Fragment){n.push.apply(n,Jm(i.props.children,o));return}i.type!==Wo&&at(!1),!i.props.index||!i.props.children||at(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Jm(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fd.apply(this,arguments)}function FE(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function H2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function W2(t,e){return t.button===0&&(!e||e==="_self")&&!H2(t)}const $2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],q2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],G2="6";try{window.__reactRouterVersion=G2}catch{}const Z2=z.createContext({isTransitioning:!1}),K2="startTransition",N0=FA[K2];function Q2(t){let{basename:e,children:n,future:i,window:r}=t,o=z.useRef();o.current==null&&(o.current=Jb({window:r,v5Compat:!0}));let a=o.current,[u,h]=z.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=z.useCallback(g=>{f&&N0?N0(()=>h(g)):h(g)},[h,f]);return z.useLayoutEffect(()=>a.listen(m),[a,m]),z.useEffect(()=>B2(i),[i]),z.createElement(F2,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const X2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J2=z.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,v=FE(e,$2),{basename:T}=z.useContext(fs),R,b=!1;if(typeof f=="string"&&Y2.test(f)&&(R=f,X2))try{let S=new URL(window.location.href),F=f.startsWith("//")?new URL(S.protocol+f):new URL(f),q=La(F.pathname,T);F.origin===S.origin&&q!=null?f=q+F.search+F.hash:b=!0}catch{}let j=S2(f,{relative:r}),I=nR(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function E(S){i&&i(S),S.defaultPrevented||I(S)}return z.createElement("a",fd({},v,{href:R||j,onClick:b||o?i:E,ref:n,target:h}))}),eR=z.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=FE(e,q2),v=uf(h,{relative:g.relative}),T=qa(),R=z.useContext(ME),{navigator:b,basename:j}=z.useContext(fs),I=R!=null&&iR(v)&&f===!0,E=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,S=T.pathname,F=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;r||(S=S.toLowerCase(),F=F?F.toLowerCase():null,E=E.toLowerCase()),F&&j&&(F=La(F,j)||F);const q=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let G=S===E||!a&&S.startsWith(E)&&S.charAt(q)==="/",N=F!=null&&(F===E||!a&&F.startsWith(E)&&F.charAt(E.length)==="/"),C={isActive:G,isPending:N,isTransitioning:I},k=G?i:void 0,M;typeof o=="function"?M=o(C):M=[o,G?"active":null,N?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(C):u;return z.createElement(J2,fd({},g,{"aria-current":k,className:M,ref:n,style:V,to:h,viewTransition:f}),typeof m=="function"?m(C):m)});var eg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eg||(eg={}));var M0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(M0||(M0={}));function tR(t){let e=z.useContext(af);return e||at(!1),e}function nR(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=DE(),f=qa(),m=uf(t,{relative:a});return z.useCallback(g=>{if(W2(g,n)){g.preventDefault();let v=i!==void 0?i:dd(f)===dd(m);h(t,{replace:v,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function iR(t,e){e===void 0&&(e={});let n=z.useContext(Z2);n==null&&at(!1);let{basename:i}=tR(eg.useViewTransitionState),r=uf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=La(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=La(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ym(r.pathname,a)!=null||Ym(r.pathname,o)!=null}const UE=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),cf=z.createContext({}),hf=z.createContext(null),df=typeof document<"u",Dy=df?z.useLayoutEffect:z.useEffect,HE=z.createContext({strict:!1}),jy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),rR="framerAppearId",WE="data-"+jy(rR);function sR(t,e,n,i){const{visualElement:r}=z.useContext(cf),o=z.useContext(HE),a=z.useContext(hf),u=z.useContext(UE).reducedMotion,h=z.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;z.useInsertionEffect(()=>{f&&f.update(n,a)});const m=z.useRef(!!(n[WE]&&!window.HandoffComplete));return Dy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),z.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function la(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oR(t,e,n){return z.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):la(n)&&(n.current=i))},[e])}function Ru(t){return typeof t=="string"||Array.isArray(t)}function ff(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const zy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],By=["initial",...zy];function pf(t){return ff(t.animate)||By.some(e=>Ru(t[e]))}function $E(t){return!!(pf(t)||t.variants)}function aR(t,e){if(pf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Ru(n)?n:void 0,animate:Ru(i)?i:void 0}}return t.inherit!==!1?e:{}}function lR(t){const{initial:e,animate:n}=aR(t,z.useContext(cf));return z.useMemo(()=>({initial:e,animate:n}),[O0(e),O0(n)])}function O0(t){return Array.isArray(t)?t.join(" "):t}const V0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lu={};for(const t in V0)Lu[t]={isEnabled:e=>V0[t].some(n=>!!e[n])};function uR(t){for(const e in t)Lu[e]={...Lu[e],...t[e]}}const Fy=z.createContext({}),qE=z.createContext({}),cR=Symbol.for("motionComponentSymbol");function hR({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&uR(t);function o(u,h){let f;const m={...z.useContext(UE),...u,layoutId:dR(u)},{isStatic:g}=m,v=lR(u),T=i(u,g);if(!g&&df){v.visualElement=sR(r,T,m,e);const R=z.useContext(qE),b=z.useContext(HE).strict;v.visualElement&&(f=v.visualElement.loadFeatures(m,b,t,R))}return z.createElement(cf.Provider,{value:v},f&&v.visualElement?z.createElement(f,{visualElement:v.visualElement,...m}):null,n(r,u,oR(T,v.visualElement,h),T,g,v.visualElement))}const a=z.forwardRef(o);return a[cR]=r,a}function dR({layoutId:t}){const e=z.useContext(Fy).id;return e&&t!==void 0?e+"-"+t:t}function fR(t){function e(i,r={}){return hR(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const pR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Uy(t){return typeof t!="string"||t.includes("-")?!1:!!(pR.indexOf(t)>-1||/[A-Z]/.test(t))}const pd={};function mR(t){Object.assign(pd,t)}const Qu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lo=new Set(Qu);function GE(t,{layout:e,layoutId:n}){return lo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!pd[t]||t==="opacity")}const fn=t=>!!(t&&t.getVelocity),gR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yR=Qu.length;function _R(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<yR;a++){const u=Qu[a];if(t[u]!==void 0){const h=gR[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const ZE=t=>e=>typeof e=="string"&&e.startsWith(t),KE=ZE("--"),tg=ZE("var(--"),vR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,wR=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ts=(t,e,n)=>Math.min(Math.max(n,t),e),uo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},tu={...uo,transform:t=>ts(0,1,t)},lh={...uo,default:1},nu=t=>Math.round(t*1e5)/1e5,mf=/(-)?([\d]*\.?[\d])+/g,QE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,TR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Xu(t){return typeof t=="string"}const Yu=t=>({test:e=>Xu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Er=Yu("deg"),_i=Yu("%"),pe=Yu("px"),xR=Yu("vh"),ER=Yu("vw"),D0={..._i,parse:t=>_i.parse(t)/100,transform:t=>_i.transform(t*100)},j0={...uo,transform:Math.round},XE={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,size:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,rotate:Er,rotateX:Er,rotateY:Er,rotateZ:Er,scale:lh,scaleX:lh,scaleY:lh,scaleZ:lh,skew:Er,skewX:Er,skewY:Er,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:tu,originX:D0,originY:D0,originZ:pe,zIndex:j0,fillOpacity:tu,strokeOpacity:tu,numOctaves:j0};function Hy(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const v=e[g];if(KE(g)){o[g]=v;continue}const T=XE[g],R=wR(v,T);if(lo.has(g)){if(h=!0,a[g]=R,!m)continue;v!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=R):r[g]=R}if(e.transform||(h||i?r.transform=_R(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${v} ${T}`}}const Wy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function YE(t,e,n){for(const i in e)!fn(e[i])&&!GE(i,n)&&(t[i]=e[i])}function PR({transformTemplate:t},e,n){return z.useMemo(()=>{const i=Wy();return Hy(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function SR(t,e,n){const i=t.style||{},r={};return YE(r,i,t),Object.assign(r,PR(t,e,n)),t.transformValues?t.transformValues(r):r}function IR(t,e,n){const i={},r=SR(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const CR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function md(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||CR.has(t)}let JE=t=>!md(t);function AR(t){t&&(JE=e=>e.startsWith("on")?!md(e):t(e))}try{AR(require("@emotion/is-prop-valid").default)}catch{}function kR(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(JE(r)||n===!0&&md(r)||!e&&!md(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function z0(t,e,n){return typeof t=="string"?t:pe.transform(e+n*t)}function bR(t,e,n){const i=z0(e,t.x,t.width),r=z0(n,t.y,t.height);return`${i} ${r}`}const RR={offset:"stroke-dashoffset",array:"stroke-dasharray"},LR={offset:"strokeDashoffset",array:"strokeDasharray"};function NR(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?RR:LR;t[o.offset]=pe.transform(-i);const a=pe.transform(e),u=pe.transform(n);t[o.array]=`${a} ${u}`}function $y(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,v){if(Hy(t,f,m,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:R,dimensions:b}=t;T.transform&&(b&&(R.transform=T.transform),delete T.transform),b&&(r!==void 0||o!==void 0||R.transform)&&(R.transformOrigin=bR(b,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&NR(T,a,u,h,!1)}const eP=()=>({...Wy(),attrs:{}}),qy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function MR(t,e,n,i){const r=z.useMemo(()=>{const o=eP();return $y(o,e,{enableHardwareAcceleration:!1},qy(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};YE(o,t.style,t),r.style={...o,...r.style}}return r}function OR(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Uy(n)?MR:IR)(i,o,a,n),m={...kR(i,typeof n=="string",t),...h,ref:r},{children:g}=i,v=z.useMemo(()=>fn(g)?g.get():g,[g]);return z.createElement(n,{...m,children:v})}}function tP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const nP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iP(t,e,n,i){tP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(nP.has(r)?r:jy(r),e.attrs[r])}function Gy(t,e){const{style:n}=t,i={};for(const r in n)(fn(n[r])||e.style&&fn(e.style[r])||GE(r,t))&&(i[r]=n[r]);return i}function rP(t,e){const n=Gy(t,e);for(const i in t)if(fn(t[i])||fn(e[i])){const r=Qu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function Zy(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function sP(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const gd=t=>Array.isArray(t),VR=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),DR=t=>gd(t)?t[t.length-1]||0:t;function bh(t){const e=fn(t)?t.get():t;return VR(e)?e.toValue():e}function jR({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:zR(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const oP=t=>(e,n)=>{const i=z.useContext(cf),r=z.useContext(hf),o=()=>jR(t,e,i,r);return n?o():sP(o)};function zR(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=bh(o[v]);let{initial:a,animate:u}=t;const h=pf(t),f=$E(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!ff(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const R=Zy(t,T);if(!R)return;const{transitionEnd:b,transition:j,...I}=R;for(const E in I){let S=I[E];if(Array.isArray(S)){const F=m?S.length-1:0;S=S[F]}S!==null&&(r[E]=S)}for(const E in b)r[E]=b[E]}),r}const dt=t=>t;class B0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function BR(t){let e=new B0,n=new B0,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,v=g?e:n;return f&&a.add(h),v.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const uh=["prepare","read","update","preRender","render","postRender"],FR=40;function UR(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=uh.reduce((g,v)=>(g[v]=BR(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,FR),1),r.timestamp=g,r.isProcessing=!0,uh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:uh.reduce((g,v)=>{const T=o[v];return g[v]=(R,b=!1,j=!1)=>(n||h(),T.schedule(R,b,j)),g},{}),cancel:g=>uh.forEach(v=>o[v].cancel(g)),state:r,steps:o}}const{schedule:qe,cancel:nr,state:Ft,steps:Sp}=UR(typeof requestAnimationFrame<"u"?requestAnimationFrame:dt,!0),HR={useVisualState:oP({scrapeMotionValuesFromProps:rP,createRenderState:eP,onMount:(t,e,{renderState:n,latestValues:i})=>{qe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),qe.render(()=>{$y(n,i,{enableHardwareAcceleration:!1},qy(e.tagName),t.transformTemplate),iP(e,n)})}})},WR={useVisualState:oP({scrapeMotionValuesFromProps:Gy,createRenderState:Wy})};function $R(t,{forwardMotionProps:e=!1},n,i){return{...Uy(t)?HR:WR,preloadedFeatures:n,useRender:OR(e),createVisualElement:i,Component:t}}function $i(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const aP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function gf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const qR=t=>e=>aP(e)&&t(e,gf(e));function Ki(t,e,n,i){return $i(t,e,qR(n),i)}const GR=(t,e)=>n=>e(t(n)),qr=(...t)=>t.reduce(GR);function lP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const F0=lP("dragHorizontal"),U0=lP("dragVertical");function uP(t){let e=!1;if(t==="y")e=U0();else if(t==="x")e=F0();else{const n=F0(),i=U0();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function cP(){const t=uP(!0);return t?(t(),!1):!0}class ps{constructor(e){this.isMounted=!1,this.node=e}update(){}}function H0(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||cP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&qe.update(()=>u[i](o,a))};return Ki(t.current,n,r,{passive:!t.getProps()[i]})}class ZR extends ps{mount(){this.unmount=qr(H0(this.node,!0),H0(this.node,!1))}unmount(){}}class KR extends ps{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qr($i(this.node.current,"focus",()=>this.onFocus()),$i(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const hP=(t,e)=>e?t===e?!0:hP(t,e.parentElement):!1;function Ip(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,gf(n))}class QR extends ps{constructor(){super(...arguments),this.removeStartListeners=dt,this.removeEndListeners=dt,this.removeAccessibleListeners=dt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=Ki(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();qe.update(()=>{!g&&!hP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=Ki(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=qr(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Ip("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&qe.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=$i(this.node.current,"keyup",a),Ip("down",(u,h)=>{this.startPress(u,h)})},n=$i(this.node.current,"keydown",e),i=()=>{this.isPressing&&Ip("cancel",(o,a)=>this.cancelPress(o,a))},r=$i(this.node.current,"blur",i);this.removeAccessibleListeners=qr(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&qe.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!cP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&qe.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Ki(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=$i(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=qr(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ng=new WeakMap,Cp=new WeakMap,XR=t=>{const e=ng.get(t.target);e&&e(t)},YR=t=>{t.forEach(XR)};function JR({root:t,...e}){const n=t||document;Cp.has(n)||Cp.set(n,{});const i=Cp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(YR,{root:t,...e})),i[r]}function eL(t,e,n){const i=JR(e);return ng.set(t,n),i.observe(t),()=>{ng.delete(t),i.unobserve(t)}}const tL={some:0,all:1};class nL extends ps{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:tL[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=f?m:g;v&&v(h)};return eL(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(iL(e,n))&&this.startObserver()}unmount(){}}function iL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const rL={inView:{Feature:nL},tap:{Feature:QR},focus:{Feature:KR},hover:{Feature:ZR}};function dP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function sL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function oL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function yf(t,e,n){const i=t.getProps();return Zy(i,e,n!==void 0?n:i.custom,sL(t),oL(t))}let Ky=dt;const $s=t=>t*1e3,Qi=t=>t/1e3,aL={current:!1},fP=t=>Array.isArray(t)&&typeof t[0]=="number";function pP(t){return!!(!t||typeof t=="string"&&mP[t]||fP(t)||Array.isArray(t)&&t.every(pP))}const Fl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,mP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fl([0,.65,.55,1]),circOut:Fl([.55,0,1,.45]),backIn:Fl([.31,.01,.66,-.59]),backOut:Fl([.33,1.53,.69,.99])};function gP(t){if(t)return fP(t)?Fl(t):Array.isArray(t)?t.map(gP):mP[t]}function lL(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=gP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function uL(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const yP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,cL=1e-7,hL=12;function dL(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=yP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>cL&&++u<hL);return a}function Ju(t,e,n,i){if(t===e&&n===i)return dt;const r=o=>dL(o,0,1,t,n);return o=>o===0||o===1?o:yP(r(o),e,i)}const fL=Ju(.42,0,1,1),pL=Ju(0,0,.58,1),_P=Ju(.42,0,.58,1),mL=t=>Array.isArray(t)&&typeof t[0]!="number",vP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,wP=t=>e=>1-t(1-e),Qy=t=>1-Math.sin(Math.acos(t)),TP=wP(Qy),gL=vP(Qy),xP=Ju(.33,1.53,.69,.99),Xy=wP(xP),yL=vP(Xy),_L=t=>(t*=2)<1?.5*Xy(t):.5*(2-Math.pow(2,-10*(t-1))),vL={linear:dt,easeIn:fL,easeInOut:_P,easeOut:pL,circIn:Qy,circInOut:gL,circOut:TP,backIn:Xy,backInOut:yL,backOut:xP,anticipate:_L},W0=t=>{if(Array.isArray(t)){Ky(t.length===4);const[e,n,i,r]=t;return Ju(e,n,i,r)}else if(typeof t=="string")return vL[t];return t},Yy=(t,e)=>n=>!!(Xu(n)&&TR.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),EP=(t,e,n)=>i=>{if(!Xu(i))return i;const[r,o,a,u]=i.match(mf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},wL=t=>ts(0,255,t),Ap={...uo,transform:t=>Math.round(wL(t))},Fs={test:Yy("rgb","red"),parse:EP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Ap.transform(t)+", "+Ap.transform(e)+", "+Ap.transform(n)+", "+nu(tu.transform(i))+")"};function TL(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const ig={test:Yy("#"),parse:TL,transform:Fs.transform},ua={test:Yy("hsl","hue"),parse:EP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+_i.transform(nu(e))+", "+_i.transform(nu(n))+", "+nu(tu.transform(i))+")"},Qt={test:t=>Fs.test(t)||ig.test(t)||ua.test(t),parse:t=>Fs.test(t)?Fs.parse(t):ua.test(t)?ua.parse(t):ig.parse(t),transform:t=>Xu(t)?t:t.hasOwnProperty("red")?Fs.transform(t):ua.transform(t)},tt=(t,e,n)=>-n*t+n*e+t;function kp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function xL({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=kp(h,u,t+1/3),o=kp(h,u,t),a=kp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const bp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},EL=[ig,Fs,ua],PL=t=>EL.find(e=>e.test(t));function $0(t){const e=PL(t);let n=e.parse(t);return e===ua&&(n=xL(n)),n}const PP=(t,e)=>{const n=$0(t),i=$0(e),r={...n};return o=>(r.red=bp(n.red,i.red,o),r.green=bp(n.green,i.green,o),r.blue=bp(n.blue,i.blue,o),r.alpha=tt(n.alpha,i.alpha,o),Fs.transform(r))};function SL(t){var e,n;return isNaN(t)&&Xu(t)&&(((e=t.match(mf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(QE))===null||n===void 0?void 0:n.length)||0)>0}const SP={regex:vR,countKey:"Vars",token:"${v}",parse:dt},IP={regex:QE,countKey:"Colors",token:"${c}",parse:Qt.parse},CP={regex:mf,countKey:"Numbers",token:"${n}",parse:uo.parse};function Rp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function yd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Rp(n,SP),Rp(n,IP),Rp(n,CP),n}function AP(t){return yd(t).values}function kP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=yd(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(SP.token,a[h]):h<i+n?u=u.replace(IP.token,Qt.transform(a[h])):u=u.replace(CP.token,nu(a[h]));return u}}const IL=t=>typeof t=="number"?0:t;function CL(t){const e=AP(t);return kP(t)(e.map(IL))}const ns={test:SL,parse:AP,createTransformer:kP,getAnimatableNone:CL},bP=(t,e)=>n=>`${n>0?e:t}`;function RP(t,e){return typeof t=="number"?n=>tt(t,e,n):Qt.test(t)?PP(t,e):t.startsWith("var(")?bP(t,e):NP(t,e)}const LP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>RP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},AL=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=RP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},NP=(t,e)=>{const n=ns.createTransformer(e),i=yd(t),r=yd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?qr(LP(i.values,r.values),n):bP(t,e)},Nu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},q0=(t,e)=>n=>tt(t,e,n);function kL(t){return typeof t=="number"?q0:typeof t=="string"?Qt.test(t)?PP:NP:Array.isArray(t)?LP:typeof t=="object"?AL:q0}function bL(t,e,n){const i=[],r=n||kL(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||dt:e;u=qr(h,u)}i.push(u)}return i}function MP(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(Ky(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=bL(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Nu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(ts(t[0],t[o-1],f)):h}function RL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Nu(0,e,i);t.push(tt(n,1,r))}}function LL(t){const e=[0];return RL(e,t.length-1),e}function NL(t,e){return t.map(n=>n*e)}function ML(t,e){return t.map(()=>e||_P).splice(0,t.length-1)}function _d({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=mL(i)?i.map(W0):W0(i),o={done:!1,value:e[0]},a=NL(n&&n.length===e.length?n:LL(e),t),u=MP(a,e,{ease:Array.isArray(r)?r:ML(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function OP(t,e){return e?t*(1e3/e):0}const OL=5;function VP(t,e,n){const i=Math.max(e-OL,0);return OP(n-t(i),e-i)}const Lp=.001,VL=.01,DL=10,jL=.05,zL=1;function BL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=ts(jL,zL,a),t=ts(VL,DL,Qi(t)),a<1?(r=f=>{const m=f*a,g=m*t,v=m-n,T=rg(f,a),R=Math.exp(-g);return Lp-v/T*R},o=f=>{const g=f*a*t,v=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,R=Math.exp(-g),b=rg(Math.pow(f,2),a);return(-r(f)+Lp>0?-1:1)*((v-T)*R)/b}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Lp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=UL(r,o,u);if(t=$s(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const FL=12;function UL(t,e,n){let i=n;for(let r=1;r<FL;r++)i=i-t(i)/e(i);return i}function rg(t,e){return t*Math.sqrt(1-e*e)}const HL=["duration","bounce"],WL=["stiffness","damping","mass"];function G0(t,e){return e.some(n=>t[n]!==void 0)}function $L(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!G0(t,WL)&&G0(t,HL)){const n=BL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function DP({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:v}=$L({...i,velocity:-Qi(i.velocity||0)}),T=g||0,R=h/(2*Math.sqrt(u*f)),b=o-r,j=Qi(Math.sqrt(u/f)),I=Math.abs(b)<5;n||(n=I?.01:2),e||(e=I?.005:.5);let E;if(R<1){const S=rg(j,R);E=F=>{const q=Math.exp(-R*j*F);return o-q*((T+R*j*b)/S*Math.sin(S*F)+b*Math.cos(S*F))}}else if(R===1)E=S=>o-Math.exp(-j*S)*(b+(T+j*b)*S);else{const S=j*Math.sqrt(R*R-1);E=F=>{const q=Math.exp(-R*j*F),G=Math.min(S*F,300);return o-q*((T+R*j*b)*Math.sinh(G)+S*b*Math.cosh(G))/S}}return{calculatedDuration:v&&m||null,next:S=>{const F=E(S);if(v)a.done=S>=m;else{let q=T;S!==0&&(R<1?q=VP(E,S,F):q=0);const G=Math.abs(q)<=n,N=Math.abs(o-F)<=e;a.done=G&&N}return a.value=a.done?o:F,a}}}function Z0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},T=C=>u!==void 0&&C<u||h!==void 0&&C>h,R=C=>u===void 0?h:h===void 0||Math.abs(u-C)<Math.abs(h-C)?u:h;let b=n*e;const j=g+b,I=a===void 0?j:a(j);I!==j&&(b=I-g);const E=C=>-b*Math.exp(-C/i),S=C=>I+E(C),F=C=>{const k=E(C),M=S(C);v.done=Math.abs(k)<=f,v.value=v.done?I:M};let q,G;const N=C=>{T(v.value)&&(q=C,G=DP({keyframes:[v.value,R(v.value)],velocity:VP(S,C,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return N(0),{calculatedDuration:null,next:C=>{let k=!1;return!G&&q===void 0&&(k=!0,F(C),N(C)),q!==void 0&&C>q?G.next(C-q):(!k&&F(C),v)}}}const qL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>qe.update(e,!0),stop:()=>nr(e),now:()=>Ft.isProcessing?Ft.timestamp:performance.now()}},K0=2e4;function Q0(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<K0;)e+=n,i=t.next(e);return e>=K0?1/0:e}const GL={decay:Z0,inertia:Z0,tween:_d,keyframes:_d,spring:DP};function vd({autoplay:t=!0,delay:e=0,driver:n=qL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,...v}){let T=1,R=!1,b,j;const I=()=>{j=new Promise(te=>{b=te})};I();let E;const S=GL[r]||_d;let F;S!==_d&&typeof i[0]!="number"&&(F=MP([0,100],i,{clamp:!1}),i=[0,100]);const q=S({...v,keyframes:i});let G;u==="mirror"&&(G=S({...v,keyframes:[...i].reverse(),velocity:-(v.velocity||0)}));let N="idle",C=null,k=null,M=null;q.calculatedDuration===null&&o&&(q.calculatedDuration=Q0(q));const{calculatedDuration:V}=q;let B=1/0,O=1/0;V!==null&&(B=V+a,O=B*(o+1)-a);let oe=0;const Ve=te=>{if(k===null)return;T>0&&(k=Math.min(k,te)),T<0&&(k=Math.min(te-O/T,k)),C!==null?oe=C:oe=Math.round(te-k)*T;const Te=oe-e*(T>=0?1:-1),Ze=T>=0?Te<0:Te>O;oe=Math.max(Te,0),N==="finished"&&C===null&&(oe=O);let Ce=oe,Ee=q;if(o){const Ci=Math.min(oe,O)/B;let ii=Math.floor(Ci),pn=Ci%1;!pn&&Ci>=1&&(pn=1),pn===1&&ii--,ii=Math.min(ii,o+1),!!(ii%2)&&(u==="reverse"?(pn=1-pn,a&&(pn-=a/B)):u==="mirror"&&(Ee=G)),Ce=ts(0,1,pn)*B}const ce=Ze?{done:!1,value:i[0]}:Ee.next(Ce);F&&(ce.value=F(ce.value));let{done:lt}=ce;!Ze&&V!==null&&(lt=T>=0?oe>=O:oe<=0);const tn=C===null&&(N==="finished"||N==="running"&&lt);return g&&g(ce.value),tn&&Z(),ce},xe=()=>{E&&E.stop(),E=void 0},Ge=()=>{N="idle",xe(),b(),I(),k=M=null},Z=()=>{N="finished",m&&m(),xe(),b()},le=()=>{if(R)return;E||(E=n(Ve));const te=E.now();h&&h(),C!==null?k=te-C:(!k||N==="finished")&&(k=te),N==="finished"&&I(),M=k,C=null,N="running",E.start()};t&&le();const J={then(te,Te){return j.then(te,Te)},get time(){return Qi(oe)},set time(te){te=$s(te),oe=te,C!==null||!E||T===0?C=te:k=E.now()-te/T},get duration(){const te=q.calculatedDuration===null?Q0(q):q.calculatedDuration;return Qi(te)},get speed(){return T},set speed(te){te===T||!E||(T=te,J.time=Qi(oe))},get state(){return N},play:le,pause:()=>{N="paused",C=oe},stop:()=>{R=!0,N!=="idle"&&(N="idle",f&&f(),Ge())},cancel:()=>{M!==null&&Ve(M),Ge()},complete:()=>{N="finished"},sample:te=>(k=0,Ve(te))};return J}function ZL(t){let e;return()=>(e===void 0&&(e=t()),e)}const KL=ZL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),QL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ch=10,XL=2e4,YL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!pP(e.ease);function JL(t,e,{onUpdate:n,onComplete:i,...r}){if(!(KL()&&QL.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(S=>{u=S})};m();let{keyframes:g,duration:v=300,ease:T,times:R}=r;if(YL(e,r)){const S=vd({...r,repeat:0,delay:0});let F={done:!1,value:g[0]};const q=[];let G=0;for(;!F.done&&G<XL;)F=S.sample(G),q.push(F.value),G+=ch;R=void 0,g=q,v=G-ch,T="linear"}const b=lL(t.owner.current,e,g,{...r,duration:v,ease:T,times:R}),j=()=>{f=!1,b.cancel()},I=()=>{f=!0,qe.update(j),u(),m()};return b.onfinish=()=>{f||(t.set(uL(g,r)),i&&i(),I())},{then(S,F){return h.then(S,F)},attachTimeline(S){return b.timeline=S,b.onfinish=null,dt},get time(){return Qi(b.currentTime||0)},set time(S){b.currentTime=$s(S)},get speed(){return b.playbackRate},set speed(S){b.playbackRate=S},get duration(){return Qi(v)},play:()=>{a||(b.play(),nr(j))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:S}=b;if(S){const F=vd({...r,autoplay:!1});t.setWithVelocity(F.sample(S-ch).value,F.sample(S).value,ch)}I()},complete:()=>{f||b.finish()},cancel:I}}function eN({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:dt,pause:dt,stop:dt,then:o=>(o(),Promise.resolve()),cancel:dt,complete:dt});return e?vd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const tN={type:"spring",stiffness:500,damping:25,restSpeed:10},nN=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),iN={type:"keyframes",duration:.8},rN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sN=(t,{keyframes:e})=>e.length>2?iN:lo.has(t)?t.startsWith("scale")?nN(e[1]):tN:rN,sg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ns.test(e)||e==="0")&&!e.startsWith("url(")),oN=new Set(["brightness","contrast","saturate","opacity"]);function aN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(mf)||[];if(!i)return t;const r=n.replace(i,"");let o=oN.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const lN=/([a-z-]*)\(.*?\)/g,og={...ns,getAnimatableNone:t=>{const e=t.match(lN);return e?e.map(aN).join(" "):t}},uN={...XE,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:og,WebkitFilter:og},Jy=t=>uN[t];function jP(t,e){let n=Jy(t);return n!==og&&(n=ns),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const zP=t=>/^0[^.\s]+$/.test(t);function cN(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||zP(t)}function hN(t,e,n,i){const r=sg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),cN(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=jP(e,u)}return o}function dN({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function e_(t,e){return t[e]||t.default||t}const fN={skipAnimations:!1},t_=(t,e,n,i={})=>r=>{const o=e_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-$s(a);const h=hN(e,t,n,o),f=h[0],m=h[h.length-1],g=sg(t,f),v=sg(t,m);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:R=>{e.set(R),o.onUpdate&&o.onUpdate(R)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(dN(o)||(T={...T,...sN(t,T)}),T.duration&&(T.duration=$s(T.duration)),T.repeatDelay&&(T.repeatDelay=$s(T.repeatDelay)),!g||!v||aL.current||o.type===!1||fN.skipAnimations)return eN(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const R=JL(e,t,T);if(R)return R}return vd(T)};function wd(t){return!!(fn(t)&&t.add)}const BP=t=>/^\-?\d*\.?\d+$/.test(t);function n_(t,e){t.indexOf(e)===-1&&t.push(e)}function i_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class r_{constructor(){this.subscriptions=[]}add(e){return n_(this.subscriptions,e),()=>i_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pN=t=>!isNaN(parseFloat(t));class mN{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Ft;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,qe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>qe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=pN(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new r_);const i=this.events[e].add(n);return e==="change"?()=>{i(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?OP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Na(t,e){return new mN(t,e)}const FP=t=>e=>e.test(t),gN={test:t=>t==="auto",parse:t=>t},UP=[uo,pe,_i,Er,ER,xR,gN],Ol=t=>UP.find(FP(t)),yN=[...UP,Qt,ns],_N=t=>yN.find(FP(t));function vN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Na(n))}function wN(t,e){const n=yf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=DR(o[a]);vN(t,a,u)}}function TN(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(BP(m)||zP(m))?m=parseFloat(m):!_N(m)&&ns.test(f)&&(m=jP(h,f)),t.addValue(h,Na(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function xN(t,e){return e?(e[t]||e.default||e).from:void 0}function EN(t,e,n){const i={};for(const r in t){const o=xN(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function PN({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function SN(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function HP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const v=t.getValue(g),T=u[g];if(!v||T===void 0||m&&PN(m,g))continue;const R={delay:n,elapsed:0,...e_(o||{},g)};if(window.HandoffAppearAnimations){const I=t.getProps()[WE];if(I){const E=window.HandoffAppearAnimations(I,g,v,qe);E!==null&&(R.elapsed=E,R.isHandoff=!0)}}let b=!R.isHandoff&&!SN(v,T);if(R.type==="spring"&&(v.getVelocity()||R.velocity)&&(b=!1),v.animation&&(b=!1),b)continue;v.start(t_(g,v,T,t.shouldReduceMotion&&lo.has(g)?{type:!1}:R));const j=v.animation;wd(h)&&(h.add(g),j.then(()=>h.remove(g))),f.push(j)}return a&&Promise.all(f).then(()=>{a&&wN(t,a)}),f}function ag(t,e,n={}){const i=yf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(HP(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return IN(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function IN(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(CN).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(ag(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function CN(t,e){return t.sortNodePosition(e)}function AN(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>ag(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=ag(t,e,n);else{const r=typeof e=="function"?yf(t,e,n.custom):e;i=Promise.all(HP(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const kN=[...zy].reverse(),bN=zy.length;function RN(t){return e=>Promise.all(e.map(({animation:n,options:i})=>AN(t,n,i)))}function LN(t){let e=RN(t);const n=MN();let i=!0;const r=(h,f)=>{const m=yf(t,f);if(m){const{transition:g,transitionEnd:v,...T}=m;h={...h,...T,...v}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},v=[],T=new Set;let R={},b=1/0;for(let I=0;I<bN;I++){const E=kN[I],S=n[E],F=m[E]!==void 0?m[E]:g[E],q=Ru(F),G=E===f?S.isActive:null;G===!1&&(b=I);let N=F===g[E]&&F!==m[E]&&q;if(N&&i&&t.manuallyAnimateOnMount&&(N=!1),S.protectedKeys={...R},!S.isActive&&G===null||!F&&!S.prevProp||ff(F)||typeof F=="boolean")continue;let k=NN(S.prevProp,F)||E===f&&S.isActive&&!N&&q||I>b&&q,M=!1;const V=Array.isArray(F)?F:[F];let B=V.reduce(r,{});G===!1&&(B={});const{prevResolvedValues:O={}}=S,oe={...O,...B},Ve=xe=>{k=!0,T.has(xe)&&(M=!0,T.delete(xe)),S.needsAnimating[xe]=!0};for(const xe in oe){const Ge=B[xe],Z=O[xe];if(R.hasOwnProperty(xe))continue;let le=!1;gd(Ge)&&gd(Z)?le=!dP(Ge,Z):le=Ge!==Z,le?Ge!==void 0?Ve(xe):T.add(xe):Ge!==void 0&&T.has(xe)?Ve(xe):S.protectedKeys[xe]=!0}S.prevProp=F,S.prevResolvedValues=B,S.isActive&&(R={...R,...B}),i&&t.blockInitialAnimation&&(k=!1),k&&(!N||M)&&v.push(...V.map(xe=>({animation:xe,options:{type:E,...h}})))}if(T.size){const I={};T.forEach(E=>{const S=t.getBaseTarget(E);S!==void 0&&(I[E]=S)}),v.push({animation:I})}let j=!!v.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(j=!1),i=!1,j?e(v):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var R;return(R=T.animationState)===null||R===void 0?void 0:R.setActive(h,f)}),n[h].isActive=f;const v=a(m,h);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function NN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!dP(e,t):!1}function Rs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function MN(){return{animate:Rs(!0),whileInView:Rs(),whileHover:Rs(),whileTap:Rs(),whileDrag:Rs(),whileFocus:Rs(),exit:Rs()}}class ON extends ps{constructor(e){super(e),e.animationState||(e.animationState=LN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ff(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let VN=0;class DN extends ps{constructor(){super(...arguments),this.id=VN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const jN={animation:{Feature:ON},exit:{Feature:DN}},X0=(t,e)=>Math.abs(t-e);function zN(t,e){const n=X0(t.x,e.x),i=X0(t.y,e.y);return Math.sqrt(n**2+i**2)}class WP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Mp(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=zN(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:R}=g,{timestamp:b}=Ft;this.history.push({...R,timestamp:b});const{onStart:j,onMove:I}=this.handlers;v||(j&&j(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Np(v,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:R,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Mp(g.type==="pointercancel"?this.lastMoveEventInfo:Np(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,j),R&&R(g,j)},!aP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=gf(e),u=Np(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Ft;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,Mp(u,this.history)),this.removeListeners=qr(Ki(this.contextWindow,"pointermove",this.handlePointerMove),Ki(this.contextWindow,"pointerup",this.handlePointerUp),Ki(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nr(this.updatePoint)}}function Np(t,e){return e?{point:e(t.point)}:t}function Y0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Mp({point:t},e){return{point:t,delta:Y0(t,$P(e)),offset:Y0(t,BN(e)),velocity:FN(e,.1)}}function BN(t){return t[0]}function $P(t){return t[t.length-1]}function FN(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=$P(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>$s(e)));)n--;if(!i)return{x:0,y:0};const o=Qi(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Tn(t){return t.max-t.min}function lg(t,e=0,n=.01){return Math.abs(t-e)<=n}function J0(t,e,n,i=.5){t.origin=i,t.originPoint=tt(e.min,e.max,t.origin),t.scale=Tn(n)/Tn(e),(lg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(lg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function iu(t,e,n,i){J0(t.x,e.x,n.x,i?i.originX:void 0),J0(t.y,e.y,n.y,i?i.originY:void 0)}function ew(t,e,n){t.min=n.min+e.min,t.max=t.min+Tn(e)}function UN(t,e,n){ew(t.x,e.x,n.x),ew(t.y,e.y,n.y)}function tw(t,e,n){t.min=e.min-n.min,t.max=t.min+Tn(e)}function ru(t,e,n){tw(t.x,e.x,n.x),tw(t.y,e.y,n.y)}function HN(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?tt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?tt(n,t,i.max):Math.min(t,n)),t}function nw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function WN(t,{top:e,left:n,bottom:i,right:r}){return{x:nw(t.x,n,r),y:nw(t.y,e,i)}}function iw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function $N(t,e){return{x:iw(t.x,e.x),y:iw(t.y,e.y)}}function qN(t,e){let n=.5;const i=Tn(t),r=Tn(e);return r>i?n=Nu(e.min,e.max-i,t.min):i>r&&(n=Nu(t.min,t.max-r,e.min)),ts(0,1,n)}function GN(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ug=.35;function ZN(t=ug){return t===!1?t=0:t===!0&&(t=ug),{x:rw(t,"left","right"),y:rw(t,"top","bottom")}}function rw(t,e,n){return{min:sw(t,e),max:sw(t,n)}}function sw(t,e){return typeof t=="number"?t:t[e]||0}const ow=()=>({translate:0,scale:1,origin:0,originPoint:0}),ca=()=>({x:ow(),y:ow()}),aw=()=>({min:0,max:0}),gt=()=>({x:aw(),y:aw()});function Ln(t){return[t("x"),t("y")]}function qP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function KN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function QN(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Op(t){return t===void 0||t===1}function cg({scale:t,scaleX:e,scaleY:n}){return!Op(t)||!Op(e)||!Op(n)}function Ms(t){return cg(t)||GP(t)||t.z||t.rotate||t.rotateX||t.rotateY}function GP(t){return lw(t.x)||lw(t.y)}function lw(t){return t&&t!=="0%"}function Td(t,e,n){const i=t-n,r=e*i;return n+r}function uw(t,e,n,i,r){return r!==void 0&&(t=Td(t,r,i)),Td(t,n,i)+e}function hg(t,e=0,n=1,i,r){t.min=uw(t.min,e,n,i,r),t.max=uw(t.max,e,n,i,r)}function ZP(t,{x:e,y:n}){hg(t.x,e.translate,e.scale,e.originPoint),hg(t.y,n.translate,n.scale,n.originPoint)}function XN(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ha(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,ZP(t,a)),i&&Ms(o.latestValues)&&ha(t,o.latestValues))}e.x=cw(e.x),e.y=cw(e.y)}function cw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ir(t,e){t.min=t.min+e,t.max=t.max+e}function hw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=tt(t.min,t.max,o);hg(t,e[n],e[i],a,e.scale)}const YN=["x","scaleX","originX"],JN=["y","scaleY","originY"];function ha(t,e){hw(t.x,e,YN),hw(t.y,e,JN)}function KP(t,e){return qP(QN(t.getBoundingClientRect(),e))}function eM(t,e,n){const i=KP(t,n),{scroll:r}=e;return r&&(Ir(i.x,r.offset.x),Ir(i.y,r.offset.y)),i}const QP=({current:t})=>t?t.ownerDocument.defaultView:null,tM=new WeakMap;class nM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gf(m,"page").point)},o=(m,g)=>{const{drag:v,dragPropagation:T,onDragStart:R}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=uP(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ln(j=>{let I=this.getAxisMotionValue(j).get()||0;if(_i.test(I)){const{projection:E}=this.visualElement;if(E&&E.layout){const S=E.layout.layoutBox[j];S&&(I=Tn(S)*(parseFloat(I)/100))}}this.originPoint[j]=I}),R&&qe.update(()=>R(m,g),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:R,onDrag:b}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:j}=g;if(T&&this.currentDirection===null){this.currentDirection=iM(j),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",g.point,j),this.updateAxis("y",g.point,j),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),h=()=>Ln(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new WP(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:QP(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&qe.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!hh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=HN(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&la(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=WN(r.layoutBox,n):this.constraints=!1,this.elastic=ZN(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ln(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=GN(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!la(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=eM(i,r.root,this.visualElement.getTransformPagePoint());let a=$N(r.layout.layoutBox,o);if(n){const u=n(KN(a));this.hasMutatedConstraints=!!u,u&&(a=qP(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Ln(m=>{if(!hh(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const v=r?200:1e6,T=r?40:1e7,R={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,R)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(t_(e,i,0,n))}stopAnimation(){Ln(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ln(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ln(n=>{const{drag:i}=this.getProps();if(!hh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-tt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!la(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ln(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=qN({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ln(a=>{if(!hh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(tt(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;tM.set(this.visualElement,this);const e=this.visualElement.current,n=Ki(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();la(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=$i(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ln(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=ug,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function hh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function iM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class rM extends ps{constructor(e){super(e),this.removeGroupControls=dt,this.removeListeners=dt,this.controls=new nM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const dw=t=>(e,n)=>{t&&qe.update(()=>t(e,n))};class sM extends ps{constructor(){super(...arguments),this.removePointerDownListener=dt}onPointerDown(e){this.session=new WP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:dw(e),onStart:dw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&qe.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=Ki(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function oM(){const t=z.useContext(hf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=z.useId();return z.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Rh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=fw(t,e.target.x),i=fw(t,e.target.y);return`${n}% ${i}%`}},aM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ns.parse(t);if(r.length>5)return i;const o=ns.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=tt(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class lM extends Zs.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;mR(uM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Rh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||qe.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function XP(t){const[e,n]=oM(),i=z.useContext(Fy);return Zs.createElement(lM,{...t,layoutGroup:i,switchLayoutGroup:z.useContext(qE),isPresent:e,safeToRemove:n})}const uM={borderRadius:{...Vl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vl,borderTopRightRadius:Vl,borderBottomLeftRadius:Vl,borderBottomRightRadius:Vl,boxShadow:aM},YP=["TopLeft","TopRight","BottomLeft","BottomRight"],cM=YP.length,pw=t=>typeof t=="string"?parseFloat(t):t,mw=t=>typeof t=="number"||pe.test(t);function hM(t,e,n,i,r,o){r?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,dM(i)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,fM(i))):o&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<cM;a++){const u=`border${YP[a]}Radius`;let h=gw(e,u),f=gw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||mw(h)===mw(f)?(t[u]=Math.max(tt(pw(h),pw(f),i),0),(_i.test(f)||_i.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,i))}function gw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dM=JP(0,.5,TP),fM=JP(.5,.95,dt);function JP(t,e,n){return i=>i<t?0:i>e?1:n(Nu(t,e,i))}function yw(t,e){t.min=e.min,t.max=e.max}function Rn(t,e){yw(t.x,e.x),yw(t.y,e.y)}function _w(t,e,n,i,r){return t-=e,t=Td(t,1/n,i),r!==void 0&&(t=Td(t,1/r,i)),t}function pM(t,e=0,n=1,i=.5,r,o=t,a=t){if(_i.test(e)&&(e=parseFloat(e),e=tt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=tt(o.min,o.max,i);t===o&&(u-=e),t.min=_w(t.min,e,n,u,r),t.max=_w(t.max,e,n,u,r)}function vw(t,e,[n,i,r],o,a){pM(t,e[n],e[i],e[r],e.scale,o,a)}const mM=["x","scaleX","originX"],gM=["y","scaleY","originY"];function ww(t,e,n,i){vw(t.x,e,mM,n?n.x:void 0,i?i.x:void 0),vw(t.y,e,gM,n?n.y:void 0,i?i.y:void 0)}function Tw(t){return t.translate===0&&t.scale===1}function eS(t){return Tw(t.x)&&Tw(t.y)}function yM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function tS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function xw(t){return Tn(t.x)/Tn(t.y)}class _M{constructor(){this.members=[]}add(e){n_(this.members,e),e.scheduleRender()}remove(e){if(i_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ew(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const vM=(t,e)=>t.depth-e.depth;class wM{constructor(){this.children=[],this.isDirty=!1}add(e){n_(this.children,e),this.isDirty=!0}remove(e){i_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vM),this.isDirty=!1,this.children.forEach(e)}}function TM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(nr(i),t(o-e))};return qe.read(i,!0),()=>nr(i)}function xM(t){window.MotionDebug&&window.MotionDebug.record(t)}function EM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function PM(t,e,n){const i=fn(t)?t:Na(t);return i.start(t_("",i,e,n)),i.animation}const Pw=["","X","Y","Z"],SM={visibility:"hidden"},Sw=1e3;let IM=0;const Os={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function nS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=IM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Os.totalNodes=Os.resolvedTargetDeltas=Os.recalculatedProjection=0,this.nodes.forEach(kM),this.nodes.forEach(MM),this.nodes.forEach(OM),this.nodes.forEach(bM),xM(Os)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new wM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new r_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=EM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=TM(v,250),Rh.hasAnimatedSinceResize&&(Rh.hasAnimatedSinceResize=!1,this.nodes.forEach(Cw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||BM,{onLayoutAnimationStart:j,onLayoutAnimationComplete:I}=m.getProps(),E=!this.targetLayout||!tS(this.targetLayout,R)||T,S=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||v&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,S);const F={...e_(b,"layout"),onPlay:j,onComplete:I};(m.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else v||Cw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VM),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Iw);return}this.isUpdating||this.nodes.forEach(LM),this.isUpdating=!1,this.nodes.forEach(NM),this.nodes.forEach(CM),this.nodes.forEach(AM),this.clearAllSnapshots();const u=performance.now();Ft.delta=ts(0,1e3/60,u-Ft.timestamp),Ft.timestamp=u,Ft.isProcessing=!0,Sp.update.process(Ft),Sp.preRender.process(Ft),Sp.render.process(Ft),Ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(RM),this.sharedNodes.forEach(DM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!eS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Ms(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),FM(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return gt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Ir(u.x,h.offset.x),Ir(u.y,h.offset.y)),u}removeElementScroll(a){const u=gt();Rn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Rn(u,a);const{scroll:v}=this.root;v&&(Ir(u.x,-v.offset.x),Ir(u.y,-v.offset.y))}Ir(u.x,m.offset.x),Ir(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=gt();Rn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ha(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Ms(m.latestValues)&&ha(h,m.latestValues)}return Ms(this.latestValues)&&ha(h,this.latestValues),h}removeTransform(a){const u=gt();Rn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Ms(f.latestValues))continue;cg(f.latestValues)&&f.updateSnapshot();const m=gt(),g=f.measurePageBox();Rn(m,g),ww(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Ms(this.latestValues)&&ww(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Ft.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gt(),this.relativeTargetOrigin=gt(),ru(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gt(),this.targetWithTransforms=gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),UN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rn(this.target,this.layout.layoutBox),ZP(this.target,this.targetDelta)):Rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gt(),this.relativeTargetOrigin=gt(),ru(this.relativeTargetOrigin,this.target,T.target),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Os.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||cg(this.parent.latestValues)||GP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ft.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Rn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;XN(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:R}=u;if(!R){this.projectionTransform&&(this.projectionDelta=ca(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ca(),this.projectionDeltaWithTransform=ca());const b=this.projectionTransform;iu(this.projectionDelta,this.layoutCorrected,R,this.latestValues),this.projectionTransform=Ew(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),Os.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=ca();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=gt(),T=h?h.source:void 0,R=this.layout?this.layout.source:void 0,b=T!==R,j=this.getStack(),I=!j||j.members.length<=1,E=!!(b&&!I&&this.options.crossfade===!0&&!this.path.some(zM));this.animationProgress=0;let S;this.mixTargetDelta=F=>{const q=F/1e3;Aw(g.x,a.x,q),Aw(g.y,a.y,q),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ru(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jM(this.relativeTarget,this.relativeTargetOrigin,v,q),S&&yM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=gt()),Rn(S,this.relativeTarget)),b&&(this.animationValues=m,hM(m,f,this.latestValues,q,E,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{Rh.hasAnimatedSinceResize=!0,this.currentAnimation=PM(0,Sw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Sw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&iS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||gt();const g=Tn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const v=Tn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}Rn(u,h),ha(u,m),iu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new _M),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<Pw.length;m++){const g="rotate"+Pw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return SM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=bh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=bh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ms(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Ew(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:T,y:R}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in pd){if(v[b]===void 0)continue;const{correct:j,applyTo:I}=pd[b],E=f.transform==="none"?v[b]:j(v[b],g);if(I){const S=I.length;for(let F=0;F<S;F++)f[I[F]]=E}else f[b]=E}return this.options.layoutId&&(f.pointerEvents=g===this?bh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Iw),this.root.sharedNodes.clear()}}}function CM(t){t.updateLayout()}function AM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Ln(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=Tn(v);v.min=i[g].min,v.max=v.min+T}):iS(o,n.layoutBox,i)&&Ln(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=Tn(i[g]);v.max=v.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=ca();iu(u,i,n.layoutBox);const h=ca();a?iu(h,t.applyTransform(r,!0),n.measuredBox):iu(h,i,n.layoutBox);const f=!eS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const R=gt();ru(R,n.layoutBox,v.layoutBox);const b=gt();ru(b,i,T.layoutBox),tS(R,b)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=R,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function kM(t){Os.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function RM(t){t.clearSnapshot()}function Iw(t){t.clearMeasurements()}function LM(t){t.isLayoutDirty=!1}function NM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Cw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function MM(t){t.resolveTargetDelta()}function OM(t){t.calcProjection()}function VM(t){t.resetRotation()}function DM(t){t.removeLeadSnapshot()}function Aw(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function kw(t,e,n,i){t.min=tt(e.min,n.min,i),t.max=tt(e.max,n.max,i)}function jM(t,e,n,i){kw(t.x,e.x,n.x,i),kw(t.y,e.y,n.y,i)}function zM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BM={duration:.45,ease:[.4,0,.1,1]},bw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Rw=bw("applewebkit/")&&!bw("chrome/")?Math.round:dt;function Lw(t){t.min=Rw(t.min),t.max=Rw(t.max)}function FM(t){Lw(t.x),Lw(t.y)}function iS(t,e,n){return t==="position"||t==="preserve-aspect"&&!lg(xw(e),xw(n),.2)}const UM=nS({attachResizeListener:(t,e)=>$i(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vp={current:void 0},rS=nS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Vp.current){const t=new UM({});t.mount(window),t.setOptions({layoutScroll:!0}),Vp.current=t}return Vp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),HM={pan:{Feature:sM},drag:{Feature:rM,ProjectionNode:rS,MeasureLayout:XP}},WM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function $M(t){const e=WM.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function dg(t,e,n=1){const[i,r]=$M(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return BP(a)?parseFloat(a):a}else return tg(r)?dg(r,e,n+1):r}function qM(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!tg(o))return;const a=dg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!tg(o))continue;const a=dg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const GM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),sS=t=>GM.has(t),ZM=t=>Object.keys(t).some(sS),Nw=t=>t===uo||t===pe,Mw=(t,e)=>parseFloat(t.split(", ")[e]),Ow=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Mw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Mw(o[1],t):0}},KM=new Set(["x","y","z"]),QM=Qu.filter(t=>!KM.has(t));function XM(t){const e=[];return QM.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ma={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ow(4,13),y:Ow(5,14)};Ma.translateX=Ma.x;Ma.translateY=Ma.y;const YM=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Ma[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Ma[f](h,o)}),t},JM=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(sS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=Ol(m);const v=e[h];let T;if(gd(v)){const R=v.length,b=v[0]===null?1:0;m=v[b],g=Ol(m);for(let j=b;j<R&&v[j]!==null;j++)T?Ky(Ol(v[j])===T):T=Ol(v[j])}else T=Ol(v);if(g!==T)if(Nw(g)&&Nw(T)){const R=f.get();typeof R=="string"&&f.set(parseFloat(R)),typeof v=="string"?e[h]=parseFloat(v):Array.isArray(v)&&T===pe&&(e[h]=v.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||v===0)?m===0?f.set(T.transform(m)):e[h]=g.transform(v):(a||(o=XM(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(v))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=YM(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),df&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function eO(t,e,n,i){return ZM(e)?JM(t,e,n,i):{target:e,transitionEnd:i}}const tO=(t,e,n,i)=>{const r=qM(t,e,i);return e=r.target,i=r.transitionEnd,eO(t,e,n,i)},fg={current:null},oS={current:!1};function nO(){if(oS.current=!0,!!df)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>fg.current=t.matches;t.addListener(e),e()}else fg.current=!1}function iO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(fn(o))t.addValue(r,o),wd(i)&&i.add(r);else if(fn(a))t.addValue(r,Na(o,{owner:t})),wd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Na(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Vw=new WeakMap,aS=Object.keys(Lu),rO=aS.length,Dw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],sO=By.length;class oO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>qe.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=pf(n),this.isVariantNode=$E(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const v=m[g];u[g]!==void 0&&fn(v)&&(v.set(u[g],!1),wd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Vw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),oS.current||nO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Vw.delete(this.current),this.projection&&this.projection.unmount(),nr(this.notifyUpdate),nr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=lo.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&qe.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<rO;h++){const f=aS[h],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:T}=Lu[f];v&&(a=v),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&la(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Dw.length;i++){const r=Dw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=iO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<sO;i++){const r=By[i],o=this.props[r];(Ru(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Na(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=Zy(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!fn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new r_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class lS extends oO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=EN(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){TN(this,i,a);const u=tO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function aO(t){return window.getComputedStyle(t)}class lO extends lS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(lo.has(n)){const i=Jy(n);return i&&i.default||0}else{const i=aO(e),r=(KE(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return KP(e,n)}build(e,n,i,r){Hy(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Gy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){tP(e,n,i,r)}}class uO extends lS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(lo.has(n)){const i=Jy(n);return i&&i.default||0}return n=nP.has(n)?n:jy(n),e.getAttribute(n)}measureInstanceViewportBox(){return gt()}scrapeMotionValuesFromProps(e,n){return rP(e,n)}build(e,n,i,r){$y(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){iP(e,n,i,r)}mount(e){this.isSVGTag=qy(e.tagName),super.mount(e)}}const cO=(t,e)=>Uy(t)?new uO(e,{enableHardwareAcceleration:!1}):new lO(e,{enableHardwareAcceleration:!0}),hO={layout:{ProjectionNode:rS,MeasureLayout:XP}},dO={...jN,...rL,...HM,...hO},he=fR((t,e)=>$R(t,e,dO,cO));function uS(){const t=z.useRef(!1);return Dy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function fO(){const t=uS(),[e,n]=z.useState(0),i=z.useCallback(()=>{t.current&&n(e+1)},[e]);return[z.useCallback(()=>qe.postRender(i),[i]),e]}class pO extends z.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function mO({children:t,isPresent:e}){const n=z.useId(),i=z.useRef(null),r=z.useRef({width:0,height:0,top:0,left:0});return z.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),z.createElement(pO,{isPresent:e,childRef:i,sizeRef:r},z.cloneElement(t,{ref:i}))}const Dp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=sP(gO),h=z.useId(),f=z.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return z.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),z.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=z.createElement(mO,{isPresent:n},t)),z.createElement(hf.Provider,{value:f},t)};function gO(){return new Map}function yO(t){return z.useEffect(()=>()=>t(),[])}const Vs=t=>t.key||"";function _O(t,e){t.forEach(n=>{const i=Vs(n);e.set(i,n)})}function vO(t){const e=[];return z.Children.forEach(t,n=>{z.isValidElement(n)&&e.push(n)}),e}const Mu=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=z.useContext(Fy).forceRender||fO()[0],h=uS(),f=vO(t);let m=f;const g=z.useRef(new Map).current,v=z.useRef(m),T=z.useRef(new Map).current,R=z.useRef(!0);if(Dy(()=>{R.current=!1,_O(f,T),v.current=m}),yO(()=>{R.current=!0,T.clear(),g.clear()}),R.current)return z.createElement(z.Fragment,null,m.map(E=>z.createElement(Dp,{key:Vs(E),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},E)));m=[...m];const b=v.current.map(Vs),j=f.map(Vs),I=b.length;for(let E=0;E<I;E++){const S=b[E];j.indexOf(S)===-1&&!g.has(S)&&g.set(S,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((E,S)=>{if(j.indexOf(S)!==-1)return;const F=T.get(S);if(!F)return;const q=b.indexOf(S);let G=E;if(!G){const N=()=>{g.delete(S);const C=Array.from(T.keys()).filter(k=>!j.includes(k));if(C.forEach(k=>T.delete(k)),v.current=f.filter(k=>{const M=Vs(k);return M===S||C.includes(M)}),!g.size){if(h.current===!1)return;u(),i&&i()}};G=z.createElement(Dp,{key:Vs(F),isPresent:!1,onExitComplete:N,custom:e,presenceAffectsLayout:o,mode:a},F),g.set(S,G)}m.splice(q,0,G)}),m=m.map(E=>{const S=E.key;return g.has(S)?E:z.createElement(Dp,{key:Vs(E),isPresent:!0,presenceAffectsLayout:o,mode:a},E)}),z.createElement(z.Fragment,null,g.size?m:m.map(E=>z.cloneElement(E)))},wO=()=>{};var jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},TO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},hS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(v=64)),i.push(n[m],n[g],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new xO;const v=o<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const R=f<<6&192|g;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EO=function(t){const e=cS(t);return hS.encodeByteArray(e,!0)},xd=function(t){return EO(t).replace(/\./g,"")},dS=function(t){try{return hS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=()=>PO().__FIREBASE_DEFAULTS__,IO=()=>{if(typeof process>"u"||typeof jw>"u")return;const t=jw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dS(t[1]);return e&&JSON.parse(e)},_f=()=>{try{return wO()||SO()||IO()||CO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fS=t=>{var e,n;return(n=(e=_f())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},AO=t=>{const e=fS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},pS=()=>{var t;return(t=_f())==null?void 0:t.config},mS=t=>{var e;return(e=_f())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xd(JSON.stringify(n)),xd(JSON.stringify(a)),""].join(".")}const su={};function RO(){const t={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?t.emulator.push(e):t.prod.push(e);return t}function LO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let zw=!1;function yS(t,e){if(typeof window>"u"||typeof document>"u"||!Ga(window.location.host)||su[t]===e||su[t]||zw)return;su[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=RO().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{zw=!0,a()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=LO(i),T=n("text"),R=document.getElementById(T)||document.createElement("span"),b=n("learnmore"),j=document.getElementById(b)||document.createElement("a"),I=n("preprendIcon"),E=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const S=v.element;u(S),m(j,b);const F=f();h(E,I),S.append(E,R,j,F),document.body.appendChild(S)}o?(R.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function MO(){var e;const t=(e=_f())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jO(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zO(){return!MO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BO(){try{return typeof indexedDB=="object"}catch{return!1}}function FO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="FirebaseError";class ur extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=UO,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ec.prototype.create)}}class ec{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?HO(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new ur(r,u,i)}}function HO(t,e){return t.replace(WO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const WO=/\{\$([^}]+)}/g;function $O(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function eo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Bw(o)&&Bw(a)){if(!eo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Bw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qO(t,e){const n=new GO(t,e);return n.subscribe.bind(n)}class GO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");ZO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=jp),r.error===void 0&&(r.error=jp),r.complete===void 0&&(r.complete=jp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t){return t&&t._delegate?t._delegate:t}class to{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new kO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XO(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QO(t){return t===Ds?void 0:t}function XO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const JO={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},eV=Ae.INFO,tV={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},nV=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=tV[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s_{constructor(e){this.name=e,this._logLevel=eV,this._logHandler=nV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const iV=(t,e)=>e.some(n=>t instanceof n);let Fw,Uw;function rV(){return Fw||(Fw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sV(){return Uw||(Uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _S=new WeakMap,pg=new WeakMap,vS=new WeakMap,zp=new WeakMap,o_=new WeakMap;function oV(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Gr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&_S.set(n,t)}).catch(()=>{}),o_.set(e,t),e}function aV(t){if(pg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});pg.set(t,e)}let mg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lV(t){mg=t(mg)}function uV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Bp(this),e,...n);return vS.set(i,e.sort?e.sort():[e]),Gr(i)}:sV().includes(t)?function(...e){return t.apply(Bp(this),e),Gr(_S.get(this))}:function(...e){return Gr(t.apply(Bp(this),e))}}function cV(t){return typeof t=="function"?uV(t):(t instanceof IDBTransaction&&aV(t),iV(t,rV())?new Proxy(t,mg):t)}function Gr(t){if(t instanceof IDBRequest)return oV(t);if(zp.has(t))return zp.get(t);const e=cV(t);return e!==t&&(zp.set(t,e),o_.set(e,t)),e}const Bp=t=>o_.get(t);function hV(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Gr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Gr(a.result),h.oldVersion,h.newVersion,Gr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const dV=["get","getKey","getAll","getAllKeys","count"],fV=["put","add","delete","clear"],Fp=new Map;function Hw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fp.get(e))return Fp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=fV.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||dV.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return Fp.set(e,o),o}lV(t=>({...t,get:(e,n,i)=>Hw(e,n)||t.get(e,n,i),has:(e,n)=>!!Hw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mV(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function mV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gg="@firebase/app",Ww="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new s_("@firebase/app"),gV="@firebase/app-compat",yV="@firebase/analytics-compat",_V="@firebase/analytics",vV="@firebase/app-check-compat",wV="@firebase/app-check",TV="@firebase/auth",xV="@firebase/auth-compat",EV="@firebase/database",PV="@firebase/data-connect",SV="@firebase/database-compat",IV="@firebase/functions",CV="@firebase/functions-compat",AV="@firebase/installations",kV="@firebase/installations-compat",bV="@firebase/messaging",RV="@firebase/messaging-compat",LV="@firebase/performance",NV="@firebase/performance-compat",MV="@firebase/remote-config",OV="@firebase/remote-config-compat",VV="@firebase/storage",DV="@firebase/storage-compat",jV="@firebase/firestore",zV="@firebase/ai",BV="@firebase/firestore-compat",FV="firebase",UV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="[DEFAULT]",HV={[gg]:"fire-core",[gV]:"fire-core-compat",[_V]:"fire-analytics",[yV]:"fire-analytics-compat",[wV]:"fire-app-check",[vV]:"fire-app-check-compat",[TV]:"fire-auth",[xV]:"fire-auth-compat",[EV]:"fire-rtdb",[PV]:"fire-data-connect",[SV]:"fire-rtdb-compat",[IV]:"fire-fn",[CV]:"fire-fn-compat",[AV]:"fire-iid",[kV]:"fire-iid-compat",[bV]:"fire-fcm",[RV]:"fire-fcm-compat",[LV]:"fire-perf",[NV]:"fire-perf-compat",[MV]:"fire-rc",[OV]:"fire-rc-compat",[VV]:"fire-gcs",[DV]:"fire-gcs-compat",[jV]:"fire-fst",[BV]:"fire-fst-compat",[zV]:"fire-vertex","fire-js":"fire-js",[FV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Map,WV=new Map,_g=new Map;function $w(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oa(t){const e=t.name;if(_g.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;_g.set(e,t);for(const n of Ed.values())$w(n,t);for(const n of WV.values())$w(n,t);return!0}function a_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new ec("app","Firebase",$V);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=UV;function wS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:yg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Zr.create("bad-app-name",{appName:String(r)});if(n||(n=pS()),!n)throw Zr.create("no-options");const o=Ed.get(r);if(o){if(eo(n,o.options)&&eo(i,o.config))return o;throw Zr.create("duplicate-app",{appName:r})}const a=new YO(r);for(const h of _g.values())a.addComponent(h);const u=new qV(n,i,a);return Ed.set(r,u),u}function TS(t=yg){const e=Ed.get(t);if(!e&&t===yg&&pS())return wS();if(!e)throw Zr.create("no-app",{appName:t});return e}function Kr(t,e,n){let i=HV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}Oa(new to(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV="firebase-heartbeat-database",ZV=1,Ou="firebase-heartbeat-store";let Up=null;function xS(){return Up||(Up=hV(GV,ZV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),Up}async function KV(t){try{const n=(await xS()).transaction(Ou),i=await n.objectStore(Ou).get(ES(t));return await n.done,i}catch(e){if(e instanceof ur)ir.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function qw(t,e){try{const i=(await xS()).transaction(Ou,"readwrite");await i.objectStore(Ou).put(e,ES(t)),await i.done}catch(n){if(n instanceof ur)ir.warn(n.message);else{const i=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(i.message)}}}function ES(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=1024,XV=30;class YV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Gw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>XV){const a=tD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ir.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gw(),{heartbeatsToSend:i,unsentEntries:r}=JV(this._heartbeatsCache.heartbeats),o=xd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ir.warn(n),""}}}function Gw(){return new Date().toISOString().substring(0,10)}function JV(t,e=QV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Zw(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Zw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class eD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BO()?FO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zw(t){return xd(JSON.stringify({version:2,heartbeats:t})).length}function tD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){Oa(new to("platform-logger",e=>new pV(e),"PRIVATE")),Oa(new to("heartbeat",e=>new YV(e),"PRIVATE")),Kr(gg,Ww,t),Kr(gg,Ww,"esm2020"),Kr("fire-js","")}nD("");var Kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,PS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function k(){}k.prototype=C.prototype,N.F=C.prototype,N.prototype=new k,N.prototype.constructor=N,N.D=function(M,V,B){for(var O=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)O[oe-2]=arguments[oe];return C.prototype[V].apply(M,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,C,k){k||(k=0);const M=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)M[V]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(V=0;V<16;++V)M[V]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=N.g[0],k=N.g[1],V=N.g[2];let B=N.g[3],O;O=C+(B^k&(V^B))+M[0]+3614090360&4294967295,C=k+(O<<7&4294967295|O>>>25),O=B+(V^C&(k^V))+M[1]+3905402710&4294967295,B=C+(O<<12&4294967295|O>>>20),O=V+(k^B&(C^k))+M[2]+606105819&4294967295,V=B+(O<<17&4294967295|O>>>15),O=k+(C^V&(B^C))+M[3]+3250441966&4294967295,k=V+(O<<22&4294967295|O>>>10),O=C+(B^k&(V^B))+M[4]+4118548399&4294967295,C=k+(O<<7&4294967295|O>>>25),O=B+(V^C&(k^V))+M[5]+1200080426&4294967295,B=C+(O<<12&4294967295|O>>>20),O=V+(k^B&(C^k))+M[6]+2821735955&4294967295,V=B+(O<<17&4294967295|O>>>15),O=k+(C^V&(B^C))+M[7]+4249261313&4294967295,k=V+(O<<22&4294967295|O>>>10),O=C+(B^k&(V^B))+M[8]+1770035416&4294967295,C=k+(O<<7&4294967295|O>>>25),O=B+(V^C&(k^V))+M[9]+2336552879&4294967295,B=C+(O<<12&4294967295|O>>>20),O=V+(k^B&(C^k))+M[10]+4294925233&4294967295,V=B+(O<<17&4294967295|O>>>15),O=k+(C^V&(B^C))+M[11]+2304563134&4294967295,k=V+(O<<22&4294967295|O>>>10),O=C+(B^k&(V^B))+M[12]+1804603682&4294967295,C=k+(O<<7&4294967295|O>>>25),O=B+(V^C&(k^V))+M[13]+4254626195&4294967295,B=C+(O<<12&4294967295|O>>>20),O=V+(k^B&(C^k))+M[14]+2792965006&4294967295,V=B+(O<<17&4294967295|O>>>15),O=k+(C^V&(B^C))+M[15]+1236535329&4294967295,k=V+(O<<22&4294967295|O>>>10),O=C+(V^B&(k^V))+M[1]+4129170786&4294967295,C=k+(O<<5&4294967295|O>>>27),O=B+(k^V&(C^k))+M[6]+3225465664&4294967295,B=C+(O<<9&4294967295|O>>>23),O=V+(C^k&(B^C))+M[11]+643717713&4294967295,V=B+(O<<14&4294967295|O>>>18),O=k+(B^C&(V^B))+M[0]+3921069994&4294967295,k=V+(O<<20&4294967295|O>>>12),O=C+(V^B&(k^V))+M[5]+3593408605&4294967295,C=k+(O<<5&4294967295|O>>>27),O=B+(k^V&(C^k))+M[10]+38016083&4294967295,B=C+(O<<9&4294967295|O>>>23),O=V+(C^k&(B^C))+M[15]+3634488961&4294967295,V=B+(O<<14&4294967295|O>>>18),O=k+(B^C&(V^B))+M[4]+3889429448&4294967295,k=V+(O<<20&4294967295|O>>>12),O=C+(V^B&(k^V))+M[9]+568446438&4294967295,C=k+(O<<5&4294967295|O>>>27),O=B+(k^V&(C^k))+M[14]+3275163606&4294967295,B=C+(O<<9&4294967295|O>>>23),O=V+(C^k&(B^C))+M[3]+4107603335&4294967295,V=B+(O<<14&4294967295|O>>>18),O=k+(B^C&(V^B))+M[8]+1163531501&4294967295,k=V+(O<<20&4294967295|O>>>12),O=C+(V^B&(k^V))+M[13]+2850285829&4294967295,C=k+(O<<5&4294967295|O>>>27),O=B+(k^V&(C^k))+M[2]+4243563512&4294967295,B=C+(O<<9&4294967295|O>>>23),O=V+(C^k&(B^C))+M[7]+1735328473&4294967295,V=B+(O<<14&4294967295|O>>>18),O=k+(B^C&(V^B))+M[12]+2368359562&4294967295,k=V+(O<<20&4294967295|O>>>12),O=C+(k^V^B)+M[5]+4294588738&4294967295,C=k+(O<<4&4294967295|O>>>28),O=B+(C^k^V)+M[8]+2272392833&4294967295,B=C+(O<<11&4294967295|O>>>21),O=V+(B^C^k)+M[11]+1839030562&4294967295,V=B+(O<<16&4294967295|O>>>16),O=k+(V^B^C)+M[14]+4259657740&4294967295,k=V+(O<<23&4294967295|O>>>9),O=C+(k^V^B)+M[1]+2763975236&4294967295,C=k+(O<<4&4294967295|O>>>28),O=B+(C^k^V)+M[4]+1272893353&4294967295,B=C+(O<<11&4294967295|O>>>21),O=V+(B^C^k)+M[7]+4139469664&4294967295,V=B+(O<<16&4294967295|O>>>16),O=k+(V^B^C)+M[10]+3200236656&4294967295,k=V+(O<<23&4294967295|O>>>9),O=C+(k^V^B)+M[13]+681279174&4294967295,C=k+(O<<4&4294967295|O>>>28),O=B+(C^k^V)+M[0]+3936430074&4294967295,B=C+(O<<11&4294967295|O>>>21),O=V+(B^C^k)+M[3]+3572445317&4294967295,V=B+(O<<16&4294967295|O>>>16),O=k+(V^B^C)+M[6]+76029189&4294967295,k=V+(O<<23&4294967295|O>>>9),O=C+(k^V^B)+M[9]+3654602809&4294967295,C=k+(O<<4&4294967295|O>>>28),O=B+(C^k^V)+M[12]+3873151461&4294967295,B=C+(O<<11&4294967295|O>>>21),O=V+(B^C^k)+M[15]+530742520&4294967295,V=B+(O<<16&4294967295|O>>>16),O=k+(V^B^C)+M[2]+3299628645&4294967295,k=V+(O<<23&4294967295|O>>>9),O=C+(V^(k|~B))+M[0]+4096336452&4294967295,C=k+(O<<6&4294967295|O>>>26),O=B+(k^(C|~V))+M[7]+1126891415&4294967295,B=C+(O<<10&4294967295|O>>>22),O=V+(C^(B|~k))+M[14]+2878612391&4294967295,V=B+(O<<15&4294967295|O>>>17),O=k+(B^(V|~C))+M[5]+4237533241&4294967295,k=V+(O<<21&4294967295|O>>>11),O=C+(V^(k|~B))+M[12]+1700485571&4294967295,C=k+(O<<6&4294967295|O>>>26),O=B+(k^(C|~V))+M[3]+2399980690&4294967295,B=C+(O<<10&4294967295|O>>>22),O=V+(C^(B|~k))+M[10]+4293915773&4294967295,V=B+(O<<15&4294967295|O>>>17),O=k+(B^(V|~C))+M[1]+2240044497&4294967295,k=V+(O<<21&4294967295|O>>>11),O=C+(V^(k|~B))+M[8]+1873313359&4294967295,C=k+(O<<6&4294967295|O>>>26),O=B+(k^(C|~V))+M[15]+4264355552&4294967295,B=C+(O<<10&4294967295|O>>>22),O=V+(C^(B|~k))+M[6]+2734768916&4294967295,V=B+(O<<15&4294967295|O>>>17),O=k+(B^(V|~C))+M[13]+1309151649&4294967295,k=V+(O<<21&4294967295|O>>>11),O=C+(V^(k|~B))+M[4]+4149444226&4294967295,C=k+(O<<6&4294967295|O>>>26),O=B+(k^(C|~V))+M[11]+3174756917&4294967295,B=C+(O<<10&4294967295|O>>>22),O=V+(C^(B|~k))+M[2]+718787259&4294967295,V=B+(O<<15&4294967295|O>>>17),O=k+(B^(V|~C))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+B&4294967295}i.prototype.v=function(N,C){C===void 0&&(C=N.length);const k=C-this.blockSize,M=this.C;let V=this.h,B=0;for(;B<C;){if(V==0)for(;B<=k;)r(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<C;)if(M[V++]=N.charCodeAt(B++),V==this.blockSize){r(this,M),V=0;break}}else for(;B<C;)if(M[V++]=N[B++],V==this.blockSize){r(this,M),V=0;break}}this.h=V,this.o+=C},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var k=N.length-8;k<N.length;++k)N[k]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)N[C++]=this.g[k]>>>M&255;return N};function o(N,C){var k=u;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=C(N)}function a(N,C){this.h=C;const k=[];let M=!0;for(let V=N.length-1;V>=0;V--){const B=N[V]|0;M&&B==C||(k[V]=B,M=!1)}this.g=k}var u={};function h(N){return-128<=N&&N<128?o(N,function(C){return new a([C|0],C<0?-1:0)}):new a([N|0],N<0?-1:0)}function f(N){if(isNaN(N)||!isFinite(N))return g;if(N<0)return j(f(-N));const C=[];let k=1;for(let M=0;N>=k;M++)C[M]=N/k|0,k*=4294967296;return new a(C,0)}function m(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return j(m(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(C,8));let M=g;for(let B=0;B<N.length;B+=8){var V=Math.min(8,N.length-B);const O=parseInt(N.substring(B,B+V),C);V<8?(V=f(Math.pow(C,V)),M=M.j(V).add(f(O))):(M=M.j(k),M=M.add(f(O)))}return M}var g=h(0),v=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(b(this))return-j(this).m();let N=0,C=1;for(let k=0;k<this.g.length;k++){const M=this.i(k);N+=(M>=0?M:4294967296+M)*C,C*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(R(this))return"0";if(b(this))return"-"+j(this).toString(N);const C=f(Math.pow(N,6));var k=this;let M="";for(;;){const V=F(k,C).g;k=I(k,V.j(C));let B=((k.g.length>0?k.g[0]:k.h)>>>0).toString(N);if(k=V,R(k))return B+M;for(;B.length<6;)B="0"+B;M=B+M}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function R(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function b(N){return N.h==-1}t.l=function(N){return N=I(this,N),b(N)?-1:R(N)?0:1};function j(N){const C=N.g.length,k=[];for(let M=0;M<C;M++)k[M]=~N.g[M];return new a(k,~N.h).add(v)}t.abs=function(){return b(this)?j(this):this},t.add=function(N){const C=Math.max(this.g.length,N.g.length),k=[];let M=0;for(let V=0;V<=C;V++){let B=M+(this.i(V)&65535)+(N.i(V)&65535),O=(B>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);M=O>>>16,B&=65535,O&=65535,k[V]=O<<16|B}return new a(k,k[k.length-1]&-2147483648?-1:0)};function I(N,C){return N.add(j(C))}t.j=function(N){if(R(this)||R(N))return g;if(b(this))return b(N)?j(this).j(j(N)):j(j(this).j(N));if(b(N))return j(this.j(j(N)));if(this.l(T)<0&&N.l(T)<0)return f(this.m()*N.m());const C=this.g.length+N.g.length,k=[];for(var M=0;M<2*C;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<N.g.length;V++){const B=this.i(M)>>>16,O=this.i(M)&65535,oe=N.i(V)>>>16,Ve=N.i(V)&65535;k[2*M+2*V]+=O*Ve,E(k,2*M+2*V),k[2*M+2*V+1]+=B*Ve,E(k,2*M+2*V+1),k[2*M+2*V+1]+=O*oe,E(k,2*M+2*V+1),k[2*M+2*V+2]+=B*oe,E(k,2*M+2*V+2)}for(N=0;N<C;N++)k[N]=k[2*N+1]<<16|k[2*N];for(N=C;N<2*C;N++)k[N]=0;return new a(k,0)};function E(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function S(N,C){this.g=N,this.h=C}function F(N,C){if(R(C))throw Error("division by zero");if(R(N))return new S(g,g);if(b(N))return C=F(j(N),C),new S(j(C.g),j(C.h));if(b(C))return C=F(N,j(C)),new S(j(C.g),C.h);if(N.g.length>30){if(b(N)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var k=v,M=C;M.l(N)<=0;)k=q(k),M=q(M);var V=G(k,1),B=G(M,1);for(M=G(M,2),k=G(k,2);!R(M);){var O=B.add(M);O.l(N)<=0&&(V=V.add(k),B=O),M=G(M,1),k=G(k,1)}return C=I(N,V.j(C)),new S(V,C)}for(V=g;N.l(C)>=0;){for(k=Math.max(1,Math.floor(N.m()/C.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),B=f(k),O=B.j(C);b(O)||O.l(N)>0;)k-=M,B=f(k),O=B.j(C);R(B)&&(B=v),V=V.add(B),N=I(N,O)}return new S(V,N)}t.B=function(N){return F(this,N).h},t.and=function(N){const C=Math.max(this.g.length,N.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)&N.i(M);return new a(k,this.h&N.h)},t.or=function(N){const C=Math.max(this.g.length,N.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)|N.i(M);return new a(k,this.h|N.h)},t.xor=function(N){const C=Math.max(this.g.length,N.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)^N.i(M);return new a(k,this.h^N.h)};function q(N){const C=N.g.length+1,k=[];for(let M=0;M<C;M++)k[M]=N.i(M)<<1|N.i(M-1)>>>31;return new a(k,N.h)}function G(N,C){const k=C>>5;C%=32;const M=N.g.length-k,V=[];for(let B=0;B<M;B++)V[B]=C>0?N.i(B+k)>>>C|N.i(B+k+1)<<32-C:N.i(B+k);return new a(V,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,PS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Qr=a}).apply(typeof Kw<"u"?Kw:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var SS,Ul,IS,Lh,vg,CS,AS,kS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var w=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in w))break e;w=w[U]}c=c[c.length-1],A=w[c],y=y(A),y!=A&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var w=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&w.push([A,y[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,w){return c.call.apply(c.bind,arguments)}function f(c,y,w){return f=h,f.apply(null,arguments)}function m(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function g(c,y){function w(){}w.prototype=y.prototype,c.Z=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(A,U,W){for(var ee=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ee[_e-2]=arguments[_e];return y.prototype[U].apply(A,ee)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const w=Array(y);for(let A=0;A<y;A++)w[A]=c[A];return w}return[]}function R(c,y){for(let A=1;A<arguments.length;A++){const U=arguments[A];var w=typeof U;if(w=w!="object"?w:U?Array.isArray(U)?"array":w:"null",w=="array"||w=="object"&&typeof U.length=="number"){w=c.length||0;const W=U.length||0;c.length=w+W;for(let ee=0;ee<W;ee++)c[w+ee]=U[ee]}else c.push(U)}}class b{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(c){a.setTimeout(()=>{throw c},0)}function I(){var c=N;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class E{constructor(){this.h=this.g=null}add(y,w){const A=S.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new b(()=>new F,c=>c.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,G=!1,N=new E,C=()=>{const c=Promise.resolve(void 0);q=()=>{c.then(k)}};function k(){for(var c;c=I();){try{c.h.call(c.g)}catch(w){j(w)}var y=S;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}G=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return c}();function O(c){return/^[\s\xa0]*$/.test(c)}function oe(c,y){V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(oe,V),oe.prototype.init=function(c,y){const w=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),xe=0;function Ge(c,y,w,A,U){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=U,this.key=++xe,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function le(c,y,w){for(const A in c)y.call(w,c[A],A,c)}function J(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function te(c){const y={};for(const w in c)y[w]=c[w];return y}const Te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(c,y){let w,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(w in A)c[w]=A[w];for(let W=0;W<Te.length;W++)w=Te[W],Object.prototype.hasOwnProperty.call(A,w)&&(c[w]=A[w])}}function Ce(c){this.src=c,this.g={},this.h=0}Ce.prototype.add=function(c,y,w,A,U){const W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);const ee=ce(c,y,A,U);return ee>-1?(y=c[ee],w||(y.fa=!1)):(y=new Ge(y,this.src,W,!!A,U),y.fa=w,c.push(y)),y};function Ee(c,y){const w=y.type;if(w in c.g){var A=c.g[w],U=Array.prototype.indexOf.call(A,y,void 0),W;(W=U>=0)&&Array.prototype.splice.call(A,U,1),W&&(Z(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function ce(c,y,w,A){for(let U=0;U<c.length;++U){const W=c[U];if(!W.da&&W.listener==y&&W.capture==!!w&&W.ha==A)return U}return-1}var lt="closure_lm_"+(Math.random()*1e6|0),tn={};function Ci(c,y,w,A,U){if(Array.isArray(y)){for(let W=0;W<y.length;W++)Ci(c,y[W],w,A,U);return null}return w=ys(w),c&&c[Ve]?c.J(y,w,u(A)?!!A.capture:!1,U):ii(c,y,w,!1,A,U)}function ii(c,y,w,A,U,W){if(!y)throw Error("Invalid event type");const ee=u(U)?!!U.capture:!!U;let _e=mo(c);if(_e||(c[lt]=_e=new Ce(c)),w=_e.add(y,w,A,ee,W),w.proxy)return w;if(A=pn(),w.proxy=A,A.src=c,A.listener=w,c.addEventListener)B||(U=ee),U===void 0&&(U=!1),c.addEventListener(y.toString(),A,U);else if(c.attachEvent)c.attachEvent(hc(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function pn(){function c(w){return y.call(c.src,c.listener,w)}const y=dc;return c}function Ai(c,y,w,A,U){if(Array.isArray(y))for(var W=0;W<y.length;W++)Ai(c,y[W],w,A,U);else A=u(A)?!!A.capture:!!A,w=ys(w),c&&c[Ve]?(c=c.i,W=String(y).toString(),W in c.g&&(y=c.g[W],w=ce(y,w,A,U),w>-1&&(Z(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete c.g[W],c.h--)))):c&&(c=mo(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ce(y,w,A,U)),(w=c>-1?y[c]:null)&&ms(w))}function ms(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ve])Ee(y.i,c);else{var w=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(w,A,c.capture):y.detachEvent?y.detachEvent(hc(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=mo(y))?(Ee(w,c),w.h==0&&(w.src=null,y[lt]=null)):Z(c)}}}function hc(c){return c in tn?tn[c]:tn[c]="on"+c}function dc(c,y){if(c.da)c=!0;else{y=new oe(y,this);const w=c.listener,A=c.ha||c.src;c.fa&&ms(c),c=w.call(A,y)}return c}function mo(c){return c=c[lt],c instanceof Ce?c:null}var gs="__closure_events_fn_"+(Math.random()*1e9>>>0);function ys(c){return typeof c=="function"?c:(c[gs]||(c[gs]=function(y){return c.handleEvent(y)}),c[gs])}function Et(){M.call(this),this.i=new Ce(this),this.M=this,this.G=null}g(Et,M),Et.prototype[Ve]=!0,Et.prototype.removeEventListener=function(c,y,w,A){Ai(this,c,y,w,A)};function Pt(c,y){var w,A=c.G;if(A)for(w=[];A;A=A.G)w.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new V(y,c);else if(y instanceof V)y.target=y.target||c;else{var U=y;y=new V(A,c),Ze(y,U)}U=!0;let W,ee;if(w)for(ee=w.length-1;ee>=0;ee--)W=y.g=w[ee],U=cr(W,A,!0,y)&&U;if(W=y.g=c,U=cr(W,A,!0,y)&&U,U=cr(W,A,!1,y)&&U,w)for(ee=0;ee<w.length;ee++)W=y.g=w[ee],U=cr(W,A,!1,y)&&U}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const w=c.g[y];for(let A=0;A<w.length;A++)Z(w[A]);delete c.g[y],c.h--}}this.G=null},Et.prototype.J=function(c,y,w,A){return this.i.add(String(c),y,!1,w,A)},Et.prototype.K=function(c,y,w,A){return this.i.add(String(c),y,!0,w,A)};function cr(c,y,w,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let W=0;W<y.length;++W){const ee=y[W];if(ee&&!ee.da&&ee.capture==w){const _e=ee.listener,Oe=ee.ha||ee.src;ee.fa&&Ee(c.i,ee),U=_e.call(Oe,A)!==!1&&U}}return U&&!A.defaultPrevented}function fc(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function tl(c){c.g=fc(()=>{c.g=null,c.i&&(c.i=!1,tl(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class zf extends M{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:tl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(c){M.call(this),this.h=c,this.g={}}g(_s,M);var go=[];function nl(c){le(c.g,function(y,w){this.g.hasOwnProperty(w)&&ms(y)},c),c.g={}}_s.prototype.N=function(){_s.Z.N.call(this),nl(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yo=a.JSON.stringify,Bf=a.JSON.parse,pc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function il(){}function mc(){}var hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vs(){V.call(this,"d")}g(vs,V);function _o(){V.call(this,"c")}g(_o,V);var ki={},dr=null;function vo(){return dr=dr||new Et}ki.Ia="serverreachability";function gc(c){V.call(this,ki.Ia,c)}g(gc,V);function fr(c){const y=vo();Pt(y,new gc(y))}ki.STAT_EVENT="statevent";function rl(c,y){V.call(this,ki.STAT_EVENT,c),this.stat=y}g(rl,V);function St(c){const y=vo();Pt(y,new rl(y,c))}ki.Ja="timingevent";function yc(c,y){V.call(this,ki.Ja,c),this.size=y}g(yc,V);function ws(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Ts(){this.g=!0}Ts.prototype.ua=function(){this.g=!1};function Ff(c,y,w,A,U,W){c.info(function(){if(c.g)if(W){var ee="",_e=W.split("&");for(let je=0;je<_e.length;je++){var Oe=_e[je].split("=");if(Oe.length>1){const ut=Oe[0];Oe=Oe[1];const An=ut.split("_");ee=An.length>=2&&An[1]=="type"?ee+(ut+"="+Oe+"&"):ee+(ut+"=redacted&")}}}else ee=null;else ee=W;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+y+`
`+w+`
`+ee})}function Uf(c,y,w,A,U,W,ee){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+y+`
`+w+`
`+W+" "+ee})}function pr(c,y,w,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Hf(c,w)+(A?" "+A:"")})}function sl(c,y){c.info(function(){return"TIMEOUT: "+y})}Ts.prototype.info=function(){};function Hf(c,y){if(!c.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(c=0;c<W.length;c++)if(Array.isArray(W[c])){var w=W[c];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ee=1;ee<A.length;ee++)A[ee]=""}}}}return yo(W)}catch{return y}}var wo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_c={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vc;function nn(){}g(nn,il),nn.prototype.g=function(){return new XMLHttpRequest},vc=new nn;function ae(c){return encodeURIComponent(String(c))}function wc(c){var y=1;c=c.split(":");const w=[];for(;y>0&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function Un(c,y,w,A){this.j=c,this.i=y,this.l=w,this.S=A||1,this.V=new _s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ol}function ol(){this.i=null,this.g="",this.h=!1}var al={},xs={};function To(c,y,w){c.M=1,c.A=We(Gt(y)),c.u=w,c.R=!0,bi(c,null)}function bi(c,y){c.F=Date.now(),xo(c),c.B=Gt(c.A);var w=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Co(w.i,"t",A),c.C=0,w=c.j.L,c.h=new ol,c.g=Tl(c.j,w?y:null,!c.u),c.P>0&&(c.O=new zf(f(c.Y,c,c.g),c.P)),y=c.V,w=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(go[0]=U.toString()),U=go);for(let W=0;W<U.length;W++){const ee=Ci(w,U[W],A||y.handleEvent,!1,y.h||y);if(!ee)break;y.g[ee.key]=ee}y=c.J?te(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),fr(),Ff(c.i,c.v,c.B,c.l,c.S,c.u)}Un.prototype.ba=function(c){c=c.target;const y=this.O;y&&ai(c)==3?y.j():this.Y(c)},Un.prototype.Y=function(c){try{if(c==this.g)e:{const _e=ai(this.g),Oe=this.g.ya(),je=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||pl(this.g)))){this.K||_e!=4||Oe==7||(Oe==8||je<=0?fr(3):fr(2)),Eo(this);var y=this.g.ca();this.X=y;var w=Tc(this);if(this.o=y==200,Uf(this.i,this.v,this.B,this.l,this.S,_e,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(A)){var W=A;break t}}W=null}if(c=W)pr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ll(this,c);else{this.o=!1,this.m=3,St(12),Pn(this),Es(this);break e}}if(this.R){c=!0;let ut;for(;!this.K&&this.C<w.length;)if(ut=Wf(this,w),ut==xs){_e==4&&(this.m=4,St(14),c=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==al){this.m=4,St(15),pr(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else pr(this.i,this.l,ut,null),ll(this,ut);if(xc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||w.length!=0||this.h.h||(this.m=1,St(16),c=!1),this.o=this.o&&c,!c)pr(this.i,this.l,w,"[Invalid Chunked Response]"),Pn(this),Es(this);else if(w.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),vl(ee),ee.P=!0,St(11))}}else pr(this.i,this.l,w,null),ll(this,w);_e==4&&Pn(this),this.o&&!this.K&&(_e==4?gn(this.j,this):(this.o=!1,xo(this)))}else ml(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Pn(this),Es(this)}}}catch{}finally{}};function Tc(c){if(!xc(c))return c.g.la();const y=pl(c.g);if(y==="")return"";let w="";const A=y.length,U=ai(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Pn(c),Es(c),"";c.h.i=new a.TextDecoder}for(let W=0;W<A;W++)c.h.h=!0,w+=c.h.i.decode(y[W],{stream:!(U&&W==A-1)});return y.length=0,c.h.g+=w,c.C=0,c.h.g}function xc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Wf(c,y){var w=c.C,A=y.indexOf(`
`,w);return A==-1?xs:(w=Number(y.substring(w,A)),isNaN(w)?al:(A+=1,A+w>y.length?xs:(y=y.slice(A,A+w),c.C=A+w,y)))}Un.prototype.cancel=function(){this.K=!0,Pn(this)};function xo(c){c.T=Date.now()+c.H,Ec(c,c.H)}function Ec(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ws(f(c.aa,c),y)}function Eo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Un.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(sl(this.i,this.B),this.M!=2&&(fr(),St(17)),Pn(this),this.m=2,Es(this)):Ec(this,this.T-c)};function Es(c){c.j.I==0||c.K||gn(c.j,c)}function Pn(c){Eo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,nl(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function ll(c,y){try{var w=c.j;if(w.I!=0&&(w.g==c||Ps(w.h,c))){if(!c.L&&Ps(w.h,c)&&w.I==3){try{var A=w.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Lo(w),bo(w);else break e;_l(w),St(18)}}else w.xa=U[1],0<w.xa-w.K&&U[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=ws(f(w.Va,w),6e3));Ic(w.h)<=1&&w.ta&&(w.ta=void 0)}else ui(w,11)}else if((c.L||w.g==c)&&Lo(w),!O(y))for(U=w.Ba.g.parse(y),y=0;y<U.length;y++){let je=U[y];const ut=je[0];if(!(ut<=w.K))if(w.K=ut,je=je[1],w.I==2)if(je[0]=="c"){w.M=je[1],w.ba=je[2];const An=je[3];An!=null&&(w.ka=An,w.j.info("VER="+w.ka));const $n=je[4];$n!=null&&(w.za=$n,w.j.info("SVER="+w.za));const kn=je[5];kn!=null&&typeof kn=="number"&&kn>0&&(A=1.5*kn,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const ci=c.g;if(ci){const Oo=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var W=A.h;W.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ri(W,W.h),W.h=null))}if(A.G){const Vo=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(A.wa=Vo,re(A.J,A.G,Vo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var ee=c;if(A.na=wl(A,A.L?A.ba:null,A.W),ee.L){ul(A.h,ee);var _e=ee,Oe=A.O;Oe&&(_e.H=Oe),_e.D&&(Eo(_e),xo(_e)),A.g=ee}else yl(A);w.i.length>0&&li(w)}else je[0]!="stop"&&je[0]!="close"||ui(w,7);else w.I==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?ui(w,7):Pe(w):je[0]!="noop"&&w.l&&w.l.qa(je),w.A=0)}}fr(4)}catch{}}var $f=class{constructor(c,y){this.g=c,this.map=y}};function Pc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ic(c){return c.h?1:c.g?c.g.size:0}function Ps(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ri(c,y){c.g?c.g.add(y):c.h=y}function ul(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Pc.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function cl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.G);return y}return T(c.i)}var mr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Re(c,y){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const A=c[w].indexOf("=");let U,W=null;A>=0?(U=c[w].substring(0,A),W=c[w].substring(A+1)):U=c[w],y(U,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Me(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Me?(this.l=c.l,Sn(this,c.j),this.o=c.o,this.g=c.g,In(this,c.u),this.h=c.h,Ss(this,Is(c.i)),this.m=c.m):c&&(y=String(c).match(mr))?(this.l=!1,Sn(this,y[1]||"",!0),this.o=Li(y[2]||""),this.g=Li(y[3]||"",!0),In(this,y[4]),this.h=Li(y[5]||"",!0),Ss(this,y[6]||"",!0),this.m=Li(y[7]||"")):(this.l=!1,this.i=new Hn(null,this.l))}Me.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ri(y,Cc,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ri(y,Cc,!0),"@"),c.push(ae(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(ri(w,w.charAt(0)=="/"?Ni:Po,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",ri(w,Mi)),c.join("")},Me.prototype.resolve=function(c){const y=Gt(this);let w=!!c.j;w?Sn(y,c.j):w=!!c.o,w?y.o=c.o:w=!!c.g,w?y.g=c.g:w=c.u!=null;var A=c.h;if(w)In(y,c.u);else if(w=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=y.h.lastIndexOf("/");U!=-1&&(A=y.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const W=[];for(let ee=0;ee<U.length;){const _e=U[ee++];_e=="."?A&&ee==U.length&&W.push(""):_e==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&ee==U.length&&W.push("")):(W.push(_e),A=!0)}A=W.join("/")}else A=U}return w?y.h=A:w=c.i.toString()!=="",w?Ss(y,Is(c.i)):w=!!c.m,w&&(y.m=c.m),y};function Gt(c){return new Me(c)}function Sn(c,y,w){c.j=w?Li(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function In(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Ss(c,y,w){y instanceof Hn?(c.i=y,hl(c.i,c.l)):(w||(y=ri(y,st)),c.i=new Hn(y,c.l))}function re(c,y,w){c.i.set(y,w)}function We(c){return re(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Li(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ri(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,rn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cc=/[#\/\?@]/g,Po=/[#\?:]/g,Ni=/[#\?]/g,st=/[#\?@]/g,Mi=/#/g;function Hn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function mn(c){c.g||(c.g=new Map,c.h=0,c.i&&Re(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=Hn.prototype,t.add=function(c,y){mn(this),this.i=null,c=si(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function So(c,y){mn(c),y=si(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function gr(c,y){return mn(c),y=si(c,y),c.g.has(y)}t.forEach=function(c,y){mn(this),this.g.forEach(function(w,A){w.forEach(function(U){c.call(y,U,A,this)},this)},this)};function Io(c,y){mn(c);let w=[];if(typeof y=="string")gr(c,y)&&(w=w.concat(c.g.get(si(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)w=w.concat(c[y]);return w}t.set=function(c,y){return mn(this),this.i=null,c=si(this,c),gr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=Io(this,c),c.length>0?String(c[0]):y):y};function Co(c,y,w){So(c,y),w.length>0&&(c.i=null,c.g.set(si(c,y),T(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var w=y[A];const U=ae(w);w=Io(this,w);for(let W=0;W<w.length;W++){let ee=U;w[W]!==""&&(ee+="="+ae(w[W])),c.push(ee)}}return this.i=c.join("&")};function Is(c){const y=new Hn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function si(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function hl(c,y){y&&!c.j&&(mn(c),c.i=null,c.g.forEach(function(w,A){const U=A.toLowerCase();A!=U&&(So(this,A),Co(this,U,w))},c)),c.j=y}function Ao(c,y){const w=new Ts;if(a.Image){const A=new Image;A.onload=m(Cn,w,"TestLoadImage: loaded",!0,y,A),A.onerror=m(Cn,w,"TestLoadImage: error",!1,y,A),A.onabort=m(Cn,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=m(Cn,w,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Ac(c,y){const w=new Ts,A=new AbortController,U=setTimeout(()=>{A.abort(),Cn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(W=>{clearTimeout(U),W.ok?Cn(w,"TestPingServer: ok",!0,y):Cn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Cn(w,"TestPingServer: error",!1,y)})}function Cn(c,y,w,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(w)}catch{}}function qf(){this.g=new pc}function ye(c){this.i=c.Sb||null,this.h=c.ab||!1}g(ye,il),ye.prototype.g=function(){return new Zt(this.i,this.h)};function Zt(c,y){Et.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Zt,Et),t=Zt.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Oi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fe(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fe(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?yr(this):Oi(this),this.readyState==3&&Fe(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,yr(this))},t.Na=function(c){this.g&&(this.response=c,yr(this))},t.ga=function(){this.g&&yr(this)};function yr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Oi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function Oi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ko(c){let y="";return le(c,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function Cs(c,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=ko(w),typeof c=="string"?w!=null&&ae(w):re(c,y,w))}function De(c){Et.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(De,Et);var dl=/^https?$/i,As=["POST","PUT"];t=De.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(W){ft(this,W);return}if(c=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)w.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())w.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(As,y,void 0)>=0)||A||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of w)this.g.setRequestHeader(W,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(W){ft(this,W)}};function ft(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,oi(c),ks(c)}function oi(c){c.A||(c.A=!0,Pt(c,"complete"),Pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Pt(this,"complete"),Pt(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?fl(this):this.Xa())},t.Xa=function(){fl(this)};function fl(c){if(c.h&&typeof o<"u"){if(c.v&&ai(c)==4)setTimeout(c.Ca.bind(c),0);else if(Pt(c,"readystatechange"),ai(c)==4){c.h=!1;try{const W=c.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=W===0){let ee=String(c.D).match(mr)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),A=!dl.test(ee?ee.toLowerCase():"")}w=A}if(w)Pt(c,"complete"),Pt(c,"success");else{c.o=6;try{var U=ai(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",oi(c)}}finally{ks(c)}}}}function ks(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,y||Pt(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ai(c){return c.g?c.g.readyState:0}t.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Bf(y)}};function pl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ml(c){const y={};c=(c.g&&ai(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(O(c[A]))continue;var w=wc(c[A]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=y[U]||[];y[U]=W,W.push(w)}J(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function gl(c){this.za=0,this.i=[],this.j=new Ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bs("baseRetryDelayMs",5e3,c),this.Za=bs("retryDelaySeedMs",1e4,c),this.Ta=bs("forwardChannelMaxRetries",2,c),this.va=bs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Pc(c&&c.concurrentRequestLimit),this.Ba=new qf,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=gl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,w,A){St(0),this.W=c,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=wl(this,null,this.W),li(this)};function Pe(c){if(sn(c),c.I==3){var y=c.V++,w=Gt(c.J);if(re(w,"SID",c.M),re(w,"RID",y),re(w,"TYPE","terminate"),Vi(c,w),y=new Un(c,c.j,y),y.M=2,y.A=We(Gt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.A,w=!0),w||(y.g=Tl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),xo(y)}Wn(c)}function bo(c){c.g&&(vl(c),c.g.cancel(),c.g=null)}function sn(c){bo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Lo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function li(c){if(!Sc(c.h)&&!c.m){c.m=!0;var y=c.Ea;q||C(),G||(q(),G=!0),N.add(y,c),c.D=0}}function kc(c,y){return Ic(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ws(f(c.Ea,c,y),Lc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Un(this,this.j,c);let W=this.o;if(this.U&&(W?(W=te(W),Ze(W,this.U)):W=this.U),this.u!==null||this.R||(U.J=W,W=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Rc(this,U,y),w=Gt(this.J),re(w,"RID",c),re(w,"CVER",22),this.G&&re(w,"X-HTTP-Session-Id",this.G),Vi(this,w),W&&(this.R?y="headers="+ae(ko(W))+"&"+y:this.u&&Cs(w,this.u,W)),Ri(this.h,U),this.Ra&&re(w,"TYPE","init"),this.S?(re(w,"$req",y),re(w,"SID","null"),U.U=!0,To(U,w,null)):To(U,w,y),this.I=2}}else this.I==3&&(c?bc(this,c):this.i.length==0||Sc(this.h)||bc(this))};function bc(c,y){var w;y?w=y.l:w=c.V++;const A=Gt(c.J);re(A,"SID",c.M),re(A,"RID",w),re(A,"AID",c.K),Vi(c,A),c.u&&c.o&&Cs(A,c.u,c.o),w=new Un(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Rc(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ri(c.h,w),To(w,A,y)}function Vi(c,y){c.H&&le(c.H,function(w,A){re(y,A,w)}),c.l&&le({},function(w,A){re(y,A,w)})}function Rc(c,y,w){w=Math.min(c.i.length,w);const A=c.l?f(c.l.Ka,c.l,c):null;e:{var U=c.i;let _e=-1;for(;;){const Oe=["count="+w];_e==-1?w>0?(_e=U[0].g,Oe.push("ofs="+_e)):_e=0:Oe.push("ofs="+_e);let je=!0;for(let ut=0;ut<w;ut++){var W=U[ut].g;const An=U[ut].map;if(W-=_e,W<0)_e=Math.max(0,U[ut].g-100),je=!1;else try{W="req"+W+"_"||"";try{var ee=An instanceof Map?An:Object.entries(An);for(const[$n,kn]of ee){let ci=kn;u(kn)&&(ci=yo(kn)),Oe.push(W+$n+"="+encodeURIComponent(ci))}}catch($n){throw Oe.push(W+"type="+encodeURIComponent("_badmap")),$n}}catch{A&&A(An)}}if(je){ee=Oe.join("&");break e}}ee=void 0}return c=c.i.splice(0,w),y.G=c,ee}function yl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;q||C(),G||(q(),G=!0),N.add(y,c),c.A=0}}function _l(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ws(f(c.Da,c),Lc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Ro(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ws(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),bo(this),Ro(this))};function vl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Ro(c){c.g=new Un(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Gt(c.na);re(y,"RID","rpc"),re(y,"SID",c.M),re(y,"AID",c.K),re(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&re(y,"TO",c.ia),re(y,"TYPE","xmlhttp"),Vi(c,y),c.u&&c.o&&Cs(y,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=We(Gt(y)),w.u=null,w.R=!0,bi(w,c)}t.Va=function(){this.C!=null&&(this.C=null,bo(this),_l(this),St(19))};function Lo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function gn(c,y){var w=null;if(c.g==y){Lo(c),vl(c),c.g=null;var A=2}else if(Ps(c.h,y))w=y.G,ul(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var U=c.D;A=vo(),Pt(A,new yc(A,w)),li(c)}else yl(c);else if(U=y.m,U==3||U==0&&y.X>0||!(A==1&&kc(c,y)||A==2&&_l(c)))switch(w&&w.length>0&&(y=c.h,y.i=y.i.concat(w)),U){case 1:ui(c,5);break;case 4:ui(c,10);break;case 3:ui(c,6);break;default:ui(c,2)}}}function Lc(c,y){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*y}function ui(c,y){if(c.j.info("Error code "+y),y==2){var w=f(c.bb,c),A=c.Ua;const U=!A;A=new Me(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sn(A,"https"),We(A),U?Ao(A.toString(),w):Ac(A.toString(),w)}else St(2);c.I=0,c.l&&c.l.pa(y),Wn(c),sn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Wn(c){if(c.I=0,c.ja=[],c.l){const y=cl(c.h);(y.length!=0||c.i.length!=0)&&(R(c.ja,y),R(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function wl(c,y,w){var A=w instanceof Me?Gt(w):new Me(w);if(A.g!="")y&&(A.g=y+"."+A.g),In(A,A.u);else{var U=a.location;A=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const W=new Me(null);A&&Sn(W,A),y&&(W.g=y),U&&In(W,U),w&&(W.h=w),A=W}return w=c.G,y=c.wa,w&&y&&re(A,w,y),re(A,"VER",c.ka),Vi(c,A),A}function Tl(c,y,w){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new De(new ye({ab:w})):new De(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function No(){}t=No.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mo(){}Mo.prototype.g=function(c,y){return new Dt(c,y)};function Dt(c,y){Et.call(this),this.g=new gl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!O(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new _r(this)}g(Dt,Et),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Pe(this.g)},Dt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=yo(c),c=w);y.i.push(new $f(y.Ya++,c)),y.I==3&&li(y)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Pe(this.g),delete this.g,Dt.Z.N.call(this)};function xl(c){vs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(xl,vs);function Nc(){_o.call(this),this.status=1}g(Nc,_o);function _r(c){this.g=c}g(_r,No),_r.prototype.ra=function(){Pt(this.g,"a")},_r.prototype.qa=function(c){Pt(this.g,new xl(c))},_r.prototype.pa=function(c){Pt(this.g,new Nc)},_r.prototype.oa=function(){Pt(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,kS=function(){return new Mo},AS=function(){return vo()},CS=ki,vg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wo.NO_ERROR=0,wo.TIMEOUT=8,wo.HTTP_ERROR=6,Lh=wo,_c.COMPLETE="complete",IS=_c,mc.EventType=hr,hr.OPEN="a",hr.CLOSE="b",hr.ERROR="c",hr.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Ul=mc,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,SS=De}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const Qw="@firebase/firestore",Xw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new s_("@firebase/firestore");function $o(){return no.logLevel}function ie(t,...e){if(no.logLevel<=Ae.DEBUG){const n=e.map(l_);no.debug(`Firestore (${Ka}): ${t}`,...n)}}function rr(t,...e){if(no.logLevel<=Ae.ERROR){const n=e.map(l_);no.error(`Firestore (${Ka}): ${t}`,...n)}}function Va(t,...e){if(no.logLevel<=Ae.WARN){const n=e.map(l_);no.warn(`Firestore (${Ka}): ${t}`,...n)}}function l_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,bS(t,i,n)}function bS(t,e,n){let i=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw rr(i),new Error(i)}function ze(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||bS(e,r,i)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class rD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sD{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new qs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string",31837,{l:i}),new RS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class oD{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aD{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new oD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Yw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Yw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=uD(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function ke(t,e){return t<e?-1:t>e?1:0}function wg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Hp(r)===Hp(o)?ke(r,o):Hp(r)?1:-1}return ke(t.length,e.length)}const cD=55296,hD=57343;function Hp(t){const e=t.charCodeAt(0);return e>=cD&&e<=hD}function Da(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="__name__";class pi{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return pi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=pi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return ke(e.length,n.length)}static compareSegments(e,n){const i=pi.isNumericId(e),r=pi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?pi.extractNumericId(e).compare(pi.extractNumericId(n)):wg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class et extends pi{construct(e,n,i){return new et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new et(n)}static emptyPath(){return new et([])}}const dD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends pi{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return dD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jw}static keyField(){return new Nt([Jw])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ue(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ue(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ue(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(et.fromString(e))}static fromName(e){return new de(et.fromString(e).popFirst(5))}static empty(){return new de(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e,n){if(!n)throw new ue(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pD(t,e,n,i){if(e===!0&&i===!0)throw new ue(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function e1(t){if(!de.isDocumentKey(t))throw new ue(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function c_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function va(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=c_(t);throw new ue(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,e){const n={typeString:t};return e&&(n.value=e),n}function nc(t,e){if(!LS(t))throw new ue(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ue(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=-62135596800,n1=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*n1);return new Qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<t1)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n1}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nc(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-t1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:_t("string",Qe._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Qe(0,0))}static max(){return new ve(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=-1;function mD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ve.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new is(r,de.empty(),e)}function gD(t){return new is(t.readTime,t.key,Vu)}class is{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new is(ve.min(),de.empty(),Vu)}static max(){return new is(ve.max(),de.empty(),Vu)}}function yD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==_D)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function wD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=-1;function wf(t){return t==null}function Pd(t){return t===0&&1/t==-1/0}function TD(t){return typeof t=="number"&&Number.isInteger(t)&&!Pd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="";function xD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=i1(e)),e=ED(t.get(n),e);return i1(e)}function ED(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case NS:n+="";break;default:n+=o}}return n}function i1(t){return t+NS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Lt.RED,this.left=r??Lt.EMPTY,this.right=o??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Lt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Lt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new s1(this.data.getIterator())}getIteratorFrom(e){return new s1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class s1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new xt(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new OS("Invalid base64 string: "+o):o}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const PD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=PD.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="server_timestamp",DS="__type__",jS="__previous_value__",zS="__local_write_time__";function d_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[DS])==null?void 0:i.stringValue)===VS}function Tf(t){const e=t.mapValue.fields[jS];return d_(e)?Tf(e):e}function Du(t){const e=rs(t.mapValue.fields[zS].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Sd="(default)";class ju{constructor(e,n){this.projectId=e,this.database=n||Sd}static empty(){return new ju("","")}get isDefaultDatabase(){return this.database===Sd}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="__type__",ID="__max__",ph={mapValue:{}},FS="__vector__",Id="value";function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?d_(t)?4:AD(t)?9007199254740991:CD(t)?10:11:me(28295,{value:t})}function Si(t,e){if(t===e)return!0;const n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Du(t).isEqual(Du(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=rs(r.timestampValue),u=rs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ss(r.bytesValue).isEqual(ss(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ct(r.geoPointValue.latitude)===ct(o.geoPointValue.latitude)&&ct(r.geoPointValue.longitude)===ct(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ct(r.integerValue)===ct(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ct(r.doubleValue),u=ct(o.doubleValue);return a===u?Pd(a)===Pd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Da(t.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(r1(a)!==r1(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Si(a[h],u[h])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function zu(t,e){return(t.values||[]).find(n=>Si(n,e))!==void 0}function ja(t,e){if(t===e)return 0;const n=os(t),i=os(e);if(n!==i)return ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ct(o.integerValue||o.doubleValue),h=ct(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return o1(t.timestampValue,e.timestampValue);case 4:return o1(Du(t),Du(e));case 5:return wg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=ss(o),h=ss(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=ke(u[f],h[f]);if(m!==0)return m}return ke(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=ke(ct(o.latitude),ct(a.latitude));return u!==0?u:ke(ct(o.longitude),ct(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return a1(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,T,R,b;const u=o.fields||{},h=a.fields||{},f=(v=u[Id])==null?void 0:v.arrayValue,m=(T=h[Id])==null?void 0:T.arrayValue,g=ke(((R=f==null?void 0:f.values)==null?void 0:R.length)||0,((b=m==null?void 0:m.values)==null?void 0:b.length)||0);return g!==0?g:a1(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===ph.mapValue&&a===ph.mapValue)return 0;if(o===ph.mapValue)return 1;if(a===ph.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const v=wg(h[g],m[g]);if(v!==0)return v;const T=ja(u[h[g]],f[m[g]]);if(T!==0)return T}return ke(h.length,m.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function o1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=rs(t),i=rs(e),r=ke(n.seconds,i.seconds);return r!==0?r:ke(n.nanos,i.nanos)}function a1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=ja(n[r],i[r]);if(o)return o}return ke(n.length,i.length)}function za(t){return Tg(t)}function Tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=rs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Tg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Tg(n.fields[a])}`;return r+"}"}(t.mapValue):me(61005,{value:t})}function Nh(t){switch(os(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(t);return e?16+Nh(e):16;case 5:return 2*t.stringValue.length;case 6:return ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Nh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return co(i.fields,(o,a)=>{r+=o.length+Nh(a)}),r}(t.mapValue);default:throw me(13486,{value:t})}}function xg(t){return!!t&&"integerValue"in t}function f_(t){return!!t&&"arrayValue"in t}function l1(t){return!!t&&"nullValue"in t}function u1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mh(t){return!!t&&"mapValue"in t}function CD(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[BS])==null?void 0:i.stringValue)===FS}function ou(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ou(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ou(t.arrayValue.values[n]);return e}return{...t}}function AD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ID}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=ou(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Mh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){co(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new On(ou(this.value))}}function US(t){const e=[];return co(t.fields,(n,i)=>{const r=new Nt([n]);if(Mh(i)){const o=US(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Wt(e,0,ve.min(),ve.min(),ve.min(),On.empty(),0)}static newFoundDocument(e,n,i,r){return new Wt(e,1,n,ve.min(),i,r,0)}static newNoDocument(e,n){return new Wt(e,2,n,ve.min(),ve.min(),On.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,ve.min(),ve.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.position=e,this.inclusive=n}}function c1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=de.comparator(de.fromName(a.referenceValue),n.key):i=ja(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function h1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n="asc"){this.field=e,this.dir=n}}function kD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{}class wt extends HS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new RD(e,n,i):n==="array-contains"?new MD(e,i):n==="in"?new OD(e,i):n==="not-in"?new VD(e,i):n==="array-contains-any"?new DD(e,i):new wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new LD(e,i):new ND(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ja(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends HS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ii(e,n)}matches(e){return WS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WS(t){return t.op==="and"}function $S(t){return bD(t)&&WS(t)}function bD(t){for(const e of t.filters)if(e instanceof Ii)return!1;return!0}function Eg(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+za(t.value);if($S(t))return t.filters.map(e=>Eg(e)).join(",");{const e=t.filters.map(n=>Eg(n)).join(",");return`${t.op}(${e})`}}function qS(t,e){return t instanceof wt?function(i,r){return r instanceof wt&&i.op===r.op&&i.field.isEqual(r.field)&&Si(i.value,r.value)}(t,e):t instanceof Ii?function(i,r){return r instanceof Ii&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&qS(a,r.filters[u]),!0):!1}(t,e):void me(19439)}function GS(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${za(n.value)}`}(t):t instanceof Ii?function(n){return n.op.toString()+" {"+n.getFilters().map(GS).join(" ,")+"}"}(t):"Filter"}class RD extends wt{constructor(e,n,i){super(e,n,i),this.key=de.fromName(i.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class LD extends wt{constructor(e,n){super(e,"in",n),this.keys=ZS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ND extends wt{constructor(e,n){super(e,"not-in",n),this.keys=ZS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ZS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>de.fromName(i.referenceValue))}class MD extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return f_(n)&&zu(n.arrayValue,this.value)}}class OD extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zu(this.value.arrayValue,n)}}class VD extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zu(this.value.arrayValue,n)}}class DD extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!f_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>zu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function d1(t,e=null,n=[],i=[],r=null,o=null,a=null){return new jD(t,e,n,i,r,o,a)}function p_(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Eg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),wf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>za(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>za(i)).join(",")),e.Te=n}return e.Te}function m_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!h1(t.startAt,e.startAt)&&h1(t.endAt,e.endAt)}function Pg(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zD(t,e,n,i,r,o,a,u){return new xf(t,e,n,i,r,o,a,u)}function g_(t){return new xf(t)}function f1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BD(t){return t.collectionGroup!==null}function au(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new xt(Nt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ad(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new Ad(Nt.keyField(),i))}return e.Ie}function vi(t){const e=we(t);return e.Ee||(e.Ee=FD(e,au(t))),e.Ee}function FD(t,e){if(t.limitType==="F")return d1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Ad(r.field,o)});const n=t.endAt?new Cd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Cd(t.startAt.position,t.startAt.inclusive):null;return d1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Sg(t,e,n){return new xf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ef(t,e){return m_(vi(t),vi(e))&&t.limitType===e.limitType}function KS(t){return`${p_(vi(t))}|lt:${t.limitType}`}function qo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>GS(r)).join(", ")}]`),wf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>za(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>za(r)).join(",")),`Target(${i})`}(vi(t))}; limitType=${t.limitType})`}function Pf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):de.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of au(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=c1(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,au(i),r)||i.endAt&&!function(a,u,h){const f=c1(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,au(i),r))}(t,e)}function UD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QS(t){return(e,n)=>{let i=!1;for(const r of au(t)){const o=HD(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function HD(t,e,n){const i=t.field.isKeyField()?de.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?ja(h,f):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return MS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new rt(de.comparator);function sr(){return WD}const XS=new rt(de.comparator);function Hl(...t){let e=XS;for(const n of t)e=e.insert(n.key,n);return e}function YS(t){let e=XS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Us(){return lu()}function JS(){return lu()}function lu(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const $D=new rt(de.comparator),qD=new xt(de.comparator);function be(...t){let e=qD;for(const n of t)e=e.add(n);return e}const GD=new xt(ke);function ZD(){return GD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(e)?"-0":e}}function eI(t){return{integerValue:""+t}}function KD(t,e){return TD(e)?eI(e):y_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this._=void 0}}function QD(t,e,n){return t instanceof kd?function(r,o){const a={fields:{[DS]:{stringValue:VS},[zS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&d_(o)&&(o=Tf(o)),o&&(a.fields[jS]=o),{mapValue:a}}(n,e):t instanceof Bu?nI(t,e):t instanceof Fu?iI(t,e):function(r,o){const a=tI(r,o),u=p1(a)+p1(r.Ae);return xg(a)&&xg(r.Ae)?eI(u):y_(r.serializer,u)}(t,e)}function XD(t,e,n){return t instanceof Bu?nI(t,e):t instanceof Fu?iI(t,e):n}function tI(t,e){return t instanceof bd?function(i){return xg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class kd extends Sf{}class Bu extends Sf{constructor(e){super(),this.elements=e}}function nI(t,e){const n=rI(e);for(const i of t.elements)n.some(r=>Si(r,i))||n.push(i);return{arrayValue:{values:n}}}class Fu extends Sf{constructor(e){super(),this.elements=e}}function iI(t,e){let n=rI(e);for(const i of t.elements)n=n.filter(r=>!Si(r,i));return{arrayValue:{values:n}}}class bd extends Sf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function p1(t){return ct(t.integerValue||t.doubleValue)}function rI(t){return f_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function YD(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Bu&&r instanceof Bu||i instanceof Fu&&r instanceof Fu?Da(i.elements,r.elements,Si):i instanceof bd&&r instanceof bd?Si(i.Ae,r.Ae):i instanceof kd&&r instanceof kd}(t.transform,e.transform)}class JD{constructor(e,n){this.version=e,this.transformResults=n}}class Xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class If{}function sI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new aI(t.key,Xi.none()):new ic(t.key,t.data,Xi.none());{const n=t.data,i=On.empty();let r=new xt(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new fo(t.key,i,new Yn(r.toArray()),Xi.none())}}function e4(t,e,n){t instanceof ic?function(r,o,a){const u=r.value.clone(),h=g1(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof fo?function(r,o,a){if(!Oh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=g1(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(oI(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function uu(t,e,n,i){return t instanceof ic?function(o,a,u,h){if(!Oh(o.precondition,a))return u;const f=o.value.clone(),m=y1(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof fo?function(o,a,u,h){if(!Oh(o.precondition,a))return u;const f=y1(o.fieldTransforms,h,a),m=a.data;return m.setAll(oI(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Oh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function t4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=tI(i.transform,r||null);o!=null&&(n===null&&(n=On.empty()),n.set(i.field,o))}return n||null}function m1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Da(i,r,(o,a)=>YD(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ic extends If{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fo extends If{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function oI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function g1(t,e,n){const i=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,XD(a,u,n[r]))}return i}function y1(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,QD(o,a,e))}return i}class aI extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n4 extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&e4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=JS();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=sI(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(n,i)=>m1(n,i))&&Da(this.baseMutations,e.baseMutations,(n,i)=>m1(n,i))}}class __{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return $D}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new __(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Le;function o4(t){switch(t){case X.OK:return me(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function lI(t){if(t===void 0)return rr("GRPC error has no .code"),X.UNKNOWN;switch(t){case mt.OK:return X.OK;case mt.CANCELLED:return X.CANCELLED;case mt.UNKNOWN:return X.UNKNOWN;case mt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case mt.INTERNAL:return X.INTERNAL;case mt.UNAVAILABLE:return X.UNAVAILABLE;case mt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case mt.NOT_FOUND:return X.NOT_FOUND;case mt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case mt.ABORTED:return X.ABORTED;case mt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case mt.DATA_LOSS:return X.DATA_LOSS;default:return me(39323,{code:t})}}(Le=mt||(mt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=new Qr([4294967295,4294967295],0);function _1(t){const e=a4().encode(t),n=new PS;return n.update(e),new Uint8Array(n.digest())}function v1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qr([n,i],0),new Qr([r,o],0)]}class v_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wl(`Invalid padding: ${n}`);if(i<0)throw new Wl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Qr.fromNumber(i)));return r.compare(l4)===1&&(r=new Qr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_1(e),[i,r]=v1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new v_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=_1(e),[i,r]=v1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Cf(ve.min(),r,new rt(ke),sr(),be())}}class rc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new rc(i,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class uI{constructor(e,n){this.targetId=e,this.Ce=n}}class cI{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class w1{constructor(){this.ve=0,this.Fe=T1(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),i=be();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:me(38017,{changeType:o})}}),new rc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=T1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class u4{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=mh(),this.He=mh(),this.Ye=new rt(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Pg(o))if(i===0){const a=new de(o.path);this.et(n,a,Wt.newNoDocument(a,ve.min()))}else ze(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=ss(i).toUint8Array()}catch(h){if(h instanceof OS)return Va("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new v_(a,r,o)}catch(h){return Va(h instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Pg(u.target)){const h=new de(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,Wt.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=be();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Cf(e,n,this.Ye,this.je,i);return this.je=sr(),this.Je=mh(),this.He=mh(),this.Ye=new rt(ke),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new w1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new w1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function mh(){return new rt(de.comparator)}function T1(){return new rt(de.comparator)}const c4={asc:"ASCENDING",desc:"DESCENDING"},h4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d4={and:"AND",or:"OR"};class f4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ig(t,e){return t.useProto3Json||wf(e)?e:{value:e}}function Rd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p4(t,e){return Rd(t,e.toTimestamp())}function wi(t){return ze(!!t,49232),ve.fromTimestamp(function(n){const i=rs(n);return new Qe(i.seconds,i.nanos)}(t))}function w_(t,e){return Cg(t,e).canonicalString()}function Cg(t,e){const n=function(r){return new et(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dI(t){const e=et.fromString(t);return ze(yI(e),10190,{key:e.toString()}),e}function Ag(t,e){return w_(t.databaseId,e.path)}function Wp(t,e){const n=dI(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(pI(n))}function fI(t,e){return w_(t.databaseId,e)}function m4(t){const e=dI(t);return e.length===4?et.emptyPath():pI(e)}function kg(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pI(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function x1(t,e,n){return{name:Ag(t,e),fields:n.value.mapValue.fields}}function g4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:me(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(ze(m===void 0||typeof m=="string",58123),Vt.fromBase64String(m||"")):(ze(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Vt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:lI(f.code);return new ue(m,f.message||"")}(a);n=new cI(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Wp(t,i.document.name),o=wi(i.document.updateTime),a=i.document.createTime?wi(i.document.createTime):ve.min(),u=new On({mapValue:{fields:i.document.fields}}),h=Wt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Vh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Wp(t,i.document),o=i.readTime?wi(i.readTime):ve.min(),a=Wt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Vh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Wp(t,i.document),o=i.removedTargetIds||[];n=new Vh([],o,r,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new s4(r,o),u=i.targetId;n=new uI(u,a)}}return n}function y4(t,e){let n;if(e instanceof ic)n={update:x1(t,e.key,e.value)};else if(e instanceof aI)n={delete:Ag(t,e.key)};else if(e instanceof fo)n={update:x1(t,e.key,e.data),updateMask:I4(e.fieldMask)};else{if(!(e instanceof n4))return me(16599,{Vt:e.type});n={verify:Ag(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof kd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Bu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Fu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof bd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw me(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:p4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(t,e.precondition)),n}function _4(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?wi(r.updateTime):wi(o);return a.isEqual(ve.min())&&(a=wi(o)),new JD(a,r.transformResults||[])}(n,e))):[]}function v4(t,e){return{documents:[fI(t,e.path)]}}function w4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=fI(t,r);const o=function(f){if(f.length!==0)return gI(Ii.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(v){return{field:Go(v.field),direction:E4(v.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Ig(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function T4(t){let e=m4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ze(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const v=mI(g);return v instanceof Ii&&$S(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(R){return new Ad(Zo(R.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(g){let v;return v=typeof g=="object"?g.value:g,wf(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(g){const v=!!g.before,T=g.values||[];return new Cd(T,v)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const v=!g.before,T=g.values||[];return new Cd(T,v)}(n.endAt)),zD(e,r,a,o,u,"F",h,f)}function x4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Zo(n.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zo(n.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zo(n.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zo(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(Zo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ii.create(n.compositeFilter.filters.map(i=>mI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function E4(t){return c4[t]}function P4(t){return h4[t]}function S4(t){return d4[t]}function Go(t){return{fieldPath:t.canonicalString()}}function Zo(t){return Nt.fromServerFormat(t.fieldPath)}function gI(t){return t instanceof wt?function(n){if(n.op==="=="){if(u1(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(l1(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u1(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(l1(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:P4(n.op),value:n.value}}}(t):t instanceof Ii?function(n){const i=n.getFilters().map(r=>gI(r));return i.length===1?i[0]:{compositeFilter:{op:S4(n.op),filters:i}}}(t):me(54877,{filter:t})}function I4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,i,r,o=ve.min(),a=ve.min(),u=Vt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.yt=e}}function A4(t){const e=T4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.Cn=new b4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(is.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class b4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new xt(et.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new xt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_I=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(_I,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ba(0)}static cr(){return new Ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="LruGarbageCollector",R4=1048576;function S1([t,e],[n,i]){const r=ke(t,n);return r===0?ke(e,i):r}class L4{constructor(e){this.Ir=e,this.buffer=new xt(S1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();S1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(P1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xa(n)?ie(P1,"Ignoring IndexedDB error during garbage collection: ",n):await Qa(n)}await this.Vr(3e5)})}}class M4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(vf.ce);const i=new L4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(E1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),$o()<=Ae.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function O4(t,e){return new M4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&uu(i.mutation,r,Yn.empty(),Qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,n,i=be()){const r=Us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Hl();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,be()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=sr();const a=lu(),u=function(){return lu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof fo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),uu(m.mutation,f,m.mutation.getFieldMask(),Qe.now())):a.set(f.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new D4(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=lu();let r=new rt((a,u)=>a-u),o=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||Yn.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||be()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=JS();m.forEach(v=>{if(!o.has(v)){const T=sI(n.get(v),i.get(v));T!==null&&g.set(v,T),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return de.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(Us());let u=Vu,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,be())).next(m=>({batchId:u,changes:YS(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(i=>{let r=Hl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Hl();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,v){return new xf(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Wt.newInvalidDocument(m)))});let u=Hl();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&uu(m.mutation,f,Yn.empty(),Qe.now()),Pf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:wi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:A4(r.bundledQuery),readTime:wi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.overlays=new rt(de.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Us();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=Us(),o=n.length+1,a=new de(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new rt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Us(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Us(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new r4(n,i));let o=this.qr.get(n);o===void 0&&(o=be(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.Qr=new xt(Ct.$r),this.Ur=new xt(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Ct(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Ct(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new de(new et([])),i=new Ct(n,e),r=new Ct(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new et([])),i=new Ct(n,e),r=new Ct(n,e+1);let o=be();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Ct(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Ct.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new i4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Ct(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?h_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ct(n,0),r=new Ct(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new xt(ke);return n.forEach(r=>{const o=new Ct(r,0),a=new Ct(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;de.isDocumentKey(o)||(o=o.child(""));const a=new Ct(new de(o),0);let u=new xt(ke);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new Ct(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Ct(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.ri=e,this.docs=function(){return new rt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let i=sr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Wt.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=sr();const a=n.path,u=new de(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||yD(gD(m),i)<=0||(r.has(m.key)||Pf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){me(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new W4(this)}getSize(e){return K.resolve(this.size)}}class W4 extends V4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.persistence=e,this.si=new ho(n=>p_(n),m_),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new T_,this.targetCount=0,this.ai=Ba.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ba(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.ui={},this.overlays={},this.ci=new vf(0),this.li=!1,this.li=!0,this.hi=new F4,this.referenceDelegate=e(this),this.Pi=new $4(this),this.indexManager=new k4,this.remoteDocumentCache=function(r){return new H4(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new C4(n),this.Ii=new z4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new U4(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new q4(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class q4 extends vD{constructor(e){super(),this.currentSequenceNumber=e}}class x_{constructor(e){this.persistence=e,this.Ri=new T_,this.Vi=null}static mi(e){return new x_(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=de.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ld{constructor(e,n){this.persistence=e,this.pi=new ho(i=>xD(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=O4(this,n)}static mi(e,n){return new Ld(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,ve.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=be(),r=be();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new E_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return zO()?8:wD(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new G4;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?($o()<=Ae.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):($o()<=Ae.DEBUG&&ie("QueryEngine","Query:",qo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?($o()<=Ae.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(n))):K.resolve())}ys(e,n){if(f1(n))return K.resolve(null);let i=vi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Sg(n,null,"F"),i=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=be(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Sg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return f1(n)||r.isEqual(ve.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):($o()<=Ae.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qo(n)),this.vs(e,a,n,mD(r,Vu)).next(u=>u))})}Ds(e,n){let i=new xt(QS(e));return n.forEach((r,o)=>{Pf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return $o()<=Ae.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",qo(n)),this.ps.getDocumentsMatchingQuery(e,n,is.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="LocalStore",K4=3e8;class Q4{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new rt(ke),this.xs=new ho(o=>p_(o),m_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function X4(t,e,n,i){return new Q4(t,e,n,i)}async function wI(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=be();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function Y4(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,v=g.keys();let T=K.resolve();return v.forEach(R=>{T=T.next(()=>m.getEntry(h,R)).next(b=>{const j=f.docVersions.get(R);ze(j!==null,48541),b.version.compareTo(j)<0&&(g.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),m.addEntry(b)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=be();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function TI(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function J4(t,e){const n=we(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const v=r.get(g);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Vt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(b,j,I){return b.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=K4?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(v,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let h=sr(),f=be();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(e3(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(ve.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function e3(t,e,n){let i=be(),r=be();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=sr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(ve.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):ie(P_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function t3(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=h_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function n3(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Vr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function bg(t,e,n){const i=we(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Xa(a))throw a;ie(P_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function I1(t,e,n){const i=we(t);let r=ve.min(),o=be();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=we(h),v=g.xs.get(m);return v!==void 0?K.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,m)}(i,a,vi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:ve.min(),n?o:be())).next(u=>(i3(i,UD(e),u),{documents:u,Qs:o})))}function i3(t,e,n){let i=t.Os.get(e)||ve.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class C1{constructor(){this.activeTargetIds=ZD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r3{constructor(){this.Mo=new C1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new C1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="ConnectivityMonitor";class k1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(A1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(A1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function Rg(){return gh===null?gh=function(){return 268435456+Math.round(2147483648*Math.random())}():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="RestConnection",o3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Sd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Rg(),u=this.zo(e,n.toUriEncodedString());ie($p,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=Ga(f);return this.Jo(e,u,h,i,m).then(g=>(ie($p,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Va($p,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ka}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=o3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class u3 extends a3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Rg();return new Promise((u,h)=>{const f=new SS;f.setWithCredentials(!0),f.listenOnce(IS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Lh.NO_ERROR:const g=f.getResponseJson();ie(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Lh.TIMEOUT:ie(Bt,`RPC '${e}' ${a} timed out`),h(new ue(X.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const v=f.getStatus();if(ie(Bt,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T==null?void 0:T.error;if(R&&R.status&&R.message){const b=function(I){const E=I.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(E)>=0?E:X.UNKNOWN}(R.status);h(new ue(b,R.message))}else h(new ue(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ue(X.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ie(Bt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);ie(Bt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Rg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=kS(),u=AS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ie(Bt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let v=!1,T=!1;const R=new l3({Yo:j=>{T?ie(Bt,`Not sending because RPC '${e}' stream ${r} is closed:`,j):(v||(ie(Bt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),v=!0),ie(Bt,`RPC '${e}' stream ${r} sending:`,j),g.send(j))},Zo:()=>g.close()}),b=(j,I,E)=>{j.listen(I,S=>{try{E(S)}catch(F){setTimeout(()=>{throw F},0)}})};return b(g,Ul.EventType.OPEN,()=>{T||(ie(Bt,`RPC '${e}' stream ${r} transport opened.`),R.o_())}),b(g,Ul.EventType.CLOSE,()=>{T||(T=!0,ie(Bt,`RPC '${e}' stream ${r} transport closed`),R.a_(),this.E_(g))}),b(g,Ul.EventType.ERROR,j=>{T||(T=!0,Va(Bt,`RPC '${e}' stream ${r} transport errored. Name:`,j.name,"Message:",j.message),R.a_(new ue(X.UNAVAILABLE,"The operation could not be completed")))}),b(g,Ul.EventType.MESSAGE,j=>{var I;if(!T){const E=j.data[0];ze(!!E,16349);const S=E,F=(S==null?void 0:S.error)||((I=S[0])==null?void 0:I.error);if(F){ie(Bt,`RPC '${e}' stream ${r} received error:`,F);const q=F.status;let G=function(k){const M=mt[k];if(M!==void 0)return lI(M)}(q),N=F.message;G===void 0&&(G=X.INTERNAL,N="Unknown error status: "+q+" with message "+F.message),T=!0,R.a_(new ue(G,N)),g.close()}else ie(Bt,`RPC '${e}' stream ${r} received:`,E),R.u_(E)}}),b(u,CS.STAT_EVENT,j=>{j.stat===vg.PROXY?ie(Bt,`RPC '${e}' stream ${r} detected buffering proxy`):j.stat===vg.NOPROXY&&ie(Bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function qp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return new f4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="PersistentStream";class EI{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new ue(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(b1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(b1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c3 extends EI{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=g4(this.serializer,e),i=function(o){if(!("targetChange"in o))return ve.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ve.min():a.readTime?wi(a.readTime):ve.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=kg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Pg(h)?{documents:v4(o,h)}:{query:w4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=hI(o,a.resumeToken);const f=Ig(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(ve.min())>0){u.readTime=Rd(o,a.snapshotVersion.toTimestamp());const f=Ig(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=x4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=kg(this.serializer),n.removeTarget=e,this.q_(n)}}class h3 extends EI{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_4(e.writeResults,e.commitTime),i=wi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=kg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>y4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{}class f3 extends d3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Cg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Cg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class p3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="RemoteStore";class m3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{po(this)&&(ie(io,"Restarting streams for network reachability change."),await async function(h){const f=we(h);f.Ea.add(4),await sc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await kf(f)}(this))})}),this.Ra=new p3(i,r)}}async function kf(t){if(po(t))for(const e of t.da)await e(!0)}async function sc(t){for(const e of t.da)await e(!1)}function PI(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),A_(n)?C_(n):Ya(n).O_()&&I_(n,e))}function S_(t,e){const n=we(t),i=Ya(n);n.Ia.delete(e),i.O_()&&SI(n,e),n.Ia.size===0&&(i.O_()?i.L_():po(n)&&n.Ra.set("Unknown"))}function I_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ya(t).Y_(e)}function SI(t,e){t.Va.Ue(e),Ya(t).Z_(e)}function C_(t){t.Va=new u4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ya(t).start(),t.Ra.ua()}function A_(t){return po(t)&&!Ya(t).x_()&&t.Ia.size>0}function po(t){return we(t).Ea.size===0}function II(t){t.Va=void 0}async function g3(t){t.Ra.set("Online")}async function y3(t){t.Ia.forEach((e,n)=>{I_(t,e)})}async function _3(t,e){II(t),A_(t)?(t.Ra.ha(e),C_(t)):t.Ra.set("Unknown")}async function v3(t,e,n){if(t.Ra.set("Online"),e instanceof cI&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){ie(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nd(t,i)}else if(e instanceof Vh?t.Va.Ze(e):e instanceof uI?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const i=await TI(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Vt.EMPTY_BYTE_STRING,m.snapshotVersion)),SI(o,h);const g=new Vr(m.target,h,f,m.sequenceNumber);I_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ie(io,"Failed to raise snapshot:",i),await Nd(t,i)}}async function Nd(t,e,n){if(!Xa(e))throw e;t.Ea.add(1),await sc(t),t.Ra.set("Offline"),n||(n=()=>TI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(io,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await kf(t)})}function CI(t,e){return e().catch(n=>Nd(t,n,e))}async function bf(t){const e=we(t),n=as(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:h_;for(;w3(e);)try{const r=await t3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,T3(e,r)}catch(r){await Nd(e,r)}AI(e)&&kI(e)}function w3(t){return po(t)&&t.Ta.length<10}function T3(t,e){t.Ta.push(e);const n=as(t);n.O_()&&n.X_&&n.ea(e.mutations)}function AI(t){return po(t)&&!as(t).x_()&&t.Ta.length>0}function kI(t){as(t).start()}async function x3(t){as(t).ra()}async function E3(t){const e=as(t);for(const n of t.Ta)e.ea(n.mutations)}async function P3(t,e,n){const i=t.Ta.shift(),r=__.from(i,e,n);await CI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await bf(t)}async function S3(t,e){e&&as(t).X_&&await async function(i,r){if(function(a){return o4(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();as(i).B_(),await CI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await bf(i)}}(t,e),AI(t)&&kI(t)}async function R1(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),ie(io,"RemoteStore received new credentials");const i=po(n);n.Ea.add(3),await sc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await kf(n)}async function I3(t,e){const n=we(t);e?(n.Ea.delete(2),await kf(n)):e||(n.Ea.add(2),await sc(n),n.Ra.set("Unknown"))}function Ya(t){return t.ma||(t.ma=function(n,i,r){const o=we(n);return o.sa(),new c3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:g3.bind(null,t),t_:y3.bind(null,t),r_:_3.bind(null,t),H_:v3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),A_(t)?C_(t):t.Ra.set("Unknown")):(await t.ma.stop(),II(t))})),t.ma}function as(t){return t.fa||(t.fa=function(n,i,r){const o=we(n);return o.sa(),new h3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:x3.bind(null,t),r_:S3.bind(null,t),ta:E3.bind(null,t),na:P3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await bf(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(io,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new k_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b_(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Xa(t))return new ue(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{static emptySet(e){return new wa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||de.comparator(n.key,i.key):(n,i)=>de.comparator(n.key,i.key),this.keyedMap=Hl(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new wa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.ga=new rt(de.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Fa{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Fa(e,n,wa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class A3{constructor(){this.queries=N1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=we(n),o=r.queries;r.queries=N1(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new ue(X.ABORTED,"Firestore shutting down"))}}function N1(){return new ho(t=>KS(t),Ef)}async function k3(t,e){const n=we(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new C3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=b_(a,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&R_(n)}async function b3(t,e){const n=we(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function R3(t,e){const n=we(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&R_(n)}function L3(t,e,n){const i=we(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function R_(t){t.Ca.forEach(e=>{e.next()})}var Lg,M1;(M1=Lg||(Lg={})).Ma="default",M1.Cache="cache";class N3{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Fa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.key=e}}class RI{constructor(e){this.key=e}}class M3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=QS(e),this.tu=new wa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new L1,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const v=r.get(m),T=Pf(this.query,g)?g:null,R=!!v&&this.mutatedKeys.has(v.key),b=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let j=!1;v&&T?v.data.isEqual(T.data)?R!==b&&(i.track({type:3,doc:T}),j=!0):this.su(v,T)||(i.track({type:2,doc:T}),j=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),j=!0):v&&!T&&(i.track({type:1,doc:v}),j=!0,(h||f)&&(u=!0)),j&&(T?(a=a.add(T),o=b?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,R){const b=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:j})}};return b(T)-b(R)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new Fa(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new L1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new RI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new bI(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const L_="SyncEngine";class O3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class V3{constructor(e){this.key=e,this.hu=!1}}class D3{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ho(u=>KS(u),Ef),this.Iu=new Map,this.Eu=new Set,this.du=new rt(de.comparator),this.Au=new Map,this.Ru=new T_,this.Vu={},this.mu=new Map,this.fu=Ba.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function j3(t,e,n=!0){const i=DI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await LI(i,e,n,!0),r}async function z3(t,e){const n=DI(t);await LI(n,e,!0,!1)}async function LI(t,e,n,i){const r=await n3(t.localStore,vi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await B3(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&PI(t.remoteStore,r),u}async function B3(t,e,n,i,r){t.pu=(g,v,T)=>async function(b,j,I,E){let S=j.view.ru(I);S.Cs&&(S=await I1(b.localStore,j.query,!1).then(({documents:N})=>j.view.ru(N,S)));const F=E&&E.targetChanges.get(j.targetId),q=E&&E.targetMismatches.get(j.targetId)!=null,G=j.view.applyChanges(S,b.isPrimaryClient,F,q);return V1(b,j.targetId,G.au),G.snapshot}(t,g,v,T);const o=await I1(t.localStore,e,!0),a=new M3(e,o.Qs),u=a.ru(o.documents),h=rc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);V1(t,n,f.au);const m=new O3(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function F3(t,e,n){const i=we(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Ef(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await bg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&S_(i.remoteStore,r.targetId),Ng(i,r.targetId)}).catch(Qa)):(Ng(i,r.targetId),await bg(i.localStore,r.targetId,!0))}async function U3(t,e){const n=we(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),S_(n.remoteStore,i.targetId))}async function H3(t,e,n){const i=Q3(t);try{const r=await function(a,u){const h=we(a),f=Qe.now(),m=u.reduce((T,R)=>T.add(R.key),be());let g,v;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let R=sr(),b=be();return h.Ns.getEntries(T,m).next(j=>{R=j,R.forEach((I,E)=>{E.isValidDocument()||(b=b.add(I))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,R)).next(j=>{g=j;const I=[];for(const E of u){const S=t4(E,g.get(E.key).overlayedDocument);S!=null&&I.push(new fo(E.key,S,US(S.value.mapValue),Xi.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,I,u)}).next(j=>{v=j;const I=j.applyToLocalDocumentSet(g,b);return h.documentOverlayCache.saveOverlays(T,j.batchId,I)})}).then(()=>({batchId:v.batchId,changes:YS(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new rt(ke)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await oc(i,r.changes),await bf(i.remoteStore)}catch(r){const o=b_(r,"Failed to persist write");n.reject(o)}}async function NI(t,e){const n=we(t);try{const i=await J4(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ze(a.hu,14607):r.removedDocuments.size>0&&(ze(a.hu,42227),a.hu=!1))}),await oc(n,i,e)}catch(i){await Qa(i)}}function O1(t,e,n){const i=we(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=we(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const v of g.Sa)v.va(u)&&(f=!0)}),f&&R_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function W3(t,e,n){const i=we(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new rt(de.comparator);a=a.insert(o,Wt.newNoDocument(o,ve.min()));const u=be().add(o),h=new Cf(ve.min(),new Map,new rt(ke),a,u);await NI(i,h),i.du=i.du.remove(o),i.Au.delete(e),N_(i)}else await bg(i.localStore,e,!1).then(()=>Ng(i,e,n)).catch(Qa)}async function $3(t,e){const n=we(t),i=e.batch.batchId;try{const r=await Y4(n.localStore,e);OI(n,i,null),MI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await oc(n,r)}catch(r){await Qa(r)}}async function q3(t,e,n){const i=we(t);try{const r=await function(a,u){const h=we(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(ze(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);OI(i,e,n),MI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await oc(i,r)}catch(r){await Qa(r)}}function MI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function OI(t,e,n){const i=we(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Ng(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||VI(t,i)})}function VI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(S_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),N_(t))}function V1(t,e,n){for(const i of n)i instanceof bI?(t.Ru.addReference(i.key,e),G3(t,i)):i instanceof RI?(ie(L_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||VI(t,i.key)):me(19791,{wu:i})}function G3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ie(L_,"New document in limbo: "+n),t.Eu.add(i),N_(t))}function N_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new de(et.fromString(e)),i=t.fu.next();t.Au.set(i,new V3(n)),t.du=t.du.insert(n,i),PI(t.remoteStore,new Vr(vi(g_(n.path)),i,"TargetPurposeLimboResolution",vf.ce))}}async function oc(t,e,n){const i=we(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=E_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=we(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,v=>K.forEach(v.Es,T=>m.persistence.referenceDelegate.addReference(g,v.targetId,T)).next(()=>K.forEach(v.ds,T=>m.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))}catch(g){if(!Xa(g))throw g;ie(P_,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const T=m.Ms.get(v),R=T.snapshotVersion,b=T.withLastLimboFreeSnapshotVersion(R);m.Ms=m.Ms.insert(v,b)}}}(i.localStore,o))}async function Z3(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){ie(L_,"User change. New user:",e.toKey());const i=await wI(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new ue(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await oc(n,i.Ls)}}function K3(t,e){const n=we(t),i=n.Au.get(e);if(i&&i.hu)return be().add(i.key);{let r=be();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function DI(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W3.bind(null,e),e.Pu.H_=R3.bind(null,e.eventManager),e.Pu.yu=L3.bind(null,e.eventManager),e}function Q3(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q3.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return X4(this.persistence,new Z4,e.initialUser,this.serializer)}Cu(e){return new vI(x_.mi,this.serializer)}Du(e){return new r3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class X3 extends Md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Ld,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new N4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new vI(i=>Ld.mi(i,n),this.serializer)}}class Mg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>O1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z3.bind(null,this.syncEngine),await I3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A3}()}createDatastore(e){const n=Af(e.databaseInfo.databaseId),i=function(o){return new u3(o)}(e.databaseInfo);return function(o,a,u,h){return new f3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new m3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>O1(this.syncEngine,n,0),function(){return k1.v()?new k1:new s3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new D3(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=we(r);ie(io,"RemoteStore shutting down."),o.Ea.add(5),await sc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Mg.provider={build:()=>new Mg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class J3{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ut.UNAUTHENTICATED,this.clientId=u_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ie(ls,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ie(ls,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=b_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Gp(t,e){t.asyncQueue.verifyOperationInProgress(),ie(ls,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await wI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function D1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await e5(t);ie(ls,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>R1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>R1(e.remoteStore,r)),t._onlineComponents=e}async function e5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(ls,"Using user provided OfflineComponentProvider");try{await Gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await Gp(t,new Md)}}else ie(ls,"Using default OfflineComponentProvider"),await Gp(t,new X3(void 0));return t._offlineComponents}async function jI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(ls,"Using user provided OnlineComponentProvider"),await D1(t,t._uninitializedComponentsProvider._online)):(ie(ls,"Using default OnlineComponentProvider"),await D1(t,new Mg))),t._onlineComponents}function t5(t){return jI(t).then(e=>e.syncEngine)}async function j1(t){const e=await jI(t),n=e.eventManager;return n.onListen=j3.bind(null,e.syncEngine),n.onUnlisten=F3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=z3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=U3.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="firestore.googleapis.com",B1=!0;class F1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BI,this.ssl=B1}else this.host=e.host,this.ssl=e.ssl??B1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_I;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<R4)throw new ue(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class M_{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new iD;switch(i.type){case"firstParty":return new aD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=z1.get(n);i&&(ie("ComponentProvider","Removing Datastore"),z1.delete(n),i.terminate())}(this),Promise.resolve()}}function n5(t,e,n,i={}){var f;t=va(t,M_);const r=Ga(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(gS(`https://${u}`),yS("Firestore",!0)),o.host!==BI&&o.host!==u&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!eo(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ut.MOCK_USER;else{m=bO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ue(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ut(v)}t._authCredentials=new rD(new RS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Rf(this.firestore,e,this._query)}}class kt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(nc(n,kt._jsonSchema))return new kt(e,i||null,new de(et.fromString(n.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:_t("string",kt._jsonSchemaVersion),referencePath:_t("string")};class Uu extends Rf{constructor(e,n,i){super(e,n,g_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new de(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function Zp(t,e,...n){if(t=Fn(t),arguments.length===1&&(e=u_.newId()),fD("doc","path",e),t instanceof M_){const i=et.fromString(e,...n);return e1(i),new kt(t,null,new de(i))}{if(!(t instanceof kt||t instanceof Uu))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return e1(i),new kt(t.firestore,t instanceof Uu?t.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="AsyncQueue";class H1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xI(this,"async_queue_retry"),this._c=()=>{const i=qp();i&&ie(U1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=qp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new qs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xa(e))throw e;ie(U1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",W1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=k_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&me(47125,{Pc:W1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function W1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Od extends M_{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new H1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new H1(e),this._firestoreClient=void 0,await e}}}function i5(t,e){const n=typeof t=="object"?t:TS(),i=typeof t=="string"?t:Sd,r=a_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=AO("firestore");o&&n5(r,...o)}return r}function FI(t){if(t._terminated)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||r5(t),t._firestoreClient}function r5(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new SD(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,zI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new J3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Vt.fromBase64String(e))}catch(n){throw new ue(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nc(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:_t("string",Vn._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(nc(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:_t("string",Ti._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nc(e,xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new xi(e.vectorValues);throw new ue(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xi._jsonSchemaVersion="firestore/vectorValue/1.0",xi._jsonSchema={type:_t("string",xi._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=/^__.*__$/;class o5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new ic(e,this.data,n,this.fieldTransforms)}}function HI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class V_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new V_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(HI(this.Ac)&&s5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class a5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Af(e)}Cc(e,n,i,r=!1){return new V_({Ac:e,methodName:n,Dc:i,path:Nt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function l5(t){const e=t._freezeSettings(),n=Af(t._databaseId);return new a5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function u5(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);GI("Data must be an object, but it was:",a,i);const u=$I(i,a);let h,f;if(o.merge)h=new Yn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const v=c5(e,g,n);if(!a.contains(v))throw new ue(X.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);d5(m,v)||m.push(v)}h=new Yn(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new o5(new On(u),h,f)}function WI(t,e){if(qI(t=Fn(t)))return GI("Unsupported field value:",e,t),$I(t,e);if(t instanceof UI)return function(i,r){if(!HI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=WI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Fn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return KD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Qe.fromDate(i);return{timestampValue:Rd(r.serializer,o)}}if(i instanceof Qe){const o=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rd(r.serializer,o)}}if(i instanceof Ti)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vn)return{bytesValue:hI(r.serializer,i._byteString)};if(i instanceof kt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:w_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xi)return function(a,u){return{mapValue:{fields:{[BS]:{stringValue:FS},[Id]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return y_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${c_(i)}`)}(t,e)}function $I(t,e){const n={};return MS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(i,r)=>{const o=WI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function qI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Ti||t instanceof Vn||t instanceof kt||t instanceof UI||t instanceof xi)}function GI(t,e,n){if(!qI(n)||!LS(n)){const i=c_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function c5(t,e,n){if((e=Fn(e))instanceof O_)return e._internalPath;if(typeof e=="string")return ZI(t,e);throw Vd("Field path arguments must be of type string or ",t,!1,void 0,n)}const h5=new RegExp("[~\\*/\\[\\]]");function ZI(t,e,n){if(e.search(h5)>=0)throw Vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new O_(...e.split("."))._internalPath}catch{throw Vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new ue(X.INVALID_ARGUMENT,u+t+h)}function d5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(QI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class f5 extends KI{data(){return super.data()}}function QI(t,e){return typeof e=="string"?ZI(t,e):e instanceof O_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m5{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return co(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Id].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>ct(a.doubleValue));return new xi(n)}convertGeoPoint(e){return new Ti(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Tf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=et.fromString(e);ze(yI(i),9688,{name:e});const r=new ju(i.get(1),i.get(3)),o=new de(i.popFirst(5));return r.isEqual(n)||rr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class $l{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends KI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(QI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gs._jsonSchema={type:_t("string",Gs._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class Dh extends Gs{data(e={}){return super.data(e)}}class Ta{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new $l(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Dh(this._firestore,this._userDataWriter,i.key,i,new $l(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Dh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new $l(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Dh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new $l(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:y5(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=u_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function y5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:_t("string",Ta._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class XI extends m5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function q1(t,e,n){t=va(t,kt);const i=va(t.firestore,Od),r=g5(t.converter,e,n);return v5(i,[u5(l5(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Xi.none())])}function _5(t,...e){var h,f,m;t=Fn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||$1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if($1(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof kt)a=va(t.firestore,Od),u=g_(t._key.path),o={next:g=>{e[i]&&e[i](w5(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=va(t,Rf);a=va(g.firestore,Od),u=g._query;const v=new XI(a);o={next:T=>{e[i]&&e[i](new Ta(a,v,g,T))},error:e[i+1],complete:e[i+2]},p5(t._query)}return function(v,T,R,b){const j=new Y3(b),I=new N3(T,j,R);return v.asyncQueue.enqueueAndForget(async()=>k3(await j1(v),I)),()=>{j.Nu(),v.asyncQueue.enqueueAndForget(async()=>b3(await j1(v),I))}}(FI(a),u,r,o)}function v5(t,e){return function(i,r){const o=new qs;return i.asyncQueue.enqueueAndForget(async()=>H3(await t5(i),r,o)),o.promise}(FI(t),e)}function w5(t,e,n){const i=n.docs.get(e._key),r=new XI(t);return new Gs(t,r,e._key,i,new $l(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Ka=r})(Za),Oa(new to("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Od(new sD(i.getProvider("auth-internal")),new lD(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ue(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Kr(Qw,Xw,e),Kr(Qw,Xw,"esm2020")})();function YI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T5=YI,JI=new ec("auth","Firebase",YI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new s_("@firebase/auth");function x5(t,...e){Dd.logLevel<=Ae.WARN&&Dd.warn(`Auth (${Za}): ${t}`,...e)}function jh(t,...e){Dd.logLevel<=Ae.ERROR&&Dd.error(`Auth (${Za}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,...e){throw D_(t,...e)}function Ei(t,...e){return D_(t,...e)}function eC(t,e,n){const i={...T5(),[e]:n};return new ec("auth","Firebase",i).create(e,{appName:t.name})}function Xr(t){return eC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return JI.create(t,...e)}function ge(t,e,...n){if(!t)throw D_(e,...n)}function qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jh(e),new Error(e)}function ar(t,e){t||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function E5(){return G1()==="http:"||G1()==="https:"}function G1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E5()||VO()||"connection"in navigator)?navigator.onLine:!0}function S5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=NO()||DO()}get(){return P5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A5=new ac(3e4,6e4);function Lf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ja(t,e,n,i,r={}){return nC(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=tc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return OO()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Ga(t.emulatorConfig.host)&&(f.credentials="include"),tC.fetch()(await rC(t,t.config.apiHost,n,u),f)})}async function nC(t,e,n){t._canInitEmulator=!1;const i={...I5,...e};try{const r=new k5(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw yh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw yh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw yh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw yh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw eC(t,m,f);or(t,m)}}catch(r){if(r instanceof ur)throw r;or(t,"network-request-failed",{message:String(r)})}}async function iC(t,e,n,i,r={}){const o=await Ja(t,e,n,i,r);return"mfaPendingCredential"in o&&or(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function rC(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?j_(t.config,r):`${t.config.apiScheme}://${r}`;return C5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class k5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),A5.get())})}}function yh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ei(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(t,e){return Ja(t,"POST","/v1/accounts:delete",e)}async function jd(t,e){return Ja(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function R5(t,e=!1){const n=Fn(t),i=await n.getIdToken(e),r=z_(i);ge(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:cu(Kp(r.auth_time)),issuedAtTime:cu(Kp(r.iat)),expirationTime:cu(Kp(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Kp(t){return Number(t)*1e3}function z_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const r=dS(n);return r?JSON.parse(r):(jh("Failed to decode base64 JWT payload"),null)}catch(r){return jh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Z1(t){const e=z_(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ur&&L5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function L5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zd(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Hu(t,jd(e,{idToken:n}));ge(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?sC(r.providerUserInfo):[],a=O5(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Vg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function M5(t){const e=Fn(t);await zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O5(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function sC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5(t,e){const n=await nC(t,{},async()=>{const i=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await rC(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&Ga(t.emulatorConfig.host)&&(h.credentials="include"),tC.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D5(t,e){return Ja(t,"POST","/v2/accounts:revokeToken",Lf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Z1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await V5(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new xa;return i&&(ge(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ge(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ge(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new N5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Vg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return R5(this,e)}reload(){return M5(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await Hu(this,b5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:T,providerData:R,stsTokenManager:b}=n;ge(g&&b,e,"internal-error");const j=xa.fromJSON(this.name,b);ge(typeof g=="string",e,"internal-error"),Tr(i,e.name),Tr(r,e.name),ge(typeof v=="boolean",e,"internal-error"),ge(typeof T=="boolean",e,"internal-error"),Tr(o,e.name),Tr(a,e.name),Tr(u,e.name),Tr(h,e.name),Tr(f,e.name),Tr(m,e.name);const I=new Jn({uid:g,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:j,createdAt:f,lastLoginAt:m});return R&&Array.isArray(R)&&(I.providerData=R.map(E=>({...E}))),h&&(I._redirectEventId=h),I}static async _fromIdTokenResponse(e,n,i=!1){const r=new xa;r.updateFromServerResponse(n);const o=new Jn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await zd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ge(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?sC(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new xa;u.updateFromIdToken(i);const h=new Jn({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Vg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new Map;function Gi(t){ar(t instanceof Function,"Expected a class definition");let e=K1.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,K1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oC.type="NONE";const Q1=oC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ea{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=zh(this.userKey,r.apiKey,o),this.fullPersistenceKey=zh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jd(this.auth,{idToken:e}).catch(()=>{});return n?Jn._fromGetAccountInfoResponse(this.auth,n,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ea(Gi(Q1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Gi(Q1);const a=zh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const v=await jd(e,{idToken:m}).catch(()=>{});if(!v)break;g=await Jn._fromGetAccountInfoResponse(e,v,m)}else g=Jn._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ea(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ea(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dC(e))return"Blackberry";if(fC(e))return"Webos";if(lC(e))return"Safari";if((e.includes("chrome/")||uC(e))&&!e.includes("edge/"))return"Chrome";if(hC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function aC(t=qt()){return/firefox\//i.test(t)}function lC(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uC(t=qt()){return/crios\//i.test(t)}function cC(t=qt()){return/iemobile/i.test(t)}function hC(t=qt()){return/android/i.test(t)}function dC(t=qt()){return/blackberry/i.test(t)}function fC(t=qt()){return/webos/i.test(t)}function B_(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function j5(t=qt()){var e;return B_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function z5(){return jO()&&document.documentMode===10}function pC(t=qt()){return B_(t)||hC(t)||fC(t)||dC(t)||/windows phone/i.test(t)||cC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e=[]){let n;switch(t){case"Browser":n=X1(qt());break;case"Worker":n=`${X1(qt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Za}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5(t,e={}){return Ja(t,"GET","/v2/passwordPolicy",Lf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=6;class H5{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??U5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y1(this),this.idTokenSubscription=new Y1(this),this.beforeStateQueue=new B5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jd(this,{idToken:e}),i=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Xn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Xr(this));const n=e?Fn(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F5(this),n=new H5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ec("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await D5(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gi(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&x5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Nf(t){return Fn(t)}class Y1{constructor(e){this.auth=e,this.observer=null,this.addObserver=qO(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $5(t){F_=t}function q5(t){return F_.loadJS(t)}function G5(){return F_.gapiScript}function Z5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(t,e){const n=a_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(eo(o,e??{}))return r;or(r,"already-initialized")}return n.initialize({options:e})}function Q5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function X5(t,e,n){const i=Nf(t);ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=gC(e),{host:a,port:u}=Y5(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ge(eo(f,i.config.emulator)&&eo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Ga(a)?(gS(`${o}//${a}${h}`),yS("Auth",!0)):J5()}function gC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y5(t){const e=gC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:J1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:J1(a)}}}function J1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function J5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t,e){return iC(t,"POST","/v1/accounts:signInWithIdp",Lf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej="http://localhost";class ro extends yC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new ro(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Pa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Pa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pa(e,n)}buildRequest(){const e={requestUri:ej,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends _C{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends lc{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ro._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return br.credential(n,i)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends lc{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends lc{constructor(){super("twitter.com")}static credential(e,n){return ro._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Lr.credential(n,i)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(t,e){return iC(t,"POST","/v1/accounts:signUp",Lf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Jn._fromIdTokenResponse(e,i,r),a=eT(i);return new us({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=eT(i);return new us({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function eT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(t){var r;if(Xn(t.app))return Promise.reject(Xr(t));const e=Nf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new us({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await tj(e,{returnSecureToken:!0}),i=await us._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends ur{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Bd(e,n,i,r)}}function vC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(t,o,e,i):o})}async function ij(t,e,n=!1){const i=await Hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return us._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e,n=!1){const{auth:i}=t;if(Xn(i.app))return Promise.reject(Xr(i));const r="reauthenticate";try{const o=await Hu(t,vC(i,r,e,t),n);ge(o.idToken,i,"internal-error");const a=z_(o.idToken);ge(a,i,"internal-error");const{sub:u}=a;return ge(t.uid===u,i,"user-mismatch"),us._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&or(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(t,e,n=!1){if(Xn(t.app))return Promise.reject(Xr(t));const i="signIn",r=await vC(t,i,e),o=await us._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function oj(t,e,n,i){return Fn(t).onIdTokenChanged(e,n,i)}function aj(t,e,n){return Fn(t).beforeAuthStateChanged(e,n)}function lj(t,e,n,i){return Fn(t).onAuthStateChanged(e,n,i)}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=1e3,cj=10;class TC extends wC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);z5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,cj):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},uj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TC.type="LOCAL";const hj=TC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC extends wC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xC.type="SESSION";const EC=xC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Mf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await dj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=U_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function pj(t){Pi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function mj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function yj(){return PC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="firebaseLocalStorageDb",_j=1,Ud="firebaseLocalStorage",IC="fbase_key";class uc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Of(t,e){return t.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function vj(){const t=indexedDB.deleteDatabase(SC);return new uc(t).toPromise()}function Dg(){const t=indexedDB.open(SC,_j);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ud,{keyPath:IC})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ud)?e(i):(i.close(),await vj(),e(await Dg()))})})}async function tT(t,e,n){const i=Of(t,!0).put({[IC]:e,value:n});return new uc(i).toPromise()}async function wj(t,e){const n=Of(t,!1).get(e),i=await new uc(n).toPromise();return i===void 0?null:i.value}function nT(t,e){const n=Of(t,!0).delete(e);return new uc(n).toPromise()}const Tj=800,xj=3;class CC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>xj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mf._getInstance(yj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await mj(),!this.activeServiceWorker)return;this.sender=new fj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dg();return await tT(e,Fd,"1"),await nT(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>tT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>wj(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Of(r,!1).getAll();return new uc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CC.type="LOCAL";const Ej=CC;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t,e){return e?Gi(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends yC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Sj(t){return sj(t.auth,new H_(t),t.bypassAuthState)}function Ij(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),rj(n,new H_(t),t.bypassAuthState)}async function Cj(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),ij(n,new H_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sj;case"linkViaPopup":case"linkViaRedirect":return Cj;case"reauthViaPopup":case"reauthViaRedirect":return Ij;default:or(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new ac(2e3,1e4);class da extends AC{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,da.currentPopupAction&&da.currentPopupAction.cancel(),da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=U_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Aj.get())};e()}}da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="pendingRedirect",Bh=new Map;class bj extends AC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const i=await Rj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rj(t,e){const n=Mj(e),i=Nj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Lj(t,e){Bh.set(t._key(),e)}function Nj(t){return Gi(t._redirectPersistence)}function Mj(t){return zh(kj,t.config.apiKey,t.name)}async function Oj(t,e,n=!1){if(Xn(t.app))return Promise.reject(Xr(t));const i=Nf(t),r=Pj(i,e),a=await new bj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=10*60*1e3;class Dj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!kC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ei(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vj&&this.cachedEventUids.clear(),this.cachedEventUids.has(iT(e))}saveEventToCache(e){this.cachedEventUids.add(iT(e)),this.lastProcessedEventTime=Date.now()}}function iT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e={}){return Ja(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fj=/^https?/;async function Uj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zj(t);for(const n of e)try{if(Hj(n))return}catch{}or(t,"unauthorized-domain")}function Hj(t){const e=Og(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Fj.test(n))return!1;if(Bj.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=new ac(3e4,6e4);function rT(){const t=Pi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $j(t){return new Promise((e,n)=>{var r,o,a;function i(){rT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rT(),n(Ei(t,"network-request-failed"))},timeout:Wj.get()})}if((o=(r=Pi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Pi().gapi)!=null&&a.load)i();else{const u=Z5("iframefcb");return Pi()[u]=()=>{gapi.load?i():n(Ei(t,"network-request-failed"))},q5(`${G5()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Fh=null,e})}let Fh=null;function qj(t){return Fh=Fh||$j(t),Fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new ac(5e3,15e3),Zj="__/auth/iframe",Kj="emulator/auth/iframe",Qj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yj(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?j_(e,Kj):`https://${t.config.authDomain}/${Zj}`,i={apiKey:e.apiKey,appName:t.name,v:Za},r=Xj.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${tc(i).slice(1)}`}async function Jj(t){const e=await qj(t),n=Pi().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:Yj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qj,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Ei(t,"network-request-failed"),u=Pi().setTimeout(()=>{o(a)},Gj.get());function h(){Pi().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tz=500,nz=600,iz="_blank",rz="http://localhost";class sT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sz(t,e,n,i=tz,r=nz){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...ez,width:i.toString(),height:r.toString(),top:o,left:a},f=qt().toLowerCase();n&&(u=uC(f)?iz:n),aC(f)&&(e=e||rz,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[T,R])=>`${v}${T}=${R},`,"");if(j5(f)&&u!=="_self")return oz(e||"",u),new sT(null);const g=window.open(e||"",u,m);ge(g,t,"popup-blocked");try{g.focus()}catch{}return new sT(g)}function oz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az="__/auth/handler",lz="emulator/auth/handler",uz=encodeURIComponent("fac");async function oT(t,e,n,i,r,o){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Za,eventId:r};if(e instanceof _C){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",$O(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof lc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${uz}=${encodeURIComponent(h)}`:"";return`${cz(t)}?${tc(u).slice(1)}${f}`}function cz({config:t}){return t.emulator?j_(t,lz):`https://${t.authDomain}/${az}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="webStorageSupport";class hz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EC,this._completeRedirectFn=Oj,this._overrideRedirectResult=Lj}async _openPopup(e,n,i,r){var a;ar((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await oT(e,n,i,Og(),r);return sz(e,o,U_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await oT(e,n,i,Og(),r);return pj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ar(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Jj(e),i=new Dj(e);return n.register("authEvent",r=>(ge(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qp,{type:Qp},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[Qp];o!==void 0&&n(!!o),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Uj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pC()||lC()||B_()}}const dz=hz;var aT="@firebase/auth",lT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mz(t){Oa(new to("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ge(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mC(t)},f=new W5(i,r,o,h);return Q5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Oa(new to("auth-internal",e=>{const n=Nf(e.getProvider("auth").getImmediate());return(i=>new fz(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(aT,lT,pz(t)),Kr(aT,lT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz=5*60,yz=mS("authIdTokenMaxAge")||gz;let uT=null;const _z=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>yz)return;const r=n==null?void 0:n.token;uT!==r&&(uT=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function vz(t=TS()){const e=a_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=K5(t,{popupRedirectResolver:dz,persistence:[Ej,hj,EC]}),i=mS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=_z(o.toString());aj(n,a,()=>a(n.currentUser)),oj(n,u=>a(u))}}const r=fS("auth");return r&&X5(n,`http://${r}`),n}function wz(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}$5({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Ei("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",wz().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mz("Browser");var Tz="firebase",xz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(Tz,xz,"app");const Ez={apiKey:"AIzaSyAz0HX_QrTS2uB7hVXw86RUlXoB6jsIReA",authDomain:"skan-2f8d5.firebaseapp.com",projectId:"skan-2f8d5",storageBucket:"skan-2f8d5.firebasestorage.app",messagingSenderId:"839263869032",appId:"1:839263869032:web:35b2bf59f90430075a83dd",measurementId:"G-JZSJKTE4LL"},bC=wS(Ez),Xp=i5(bC),cT=vz(bC),jg={vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},Pz="vysocany",RC=jg[Pz].center,LC=15,Sz=13,Iz=18,hT={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},Yr=["red","blue"],Cz={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},dT=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],fT=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function W_(t){var e;return((e=Cz[t.size])==null?void 0:e.points)||100}function Az(t,e,n=.001,i=16){const r=[];for(let o=0;o<i;o++){const a=o/i*2*Math.PI;r.push([t+n*Math.cos(a),e+n*1.6*Math.sin(a)])}return r}function kz(t){if(t.length<3)return t;let e=0;for(let o=1;o<t.length;o++)(t[o][0]<t[e][0]||t[o][0]===t[e][0]&&t[o][1]<t[e][1])&&(e=o);[t[0],t[e]]=[t[e],t[0]];const n=t[0],i=t.slice(1).sort((o,a)=>{const u=Math.atan2(o[1]-n[1],o[0]-n[0]),h=Math.atan2(a[1]-n[1],a[0]-n[0]);return u-h}),r=[n];for(const o of i){for(;r.length>1;){const a=r[r.length-2],u=r[r.length-1];if((u[0]-a[0])*(o[1]-a[1])-(u[1]-a[1])*(o[0]-a[0])<=0)r.pop();else break}r.push(o)}return r}function bz(t,e){if(t.length<3)return t;const n=t.reduce((r,o)=>r+o[0],0)/t.length,i=t.reduce((r,o)=>r+o[1],0)/t.length;return t.map(r=>{const o=r[0]-n,a=r[1]-i,u=Math.sqrt(o*o+a*a);if(u===0)return r;const h=(u+e)/u;return[n+o*h,i+a*h]})}function Rz(t){const e={};Yr.forEach(i=>e[i]=[]);const n={};return Yr.forEach(i=>n[i]=[]),t.forEach(i=>{i.capturedBy&&n[i.capturedBy]&&n[i.capturedBy].push(i)}),Yr.forEach(i=>{const r=n[i];if(r.length!==0)if(r.length===1){const o=r[0];e[i].push({polygon:Az(o.location[0],o.location[1],.0015,12),points:r})}else{const o=r.map(h=>h.location),a=kz([...o]),u=bz(a,.001);e[i].push({polygon:u,points:r})}}),e}function Ko(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function NC(t){const e={};return Yr.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=W_(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const MC=z.createContext(null),xr={player:"streetart-ctf-player",captures:"streetart-ctf-captures"},Yp="captures",He={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function Jp(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function em(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function Lz({children:t}){const[e,n]=z.useState(null),[i,r]=z.useState(!0),[o,a]=z.useState(()=>Jp(xr.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]})),[u,h]=z.useState(()=>{const k=Jp(xr.captures,{});return fT.map(M=>({...M,capturedBy:k[M.id]||null}))}),[f,m]=z.useState(null),[g,v]=z.useState(!1),[T,R]=z.useState(null);z.useEffect(()=>{const k=lj(cT,M=>{M?(n(M),a(V=>({...V,id:M.uid}))):nj(cT).catch(V=>{console.warn("Firebase auth failed, using offline mode:",V),r(!1)})});return()=>k()},[]),z.useEffect(()=>{if(!e)return;const k=Zp(Xp,Yp,"global"),M=_5(k,V=>{if(V.exists()){const B=V.data();h(O=>O.map(oe=>({...oe,capturedBy:B[oe.id]||null}))),em(xr.captures,B)}},V=>{console.warn("Firestore sync error:",V),r(!1)});return()=>M()},[e]),z.useEffect(()=>{em(xr.player,o)},[o]);const b=z.useCallback(async k=>{if(!(!e||!i))try{await q1(Zp(Xp,Yp,"global"),k,{merge:!0})}catch(M){console.warn("Failed to sync to Firebase:",M)}},[e,i]),j=NC(u),I=z.useCallback(k=>{Yr.includes(k)&&a(M=>({...M,team:k}))},[]),E=z.useCallback((k,M,V=50)=>{let B=null,O=1/0;return u.forEach(oe=>{const Ve=(oe.location[0]-k)*111e3,xe=(oe.location[1]-M)*111e3*Math.cos(k*Math.PI/180),Ge=Math.sqrt(Ve*Ve+xe*xe);Ge<O&&Ge<=V&&(O=Ge,B={...oe,distance:Math.round(Ge)})}),B},[u]),S=z.useCallback(k=>{if(!o.team)return{success:!1,message:"Join a team first!"};const M=u.find(oe=>oe.id===k);if(!M)return{success:!1,message:"Art not found"};if(M.capturedBy===o.team)return{success:!1,message:"Already yours!"};if(M.status==="ghost")return{success:!1,message:"This art no longer exists"};const V=W_(M),B=M.capturedBy;h(oe=>oe.map(Ve=>Ve.id===k?{...Ve,capturedBy:o.team}:Ve)),a(oe=>({...oe,score:oe.score+V,capturedArt:[...oe.capturedArt.filter(Ve=>Ve!==k),k]})),b({[k]:o.team});const O=Jp(xr.captures,{});return em(xr.captures,{...O,[k]:o.team}),{success:!0,art:M,points:V,previousTeam:B,message:B?`Stolen from ${B}!`:"Captured!"}},[o.team,u,b]),F=z.useCallback(async(k,M)=>{v(!0);const V=E(M.lat,M.lng,100);if(!V){v(!1),m({success:!1,message:"No street art nearby. Get closer!"});return}R({art:V,photo:k,location:M}),v(!1)},[E]),q=z.useCallback(()=>{if(!T)return;const k=S(T.art.id);m(k),R(null)},[T,S]),G=z.useCallback(()=>{R(null),m(null)},[]),N=z.useCallback(async()=>{if(localStorage.removeItem(xr.player),localStorage.removeItem(xr.captures),e&&i)try{await q1(Zp(Xp,Yp,"global"),{})}catch(k){console.warn("Failed to reset Firebase:",k)}a({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),h(fT.map(k=>({...k,capturedBy:null}))),m(null),R(null)},[e,i]),C={player:o,artPoints:u,teamScores:j,scanResult:f,isScanning:g,pendingCapture:T,isOnline:i,teams:Yr,joinTeam:I,captureArt:S,startCapture:F,confirmCapture:q,cancelCapture:G,findNearestArt:E,setScanResult:m,resetAll:N,TEAM_COLORS:He};return P.jsx(MC.Provider,{value:C,children:t})}function cc(){const t=z.useContext(MC);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Be=(t,e)=>{const n=z.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>z.createElement("svg",{ref:m,...Nz,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${Mz(t)}`,u].join(" "),...f},[...e.map(([g,v])=>z.createElement(g,v)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=Be("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=Be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=Be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=Be("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=Be("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=Be("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=Be("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=Be("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=Be("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=Be("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=Be("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=Be("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=Be("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=Be("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=Be("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=Be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=Be("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=Be("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=Be("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=Be("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=Be("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=Be("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),pT=[{color:"red",name:"Crimson",icon:""},{color:"blue",name:"Azure",icon:""}];function Jz(){var g;const t=DE(),{player:e,joinTeam:n,teamScores:i,artPoints:r,resetAll:o,isOnline:a}=cc(),u=v=>{n(v)},h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},f={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},m=Object.values(i).reduce((v,T)=>v+T,0);return P.jsxs(he.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:h,children:[P.jsxs(he.div,{className:"text-center mb-10",variants:f,children:[P.jsxs(he.div,{className:"relative inline-block mb-6",animate:{y:[0,-8,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[P.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center mx-auto backdrop-blur-sm border border-white/10",children:P.jsx("span",{className:"text-4xl",children:""})}),P.jsx(he.div,{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-green-400",animate:{scale:[1,1.2,1],opacity:[1,.7,1]},transition:{duration:2,repeat:1/0}})]}),P.jsx("h1",{className:"text-4xl font-bold gradient-text mb-3",children:"Street Art CTF"}),P.jsx("p",{className:"text-white/50 text-sm max-w-xs mx-auto",children:"Capture the city, one masterpiece at a time"}),P.jsxs("div",{className:`inline-flex items-center gap-1.5 mt-3 px-3 py-1 rounded-full text-xs ${a?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[a?P.jsx(jz,{size:12}):P.jsx(Xz,{size:12}),a?"Synced":"Offline"]})]}),e.team?P.jsxs(he.div,{className:"mb-8 p-5 rounded-2xl relative overflow-hidden",variants:f,style:{background:`linear-gradient(135deg, ${He[e.team].hex}15 0%, transparent 100%)`,border:`1px solid ${He[e.team].hex}30`},children:[P.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-20 blur-3xl",style:{backgroundColor:He[e.team].hex}}),P.jsxs("div",{className:"relative flex items-center justify-between",children:[P.jsxs("div",{children:[P.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-1",children:"Your Team"}),P.jsx("p",{className:"text-2xl font-bold",style:{color:He[e.team].hex},children:(g=pT.find(v=>v.color===e.team))==null?void 0:g.name})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-1",children:"Score"}),P.jsx("p",{className:"text-3xl font-bold text-white",children:e.score})]})]})]}):P.jsxs(he.div,{variants:f,className:"mb-8",children:[P.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-2xl p-4 mb-6",children:[P.jsx("h3",{className:"font-bold text-white mb-2",children:" Welcome, Street Artist!"}),P.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Explore the city, find street art, and capture it for your team! Get within ",P.jsx("span",{className:"text-purple-400 font-medium",children:"100m"})," of an art piece, take a photo, and claim it."]})]}),P.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[P.jsx(Qz,{size:18,className:"text-white/40"}),P.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),P.jsx("div",{className:"grid grid-cols-2 gap-3",children:pT.map(({color:v,name:T,icon:R},b)=>P.jsxs(he.button,{onClick:()=>u(v),className:"group relative p-5 rounded-2xl text-left overflow-hidden",style:{background:`linear-gradient(135deg, ${He[v].hex}15 0%, transparent 100%)`,border:`1px solid ${He[v].hex}30`},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},children:[P.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",style:{background:`radial-gradient(circle at 50% 50%, ${He[v].hex}20 0%, transparent 70%)`}}),P.jsxs("div",{className:"relative",children:[P.jsx("span",{className:"text-2xl font-bold",style:{color:He[v].hex},children:R}),P.jsx("p",{className:"font-semibold mt-3 text-white",children:T}),P.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[P.jsxs("span",{className:"text-xs text-white/40",children:[i[v]," pts"]}),P.jsx("div",{className:"flex-1 h-1 rounded-full bg-white/10 overflow-hidden",children:P.jsx(he.div,{className:"h-full rounded-full",style:{backgroundColor:He[v].hex},initial:{width:0},animate:{width:`${i[v]/m*100}%`},transition:{duration:.8,delay:.3}})})]})]})]},v))})]}),P.jsxs(he.div,{className:"space-y-3 mb-8",variants:f,children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(zC,{size:18,className:"text-white/40"}),P.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Quick Actions"})]}),P.jsxs(he.button,{onClick:()=>t("/map"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},disabled:!e.team,children:[P.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20",children:P.jsx(VC,{size:22,className:"text-white"})}),P.jsxs("div",{className:"flex-1 text-left",children:[P.jsx("p",{className:"font-semibold text-white",children:"Explore Map"}),P.jsx("p",{className:"text-sm text-white/40",children:"View sectors & tram lines"})]}),P.jsx(hu,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]}),P.jsxs(he.button,{onClick:()=>t("/scanner"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},disabled:!e.team,children:[P.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-lg shadow-emerald-500/20",children:P.jsx(jC,{size:22,className:"text-white"})}),P.jsxs("div",{className:"flex-1 text-left",children:[P.jsx("p",{className:"font-semibold text-white",children:"Scan Art"}),P.jsx("p",{className:"text-sm text-white/40",children:"Capture for your team"})]}),P.jsx(hu,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]}),P.jsxs(he.button,{onClick:()=>t("/leaderboard"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},children:[P.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg shadow-amber-500/20",children:P.jsx(Df,{size:22,className:"text-white"})}),P.jsxs("div",{className:"flex-1 text-left",children:[P.jsx("p",{className:"font-semibold text-white",children:"Leaderboard"}),P.jsx("p",{className:"text-sm text-white/40",children:"See team rankings"})]}),P.jsx(hu,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]})]}),P.jsxs(he.div,{variants:f,children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(Hd,{size:18,className:"text-white/40"}),P.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Game Stats"})]}),P.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:r.length,label:"Art Spots",color:"from-purple-500/20 to-pink-500/20"},{value:r.filter(v=>v.capturedBy).length,label:"Captured",color:"from-green-500/20 to-emerald-500/20"},{value:e.capturedArt.length,label:"Your Claims",color:"from-blue-500/20 to-indigo-500/20"}].map((v,T)=>P.jsxs(he.div,{className:`p-4 rounded-2xl text-center bg-gradient-to-br ${v.color} border border-white/[0.06]`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4+T*.1},children:[P.jsx("p",{className:"text-2xl font-bold text-white",children:v.value}),P.jsx("p",{className:"text-xs text-white/40 mt-1",children:v.label})]},v.label))})]}),P.jsx(he.div,{variants:f,className:"mt-6",children:P.jsxs(he.button,{onClick:o,className:"w-full p-3 rounded-xl flex items-center justify-center gap-2 bg-white/[0.02] border border-white/[0.04] text-white/30 hover:text-white/50 hover:bg-white/[0.04] transition-all text-sm",whileTap:{scale:.98},children:[P.jsx(DC,{size:14}),"Reset Game Data"]})})]})}function eB(t,e){const n=z.useRef(e);z.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function tB(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const nB=1;function iB(t){return Object.freeze({__version:nB,map:t})}function $_(t,e){return Object.freeze({...t,...e})}const UC=z.createContext(null),HC=UC.Provider;function q_(){const t=z.useContext(UC);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function rB(t){function e(n,i){const{instance:r,context:o}=t(n).current;return z.useImperativeHandle(i,()=>r),n.children==null?null:Zs.createElement(HC,{value:o},n.children)}return z.forwardRef(e)}function sB(t){function e(n,i){const{instance:r}=t(n).current;return z.useImperativeHandle(i,()=>r),null}return z.forwardRef(e)}function WC(t,e){const n=z.useRef();z.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function G_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Bg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(SA,function(n){var i="1.9.4";function r(s){var l,d,p,_;for(d=1,p=arguments.length;d<p;d++){_=arguments[d];for(l in _)s[l]=_[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,_,x,D;return D=function(){p=!1,_&&(x.apply(d,_),_=!1)},x=function(){p?_=arguments:(s.apply(d,arguments),setTimeout(D,l),p=!0)},x}function m(s,l,d){var p=l[1],_=l[0],x=p-_;return s===p&&d?s:((s-_)%x+x)%x+_}function g(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function R(s){return T(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function j(s,l,d){var p=[];for(var _ in s)p.push(encodeURIComponent(d?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function E(s,l){return s.replace(I,function(d,p){var _=l[p];if(_===void 0)throw new Error("No value provided for variable "+d);return typeof _=="function"&&(_=_(l)),_})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var N=0;function C(s){var l=+new Date,d=Math.max(0,16-(l-N));return N=l+d,window.setTimeout(s,d)}var k=window.requestAnimationFrame||G("RequestAnimationFrame")||C,M=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,l,d){if(d&&k===C)s.call(l);else return k.call(window,a(s,l))}function B(s){s&&M.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:v,trim:T,splitWords:R,setOptions:b,getParamString:j,template:E,isArray:S,indexOf:F,emptyImageUrl:q,requestFn:k,cancelFn:M,requestAnimFrame:V,cancelAnimFrame:B};function oe(){}oe.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(l[_]=this[_]);return s.statics&&r(l,s.statics),s.includes&&(Ve(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,D=p._initHooks.length;x<D;x++)p._initHooks[x].call(this)}},l},oe.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},oe.mergeOptions=function(s){return r(this.prototype.options,s),this},oe.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Ve(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var xe={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=R(s);for(var _=0,x=s.length;_<x;_++)this._on(s[_],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=R(s);for(var _=arguments.length===1,x=0,D=s.length;x<D;x++)_?this._off(s[x]):this._off(s[x],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var _={fn:l,ctx:d};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,l,d){var p,_,x;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,x=p.length;_<x;_++)p[_].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var D=this._listens(s,l,d);if(D!==!1){var H=p[D];this._firingCount&&(H.fn=g,this._events[s]=p=p.slice()),p.splice(D,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var x=0,D=_.length;x<D;x++){var H=_[x],$=H.fn;H.once&&this.off(s,$,H.ctx),$.call(H.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=l;typeof l!="function"&&(p=!!l,_=void 0,d=void 0);var x=this._events&&this._events[s];if(x&&x.length&&this._listens(s,_,d)!==!1)return!0;if(p){for(var D in this._eventParents)if(this._eventParents[D].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var _=0,x=p.length;_<x;_++)if(p[_].fn===l&&p[_].ctx===d)return _;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=R(s);for(var _=0,x=s.length;_<x;_++)this._on(s[_],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};xe.addEventListener=xe.on,xe.removeEventListener=xe.clearAllEventListeners=xe.off,xe.addOneTimeEventListener=xe.once,xe.fireEvent=xe.fire,xe.hasEventListeners=xe.listens;var Ge=oe.extend(xe);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var le=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function J(s,l,d){return s instanceof Z?s:S(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function te(s,l){if(s)for(var d=l?[s,l]:s,p=0,_=d.length;p<_;p++)this.extend(d[p])}te.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Te(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=J(s):s=Te(s),s instanceof te?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Te(s);var l=this.min,d=this.max,p=s.min,_=s.max,x=_.x>=l.x&&p.x<=d.x,D=_.y>=l.y&&p.y<=d.y;return x&&D},overlaps:function(s){s=Te(s);var l=this.min,d=this.max,p=s.min,_=s.max,x=_.x>l.x&&p.x<d.x,D=_.y>l.y&&p.y<d.y;return x&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,_=Math.abs(l.y-d.y)*s;return Te(J(l.x-p,l.y-_),J(d.x+p,d.y+_))},equals:function(s){return s?(s=Te(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Te(s,l){return!s||s instanceof te?s:new te(s,l)}function Ze(s,l){if(s)for(var d=l?[s,l]:s,p=0,_=d.length;p<_;p++)this.extend(d[p])}Ze.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,_;if(s instanceof Ee)p=s,_=s;else if(s instanceof Ze){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(ce(s)||Ce(s)):this;return!l&&!d?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(_.lat,_.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(_.lat,d.lat),d.lng=Math.max(_.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,_=Math.abs(l.lng-d.lng)*s;return new Ze(new Ee(l.lat-p,l.lng-_),new Ee(d.lat+p,d.lng+_))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ee||"lat"in s?s=ce(s):s=Ce(s);var l=this._southWest,d=this._northEast,p,_;return s instanceof Ze?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=l.lat&&_.lat<=d.lat&&p.lng>=l.lng&&_.lng<=d.lng},intersects:function(s){s=Ce(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),x=_.lat>=l.lat&&p.lat<=d.lat,D=_.lng>=l.lng&&p.lng<=d.lng;return x&&D},overlaps:function(s){s=Ce(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),x=_.lat>l.lat&&p.lat<d.lat,D=_.lng>l.lng&&p.lng<d.lng;return x&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Ce(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ce(s,l){return s instanceof Ze?s:new Ze(s,l)}function Ee(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(s,l){if(!s)return!1;s=ce(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return tn.distance(this,ce(s))},wrap:function(){return tn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ce([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function ce(s,l,d){return s instanceof Ee?s:S(s)&&typeof s[0]!="object"?s.length===3?new Ee(s[0],s[1],s[2]):s.length===2?new Ee(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ee(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ee(s,l,d)}var lt={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),_=this.transformation.transform(l.max,d);return new te(p,_)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ee(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,_=l.lng-d.lng;if(p===0&&_===0)return s;var x=s.getSouthWest(),D=s.getNorthEast(),H=new Ee(x.lat-p,x.lng-_),$=new Ee(D.lat-p,D.lng-_);return new Ze(H,$)}},tn=r({},lt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,_=l.lat*d,x=Math.sin((l.lat-s.lat)*d/2),D=Math.sin((l.lng-s.lng)*d/2),H=x*x+Math.cos(p)*Math.cos(_)*D*D,$=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*$}}),Ci=6378137,ii={R:Ci,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),_=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Ci*Math.PI;return new te([-s,-s],[s,s])}()};function pn(s,l,d,p){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}pn.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ai(s,l,d,p){return new pn(s,l,d,p)}var ms=r({},tn,{code:"EPSG:3857",projection:ii,transformation:function(){var s=.5/(Math.PI*ii.R);return Ai(s,.5,-s,.5)}()}),hc=r({},ms,{code:"EPSG:900913"});function dc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function mo(s,l){var d="",p,_,x,D,H,$;for(p=0,x=s.length;p<x;p++){for(H=s[p],_=0,D=H.length;_<D;_++)$=H[_],d+=(_?"L":"M")+$.x+" "+$.y;d+=l?ae.svg?"z":"x":""}return d||"M0 0"}var gs=document.documentElement.style,ys="ActiveXObject"in window,Et=ys&&!document.addEventListener,Pt="msLaunchUri"in navigator&&!("documentMode"in document),cr=nn("webkit"),fc=nn("android"),tl=nn("android 2")||nn("android 3"),zf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_s=fc&&nn("Google")&&zf<537&&!("AudioNode"in window),go=!!window.opera,nl=!Pt&&nn("chrome"),yo=nn("gecko")&&!cr&&!go&&!ys,Bf=!nl&&nn("safari"),pc=nn("phantom"),il="OTransition"in gs,mc=navigator.platform.indexOf("Win")===0,hr=ys&&"transition"in gs,vs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tl,_o="MozPerspective"in gs,ki=!window.L_DISABLE_3D&&(hr||vs||_o)&&!il&&!pc,dr=typeof orientation<"u"||nn("mobile"),vo=dr&&cr,gc=dr&&vs,fr=!window.PointerEvent&&window.MSPointerEvent,rl=!!(window.PointerEvent||fr),St="ontouchstart"in window||!!window.TouchEvent,yc=!window.L_NO_TOUCH&&(St||rl),ws=dr&&go,Ts=dr&&yo,Ff=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Uf=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),pr=function(){return!!document.createElement("canvas").getContext}(),sl=!!(document.createElementNS&&dc("svg").createSVGRect),Hf=!!sl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),wo=!sl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),_c=navigator.platform.indexOf("Mac")===0,vc=navigator.platform.indexOf("Linux")===0;function nn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ae={ie:ys,ielt9:Et,edge:Pt,webkit:cr,android:fc,android23:tl,androidStock:_s,opera:go,chrome:nl,gecko:yo,safari:Bf,phantom:pc,opera12:il,win:mc,ie3d:hr,webkit3d:vs,gecko3d:_o,any3d:ki,mobile:dr,mobileWebkit:vo,mobileWebkit3d:gc,msPointer:fr,pointer:rl,touch:yc,touchNative:St,mobileOpera:ws,mobileGecko:Ts,retina:Ff,passiveEvents:Uf,canvas:pr,svg:sl,vml:wo,inlineSvg:Hf,mac:_c,linux:vc},wc=ae.msPointer?"MSPointerDown":"pointerdown",Un=ae.msPointer?"MSPointerMove":"pointermove",ol=ae.msPointer?"MSPointerUp":"pointerup",al=ae.msPointer?"MSPointerCancel":"pointercancel",xs={touchstart:wc,touchmove:Un,touchend:ol,touchcancel:al},To={touchstart:ll,touchmove:Pn,touchend:Pn,touchcancel:Pn},bi={},Tc=!1;function xc(s,l,d){return l==="touchstart"&&Es(),To[l]?(d=To[l].bind(this,d),s.addEventListener(xs[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function Wf(s,l,d){if(!xs[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(xs[l],d,!1)}function xo(s){bi[s.pointerId]=s}function Ec(s){bi[s.pointerId]&&(bi[s.pointerId]=s)}function Eo(s){delete bi[s.pointerId]}function Es(){Tc||(document.addEventListener(wc,xo,!0),document.addEventListener(Un,Ec,!0),document.addEventListener(ol,Eo,!0),document.addEventListener(al,Eo,!0),Tc=!0)}function Pn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in bi)l.touches.push(bi[d]);l.changedTouches=[l],s(l)}}function ll(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ft(l),Pn(s,l)}function $f(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Pc=200;function Sc(s,l){s.addEventListener("dblclick",l);var d=0,p;function _(x){if(x.detail!==1){p=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var D=fl(x);if(!(D.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!D.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var H=Date.now();H-d<=Pc?(p++,p===2&&l($f(x))):p=1,d=H}}}return s.addEventListener("click",_),{dblclick:l,simDblclick:_}}function Ic(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Ps=Po(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ri=Po(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ul=Ri==="webkitTransition"||Ri==="OTransition"?Ri+"End":"transitionend";function cl(s){return typeof s=="string"?document.getElementById(s):s}function mr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Re(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Me(s){var l=s.parentNode;l&&l.removeChild(s)}function Gt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Sn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function In(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Ss(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=ri(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function re(s,l){if(s.classList!==void 0)for(var d=R(l),p=0,_=d.length;p<_;p++)s.classList.add(d[p]);else if(!Ss(s,l)){var x=ri(s);Li(s,(x?x+" ":"")+l)}}function We(s,l){s.classList!==void 0?s.classList.remove(l):Li(s,T((" "+ri(s)+" ").replace(" "+l+" "," ")))}function Li(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function ri(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function rn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Cc(s,l)}function Cc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Po(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Ni(s,l,d){var p=l||new Z(0,0);s.style[Ps]=(ae.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function st(s,l){s._leaflet_pos=l,ae.any3d?Ni(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Mi(s){return s._leaflet_pos||new Z(0,0)}var Hn,mn,So;if("onselectstart"in document)Hn=function(){ye(window,"selectstart",ft)},mn=function(){Fe(window,"selectstart",ft)};else{var gr=Po(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Hn=function(){if(gr){var s=document.documentElement.style;So=s[gr],s[gr]="none"}},mn=function(){gr&&(document.documentElement.style[gr]=So,So=void 0)}}function Io(){ye(window,"dragstart",ft)}function Co(){Fe(window,"dragstart",ft)}var Is,si;function hl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ao(),Is=s,si=s.style.outlineStyle,s.style.outlineStyle="none",ye(window,"keydown",Ao))}function Ao(){Is&&(Is.style.outlineStyle=si,Is=void 0,si=void 0,Fe(window,"keydown",Ao))}function Ac(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Cn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var qf={__proto__:null,TRANSFORM:Ps,TRANSITION:Ri,TRANSITION_END:ul,get:cl,getStyle:mr,create:Re,remove:Me,empty:Gt,toFront:Sn,toBack:In,hasClass:Ss,addClass:re,removeClass:We,setClass:Li,getClass:ri,setOpacity:rn,testProp:Po,setTransform:Ni,setPosition:st,getPosition:Mi,get disableTextSelection(){return Hn},get enableTextSelection(){return mn},disableImageDrag:Io,enableImageDrag:Co,preventOutline:hl,restoreOutline:Ao,getSizedParentNode:Ac,getScale:Cn};function ye(s,l,d,p){if(l&&typeof l=="object")for(var _ in l)ko(s,_,l[_],d);else{l=R(l);for(var x=0,D=l.length;x<D;x++)ko(s,l[x],d,p)}return this}var Zt="_leaflet_events";function Fe(s,l,d,p){if(arguments.length===1)yr(s),delete s[Zt];else if(l&&typeof l=="object")for(var _ in l)Cs(s,_,l[_],d);else if(l=R(l),arguments.length===2)yr(s,function(H){return F(l,H)!==-1});else for(var x=0,D=l.length;x<D;x++)Cs(s,l[x],d,p);return this}function yr(s,l){for(var d in s[Zt]){var p=d.split(/\d/)[0];(!l||l(p))&&Cs(s,p,null,null,d)}}var Oi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ko(s,l,d,p){var _=l+h(d)+(p?"_"+h(p):"");if(s[Zt]&&s[Zt][_])return this;var x=function(H){return d.call(p||s,H||window.event)},D=x;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?x=xc(s,l,x):ae.touch&&l==="dblclick"?x=Sc(s,x):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Oi[l]||l,x,ae.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(x=function(H){H=H||window.event,ml(s,H)&&D(H)},s.addEventListener(Oi[l],x,!1)):s.addEventListener(l,D,!1):s.attachEvent("on"+l,x),s[Zt]=s[Zt]||{},s[Zt][_]=x}function Cs(s,l,d,p,_){_=_||l+h(d)+(p?"_"+h(p):"");var x=s[Zt]&&s[Zt][_];if(!x)return this;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?Wf(s,l,x):ae.touch&&l==="dblclick"?Ic(s,x):"removeEventListener"in s?s.removeEventListener(Oi[l]||l,x,!1):s.detachEvent("on"+l,x),s[Zt][_]=null}function De(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function dl(s){return ko(s,"wheel",De),this}function As(s){return ye(s,"mousedown touchstart dblclick contextmenu",De),s._leaflet_disable_click=!0,this}function ft(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function oi(s){return ft(s),De(s),this}function fl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function ks(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=Cn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var ai=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pl(s){return ae.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ai:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ml(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var bs={__proto__:null,on:ye,off:Fe,stopPropagation:De,disableScrollPropagation:dl,disableClickPropagation:As,preventDefault:ft,stop:oi,getPropagationPath:fl,getMousePosition:ks,getWheelDelta:pl,isExternalTarget:ml,addListener:ye,removeListener:Fe},gl=Ge.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Mi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),st(this._el,d),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Pe=Ge.extend({options:{crs:ms,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ri&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,ul,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ce(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),_=this.getSize().divideBy(2),x=s instanceof Z?s:this.latLngToContainerPoint(s),D=x.subtract(_).multiplyBy(1-1/p),H=this.containerPointToLatLng(_.add(D));return this.setView(H,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Ce(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),_=this.getBoundsZoom(s,!1,d.add(p));if(_=typeof l.maxZoom=="number"?Math.min(l.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var x=p.subtract(d).divideBy(2),D=this.project(s.getSouthWest(),_),H=this.project(s.getNorthEast(),_),$=this.unproject(D.add(H).divideBy(2).add(x),_);return{center:$,zoom:_}},fitBounds:function(s,l){if(s=Ce(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ae.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),_=this.project(s),x=this.getSize(),D=this._zoom;s=ce(s),l=l===void 0?D:l;var H=Math.max(x.x,x.y),$=H*this.getZoomScale(D,l),Q=_.distanceTo(p)||1,ne=1.42,fe=ne*ne;function Se(pt){var Wc=pt?-1:1,wA=pt?$:H,TA=$*$-H*H+Wc*fe*fe*Q*Q,xA=2*wA*fe*Q,Xf=TA/xA,yv=Math.sqrt(Xf*Xf+1)-Xf,EA=yv<1e-9?-18:Math.log(yv);return EA}function Kt(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function It(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function bn(pt){return Kt(pt)/It(pt)}var on=Se(0);function Uo(pt){return H*(It(on)/It(on+ne*pt))}function gA(pt){return H*(It(on)*bn(on+ne*pt)-Kt(on))/fe}function yA(pt){return 1-Math.pow(1-pt,1.5)}var _A=Date.now(),mv=(Se(1)-on)/ne,vA=d.duration?1e3*d.duration:1e3*mv*.8;function gv(){var pt=(Date.now()-_A)/vA,Wc=yA(pt)*mv;pt<=1?(this._flyToFrame=V(gv,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(gA(Wc)/Q)),D),this.getScaleZoom(H/Uo(Wc),D),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),gv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Ce(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Ce(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),_=this.project(this.getCenter()),x=this.project(s),D=this.getPixelBounds(),H=Te([D.min.add(d),D.max.subtract(p)]),$=H.getSize();if(!H.contains(x)){this._enforcingBounds=!0;var Q=x.subtract(H.getCenter()),ne=H.extend(x).getSize().subtract($);_.x+=Q.x<0?-ne.x:ne.x,_.y+=Q.y<0?-ne.y:ne.y,this.panTo(this.unproject(_),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),_=d.divideBy(2).round(),x=p.subtract(_);return!x.x&&!x.y?this:(s.animate&&s.pan?this.panBy(x):(s.pan&&this._rawPanBy(x),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Ee(l,d),_=p.toBounds(s.coords.accuracy*2),x=this._locateOptions;if(x.setView){var D=this.getBoundsZoom(_);this.setView(p,x.maxZoom?Math.min(D,x.maxZoom):D)}var H={latlng:p,bounds:_,timestamp:s.timestamp};for(var $ in s.coords)typeof s.coords[$]=="number"&&(H[$]=s.coords[$]);this.fire("locationfound",H)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Me(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Me(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Re("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Ze(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Ce(s),d=J(d||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),x=this.getMaxZoom(),D=s.getNorthWest(),H=s.getSouthEast(),$=this.getSize().subtract(d),Q=Te(this.project(H,p),this.project(D,p)).getSize(),ne=ae.any3d?this.options.zoomSnap:1,fe=$.x/Q.x,Se=$.y/Q.y,Kt=l?Math.max(fe,Se):Math.min(fe,Se);return p=this.getScaleZoom(Kt,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(_,Math.min(x,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new te(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ce(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ce(s))},distance:function(s,l){return this.options.crs.distance(ce(s),ce(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return ks(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=cl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,re(s,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=mr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(s.markerPane,"leaflet-zoom-hide"),re(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){st(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var _=this._zoom!==l;this._moveStart(_,d)._move(s,l)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var _=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((_||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){st(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Fe:ye;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,_=l==="mouseout"||l==="mouseover",x=s.target||s.srcElement,D=!1;x;){if(p=this._targets[h(x)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){D=!0;break}if(p&&p.listens(l,!0)&&(_&&!ml(x,s)||(d.push(p),_))||x===this._container)break;x=x.parentNode}return!d.length&&!D&&!_&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&hl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var _=this._findEventTargets(s,l);if(d){for(var x=[],D=0;D<d.length;D++)d[D].listens(l,!0)&&x.push(d[D]);_=x.concat(_)}if(_.length){l==="contextmenu"&&ft(s);var H=_[0],$={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=H.getLatLng&&(!H._radius||H._radius<=10);$.containerPoint=Q?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Q?H.getLatLng():this.layerPointToLatLng($.layerPoint)}for(D=0;D<_.length;D++)if(_[D].fire(l,$,!0),$.originalEvent._stopped||_[D].options.bubblingMouseEvents===!1&&F(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Mi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Te([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),_=this.getSize().divideBy(2),x=new te(p.subtract(_),p.add(_)),D=this._getBoundsOffset(x,d,l);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?s:this.unproject(p.add(D),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new te(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Te(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),_=p.min.subtract(s.min),x=p.max.subtract(s.max),D=this._rebound(_.x,-x.x),H=this._rebound(_.y,-x.y);return new Z(D,H)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ae.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Ps,p=this._proxy.style[d];Ni(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Me(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Ni(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),_=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(_)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bo(s,l){return new Pe(s,l)}var sn=oe.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return re(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Me(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),li=function(s){return new sn(s)};Pe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Re("div",l+"control-container",this._container);function p(_,x){var D=l+_+" "+l+x;s[_+x]=Re("div",D,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Me(this._controlCorners[s]);Me(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kc=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){b(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return sn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Re("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),As(l),dl(l);var p=this._section=Re("section",s+"-list");d&&(this._map.on("click",this.collapse,this),ye(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Re("a",s+"-toggle",l);_.href="#",_.title="Layers",_.setAttribute("role","button"),ye(_,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){ft(x),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Re("div",s+"-base",p),this._separator=Re("div",s+"-separator",p),this._overlaysList=Re("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Gt(this._baseLayersList),Gt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,_=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),ye(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var x=document.createElement("span");l.appendChild(x),x.appendChild(p),x.appendChild(_);var D=s.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],_=[];this._handlingClick=!0;for(var x=s.length-1;x>=0;x--)l=s[x],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||_.push(d);for(x=0;x<_.length;x++)this._map.hasLayer(_[x])&&this._map.removeLayer(_[x]);for(x=0;x<p.length;x++)this._map.hasLayer(p[x])||this._map.addLayer(p[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),_=s.length-1;_>=0;_--)l=s[_],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ye(s,"click",ft),this.expand();var l=this;setTimeout(function(){Fe(s,"click",ft),l._preventClick=!1})}}),bc=function(s,l,d){return new kc(s,l,d)},Vi=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Re("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,_){var x=Re("a",d,p);return x.innerHTML=s,x.href="#",x.title=l,x.setAttribute("role","button"),x.setAttribute("aria-label",l),As(x),ye(x,"click",oi),ye(x,"click",_,this),ye(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";We(this._zoomInButton,l),We(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(re(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(re(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pe.mergeOptions({zoomControl:!0}),Pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Vi,this.addControl(this.zoomControl))});var Rc=function(s){return new Vi(s)},yl=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Re("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Re("div",l,d)),s.imperial&&(this._iScale=Re("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,_;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(_=this._getRoundNum(l),this._updateScale(this._iScale,_+" ft",_/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),_l=function(s){return new yl(s)},vl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ro=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?vl+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),As(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Pe.mergeOptions({attributionControl:!0}),Pe.addInitHook(function(){this.options.attributionControl&&new Ro().addTo(this)});var Lo=function(s){return new Ro(s)};sn.Layers=kc,sn.Zoom=Vi,sn.Scale=yl,sn.Attribution=Ro,li.layers=bc,li.zoom=Rc,li.scale=_l,li.attribution=Lo;var gn=oe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(s,l){return s.addHandler(l,this),this};var Lc={Events:xe},ui=ae.touch?"touchstart mousedown":"mousedown",Wn=Ge.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){b(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(ye(this._dragStartTarget,ui,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wn._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,ui,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ss(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Wn._dragging===this&&this.finishDrag();return}if(!(Wn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Wn._dragging=this,this._preventOutline&&hl(this._element),Io(),Hn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Ac(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Mi(this._element),this._parentScale=Cn(d);var p=s.type==="mousedown";ye(document,p?"mousemove":"touchmove",this._onMove,this),ye(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,ft(s),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),st(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),Co(),mn();var l=this._moved&&this._moving;this._moving=!1,Wn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function wl(s,l,d){var p,_=[1,4,2,8],x,D,H,$,Q,ne,fe,Se;for(x=0,ne=s.length;x<ne;x++)s[x]._code=W(s[x],l);for(H=0;H<4;H++){for(fe=_[H],p=[],x=0,ne=s.length,D=ne-1;x<ne;D=x++)$=s[x],Q=s[D],$._code&fe?Q._code&fe||(Se=U(Q,$,fe,l,d),Se._code=W(Se,l),p.push(Se)):(Q._code&fe&&(Se=U(Q,$,fe,l,d),Se._code=W(Se,l),p.push(Se)),p.push($));s=p}return s}function Tl(s,l){var d,p,_,x,D,H,$,Q,ne;if(!s||s.length===0)throw new Error("latlngs not passed");Oe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=ce([0,0]),Se=Ce(s),Kt=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());Kt<1700&&(fe=No(s));var It=s.length,bn=[];for(d=0;d<It;d++){var on=ce(s[d]);bn.push(l.project(ce([on.lat-fe.lat,on.lng-fe.lng])))}for(H=$=Q=0,d=0,p=It-1;d<It;p=d++)_=bn[d],x=bn[p],D=_.y*x.x-x.y*_.x,$+=(_.x+x.x)*D,Q+=(_.y+x.y)*D,H+=D*3;H===0?ne=bn[0]:ne=[$/H,Q/H];var Uo=l.unproject(J(ne));return ce([Uo.lat+fe.lat,Uo.lng+fe.lng])}function No(s){for(var l=0,d=0,p=0,_=0;_<s.length;_++){var x=ce(s[_]);l+=x.lat,d+=x.lng,p++}return ce([l/p,d/p])}var Mo={__proto__:null,clipPolygon:wl,polygonCenter:Tl,centroid:No};function Dt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=_r(s,d),s}function xl(s,l,d){return Math.sqrt(_e(s,l,d,!0))}function Nc(s,l,d){return _e(s,l,d)}function _r(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(d);_[0]=_[d-1]=1,c(s,_,l,0,d-1);var x,D=[];for(x=0;x<d;x++)_[x]&&D.push(s[x]);return D}function c(s,l,d,p,_){var x=0,D,H,$;for(H=p+1;H<=_-1;H++)$=_e(s[H],s[p],s[_],!0),$>x&&(D=H,x=$);x>d&&(l[D]=1,c(s,l,d,p,D),c(s,l,d,D,_))}function y(s,l){for(var d=[s[0]],p=1,_=0,x=s.length;p<x;p++)ee(s[p],s[_])>l&&(d.push(s[p]),_=p);return _<x-1&&d.push(s[x-1]),d}var w;function A(s,l,d,p,_){var x=p?w:W(s,d),D=W(l,d),H,$,Q;for(w=D;;){if(!(x|D))return[s,l];if(x&D)return!1;H=x||D,$=U(s,l,H,d,_),Q=W($,d),H===x?(s=$,x=Q):(l=$,D=Q)}}function U(s,l,d,p,_){var x=l.x-s.x,D=l.y-s.y,H=p.min,$=p.max,Q,ne;return d&8?(Q=s.x+x*($.y-s.y)/D,ne=$.y):d&4?(Q=s.x+x*(H.y-s.y)/D,ne=H.y):d&2?(Q=$.x,ne=s.y+D*($.x-s.x)/x):d&1&&(Q=H.x,ne=s.y+D*(H.x-s.x)/x),new Z(Q,ne,_)}function W(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ee(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function _e(s,l,d,p){var _=l.x,x=l.y,D=d.x-_,H=d.y-x,$=D*D+H*H,Q;return $>0&&(Q=((s.x-_)*D+(s.y-x)*H)/$,Q>1?(_=d.x,x=d.y):Q>0&&(_+=D*Q,x+=H*Q)),D=s.x-_,H=s.y-x,p?D*D+H*H:new Z(_,x)}function Oe(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function je(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Oe(s)}function ut(s,l){var d,p,_,x,D,H,$,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Oe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=ce([0,0]),fe=Ce(s),Se=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Se<1700&&(ne=No(s));var Kt=s.length,It=[];for(d=0;d<Kt;d++){var bn=ce(s[d]);It.push(l.project(ce([bn.lat-ne.lat,bn.lng-ne.lng])))}for(d=0,p=0;d<Kt-1;d++)p+=It[d].distanceTo(It[d+1])/2;if(p===0)Q=It[0];else for(d=0,x=0;d<Kt-1;d++)if(D=It[d],H=It[d+1],_=D.distanceTo(H),x+=_,x>p){$=(x-p)/_,Q=[H.x-$*(H.x-D.x),H.y-$*(H.y-D.y)];break}var on=l.unproject(J(Q));return ce([on.lat+ne.lat,on.lng+ne.lng])}var An={__proto__:null,simplify:Dt,pointToSegmentDistance:xl,closestPointOnSegment:Nc,clipSegment:A,_getEdgeIntersection:U,_getBitCode:W,_sqClosestPointOnSegment:_e,isFlat:Oe,_flat:je,polylineCenter:ut},$n={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new Ee(s.y,s.x)},bounds:new te([-180,-90],[180,90])},kn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,_=this.R_MINOR/d,x=Math.sqrt(1-_*_),D=x*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-D)/(1+D),x/2);return p=-d*Math.log(Math.max(H,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,_=Math.sqrt(1-p*p),x=Math.exp(-s.y/d),D=Math.PI/2-2*Math.atan(x),H=0,$=.1,Q;H<15&&Math.abs($)>1e-7;H++)Q=_*Math.sin(D),Q=Math.pow((1-Q)/(1+Q),_/2),$=Math.PI/2-2*Math.atan(x*Q)-D,D+=$;return new Ee(D*l,s.x*l/d)}},ci={__proto__:null,LonLat:$n,Mercator:kn,SphericalMercator:ii},Oo=r({},tn,{code:"EPSG:3395",projection:kn,transformation:function(){var s=.5/(Math.PI*kn.R);return Ai(s,.5,-s,.5)}()}),Vo=r({},tn,{code:"EPSG:4326",projection:$n,transformation:Ai(1/180,1,-1/180,.5)}),ZC=r({},lt,{projection:$n,transformation:Ai(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});lt.Earth=tn,lt.EPSG3395=Oo,lt.EPSG3857=ms,lt.EPSG900913=hc,lt.EPSG4326=Vo,lt.Simple=ZC;var qn=Ge.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Pe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),l=_.maxZoom===void 0?l:Math.max(l,_.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Do=qn.extend({initialize:function(s,l){b(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),KC=function(s,l){return new Do(s,l)},Di=Do.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Do.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Do.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ze;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),QC=function(s,l){return new Di(s,l)},jo=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var _=J(p),x=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),x&&(s.style.marginLeft=-x.x+"px",s.style.marginTop=-x.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ae.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function XC(s){return new jo(s)}var El=jo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof El.imagePath!="string"&&(El.imagePath=this._detectIconPath()),(this.options.imagePath||El.imagePath)+jo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,_){var x=p.exec(d);return x&&x[_]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Re("div","leaflet-default-icon-path",document.body),l=mr(s,"background-image")||mr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Q_=gn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Wn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,x=Mi(l._icon),D=d.getPixelBounds(),H=d.getPixelOrigin(),$=Te(D.min._subtract(H).add(_),D.max._subtract(H).subtract(_));if(!$.contains(x)){var Q=J((Math.max($.max.x,x.x)-$.max.x)/(D.max.x-$.max.x)-(Math.min($.min.x,x.x)-$.min.x)/(D.min.x-$.min.x),(Math.max($.max.y,x.y)-$.max.y)/(D.max.y-$.max.y)-(Math.min($.min.y,x.y)-$.min.y)/(D.min.y-$.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),st(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Mi(l._icon),_=l._map.layerPointToLatLng(p);d&&st(d,p),l._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Mc=qn.extend({options:{icon:new El,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),re(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(d,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),x=!1;_!==this._shadow&&(this._removeShadow(),x=!0),_&&(re(_,l),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&x&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),Me(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Me(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&st(this._icon,s),this._shadow&&st(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Q_)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Q_(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&rn(this._icon,s),this._shadow&&rn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function YC(s,l){return new Mc(s,l)}var vr=qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Oc=vr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return vr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new te(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function JC(s,l){return new Oc(s,l)}var Gf=Oc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),b(this,l),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ze(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:vr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===tn.distance){var _=Math.PI/180,x=this._mRadius/tn.R/_,D=d.project([l+x,s]),H=d.project([l-x,s]),$=D.add(H).divideBy(2),Q=d.unproject($).lat,ne=Math.acos((Math.cos(x*_)-Math.sin(l*_)*Math.sin(Q*_))/(Math.cos(l*_)*Math.cos(Q*_)))/_;(isNaN(ne)||ne===0)&&(ne=x/Math.cos(Math.PI/180*l)),this._point=$.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:$.x-d.project([Q,s-ne]).x,this._radiusY=$.y-D.y}else{var fe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(fe).x}this._updateBounds()}});function eA(s,l,d){return new Gf(s,l,d)}var ji=vr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=_e,_,x,D=0,H=this._parts.length;D<H;D++)for(var $=this._parts[D],Q=1,ne=$.length;Q<ne;Q++){_=$[Q-1],x=$[Q];var fe=p(s,_,x,!0);fe<l&&(l=fe,d=p(s,_,x))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ut(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ce(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ze,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Oe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Oe(s),p=0,_=s.length;p<_;p++)d?(l[p]=ce(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Ee,_=s.length,x,D;if(p){for(D=[],x=0;x<_;x++)D[x]=this._map.latLngToLayerPoint(s[x]),d.extend(D[x]);l.push(D)}else for(x=0;x<_;x++)this._projectLatlngs(s[x],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,_,x,D,H,$;for(d=0,_=0,x=this._rings.length;d<x;d++)for($=this._rings[d],p=0,D=$.length;p<D-1;p++)H=A($[p],$[p+1],s,p,!0),H&&(l[_]=l[_]||[],l[_].push(H[0]),(H[1]!==$[p+1]||p===D-2)&&(l[_].push(H[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Dt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,_,x,D,H,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,x=this._parts.length;d<x;d++)for(H=this._parts[d],p=0,D=H.length,_=D-1;p<D;_=p++)if(!(!l&&p===0)&&xl(s,H[_],H[p])<=$)return!0;return!1}});function tA(s,l){return new ji(s,l)}ji._flat=je;var zo=ji.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Tl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=ji.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){ji.prototype._setLatLngs.call(this,s),Oe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Oe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new te(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,x;p<_;p++)x=wl(this._rings[p],s,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,_,x,D,H,$,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(x=0,$=this._parts.length;x<$;x++)for(d=this._parts[x],D=0,Q=d.length,H=Q-1;D<Q;H=D++)p=d[D],_=d[H],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(l=!l);return l||ji.prototype._containsPoint.call(this,s,!0)}});function nA(s,l){return new zo(s,l)}var zi=Di.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,d,p,_;if(l){for(d=0,p=l.length;d<p;d++)_=l[d],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var x=this.options;if(x.filter&&!x.filter(s))return this;var D=Vc(s,x);return D?(D.feature=zc(s),D.defaultOptions=D.options,this.resetStyle(D),x.onEachFeature&&x.onEachFeature(s,D),this.addLayer(D)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Vc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,_=[],x=l&&l.pointToLayer,D=l&&l.coordsToLatLng||Zf,H,$,Q,ne;if(!p&&!d)return null;switch(d.type){case"Point":return H=D(p),X_(x,s,H,l);case"MultiPoint":for(Q=0,ne=p.length;Q<ne;Q++)H=D(p[Q]),_.push(X_(x,s,H,l));return new Di(_);case"LineString":case"MultiLineString":return $=Dc(p,d.type==="LineString"?0:1,D),new ji($,l);case"Polygon":case"MultiPolygon":return $=Dc(p,d.type==="Polygon"?1:2,D),new zo($,l);case"GeometryCollection":for(Q=0,ne=d.geometries.length;Q<ne;Q++){var fe=Vc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);fe&&_.push(fe)}return new Di(_);case"FeatureCollection":for(Q=0,ne=d.features.length;Q<ne;Q++){var Se=Vc(d.features[Q],l);Se&&_.push(Se)}return new Di(_);default:throw new Error("Invalid GeoJSON object.")}}function X_(s,l,d,p){return s?s(l,d):new Mc(d,p&&p.markersInheritOptions&&p)}function Zf(s){return new Ee(s[1],s[0],s[2])}function Dc(s,l,d){for(var p=[],_=0,x=s.length,D;_<x;_++)D=l?Dc(s[_],l-1,d):(d||Zf)(s[_]),p.push(D);return p}function Kf(s,l){return s=ce(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function jc(s,l,d,p){for(var _=[],x=0,D=s.length;x<D;x++)_.push(l?jc(s[x],Oe(s[x])?0:l-1,d,p):Kf(s[x],p));return!l&&d&&_.length>0&&_.push(_[0].slice()),_}function Bo(s,l){return s.feature?r({},s.feature,{geometry:l}):zc(l)}function zc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Qf={toGeoJSON:function(s){return Bo(this,{type:"Point",coordinates:Kf(this.getLatLng(),s)})}};Mc.include(Qf),Gf.include(Qf),Oc.include(Qf),ji.include({toGeoJSON:function(s){var l=!Oe(this._latlngs),d=jc(this._latlngs,l?1:0,!1,s);return Bo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),zo.include({toGeoJSON:function(s){var l=!Oe(this._latlngs),d=l&&!Oe(this._latlngs[0]),p=jc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Bo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Do.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Bo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var x=_.toGeoJSON(s);if(d)p.push(x.geometry);else{var D=zc(x);D.type==="FeatureCollection"?p.push.apply(p,D.features):p.push(D)}}}),d?Bo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Y_(s,l){return new zi(s,l)}var iA=Y_,Bc=qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Ce(l),b(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Me(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Sn(this._image),this},bringToBack:function(){return this._map&&In(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ce(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Re("img");if(re(l,"leaflet-image-layer"),this._zoomAnimated&&re(l,"leaflet-zoom-animated"),this.options.className&&re(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ni(this._image,d,l)},_reset:function(){var s=this._image,l=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();st(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),rA=function(s,l,d){return new Bc(s,l,d)},J_=Bc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Re("video");if(re(l,"leaflet-image-layer"),this._zoomAnimated&&re(l,"leaflet-zoom-animated"),this.options.className&&re(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],_=0;_<d.length;_++)p.push(d[_].src);this._url=d.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var D=Re("source");D.src=this._url[x],l.appendChild(D)}}});function sA(s,l,d){return new J_(s,l,d)}var ev=Bc.extend({_initImage:function(){var s=this._image=this._url;re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function oA(s,l,d){return new ev(s,l,d)}var hi=qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ee||S(s))?(this._latlng=ce(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&rn(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(rn(this._container,0),this._removeTimeout=setTimeout(a(Me,void 0,this._container),200)):Me(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Sn(this._container),this},bringToBack:function(){return this._map&&In(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Di){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?st(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Pe.include({_initOverlay:function(s,l,d,p){var _=l;return _ instanceof s||(_=new s(p).setContent(l)),d&&_.setLatLng(d),_}}),qn.include({_initOverlay:function(s,l,d,p){var _=d;return _ instanceof s?(b(_,p),_._source=this):(_=l&&!p?l:new s(p,this),_.setContent(d)),_}});var Fc=hi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,hi.prototype.openOn.call(this,s)},onAdd:function(s){hi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vr||this._source.on("preclick",De))},onRemove:function(s){hi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vr||this._source.off("preclick",De))},getEvents:function(){var s=hi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Re("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Re("div",s+"-content-wrapper",l);if(this._contentNode=Re("div",s+"-content",d),As(l),dl(this._contentNode),ye(l,"contextmenu",De),this._tipContainer=Re("div",s+"-tip-container",l),this._tip=Re("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Re("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ye(p,"click",function(_){ft(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,_=this.options.maxHeight,x="leaflet-popup-scrolled";_&&p>_?(l.height=_+"px",re(s,x)):We(s,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();st(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(mr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,_=new Z(this._containerLeft,-d-this._containerBottom);_._add(Mi(this._container));var x=s.layerPointToContainerPoint(_),D=J(this.options.autoPanPadding),H=J(this.options.autoPanPaddingTopLeft||D),$=J(this.options.autoPanPaddingBottomRight||D),Q=s.getSize(),ne=0,fe=0;x.x+p+$.x>Q.x&&(ne=x.x+p-Q.x+$.x),x.x-ne-H.x<0&&(ne=x.x-H.x),x.y+d+$.y>Q.y&&(fe=x.y+d-Q.y+$.y),x.y-fe-H.y<0&&(fe=x.y-H.y),(ne||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,fe]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),aA=function(s,l){return new Fc(s,l)};Pe.mergeOptions({closePopupOnClick:!0}),Pe.include({openPopup:function(s,l,d){return this._initOverlay(Fc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),qn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Fc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Di||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){oi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof vr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Uc=hi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){hi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){hi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=hi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,_=this._container,x=p.latLngToContainerPoint(p.getCenter()),D=p.layerPointToContainerPoint(s),H=this.options.direction,$=_.offsetWidth,Q=_.offsetHeight,ne=J(this.options.offset),fe=this._getAnchor();H==="top"?(l=$/2,d=Q):H==="bottom"?(l=$/2,d=0):H==="center"?(l=$/2,d=Q/2):H==="right"?(l=0,d=Q/2):H==="left"?(l=$,d=Q/2):D.x<x.x?(H="right",l=0,d=Q/2):(H="left",l=$+(ne.x+fe.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ne).add(fe),We(_,"leaflet-tooltip-right"),We(_,"leaflet-tooltip-left"),We(_,"leaflet-tooltip-top"),We(_,"leaflet-tooltip-bottom"),re(_,"leaflet-tooltip-"+H),st(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&rn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),lA=function(s,l){return new Uc(s,l)};Pe.include({openTooltip:function(s,l,d){return this._initOverlay(Uc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),qn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Uc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Di||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(ye(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ye(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var tv=jo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Gt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function uA(s){return new tv(s)}jo.Default=El;var Pl=qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Me(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Sn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,_=l.length,x;p<_;p++)x=l[p].style.zIndex,l[p]!==this._container&&x&&(d=s(d,+x));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){rn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var x=Math.min(1,(s-_.loaded)/200);rn(_.el,x),x<1?l=!0:(_.active?d=!0:this._onOpaqueTile(_),_.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(B(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Me(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Me(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var _=Math.floor(s/2),x=Math.floor(l/2),D=d-1,H=new Z(+_,+x);H.z=+D;var $=this._tileCoordsToKey(H),Q=this._tiles[$];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),D>p?this._retainParent(_,x,D,p):!1)},_retainChildren:function(s,l,d,p){for(var _=2*s;_<2*s+2;_++)for(var x=2*l;x<2*l+2;x++){var D=new Z(_,x);D.z=d+1;var H=this._tileCoordsToKey(D),$=this._tiles[H];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);d+1<p&&this._retainChildren(_,x,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var _=Math.round(l);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var x=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||x)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ae.any3d?Ni(s.el,_,p):st(s.el,_)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),_=l.project(s,this._tileZoom).floor(),x=l.getSize().divideBy(p*2);return new te(_.subtract(x),_.add(x))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),x=_.getCenter(),D=[],H=this.options.keepBuffer,$=new te(_.getBottomLeft().subtract([H,-H]),_.getTopRight().add([H,-H]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ne=this._tiles[Q].coords;(ne.z!==this._tileZoom||!$.contains(new Z(ne.x,ne.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var fe=_.min.y;fe<=_.max.y;fe++)for(var Se=_.min.x;Se<=_.max.x;Se++){var Kt=new Z(Se,fe);if(Kt.z=this._tileZoom,!!this._isValidTile(Kt)){var It=this._tiles[this._tileCoordsToKey(Kt)];It?It.current=!0:D.push(Kt)}}if(D.sort(function(on,Uo){return on.distanceTo(x)-Uo.distanceTo(x)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var bn=document.createDocumentFragment();for(Se=0;Se<D.length;Se++)this._addTile(D[Se],bn);this._level.el.appendChild(bn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Ce(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),_=p.add(d),x=l.unproject(p,s.z),D=l.unproject(_,s.z);return[x,D]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Ze(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Me(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){re(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,ae.ielt9&&this.options.opacity<1&&rn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&V(a(this._tileReady,this,s,null,_)),st(_,d),this._tiles[p]={el:_,coords:s,current:!0},l.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(rn(d.el,0),B(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(re(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new te(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function cA(s){return new Pl(s)}var Fo=Pl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&ae.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return ye(d,"load",a(this._tileOnLoad,this,l,d)),ye(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ae.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return E(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ae.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=q;var d=this._tiles[s].coords;Me(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),Pl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return Pl.prototype._tileReady.call(this,s,l,d)}});function nv(s,l){return new Fo(s,l)}var iv=Fo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=b(this,l);var _=l.detectRetina&&ae.retina?2:1,x=this.getTileSize();d.width=x.x*_,d.height=x.y*_,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Fo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Te(d.project(l[0]),d.project(l[1])),_=p.min,x=p.max,D=(this._wmsVersion>=1.3&&this._crs===Vo?[_.y,_.x,x.y,x.x]:[_.x,_.y,x.x,x.y]).join(","),H=Fo.prototype.getTileUrl.call(this,s);return H+j(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function hA(s,l){return new iv(s,l)}Fo.WMS=iv,nv.wms=hA;var Bi=qn.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,l),x=p.multiplyBy(-d).add(_).subtract(this._map._getNewPixelOrigin(s,l));ae.any3d?Ni(this._container,x,d):st(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new te(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),rv=Bi.extend({options:{tolerance:0},getEvents:function(){var s=Bi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ye(s,"mousemove",this._onMouseMove,this),ye(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Me(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=ae.retina?2:1;st(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,_;for(_=0;_<l.length;_++){if(p=Number(l[_]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,_,x,D=s._parts,H=D.length,$=this._ctx;if(H){for($.beginPath(),d=0;d<H;d++){for(p=0,_=D[d].length;p<_;p++)x=D[d][p],$[p?"lineTo":"moveTo"](x.x,x.y);l&&$.closePath()}this._fillStroke($,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(d.save(),d.scale(1,_)),d.beginPath(),d.arc(l.x,l.y/_,p,0,Math.PI*2,!1),_!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(We(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(re(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function sv(s){return ae.canvas?new rv(s):null}var Sl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dA={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Sl("shape");re(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Sl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Me(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Sl("stroke")),_.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(_.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Sl("fill")),_.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(_.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Sn(s._container)},_bringToBack:function(s){In(s._container)}},Hc=ae.vml?Sl:dc,Il=Bi.extend({_initContainer:function(){this._container=Hc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Hc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Me(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),st(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Hc("path");s.options.className&&re(l,s.options.className),s.options.interactive&&re(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Me(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,mo(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,_="a"+d+","+p+" 0 1,0 ",x=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+_+d*2+",0 "+_+-d*2+",0 ";this._setPath(s,x)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Sn(s._path)},_bringToBack:function(s){In(s._path)}});ae.vml&&Il.include(dA);function ov(s){return ae.svg||ae.vml?new Il(s):null}Pe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&sv(s)||ov(s)}});var av=zo.extend({initialize:function(s,l){zo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ce(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function fA(s,l){return new av(s,l)}Il.create=Hc,Il.pointsToPath=mo,zi.geometryToLayer=Vc,zi.coordsToLatLng=Zf,zi.coordsToLatLngs=Dc,zi.latLngToCoords=Kf,zi.latLngsToCoords=jc,zi.getFeature=Bo,zi.asFeature=zc,Pe.mergeOptions({boxZoom:!0});var lv=gn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Me(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Hn(),Io(),this._startPoint=this._map.mouseEventToContainerPoint(s),ye(document,{contextmenu:oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new te(this._point,this._startPoint),d=l.getSize();st(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Me(this._box),We(this._container,"leaflet-crosshair")),mn(),Co(),Fe(document,{contextmenu:oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pe.addInitHook("addHandler","boxZoom",lv),Pe.mergeOptions({doubleClickZoom:!0});var uv=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,_=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(_):l.setZoomAround(s.containerPoint,_)}});Pe.addInitHook("addHandler","doubleClickZoom",uv),Pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var cv=gn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Wn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ce(this._map.options.maxBounds);this._offsetLimit=Te(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-l+d)%s+l-d,x=(p+l+d)%s-l-d,D=Math.abs(_+d)<Math.abs(x+d)?_:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,D=d.easeLinearity,H=_.multiplyBy(D/x),$=H.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,$),ne=H.multiplyBy(Q/$),fe=Q/(d.inertiaDeceleration*D),Se=ne.multiplyBy(-fe/2).round();!Se.x&&!Se.y?l.fire("moveend"):(Se=l._limitOffset(Se,l.options.maxBounds),V(function(){l.panBy(Se,{duration:fe,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});Pe.addInitHook("addHandler","dragging",cv),Pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hv=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ye(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,_;for(p=0,_=d.left.length;p<_;p++)l[d.left[p]]=[-1*s,0];for(p=0,_=d.right.length;p<_;p++)l[d.right[p]]=[s,0];for(p=0,_=d.down.length;p<_;p++)l[d.down[p]]=[0,s];for(p=0,_=d.up.length;p<_;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,_;for(p=0,_=d.zoomIn.length;p<_;p++)l[d.zoomIn[p]]=s;for(p=0,_=d.zoomOut.length;p<_;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var _=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(_)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;oi(s)}}});Pe.addInitHook("addHandler","keyboard",hv),Pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dv=gn.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=pl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),oi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,x=d?Math.ceil(_/d)*d:_,D=s._limitZoom(l+(this._delta>0?x:-x))-l;this._delta=0,this._startTime=null,D&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+D):s.setZoomAround(this._lastMousePos,l+D))}});Pe.addInitHook("addHandler","scrollWheelZoom",dv);var pA=600;Pe.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var fv=gn.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",ft),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),pA),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Fe(document,"touchend",ft),Fe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Pe.addInitHook("addHandler","tapHold",fv),Pe.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var pv=gn.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),ft(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),_=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(_,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&_<1||this._zoom>l.getMaxZoom()&&_>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var x=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&x.x===0&&x.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var D=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(D,this,!0),ft(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pe.addInitHook("addHandler","touchZoom",pv),Pe.BoxZoom=lv,Pe.DoubleClickZoom=uv,Pe.Drag=cv,Pe.Keyboard=hv,Pe.ScrollWheelZoom=dv,Pe.TapHold=fv,Pe.TouchZoom=pv,n.Bounds=te,n.Browser=ae,n.CRS=lt,n.Canvas=rv,n.Circle=Gf,n.CircleMarker=Oc,n.Class=oe,n.Control=sn,n.DivIcon=tv,n.DivOverlay=hi,n.DomEvent=bs,n.DomUtil=qf,n.Draggable=Wn,n.Evented=Ge,n.FeatureGroup=Di,n.GeoJSON=zi,n.GridLayer=Pl,n.Handler=gn,n.Icon=jo,n.ImageOverlay=Bc,n.LatLng=Ee,n.LatLngBounds=Ze,n.Layer=qn,n.LayerGroup=Do,n.LineUtil=An,n.Map=Pe,n.Marker=Mc,n.Mixin=Lc,n.Path=vr,n.Point=Z,n.PolyUtil=Mo,n.Polygon=zo,n.Polyline=ji,n.Popup=Fc,n.PosAnimation=gl,n.Projection=ci,n.Rectangle=av,n.Renderer=Bi,n.SVG=Il,n.SVGOverlay=ev,n.TileLayer=Fo,n.Tooltip=Uc,n.Transformation=pn,n.Util=O,n.VideoOverlay=J_,n.bind=a,n.bounds=Te,n.canvas=sv,n.circle=eA,n.circleMarker=JC,n.control=li,n.divIcon=uA,n.extend=r,n.featureGroup=QC,n.geoJSON=Y_,n.geoJson=iA,n.gridLayer=cA,n.icon=XC,n.imageOverlay=rA,n.latLng=ce,n.latLngBounds=Ce,n.layerGroup=KC,n.map=bo,n.marker=YC,n.point=J,n.polygon=nA,n.polyline=tA,n.popup=aA,n.rectangle=fA,n.setOptions=b,n.stamp=h,n.svg=ov,n.svgOverlay=oA,n.tileLayer=nv,n.tooltip=lA,n.transformation=Ai,n.version=i,n.videoOverlay=sA;var mA=window.L;n.noConflict=function(){return window.L=mA,this},window.L=n})})(Bg,Bg.exports);var el=Bg.exports;const $C=gT(el);function jf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function qC(t,e){return e==null?function(i,r){const o=z.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=z.useRef();o.current||(o.current=t(i,r));const a=z.useRef(i),{instance:u}=o.current;return z.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function GC(t,e){z.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function oB(t){return function(n){const i=q_(),r=t(G_(n,i),i);return eB(i.map,n.attribution),WC(r.current,n.eventHandlers),GC(r.current,i),r}}function aB(t,e){const n=z.useRef();z.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function lB(t){return function(n){const i=q_(),r=t(G_(n,i),i);return WC(r.current,n.eventHandlers),GC(r.current,i),aB(r.current,n),r}}function Z_(t,e){const n=qC(t,e),i=lB(n);return rB(i)}function uB(t,e){const n=qC(t,e),i=oB(n);return sB(i)}function cB(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function K_(){return q_().map}function hB(t){const e=K_();return z.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const mT=Z_(function({center:e,children:n,...i},r){const o=new el.CircleMarker(e,i);return jf(o,$_(r,{overlayContainer:o}))},tB);function Fg(){return Fg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fg.apply(this,arguments)}function dB({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[v]=z.useState({className:r,id:o,style:u}),[T,R]=z.useState(null);z.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const b=z.useCallback(I=>{if(I!==null&&T===null){const E=new el.Map(I,m);n!=null&&f!=null?E.setView(n,f):t!=null&&E.fitBounds(t,e),h!=null&&E.whenReady(h),R(iB(E))}},[]);z.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const j=T?Zs.createElement(HC,{value:T},i):a??null;return Zs.createElement("div",Fg({},v,{ref:b}),j)}const fB=z.forwardRef(dB),pB=Z_(function({positions:e,...n},i){const r=new el.Polygon(e,n);return jf(r,$_(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),mB=Z_(function({positions:e,...n},i){const r=new el.Polyline(e,n);return jf(r,$_(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),gB=uB(function({url:e,...n},i){const r=new el.TileLayer(e,G_(n,i));return jf(r,i)},function(e,n,i){cB(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete $C.Icon.Default.prototype._getIconUrl;$C.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function yB({devMode:t}){const[e,n]=z.useState(LC),[i,r]=z.useState(RC);return hB({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?P.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:P.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[P.jsxs("div",{children:["zoom: ",e]}),P.jsxs("div",{children:["lat: ",i[0]]}),P.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function _B({hood:t}){const e=K_();return z.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function vB(){const t=K_(),[e,n]=z.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return P.jsx(he.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:P.jsx(he.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:P.jsx(Bz,{size:20,className:"text-white"})})})}function wB({point:t,onClose:e}){const n=t.capturedBy?Ko(t.capturedBy):"#495057",i=W_(t),r=t.status==="ghost";return P.jsx(he.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:P.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${n}40`},children:[P.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:P.jsx(FC,{size:16,className:"text-white/50"})}),P.jsxs("div",{className:"flex items-start gap-3",children:[P.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${n}20`,border:`1px solid ${n}40`},children:r?P.jsx(Hz,{size:20,className:"text-white/30"}):t.capturedBy?P.jsx(zC,{size:20,style:{color:n}}):P.jsx(Vf,{size:20,style:{color:n}})}),P.jsxs("div",{className:"flex-1",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),r&&P.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),P.jsx("p",{className:"text-sm text-white/40",children:t.area}),P.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[P.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&P.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),P.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[P.jsxs("span",{className:"text-lg font-bold",style:{color:n},children:[i," pts"]}),t.capturedBy?P.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:["Captured by ",t.capturedBy]}):P.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:r?"Gone":"Unclaimed"})]})]})]})]})})}const tm=[null,...Yr];function TB(){const{player:t,artPoints:e,captureArt:n}=cc(),[i,r]=z.useState(null),[o,a]=z.useState(!1),[u,h]=z.useState(e),[f,m]=z.useState(jg.vysocany);z.useEffect(()=>{h(e)},[e]);const g=I=>{o?h(E=>E.map(S=>{if(S.id===I.id){const q=(tm.indexOf(S.capturedBy)+1)%tm.length;return{...S,capturedBy:tm[q]}}return S})):r(I)},v=()=>{h(e.map(I=>({...I,capturedBy:null})))},T=o?u:e,R=z.useMemo(()=>Rz(T),[T]),b=z.useMemo(()=>NC(T),[T]),j=Object.values(b).reduce((I,E)=>I+E,0)||1;return P.jsxs("div",{className:"relative w-full h-full",children:[P.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(b).map(([I,E])=>{const S=E/j*100;return P.jsx(he.div,{className:"h-full",style:{backgroundColor:Ko(I)},initial:{width:0},animate:{width:`${S}%`},transition:{duration:.8}},I)})}),P.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[P.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),P.jsx("div",{className:"space-y-1.5",children:Yr.map(I=>P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:Ko(I)}}),P.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:I}),P.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[b[I]||0," pts"]})]},I))}),P.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[P.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),P.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),P.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[P.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),P.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),P.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[P.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),P.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),P.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(jg).map(I=>P.jsx(he.button,{onClick:()=>m(I),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f.id===I.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:I.name},I.id))}),P.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[P.jsx(he.button,{onClick:()=>a(!o),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${o?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:P.jsx(zz,{size:18})}),o&&P.jsx(he.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:v,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:P.jsx(DC,{size:18})})]}),P.jsx(Mu,{children:o&&P.jsx(he.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:P.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),P.jsxs(fB,{center:RC,zoom:LC,minZoom:Sz,maxZoom:Iz,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[P.jsx(gB,{url:hT.tileUrl,attribution:hT.attribution}),P.jsx(vB,{}),P.jsx(yB,{devMode:o}),P.jsx(_B,{hood:f}),P.jsx(mB,{positions:dT.map(I=>I.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),dT.map(I=>P.jsx(mT,{center:I.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},I.name)),Object.entries(R).map(([I,E])=>E.map((S,F)=>P.jsx(pB,{positions:S.polygon,pathOptions:{color:Ko(I),fillColor:Ko(I),fillOpacity:.25,weight:2,opacity:.7,interactive:!1}},`${I}-territory-${F}`))),T.map(I=>{const E=I.capturedBy?Ko(I.capturedBy):"#ffffff",S=!!I.capturedBy,F=I.status==="ghost";return P.jsx(mT,{center:I.location,radius:8,pathOptions:{color:o?"#a855f7":F?"#6b7280":E,fillColor:S?E:F?"#374151":"#0a0a0f",fillOpacity:F?.4:S?.8:1,weight:o?3:2,opacity:F?.5:1,dashArray:F?"3, 3":void 0},eventHandlers:{click:q=>{q.originalEvent.stopPropagation(),g(I)}}},I.id)})]}),P.jsx(Mu,{children:i&&P.jsx(wB,{point:i,onClose:()=>r(null)})})]})}function xB(){return P.jsx(he.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:P.jsx(TB,{})})}function EB({art:t,photo:e,onConfirm:n,onCancel:i,teamColor:r}){return P.jsx(he.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"absolute inset-x-4 bottom-24 z-20",children:P.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-3xl p-5 border border-white/10",children:[e&&P.jsx("div",{className:"mb-4 rounded-2xl overflow-hidden aspect-video bg-white/5",children:P.jsx("img",{src:e,alt:"Captured",className:"w-full h-full object-cover"})}),P.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[P.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${r}20`,border:`1px solid ${r}40`},children:P.jsx(Vf,{size:20,style:{color:r}})}),P.jsxs("div",{className:"flex-1",children:[P.jsx("h3",{className:"font-bold text-white",children:t.name}),P.jsxs("p",{className:"text-sm text-white/40",children:[t.area,"  ",t.distance,"m away"]})]}),P.jsxs("div",{className:"text-right",children:[P.jsxs("span",{className:"text-lg font-bold",style:{color:r},children:["+",t.points||100]}),P.jsx("p",{className:"text-xs text-white/40",children:"points"})]})]}),P.jsxs("div",{className:"flex gap-3",children:[P.jsx(he.button,{onClick:i,className:"flex-1 py-3 rounded-xl font-semibold bg-white/5 border border-white/10 text-white/70",whileTap:{scale:.98},children:"Cancel"}),P.jsx(he.button,{onClick:n,className:"flex-1 py-3 rounded-xl font-semibold text-white",style:{backgroundColor:r},whileTap:{scale:.98},children:"Claim!"})]})]})})}function PB({result:t,teamColor:e,onClose:n}){var r;const i=t==null?void 0:t.success;return P.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-20 p-6",children:P.jsxs(he.div,{className:"max-w-sm w-full text-center",initial:{scale:.9,y:20},animate:{scale:1,y:0},children:[P.jsx(he.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},className:"mx-auto mb-6",children:P.jsx("div",{className:`w-24 h-24 rounded-3xl flex items-center justify-center ${i?"bg-gradient-to-br from-emerald-400 to-green-600":"bg-gradient-to-br from-amber-400 to-orange-600"}`,children:i?P.jsx(Dz,{size:40,strokeWidth:3}):P.jsx(FC,{size:40,strokeWidth:3})})}),P.jsx("h2",{className:"text-3xl font-bold mb-2 text-white",children:i?t.message||"Captured!":"Oops!"}),i?P.jsxs(P.Fragment,{children:[P.jsx("p",{className:"text-white/50 mb-6",children:(r=t.art)==null?void 0:r.name}),P.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 rounded-2xl text-2xl font-bold",style:{backgroundColor:`${e}20`,color:e},children:[P.jsx(Yz,{size:24}),"+",t.points]})]}):P.jsx("p",{className:"text-white/50",children:t==null?void 0:t.message}),P.jsx(he.button,{onClick:n,className:"mt-8 w-full py-4 rounded-2xl font-semibold bg-white/10 border border-white/10",whileTap:{scale:.98},children:"Continue"})]})})}function SB({status:t,accuracy:e}){const n={loading:{color:"text-amber-400",bg:"bg-amber-500/20",text:"Getting location..."},success:{color:"text-emerald-400",bg:"bg-emerald-500/20",text:`${e}m`},error:{color:"text-red-400",bg:"bg-red-500/20",text:"Location unavailable"}},i=n[t]||n.loading;return P.jsxs("div",{className:`px-3 py-1.5 rounded-full ${i.bg} flex items-center gap-2`,children:[t==="loading"?P.jsx(OC,{size:14,className:`${i.color} animate-spin`}):P.jsx(qz,{size:14,className:i.color}),P.jsx("span",{className:`text-xs font-medium ${i.color}`,children:i.text})]})}function IB(){var M,V;const{player:t,pendingCapture:e,scanResult:n,isScanning:i,startCapture:r,confirmCapture:o,cancelCapture:a,setScanResult:u,findNearestArt:h}=cc(),[f,m]=z.useState(!1),[g,v]=z.useState(null),[T,R]=z.useState(null),[b,j]=z.useState("loading"),[I,E]=z.useState(null),S=z.useRef(null),F=z.useRef(null),q=z.useRef(null),G=t.team?He[t.team].hex:"#22c55e";z.useEffect(()=>{if(!navigator.geolocation){j("error");return}const B=navigator.geolocation.watchPosition(O=>{const oe={lat:O.coords.latitude,lng:O.coords.longitude};R(oe),j("success");const Ve=h(oe.lat,oe.lng,200);E(Ve)},O=>{console.error("Location error:",O),j("error")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3});return()=>navigator.geolocation.clearWatch(B)},[h]);const N=z.useCallback(async()=>{try{const B=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});S.current&&(S.current.srcObject=B,F.current=B,m(!0),v(null))}catch(B){console.error("Camera error:",B),v("Camera access denied")}},[]),C=z.useCallback(()=>{F.current&&(F.current.getTracks().forEach(B=>B.stop()),F.current=null),m(!1)},[]);z.useEffect(()=>(N(),()=>C()),[N,C]);const k=z.useCallback(()=>{if(!T||!I)return;const B=S.current,O=q.current;if(!B||!O)return;O.width=B.videoWidth||640,O.height=B.videoHeight||480,O.getContext("2d").drawImage(B,0,0);const Ve=O.toDataURL("image/jpeg",.8);r(Ve,T)},[T,I,r]);return t.team?P.jsxs(he.div,{className:"flex-1 relative bg-black overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:[P.jsx("canvas",{ref:q,className:"hidden"}),P.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}),g&&P.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center bg-black",children:[P.jsx(zg,{size:48,className:"text-white/20 mb-4"}),P.jsx("p",{className:"text-white/50",children:g})]}),P.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/60 pointer-events-none"}),P.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between",children:[P.jsxs("div",{className:"px-4 py-2 rounded-2xl flex items-center gap-2 bg-black/40 backdrop-blur-sm border",style:{borderColor:`${G}40`},children:[P.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:G}}),P.jsx("span",{className:"text-sm font-medium text-white/90 capitalize",children:t.team})]}),P.jsx(SB,{status:b,accuracy:T?Math.round(T.accuracy||10):null})]}),I&&!e&&!n&&P.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"absolute top-20 left-4 right-4",children:P.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:P.jsx(Vf,{size:18,className:"text-emerald-400"})}),P.jsxs("div",{className:"flex-1",children:[P.jsx("p",{className:"font-semibold text-white text-sm",children:I.name}),P.jsxs("p",{className:"text-xs text-white/40",children:[I.distance,"m away  ",I.area]})]}),I.capturedBy&&P.jsx("div",{className:"px-2 py-1 rounded-full text-xs",style:{backgroundColor:`${(M=He[I.capturedBy])==null?void 0:M.hex}20`,color:(V=He[I.capturedBy])==null?void 0:V.hex},children:I.capturedBy})]})})}),!I&&b==="success"&&!e&&!n&&P.jsx("div",{className:"absolute top-20 left-4 right-4",children:P.jsxs("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-4 border border-white/10 text-center",children:[P.jsx("p",{className:"text-white/50 text-sm",children:"No street art nearby"}),P.jsx("p",{className:"text-white/30 text-xs mt-1",children:"Get closer to a spot on the map"})]})}),!e&&!n&&P.jsx("div",{className:"absolute bottom-24 left-0 right-0 flex justify-center",children:P.jsxs(he.button,{onClick:k,disabled:!I||b!=="success"||i,className:"relative w-20 h-20 rounded-full flex items-center justify-center disabled:opacity-50",whileTap:{scale:.9},children:[P.jsx("div",{className:"absolute inset-0 rounded-full border-4",style:{borderColor:I?G:"rgba(255,255,255,0.2)"}}),P.jsx(he.div,{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center",animate:i?{scale:[1,.9,1]}:{},transition:{repeat:1/0,duration:.6},children:i?P.jsx(OC,{size:26,className:"text-black animate-spin"}):P.jsx(zg,{size:26,className:"text-black"})})]})}),P.jsx(Mu,{children:e&&P.jsx(EB,{art:e.art,photo:e.photo,teamColor:G,onConfirm:o,onCancel:a})}),P.jsx(Mu,{children:n&&P.jsx(PB,{result:n,teamColor:G,onClose:()=>u(null)})})]}):P.jsx(he.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:P.jsx(Oz,{size:36,className:"text-amber-500"})}),P.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),P.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start capturing street art"})]})})}const CB=[{id:1,name:"StreetKing",team:"red",score:1250,captures:12},{id:2,name:"ArtHunter",team:"blue",score:980,captures:9},{id:3,name:"SprayQueen",team:"red",score:650,captures:6},{id:4,name:"UrbanExplorer",team:"blue",score:580,captures:5},{id:5,name:"WallWalker",team:"red",score:420,captures:4},{id:6,name:"NightOwl",team:"blue",score:380,captures:3}],AB={red:"Crimson",blue:"Azure"};function kB({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return P.jsxs(he.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[P.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${He[t].hex}15 0%, transparent 60%)`}}),P.jsx(he.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:He[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),P.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${He[t].hex}30`},children:P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?P.jsx(Fz,{size:20,className:"text-white"}):P.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),P.jsxs("div",{className:"flex-1",children:[P.jsx("p",{className:"font-semibold text-white",children:AB[t]}),P.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[P.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:He[t].hex}}),P.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("p",{className:"text-2xl font-bold",style:{color:He[t].hex},children:e.toLocaleString()}),P.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function bB({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return P.jsxs(he.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[P.jsx("div",{className:"w-8 flex justify-center",children:i?P.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:P.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):P.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),P.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${He[t.team].hex}20`,color:He[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),P.jsxs("div",{className:"flex-1 min-w-0",children:[P.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&P.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),P.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),P.jsx("div",{className:"text-right",children:P.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function RB(){var h;const{teamScores:t,player:e}=cc(),i=Object.entries(t).filter(([f])=>He[f]).sort((f,m)=>m[1]-f[1]),r=Object.values(t).reduce((f,m)=>f+m,0)||1,o=CB.filter(f=>He[f.team]);e.team&&e.score>0&&o.push({id:"current",name:e.name,team:e.team,score:e.score,captures:((h=e.capturedArt)==null?void 0:h.length)||0});const a=o.sort((f,m)=>m.score-f.score),u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return P.jsxs(he.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:u,children:[P.jsx(he.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:P.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[P.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:P.jsx(Df,{size:20,className:"text-white"})}),P.jsxs("div",{children:[P.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),P.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),P.jsxs("div",{className:"mb-8",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(Kz,{size:16,className:"text-white/40"}),P.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),P.jsx("div",{className:"space-y-3",children:i.map(([f,m],g)=>P.jsx(kB,{team:f,score:m,rank:g,totalScore:r},f))})]}),P.jsxs("div",{children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(Uz,{size:16,className:"text-white/40"}),P.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),P.jsx("div",{className:"space-y-2",children:a.map((f,m)=>P.jsx(bB,{player:f,rank:m,isCurrentPlayer:f.id==="current"},f.id))})]})]})}function nm({icon:t,label:e,value:n,color:i}){return P.jsxs(he.div,{className:"glass rounded-xl p-4 text-center",whileHover:{scale:1.02},children:[P.jsx(t,{size:24,className:"mx-auto mb-2",style:{color:i}}),P.jsx("p",{className:"text-2xl font-bold",children:n}),P.jsx("p",{className:"text-xs text-gray-400",children:e})]})}function LB({art:t}){var e,n;return P.jsxs(he.div,{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[P.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${(e=He[t.capturedBy])==null?void 0:e.hex}30`},children:P.jsx(Hd,{size:20,style:{color:(n=He[t.capturedBy])==null?void 0:n.hex}})}),P.jsxs("div",{className:"flex-1",children:[P.jsx("p",{className:"font-medium text-sm",children:t.name}),P.jsxs("p",{className:"text-xs text-gray-400",children:[t.points," pts"]})]}),P.jsx(hu,{size:18,className:"text-gray-500"})]})}function im({icon:t,label:e,onClick:n}){return P.jsxs(he.button,{onClick:n,className:"w-full flex items-center gap-3 p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-colors",whileTap:{scale:.98},children:[P.jsx(t,{size:20,className:"text-gray-400"}),P.jsx("span",{className:"flex-1 text-left",children:e}),P.jsx(hu,{size:18,className:"text-gray-500"})]})}function NB(){const{player:t,artPoints:e,joinTeam:n,resetAll:i}=cc(),[r,o]=z.useState(!1),[a,u]=z.useState(t.name),h=(e==null?void 0:e.filter(m=>t.capturedArt.includes(m.id)))||[],f=t.team?He[t.team].hex:"#64748b";return P.jsxs(he.div,{className:"flex-1 overflow-y-auto pb-20 px-4 pt-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[P.jsxs("div",{className:"text-center mb-6",children:[P.jsxs(he.div,{className:"relative inline-block",whileHover:{scale:1.05},children:[P.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-3",style:{background:`linear-gradient(135deg, ${f}50, ${f}20)`,border:`3px solid ${f}`},children:P.jsx(BC,{size:40,style:{color:f}})}),P.jsx("button",{className:"absolute bottom-2 right-0 w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:P.jsx(zg,{size:14})})]}),r?P.jsx("input",{type:"text",value:a,onChange:m=>u(m.target.value),onBlur:()=>o(!1),className:"text-xl font-bold bg-transparent border-b-2 border-white/30 text-center outline-none",autoFocus:!0}):P.jsx("h1",{className:"text-xl font-bold cursor-pointer",onClick:()=>o(!0),children:t.name}),t.team&&P.jsxs("p",{className:"text-sm mt-1",style:{color:f},children:[t.team.charAt(0).toUpperCase()+t.team.slice(1)," Team"]})]}),P.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[P.jsx(nm,{icon:Df,label:"Score",value:t.score,color:"#eab308"}),P.jsx(nm,{icon:Hd,label:"Captures",value:h.length,color:"#22c55e"}),P.jsx(nm,{icon:Vf,label:"Sectors",value:"3",color:"#3b82f6"})]}),h.length>0&&P.jsxs("div",{className:"mb-6",children:[P.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[P.jsx(Hd,{size:16})," YOUR CAPTURES"]}),P.jsx("div",{className:"space-y-2",children:h.map(m=>P.jsx(LB,{art:m},m.id))})]}),!t.team&&P.jsxs("div",{className:"mb-6",children:[P.jsx("h2",{className:"text-sm font-medium text-gray-400 mb-3",children:"SELECT YOUR TEAM"}),P.jsx("div",{className:"grid grid-cols-2 gap-2",children:["red","blue"].map(m=>P.jsxs(he.button,{onClick:()=>n(m),className:"p-4 rounded-xl bg-white/5 text-center",style:{borderColor:He[m].hex,borderWidth:2},whileTap:{scale:.95},children:[P.jsx("div",{className:"w-8 h-8 rounded-full mx-auto mb-2",style:{backgroundColor:He[m].hex}}),P.jsx("p",{className:"text-sm font-medium capitalize",children:m==="red"?"Crimson":"Azure"})]},m))})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[P.jsx(Gz,{size:16})," SETTINGS"]}),P.jsx(im,{icon:Vz,label:"Notifications"}),P.jsx(im,{icon:Zz,label:"Privacy"}),P.jsx(im,{icon:$z,label:"Reset Game Data",onClick:i})]}),P.jsx("p",{className:"text-center text-xs text-gray-500 mt-6",children:"Street Art CTF v1.0.0"})]})}const MB=[{path:"/",icon:Wz,label:"Home"},{path:"/map",icon:VC,label:"Map"},{path:"/scanner",icon:jC,label:"Scan"},{path:"/leaderboard",icon:Df,label:"Ranks"},{path:"/profile",icon:BC,label:"You"}];function OB(){return P.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[P.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),P.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:MB.map(({path:t,icon:e,label:n})=>P.jsx(eR,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>P.jsxs(he.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&P.jsx(he.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),P.jsx(he.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:P.jsx(e,{size:20,strokeWidth:i?2.5:2})}),P.jsx(he.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function VB(){const t=qa();return P.jsx(Lz,{children:P.jsxs("div",{className:"h-full w-full flex flex-col",children:[P.jsx(Mu,{mode:"wait",children:P.jsxs(U2,{location:t,children:[P.jsx(Wo,{path:"/",element:P.jsx(Jz,{})}),P.jsx(Wo,{path:"/map",element:P.jsx(xB,{})}),P.jsx(Wo,{path:"/scanner",element:P.jsx(IB,{})}),P.jsx(Wo,{path:"/leaderboard",element:P.jsx(RB,{})}),P.jsx(Wo,{path:"/profile",element:P.jsx(NB,{})})]},t.pathname)}),P.jsx(OB,{})]})})}rm.createRoot(document.getElementById("root")).render(P.jsx(Zs.StrictMode,{children:P.jsx(Q2,{children:P.jsx(VB,{})})}));
