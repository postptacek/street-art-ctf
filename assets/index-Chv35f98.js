function $A(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var GA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z1={exports:{}},cf={},U1={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc=Symbol.for("react.element"),qA=Symbol.for("react.portal"),ZA=Symbol.for("react.fragment"),KA=Symbol.for("react.strict_mode"),QA=Symbol.for("react.profiler"),YA=Symbol.for("react.provider"),XA=Symbol.for("react.context"),JA=Symbol.for("react.forward_ref"),eb=Symbol.for("react.suspense"),tb=Symbol.for("react.memo"),nb=Symbol.for("react.lazy"),Dv=Symbol.iterator;function ib(t){return t===null||typeof t!="object"?null:(t=Dv&&t[Dv]||t["@@iterator"],typeof t=="function"?t:null)}var H1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W1=Object.assign,$1={};function sl(t,e,n){this.props=t,this.context=e,this.refs=$1,this.updater=n||H1}sl.prototype.isReactComponent={};sl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G1(){}G1.prototype=sl.prototype;function ry(t,e,n){this.props=t,this.context=e,this.refs=$1,this.updater=n||H1}var sy=ry.prototype=new G1;sy.constructor=ry;W1(sy,sl.prototype);sy.isPureReactComponent=!0;var Vv=Array.isArray,q1=Object.prototype.hasOwnProperty,oy={current:null},Z1={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)q1.call(e,i)&&!Z1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:oc,type:t,key:o,ref:a,props:r,_owner:oy.current}}function rb(t,e){return{$$typeof:oc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ay(t){return typeof t=="object"&&t!==null&&t.$$typeof===oc}function sb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jv=/\/+/g;function yp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sb(""+t.key):e.toString(36)}function Dh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case oc:case qA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+yp(a,0):i,Vv(r)?(n="",t!=null&&(n=t.replace(jv,"$&/")+"/"),Dh(r,e,n,"",function(f){return f})):r!=null&&(ay(r)&&(r=rb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(jv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Vv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+yp(o,u);a+=Dh(o,e,n,h,r)}else if(h=ib(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+yp(o,u++),a+=Dh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function rh(t,e,n){if(t==null)return t;var i=[],r=0;return Dh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function ob(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dn={current:null},Vh={transition:null},ab={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:Vh,ReactCurrentOwner:oy};function Q1(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:rh,forEach:function(t,e,n){rh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rh(t,function(){e++}),e},toArray:function(t){return rh(t,function(e){return e})||[]},only:function(t){if(!ay(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=sl;De.Fragment=ZA;De.Profiler=QA;De.PureComponent=ry;De.StrictMode=KA;De.Suspense=eb;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ab;De.act=Q1;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=W1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=oy.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)q1.call(e,h)&&!Z1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:oc,type:t.type,key:r,ref:o,props:i,_owner:a}};De.createContext=function(t){return t={$$typeof:XA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YA,_context:t},t.Consumer=t};De.createElement=K1;De.createFactory=function(t){var e=K1.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:JA,render:t}};De.isValidElement=ay;De.lazy=function(t){return{$$typeof:nb,_payload:{_status:-1,_result:t},_init:ob}};De.memo=function(t,e){return{$$typeof:tb,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Vh.transition;Vh.transition={};try{t()}finally{Vh.transition=e}};De.unstable_act=Q1;De.useCallback=function(t,e){return dn.current.useCallback(t,e)};De.useContext=function(t){return dn.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return dn.current.useDeferredValue(t)};De.useEffect=function(t,e){return dn.current.useEffect(t,e)};De.useId=function(){return dn.current.useId()};De.useImperativeHandle=function(t,e,n){return dn.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return dn.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return dn.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return dn.current.useMemo(t,e)};De.useReducer=function(t,e,n){return dn.current.useReducer(t,e,n)};De.useRef=function(t){return dn.current.useRef(t)};De.useState=function(t){return dn.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return dn.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return dn.current.useTransition()};De.version="18.3.1";U1.exports=De;var V=U1.exports;const fo=B1(V),lb=$A({__proto__:null,default:fo},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub=V,cb=Symbol.for("react.element"),hb=Symbol.for("react.fragment"),db=Object.prototype.hasOwnProperty,fb=ub.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pb={key:!0,ref:!0,__self:!0,__source:!0};function Y1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)db.call(e,i)&&!pb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:cb,type:t,key:o,ref:a,props:r,_owner:fb.current}}cf.Fragment=hb;cf.jsx=Y1;cf.jsxs=Y1;z1.exports=cf;var w=z1.exports,xm={},X1={exports:{}},Mn={},J1={exports:{}},eT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,he){var J=Z.length;Z.push(he);e:for(;0<J;){var ie=J-1>>>1,Se=Z[ie];if(0<r(Se,he))Z[ie]=he,Z[J]=Se,J=ie;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var he=Z[0],J=Z.pop();if(J!==he){Z[0]=J;e:for(var ie=0,Se=Z.length,Xe=Se>>>1;ie<Xe;){var Le=2*(ie+1)-1,ke=Z[Le],pe=Le+1,ct=Z[pe];if(0>r(ke,J))pe<Se&&0>r(ct,ke)?(Z[ie]=ct,Z[pe]=J,ie=pe):(Z[ie]=ke,Z[Le]=J,ie=Le);else if(pe<Se&&0>r(ct,J))Z[ie]=ct,Z[pe]=J,ie=pe;else break e}}return he}function r(Z,he){var J=Z.sortIndex-he.sortIndex;return J!==0?J:Z.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,_=3,E=!1,k=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var he=n(f);he!==null;){if(he.callback===null)i(f);else if(he.startTime<=Z)i(f),he.sortIndex=he.expirationTime,e(h,he);else break;he=n(f)}}function F(Z){if(R=!1,S(Z),!k)if(n(h)!==null)k=!0,be($);else{var he=n(f);he!==null&&at(F,he.startTime-Z)}}function $(Z,he){k=!1,R&&(R=!1,I(C),C=-1),E=!0;var J=_;try{for(S(he),g=n(h);g!==null&&(!(g.expirationTime>he)||Z&&!O());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,_=g.priorityLevel;var Se=ie(g.expirationTime<=he);he=t.unstable_now(),typeof Se=="function"?g.callback=Se:g===n(h)&&i(h),S(he)}else i(h);g=n(h)}if(g!==null)var Xe=!0;else{var Le=n(f);Le!==null&&at(F,Le.startTime-he),Xe=!1}return Xe}finally{g=null,_=J,E=!1}}var U=!1,b=null,C=-1,N=5,j=-1;function O(){return!(t.unstable_now()-j<N)}function z(){if(b!==null){var Z=t.unstable_now();j=Z;var he=!0;try{he=b(!0,Z)}finally{he?D():(U=!1,b=null)}}else U=!1}var D;if(typeof T=="function")D=function(){T(z)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ge=me.port2;me.port1.onmessage=z,D=function(){Ge.postMessage(null)}}else D=function(){M(z,0)};function be(Z){b=Z,U||(U=!0,D())}function at(Z,he){C=M(function(){Z(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){k||E||(k=!0,be($))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var he=3;break;default:he=_}var J=_;_=he;try{return Z()}finally{_=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var J=_;_=Z;try{return he()}finally{_=J}},t.unstable_scheduleCallback=function(Z,he,J){var ie=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,Z){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=J+Se,Z={id:m++,callback:he,priorityLevel:Z,startTime:J,expirationTime:Se,sortIndex:-1},J>ie?(Z.sortIndex=J,e(f,Z),n(h)===null&&Z===n(f)&&(R?(I(C),C=-1):R=!0,at(F,J-ie))):(Z.sortIndex=Se,e(h,Z),k||E||(k=!0,be($))),Z},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(Z){var he=_;return function(){var J=_;_=he;try{return Z.apply(this,arguments)}finally{_=J}}}})(eT);J1.exports=eT;var mb=J1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb=V,Rn=mb;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tT=new Set,ku={};function Po(t,e){Ba(t,e),Ba(t+"Capture",e)}function Ba(t,e){for(ku[t]=e,t=0;t<e.length;t++)tT.add(e[t])}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tm=Object.prototype.hasOwnProperty,yb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fv={},Bv={};function _b(t){return Tm.call(Bv,t)?!0:Tm.call(Fv,t)?!1:yb.test(t)?Bv[t]=!0:(Fv[t]=!0,!1)}function vb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wb(t,e,n,i){if(e===null||typeof e>"u"||vb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ly=/[\-:]([a-z])/g;function uy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ly,uy);$t[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ly,uy);$t[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ly,uy);$t[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function cy(t,e,n,i){var r=$t.hasOwnProperty(e)?$t[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wb(e,n,r,i)&&(n=null),i||r===null?_b(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Pr=gb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sh=Symbol.for("react.element"),fa=Symbol.for("react.portal"),pa=Symbol.for("react.fragment"),hy=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),nT=Symbol.for("react.provider"),iT=Symbol.for("react.context"),dy=Symbol.for("react.forward_ref"),Pm=Symbol.for("react.suspense"),Sm=Symbol.for("react.suspense_list"),fy=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),rT=Symbol.for("react.offscreen"),zv=Symbol.iterator;function Ul(t){return t===null||typeof t!="object"?null:(t=zv&&t[zv]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Object.assign,_p;function tu(t){if(_p===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_p=e&&e[1]||""}return`
`+_p+t}var vp=!1;function wp(t,e){if(!t||vp)return"";vp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{vp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?tu(t):""}function xb(t){switch(t.tag){case 5:return tu(t.type);case 16:return tu("Lazy");case 13:return tu("Suspense");case 19:return tu("SuspenseList");case 0:case 2:case 15:return t=wp(t.type,!1),t;case 11:return t=wp(t.type.render,!1),t;case 1:return t=wp(t.type,!0),t;default:return""}}function Cm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pa:return"Fragment";case fa:return"Portal";case Em:return"Profiler";case hy:return"StrictMode";case Pm:return"Suspense";case Sm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iT:return(t.displayName||"Context")+".Consumer";case nT:return(t._context.displayName||"Context")+".Provider";case dy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fy:return e=t.displayName||null,e!==null?e:Cm(t.type)||"Memo";case Br:e=t._payload,t=t._init;try{return Cm(t(e))}catch{}}return null}function Tb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cm(e);case 8:return e===hy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Eb(t){var e=sT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oh(t){t._valueTracker||(t._valueTracker=Eb(t))}function oT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=sT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ad(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Im(t,e){var n=e.checked;return mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Uv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aT(t,e){e=e.checked,e!=null&&cy(t,"checked",e,!1)}function Am(t,e){aT(t,e);var n=gs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bm(t,e.type,n):e.hasOwnProperty("defaultValue")&&bm(t,e.type,gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bm(t,e,n){(e!=="number"||ad(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nu=Array.isArray;function ka(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+gs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function km(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(nu(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gs(n)}}function lT(t,e){var n=gs(e.value),i=gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function $v(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ah,cT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ah=ah||document.createElement("div"),ah.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ah.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ru(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pb=["Webkit","ms","Moz","O"];Object.keys(cu).forEach(function(t){Pb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cu[e]=cu[t]})});function hT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cu.hasOwnProperty(t)&&cu[t]?(""+e).trim():e+"px"}function dT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=hT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Sb=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nm(t,e){if(e){if(Sb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Lm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mm=null;function py(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Om=null,Ra=null,Na=null;function Gv(t){if(t=uc(t)){if(typeof Om!="function")throw Error(X(280));var e=t.stateNode;e&&(e=mf(e),Om(t.stateNode,t.type,e))}}function fT(t){Ra?Na?Na.push(t):Na=[t]:Ra=t}function pT(){if(Ra){var t=Ra,e=Na;if(Na=Ra=null,Gv(t),e)for(t=0;t<e.length;t++)Gv(e[t])}}function mT(t,e){return t(e)}function gT(){}var xp=!1;function yT(t,e,n){if(xp)return t(e,n);xp=!0;try{return mT(t,e,n)}finally{xp=!1,(Ra!==null||Na!==null)&&(gT(),pT())}}function Nu(t,e){var n=t.stateNode;if(n===null)return null;var i=mf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Dm=!1;if(pr)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){Dm=!0}}),window.addEventListener("test",Hl,Hl),window.removeEventListener("test",Hl,Hl)}catch{Dm=!1}function Cb(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var hu=!1,ld=null,ud=!1,Vm=null,Ib={onError:function(t){hu=!0,ld=t}};function Ab(t,e,n,i,r,o,a,u,h){hu=!1,ld=null,Cb.apply(Ib,arguments)}function bb(t,e,n,i,r,o,a,u,h){if(Ab.apply(this,arguments),hu){if(hu){var f=ld;hu=!1,ld=null}else throw Error(X(198));ud||(ud=!0,Vm=f)}}function So(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _T(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qv(t){if(So(t)!==t)throw Error(X(188))}function kb(t){var e=t.alternate;if(!e){if(e=So(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return qv(r),t;if(o===i)return qv(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function vT(t){return t=kb(t),t!==null?wT(t):null}function wT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wT(t);if(e!==null)return e;t=t.sibling}return null}var xT=Rn.unstable_scheduleCallback,Zv=Rn.unstable_cancelCallback,Rb=Rn.unstable_shouldYield,Nb=Rn.unstable_requestPaint,xt=Rn.unstable_now,Lb=Rn.unstable_getCurrentPriorityLevel,my=Rn.unstable_ImmediatePriority,TT=Rn.unstable_UserBlockingPriority,cd=Rn.unstable_NormalPriority,Mb=Rn.unstable_LowPriority,ET=Rn.unstable_IdlePriority,hf=null,Ri=null;function Ob(t){if(Ri&&typeof Ri.onCommitFiberRoot=="function")try{Ri.onCommitFiberRoot(hf,t,void 0,(t.current.flags&128)===128)}catch{}}var pi=Math.clz32?Math.clz32:jb,Db=Math.log,Vb=Math.LN2;function jb(t){return t>>>=0,t===0?32:31-(Db(t)/Vb|0)|0}var lh=64,uh=4194304;function iu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=iu(u):(o&=a,o!==0&&(i=iu(o)))}else a=n&~r,a!==0?i=iu(a):o!==0&&(i=iu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-pi(e),r=1<<n,i|=t[n],e&=~r;return i}function Fb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-pi(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=Fb(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function jm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function PT(){var t=lh;return lh<<=1,!(lh&4194240)&&(lh=64),t}function Tp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ac(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pi(e),t[e]=n}function zb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-pi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function gy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-pi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ye=0;function ST(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CT,yy,IT,AT,bT,Fm=!1,ch=[],Jr=null,es=null,ts=null,Lu=new Map,Mu=new Map,Hr=[],Ub="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kv(t,e){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":Lu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(e.pointerId)}}function Wl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=uc(e),e!==null&&yy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Hb(t,e,n,i,r){switch(e){case"focusin":return Jr=Wl(Jr,t,e,n,i,r),!0;case"dragenter":return es=Wl(es,t,e,n,i,r),!0;case"mouseover":return ts=Wl(ts,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Lu.set(o,Wl(Lu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Mu.set(o,Wl(Mu.get(o)||null,t,e,n,i,r)),!0}return!1}function kT(t){var e=eo(t.target);if(e!==null){var n=So(e);if(n!==null){if(e=n.tag,e===13){if(e=_T(n),e!==null){t.blockedOn=e,bT(t.priority,function(){IT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Mm=i,n.target.dispatchEvent(i),Mm=null}else return e=uc(n),e!==null&&yy(e),t.blockedOn=n,!1;e.shift()}return!0}function Qv(t,e,n){jh(t)&&n.delete(e)}function Wb(){Fm=!1,Jr!==null&&jh(Jr)&&(Jr=null),es!==null&&jh(es)&&(es=null),ts!==null&&jh(ts)&&(ts=null),Lu.forEach(Qv),Mu.forEach(Qv)}function $l(t,e){t.blockedOn===e&&(t.blockedOn=null,Fm||(Fm=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,Wb)))}function Ou(t){function e(r){return $l(r,t)}if(0<ch.length){$l(ch[0],t);for(var n=1;n<ch.length;n++){var i=ch[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Jr!==null&&$l(Jr,t),es!==null&&$l(es,t),ts!==null&&$l(ts,t),Lu.forEach(e),Mu.forEach(e),n=0;n<Hr.length;n++)i=Hr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Hr.length&&(n=Hr[0],n.blockedOn===null);)kT(n),n.blockedOn===null&&Hr.shift()}var La=Pr.ReactCurrentBatchConfig,dd=!0;function $b(t,e,n,i){var r=Ye,o=La.transition;La.transition=null;try{Ye=1,_y(t,e,n,i)}finally{Ye=r,La.transition=o}}function Gb(t,e,n,i){var r=Ye,o=La.transition;La.transition=null;try{Ye=4,_y(t,e,n,i)}finally{Ye=r,La.transition=o}}function _y(t,e,n,i){if(dd){var r=Bm(t,e,n,i);if(r===null)Np(t,e,i,fd,n),Kv(t,i);else if(Hb(r,t,e,n,i))i.stopPropagation();else if(Kv(t,i),e&4&&-1<Ub.indexOf(t)){for(;r!==null;){var o=uc(r);if(o!==null&&CT(o),o=Bm(t,e,n,i),o===null&&Np(t,e,i,fd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Np(t,e,i,null,n)}}var fd=null;function Bm(t,e,n,i){if(fd=null,t=py(i),t=eo(t),t!==null)if(e=So(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_T(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fd=t,null}function RT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lb()){case my:return 1;case TT:return 4;case cd:case Mb:return 16;case ET:return 536870912;default:return 16}default:return 16}}var Kr=null,vy=null,Fh=null;function NT(){if(Fh)return Fh;var t,e=vy,n=e.length,i,r="value"in Kr?Kr.value:Kr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Fh=r.slice(t,1<i?1-i:void 0)}function Bh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hh(){return!0}function Yv(){return!1}function On(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hh:Yv,this.isPropagationStopped=Yv,this}return mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hh)},persist:function(){},isPersistent:hh}),e}var ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wy=On(ol),lc=mt({},ol,{view:0,detail:0}),qb=On(lc),Ep,Pp,Gl,df=mt({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gl&&(Gl&&t.type==="mousemove"?(Ep=t.screenX-Gl.screenX,Pp=t.screenY-Gl.screenY):Pp=Ep=0,Gl=t),Ep)},movementY:function(t){return"movementY"in t?t.movementY:Pp}}),Xv=On(df),Zb=mt({},df,{dataTransfer:0}),Kb=On(Zb),Qb=mt({},lc,{relatedTarget:0}),Sp=On(Qb),Yb=mt({},ol,{animationName:0,elapsedTime:0,pseudoElement:0}),Xb=On(Yb),Jb=mt({},ol,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ek=On(Jb),tk=mt({},ol,{data:0}),Jv=On(tk),nk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rk[t])?!!e[t]:!1}function xy(){return sk}var ok=mt({},lc,{key:function(t){if(t.key){var e=nk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ik[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xy,charCode:function(t){return t.type==="keypress"?Bh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ak=On(ok),lk=mt({},df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e0=On(lk),uk=mt({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xy}),ck=On(uk),hk=mt({},ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),dk=On(hk),fk=mt({},df,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pk=On(fk),mk=[9,13,27,32],Ty=pr&&"CompositionEvent"in window,du=null;pr&&"documentMode"in document&&(du=document.documentMode);var gk=pr&&"TextEvent"in window&&!du,LT=pr&&(!Ty||du&&8<du&&11>=du),t0=" ",n0=!1;function MT(t,e){switch(t){case"keyup":return mk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ma=!1;function yk(t,e){switch(t){case"compositionend":return OT(e);case"keypress":return e.which!==32?null:(n0=!0,t0);case"textInput":return t=e.data,t===t0&&n0?null:t;default:return null}}function _k(t,e){if(ma)return t==="compositionend"||!Ty&&MT(t,e)?(t=NT(),Fh=vy=Kr=null,ma=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LT&&e.locale!=="ko"?null:e.data;default:return null}}var vk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vk[t.type]:e==="textarea"}function DT(t,e,n,i){fT(i),e=pd(e,"onChange"),0<e.length&&(n=new wy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var fu=null,Du=null;function wk(t){qT(t,0)}function ff(t){var e=_a(t);if(oT(e))return t}function xk(t,e){if(t==="change")return e}var VT=!1;if(pr){var Cp;if(pr){var Ip="oninput"in document;if(!Ip){var r0=document.createElement("div");r0.setAttribute("oninput","return;"),Ip=typeof r0.oninput=="function"}Cp=Ip}else Cp=!1;VT=Cp&&(!document.documentMode||9<document.documentMode)}function s0(){fu&&(fu.detachEvent("onpropertychange",jT),Du=fu=null)}function jT(t){if(t.propertyName==="value"&&ff(Du)){var e=[];DT(e,Du,t,py(t)),yT(wk,e)}}function Tk(t,e,n){t==="focusin"?(s0(),fu=e,Du=n,fu.attachEvent("onpropertychange",jT)):t==="focusout"&&s0()}function Ek(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ff(Du)}function Pk(t,e){if(t==="click")return ff(e)}function Sk(t,e){if(t==="input"||t==="change")return ff(e)}function Ck(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gi=typeof Object.is=="function"?Object.is:Ck;function Vu(t,e){if(gi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Tm.call(e,r)||!gi(t[r],e[r]))return!1}return!0}function o0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function a0(t,e){var n=o0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o0(n)}}function FT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BT(){for(var t=window,e=ad();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ad(t.document)}return e}function Ey(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ik(t){var e=BT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&FT(n.ownerDocument.documentElement,n)){if(i!==null&&Ey(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=a0(n,o);var a=a0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ak=pr&&"documentMode"in document&&11>=document.documentMode,ga=null,zm=null,pu=null,Um=!1;function l0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Um||ga==null||ga!==ad(i)||(i=ga,"selectionStart"in i&&Ey(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pu&&Vu(pu,i)||(pu=i,i=pd(zm,"onSelect"),0<i.length&&(e=new wy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ga)))}function dh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ya={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},Ap={},zT={};pr&&(zT=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function pf(t){if(Ap[t])return Ap[t];if(!ya[t])return t;var e=ya[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zT)return Ap[t]=e[n];return t}var UT=pf("animationend"),HT=pf("animationiteration"),WT=pf("animationstart"),$T=pf("transitionend"),GT=new Map,u0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,e){GT.set(t,e),Po(e,[t])}for(var bp=0;bp<u0.length;bp++){var kp=u0[bp],bk=kp.toLowerCase(),kk=kp[0].toUpperCase()+kp.slice(1);Is(bk,"on"+kk)}Is(UT,"onAnimationEnd");Is(HT,"onAnimationIteration");Is(WT,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is($T,"onTransitionEnd");Ba("onMouseEnter",["mouseout","mouseover"]);Ba("onMouseLeave",["mouseout","mouseover"]);Ba("onPointerEnter",["pointerout","pointerover"]);Ba("onPointerLeave",["pointerout","pointerover"]);Po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Po("onBeforeInput",["compositionend","keypress","textInput","paste"]);Po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ru));function c0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,bb(i,e,void 0,t),t.currentTarget=null}function qT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;c0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;c0(r,u,f),o=h}}}if(ud)throw t=Vm,ud=!1,Vm=null,t}function it(t,e){var n=e[qm];n===void 0&&(n=e[qm]=new Set);var i=t+"__bubble";n.has(i)||(ZT(e,t,2,!1),n.add(i))}function Rp(t,e,n){var i=0;e&&(i|=4),ZT(n,t,i,e)}var fh="_reactListening"+Math.random().toString(36).slice(2);function ju(t){if(!t[fh]){t[fh]=!0,tT.forEach(function(n){n!=="selectionchange"&&(Rk.has(n)||Rp(n,!1,t),Rp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fh]||(e[fh]=!0,Rp("selectionchange",!1,e))}}function ZT(t,e,n,i){switch(RT(e)){case 1:var r=$b;break;case 4:r=Gb;break;default:r=_y}n=r.bind(null,e,n,t),r=void 0,!Dm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Np(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=eo(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}yT(function(){var f=o,m=py(n),g=[];e:{var _=GT.get(t);if(_!==void 0){var E=wy,k=t;switch(t){case"keypress":if(Bh(n)===0)break e;case"keydown":case"keyup":E=ak;break;case"focusin":k="focus",E=Sp;break;case"focusout":k="blur",E=Sp;break;case"beforeblur":case"afterblur":E=Sp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Kb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=ck;break;case UT:case HT:case WT:E=Xb;break;case $T:E=dk;break;case"scroll":E=qb;break;case"wheel":E=pk;break;case"copy":case"cut":case"paste":E=ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=e0}var R=(e&4)!==0,M=!R&&t==="scroll",I=R?_!==null?_+"Capture":null:_;R=[];for(var T=f,S;T!==null;){S=T;var F=S.stateNode;if(S.tag===5&&F!==null&&(S=F,I!==null&&(F=Nu(T,I),F!=null&&R.push(Fu(T,F,S)))),M)break;T=T.return}0<R.length&&(_=new E(_,k,null,n,m),g.push({event:_,listeners:R}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",_&&n!==Mm&&(k=n.relatedTarget||n.fromElement)&&(eo(k)||k[mr]))break e;if((E||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,E?(k=n.relatedTarget||n.toElement,E=f,k=k?eo(k):null,k!==null&&(M=So(k),k!==M||k.tag!==5&&k.tag!==6)&&(k=null)):(E=null,k=f),E!==k)){if(R=Xv,F="onMouseLeave",I="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(R=e0,F="onPointerLeave",I="onPointerEnter",T="pointer"),M=E==null?_:_a(E),S=k==null?_:_a(k),_=new R(F,T+"leave",E,n,m),_.target=M,_.relatedTarget=S,F=null,eo(m)===f&&(R=new R(I,T+"enter",k,n,m),R.target=S,R.relatedTarget=M,F=R),M=F,E&&k)t:{for(R=E,I=k,T=0,S=R;S;S=la(S))T++;for(S=0,F=I;F;F=la(F))S++;for(;0<T-S;)R=la(R),T--;for(;0<S-T;)I=la(I),S--;for(;T--;){if(R===I||I!==null&&R===I.alternate)break t;R=la(R),I=la(I)}R=null}else R=null;E!==null&&h0(g,_,E,R,!1),k!==null&&M!==null&&h0(g,M,k,R,!0)}}e:{if(_=f?_a(f):window,E=_.nodeName&&_.nodeName.toLowerCase(),E==="select"||E==="input"&&_.type==="file")var $=xk;else if(i0(_))if(VT)$=Sk;else{$=Ek;var U=Tk}else(E=_.nodeName)&&E.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&($=Pk);if($&&($=$(t,f))){DT(g,$,n,m);break e}U&&U(t,_,f),t==="focusout"&&(U=_._wrapperState)&&U.controlled&&_.type==="number"&&bm(_,"number",_.value)}switch(U=f?_a(f):window,t){case"focusin":(i0(U)||U.contentEditable==="true")&&(ga=U,zm=f,pu=null);break;case"focusout":pu=zm=ga=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,l0(g,n,m);break;case"selectionchange":if(Ak)break;case"keydown":case"keyup":l0(g,n,m)}var b;if(Ty)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ma?MT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(LT&&n.locale!=="ko"&&(ma||C!=="onCompositionStart"?C==="onCompositionEnd"&&ma&&(b=NT()):(Kr=m,vy="value"in Kr?Kr.value:Kr.textContent,ma=!0)),U=pd(f,C),0<U.length&&(C=new Jv(C,t,null,n,m),g.push({event:C,listeners:U}),b?C.data=b:(b=OT(n),b!==null&&(C.data=b)))),(b=gk?yk(t,n):_k(t,n))&&(f=pd(f,"onBeforeInput"),0<f.length&&(m=new Jv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=b))}qT(g,e)})}function Fu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Nu(t,n),o!=null&&i.unshift(Fu(t,o,r)),o=Nu(t,e),o!=null&&i.push(Fu(t,o,r))),t=t.return}return i}function la(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function h0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=Nu(n,o),h!=null&&a.unshift(Fu(n,h,u))):r||(h=Nu(n,o),h!=null&&a.push(Fu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Nk=/\r\n?/g,Lk=/\u0000|\uFFFD/g;function d0(t){return(typeof t=="string"?t:""+t).replace(Nk,`
`).replace(Lk,"")}function ph(t,e,n){if(e=d0(e),d0(t)!==e&&n)throw Error(X(425))}function md(){}var Hm=null,Wm=null;function $m(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gm=typeof setTimeout=="function"?setTimeout:void 0,Mk=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,Ok=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(t){return f0.resolve(null).then(t).catch(Dk)}:Gm;function Dk(t){setTimeout(function(){throw t})}function Lp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ou(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ou(e)}function ns(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function p0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var al=Math.random().toString(36).slice(2),ki="__reactFiber$"+al,Bu="__reactProps$"+al,mr="__reactContainer$"+al,qm="__reactEvents$"+al,Vk="__reactListeners$"+al,jk="__reactHandles$"+al;function eo(t){var e=t[ki];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mr]||n[ki]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=p0(t);t!==null;){if(n=t[ki])return n;t=p0(t)}return e}t=n,n=t.parentNode}return null}function uc(t){return t=t[ki]||t[mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _a(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function mf(t){return t[Bu]||null}var Zm=[],va=-1;function As(t){return{current:t}}function ot(t){0>va||(t.current=Zm[va],Zm[va]=null,va--)}function tt(t,e){va++,Zm[va]=t.current,t.current=e}var ys={},rn=As(ys),xn=As(!1),po=ys;function za(t,e){var n=t.type.contextTypes;if(!n)return ys;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Tn(t){return t=t.childContextTypes,t!=null}function gd(){ot(xn),ot(rn)}function m0(t,e,n){if(rn.current!==ys)throw Error(X(168));tt(rn,e),tt(xn,n)}function KT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,Tb(t)||"Unknown",r));return mt({},n,i)}function yd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,po=rn.current,tt(rn,t),tt(xn,xn.current),!0}function g0(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=KT(t,e,po),i.__reactInternalMemoizedMergedChildContext=t,ot(xn),ot(rn),tt(rn,t)):ot(xn),tt(xn,n)}var rr=null,gf=!1,Mp=!1;function QT(t){rr===null?rr=[t]:rr.push(t)}function Fk(t){gf=!0,QT(t)}function bs(){if(!Mp&&rr!==null){Mp=!0;var t=0,e=Ye;try{var n=rr;for(Ye=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}rr=null,gf=!1}catch(r){throw rr!==null&&(rr=rr.slice(t+1)),xT(my,bs),r}finally{Ye=e,Mp=!1}}return null}var wa=[],xa=0,_d=null,vd=0,qn=[],Zn=0,mo=null,sr=1,or="";function qs(t,e){wa[xa++]=vd,wa[xa++]=_d,_d=t,vd=e}function YT(t,e,n){qn[Zn++]=sr,qn[Zn++]=or,qn[Zn++]=mo,mo=t;var i=sr;t=or;var r=32-pi(i)-1;i&=~(1<<r),n+=1;var o=32-pi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,sr=1<<32-pi(e)+r|n<<r|i,or=o+t}else sr=1<<o|n<<r|i,or=t}function Py(t){t.return!==null&&(qs(t,1),YT(t,1,0))}function Sy(t){for(;t===_d;)_d=wa[--xa],wa[xa]=null,vd=wa[--xa],wa[xa]=null;for(;t===mo;)mo=qn[--Zn],qn[Zn]=null,or=qn[--Zn],qn[Zn]=null,sr=qn[--Zn],qn[Zn]=null}var kn=null,bn=null,ut=!1,ui=null;function XT(t,e){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function y0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,bn=ns(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mo!==null?{id:sr,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,bn=null,!0):!1;default:return!1}}function Km(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qm(t){if(ut){var e=bn;if(e){var n=e;if(!y0(t,e)){if(Km(t))throw Error(X(418));e=ns(n.nextSibling);var i=kn;e&&y0(t,e)?XT(i,n):(t.flags=t.flags&-4097|2,ut=!1,kn=t)}}else{if(Km(t))throw Error(X(418));t.flags=t.flags&-4097|2,ut=!1,kn=t}}}function _0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function mh(t){if(t!==kn)return!1;if(!ut)return _0(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$m(t.type,t.memoizedProps)),e&&(e=bn)){if(Km(t))throw JT(),Error(X(418));for(;e;)XT(t,e),e=ns(e.nextSibling)}if(_0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=ns(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=kn?ns(t.stateNode.nextSibling):null;return!0}function JT(){for(var t=bn;t;)t=ns(t.nextSibling)}function Ua(){bn=kn=null,ut=!1}function Cy(t){ui===null?ui=[t]:ui.push(t)}var Bk=Pr.ReactCurrentBatchConfig;function ql(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function gh(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function v0(t){var e=t._init;return e(t._payload)}function eE(t){function e(I,T){if(t){var S=I.deletions;S===null?(I.deletions=[T],I.flags|=16):S.push(T)}}function n(I,T){if(!t)return null;for(;T!==null;)e(I,T),T=T.sibling;return null}function i(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function r(I,T){return I=os(I,T),I.index=0,I.sibling=null,I}function o(I,T,S){return I.index=S,t?(S=I.alternate,S!==null?(S=S.index,S<T?(I.flags|=2,T):S):(I.flags|=2,T)):(I.flags|=1048576,T)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,T,S,F){return T===null||T.tag!==6?(T=zp(S,I.mode,F),T.return=I,T):(T=r(T,S),T.return=I,T)}function h(I,T,S,F){var $=S.type;return $===pa?m(I,T,S.props.children,F,S.key):T!==null&&(T.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Br&&v0($)===T.type)?(F=r(T,S.props),F.ref=ql(I,T,S),F.return=I,F):(F=qh(S.type,S.key,S.props,null,I.mode,F),F.ref=ql(I,T,S),F.return=I,F)}function f(I,T,S,F){return T===null||T.tag!==4||T.stateNode.containerInfo!==S.containerInfo||T.stateNode.implementation!==S.implementation?(T=Up(S,I.mode,F),T.return=I,T):(T=r(T,S.children||[]),T.return=I,T)}function m(I,T,S,F,$){return T===null||T.tag!==7?(T=oo(S,I.mode,F,$),T.return=I,T):(T=r(T,S),T.return=I,T)}function g(I,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return T=zp(""+T,I.mode,S),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case sh:return S=qh(T.type,T.key,T.props,null,I.mode,S),S.ref=ql(I,null,T),S.return=I,S;case fa:return T=Up(T,I.mode,S),T.return=I,T;case Br:var F=T._init;return g(I,F(T._payload),S)}if(nu(T)||Ul(T))return T=oo(T,I.mode,S,null),T.return=I,T;gh(I,T)}return null}function _(I,T,S,F){var $=T!==null?T.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return $!==null?null:u(I,T,""+S,F);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case sh:return S.key===$?h(I,T,S,F):null;case fa:return S.key===$?f(I,T,S,F):null;case Br:return $=S._init,_(I,T,$(S._payload),F)}if(nu(S)||Ul(S))return $!==null?null:m(I,T,S,F,null);gh(I,S)}return null}function E(I,T,S,F,$){if(typeof F=="string"&&F!==""||typeof F=="number")return I=I.get(S)||null,u(T,I,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case sh:return I=I.get(F.key===null?S:F.key)||null,h(T,I,F,$);case fa:return I=I.get(F.key===null?S:F.key)||null,f(T,I,F,$);case Br:var U=F._init;return E(I,T,S,U(F._payload),$)}if(nu(F)||Ul(F))return I=I.get(S)||null,m(T,I,F,$,null);gh(T,F)}return null}function k(I,T,S,F){for(var $=null,U=null,b=T,C=T=0,N=null;b!==null&&C<S.length;C++){b.index>C?(N=b,b=null):N=b.sibling;var j=_(I,b,S[C],F);if(j===null){b===null&&(b=N);break}t&&b&&j.alternate===null&&e(I,b),T=o(j,T,C),U===null?$=j:U.sibling=j,U=j,b=N}if(C===S.length)return n(I,b),ut&&qs(I,C),$;if(b===null){for(;C<S.length;C++)b=g(I,S[C],F),b!==null&&(T=o(b,T,C),U===null?$=b:U.sibling=b,U=b);return ut&&qs(I,C),$}for(b=i(I,b);C<S.length;C++)N=E(b,I,C,S[C],F),N!==null&&(t&&N.alternate!==null&&b.delete(N.key===null?C:N.key),T=o(N,T,C),U===null?$=N:U.sibling=N,U=N);return t&&b.forEach(function(O){return e(I,O)}),ut&&qs(I,C),$}function R(I,T,S,F){var $=Ul(S);if(typeof $!="function")throw Error(X(150));if(S=$.call(S),S==null)throw Error(X(151));for(var U=$=null,b=T,C=T=0,N=null,j=S.next();b!==null&&!j.done;C++,j=S.next()){b.index>C?(N=b,b=null):N=b.sibling;var O=_(I,b,j.value,F);if(O===null){b===null&&(b=N);break}t&&b&&O.alternate===null&&e(I,b),T=o(O,T,C),U===null?$=O:U.sibling=O,U=O,b=N}if(j.done)return n(I,b),ut&&qs(I,C),$;if(b===null){for(;!j.done;C++,j=S.next())j=g(I,j.value,F),j!==null&&(T=o(j,T,C),U===null?$=j:U.sibling=j,U=j);return ut&&qs(I,C),$}for(b=i(I,b);!j.done;C++,j=S.next())j=E(b,I,C,j.value,F),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?C:j.key),T=o(j,T,C),U===null?$=j:U.sibling=j,U=j);return t&&b.forEach(function(z){return e(I,z)}),ut&&qs(I,C),$}function M(I,T,S,F){if(typeof S=="object"&&S!==null&&S.type===pa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case sh:e:{for(var $=S.key,U=T;U!==null;){if(U.key===$){if($=S.type,$===pa){if(U.tag===7){n(I,U.sibling),T=r(U,S.props.children),T.return=I,I=T;break e}}else if(U.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Br&&v0($)===U.type){n(I,U.sibling),T=r(U,S.props),T.ref=ql(I,U,S),T.return=I,I=T;break e}n(I,U);break}else e(I,U);U=U.sibling}S.type===pa?(T=oo(S.props.children,I.mode,F,S.key),T.return=I,I=T):(F=qh(S.type,S.key,S.props,null,I.mode,F),F.ref=ql(I,T,S),F.return=I,I=F)}return a(I);case fa:e:{for(U=S.key;T!==null;){if(T.key===U)if(T.tag===4&&T.stateNode.containerInfo===S.containerInfo&&T.stateNode.implementation===S.implementation){n(I,T.sibling),T=r(T,S.children||[]),T.return=I,I=T;break e}else{n(I,T);break}else e(I,T);T=T.sibling}T=Up(S,I.mode,F),T.return=I,I=T}return a(I);case Br:return U=S._init,M(I,T,U(S._payload),F)}if(nu(S))return k(I,T,S,F);if(Ul(S))return R(I,T,S,F);gh(I,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,T!==null&&T.tag===6?(n(I,T.sibling),T=r(T,S),T.return=I,I=T):(n(I,T),T=zp(S,I.mode,F),T.return=I,I=T),a(I)):n(I,T)}return M}var Ha=eE(!0),tE=eE(!1),wd=As(null),xd=null,Ta=null,Iy=null;function Ay(){Iy=Ta=xd=null}function by(t){var e=wd.current;ot(wd),t._currentValue=e}function Ym(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ma(t,e){xd=t,Iy=Ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(Iy!==t)if(t={context:t,memoizedValue:e,next:null},Ta===null){if(xd===null)throw Error(X(308));Ta=t,xd.dependencies={lanes:0,firstContext:t}}else Ta=Ta.next=t;return e}var to=null;function ky(t){to===null?to=[t]:to.push(t)}function nE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,ky(e)):(n.next=r.next,r.next=n),e.interleaved=n,gr(t,i)}function gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zr=!1;function Ry(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function is(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,He&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,gr(t,n)}return r=i.interleaved,r===null?(e.next=e,ky(i)):(e.next=r.next,r.next=e),i.interleaved=e,gr(t,n)}function zh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,gy(t,n)}}function w0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Td(t,e,n,i){var r=t.updateQueue;zr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var _=u.lane,E=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,R=u;switch(_=e,E=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){g=k.call(E,g,_);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,_=typeof k=="function"?k.call(E,g,_):k,_==null)break e;g=mt({},g,_);break e;case 2:zr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else E={eventTime:E,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=E,h=g):m=m.next=E,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);yo|=a,t.lanes=a,t.memoizedState=g}}function x0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var cc={},Ni=As(cc),zu=As(cc),Uu=As(cc);function no(t){if(t===cc)throw Error(X(174));return t}function Ny(t,e){switch(tt(Uu,e),tt(zu,t),tt(Ni,cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rm(e,t)}ot(Ni),tt(Ni,e)}function Wa(){ot(Ni),ot(zu),ot(Uu)}function rE(t){no(Uu.current);var e=no(Ni.current),n=Rm(e,t.type);e!==n&&(tt(zu,t),tt(Ni,n))}function Ly(t){zu.current===t&&(ot(Ni),ot(zu))}var ht=As(0);function Ed(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Op=[];function My(){for(var t=0;t<Op.length;t++)Op[t]._workInProgressVersionPrimary=null;Op.length=0}var Uh=Pr.ReactCurrentDispatcher,Dp=Pr.ReactCurrentBatchConfig,go=0,ft=null,Rt=null,Ft=null,Pd=!1,mu=!1,Hu=0,zk=0;function Kt(){throw Error(X(321))}function Oy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gi(t[n],e[n]))return!1;return!0}function Dy(t,e,n,i,r,o){if(go=o,ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uh.current=t===null||t.memoizedState===null?$k:Gk,t=n(i,r),mu){o=0;do{if(mu=!1,Hu=0,25<=o)throw Error(X(301));o+=1,Ft=Rt=null,e.updateQueue=null,Uh.current=qk,t=n(i,r)}while(mu)}if(Uh.current=Sd,e=Rt!==null&&Rt.next!==null,go=0,Ft=Rt=ft=null,Pd=!1,e)throw Error(X(300));return t}function Vy(){var t=Hu!==0;return Hu=0,t}function Ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?ft.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function ei(){if(Rt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Ft===null?ft.memoizedState:Ft.next;if(e!==null)Ft=e,Rt=t;else{if(t===null)throw Error(X(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ft===null?ft.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function Wu(t,e){return typeof e=="function"?e(t):e}function Vp(t){var e=ei(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=Rt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((go&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,ft.lanes|=m,yo|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,gi(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,ft.lanes|=o,yo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jp(t){var e=ei(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);gi(o,e.memoizedState)||(wn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function sE(){}function oE(t,e){var n=ft,i=ei(),r=e(),o=!gi(i.memoizedState,r);if(o&&(i.memoizedState=r,wn=!0),i=i.queue,jy(uE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,$u(9,lE.bind(null,n,i,r,e),void 0,null),Bt===null)throw Error(X(349));go&30||aE(n,e,r)}return r}function aE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lE(t,e,n,i){e.value=n,e.getSnapshot=i,cE(e)&&hE(t)}function uE(t,e,n){return n(function(){cE(e)&&hE(t)})}function cE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gi(t,n)}catch{return!0}}function hE(t){var e=gr(t,1);e!==null&&mi(e,t,1,-1)}function T0(t){var e=Ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:t},e.queue=t,t=t.dispatch=Wk.bind(null,ft,t),[e.memoizedState,t]}function $u(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function dE(){return ei().memoizedState}function Hh(t,e,n,i){var r=Ii();ft.flags|=t,r.memoizedState=$u(1|e,n,void 0,i===void 0?null:i)}function yf(t,e,n,i){var r=ei();i=i===void 0?null:i;var o=void 0;if(Rt!==null){var a=Rt.memoizedState;if(o=a.destroy,i!==null&&Oy(i,a.deps)){r.memoizedState=$u(e,n,o,i);return}}ft.flags|=t,r.memoizedState=$u(1|e,n,o,i)}function E0(t,e){return Hh(8390656,8,t,e)}function jy(t,e){return yf(2048,8,t,e)}function fE(t,e){return yf(4,2,t,e)}function pE(t,e){return yf(4,4,t,e)}function mE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gE(t,e,n){return n=n!=null?n.concat([t]):null,yf(4,4,mE.bind(null,e,t),n)}function Fy(){}function yE(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Oy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function _E(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Oy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function vE(t,e,n){return go&21?(gi(n,e)||(n=PT(),ft.lanes|=n,yo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function Uk(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var i=Dp.transition;Dp.transition={};try{t(!1),e()}finally{Ye=n,Dp.transition=i}}function wE(){return ei().memoizedState}function Hk(t,e,n){var i=ss(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},xE(t))TE(e,n);else if(n=nE(t,e,n,i),n!==null){var r=hn();mi(n,t,i,r),EE(n,e,i)}}function Wk(t,e,n){var i=ss(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(xE(t))TE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,gi(u,a)){var h=e.interleaved;h===null?(r.next=r,ky(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=nE(t,e,r,i),n!==null&&(r=hn(),mi(n,t,i,r),EE(n,e,i))}}function xE(t){var e=t.alternate;return t===ft||e!==null&&e===ft}function TE(t,e){mu=Pd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,gy(t,n)}}var Sd={readContext:Jn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},$k={readContext:Jn,useCallback:function(t,e){return Ii().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:E0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4194308,4,mE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hh(4,2,t,e)},useMemo:function(t,e){var n=Ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ii();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Hk.bind(null,ft,t),[i.memoizedState,t]},useRef:function(t){var e=Ii();return t={current:t},e.memoizedState=t},useState:T0,useDebugValue:Fy,useDeferredValue:function(t){return Ii().memoizedState=t},useTransition:function(){var t=T0(!1),e=t[0];return t=Uk.bind(null,t[1]),Ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ft,r=Ii();if(ut){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Bt===null)throw Error(X(349));go&30||aE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,E0(uE.bind(null,i,o,t),[t]),i.flags|=2048,$u(9,lE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Ii(),e=Bt.identifierPrefix;if(ut){var n=or,i=sr;n=(i&~(1<<32-pi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gk={readContext:Jn,useCallback:yE,useContext:Jn,useEffect:jy,useImperativeHandle:gE,useInsertionEffect:fE,useLayoutEffect:pE,useMemo:_E,useReducer:Vp,useRef:dE,useState:function(){return Vp(Wu)},useDebugValue:Fy,useDeferredValue:function(t){var e=ei();return vE(e,Rt.memoizedState,t)},useTransition:function(){var t=Vp(Wu)[0],e=ei().memoizedState;return[t,e]},useMutableSource:sE,useSyncExternalStore:oE,useId:wE,unstable_isNewReconciler:!1},qk={readContext:Jn,useCallback:yE,useContext:Jn,useEffect:jy,useImperativeHandle:gE,useInsertionEffect:fE,useLayoutEffect:pE,useMemo:_E,useReducer:jp,useRef:dE,useState:function(){return jp(Wu)},useDebugValue:Fy,useDeferredValue:function(t){var e=ei();return Rt===null?e.memoizedState=t:vE(e,Rt.memoizedState,t)},useTransition:function(){var t=jp(Wu)[0],e=ei().memoizedState;return[t,e]},useMutableSource:sE,useSyncExternalStore:oE,useId:wE,unstable_isNewReconciler:!1};function ai(t,e){if(t&&t.defaultProps){e=mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _f={isMounted:function(t){return(t=t._reactInternals)?So(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=hn(),r=ss(t),o=cr(i,r);o.payload=e,n!=null&&(o.callback=n),e=is(t,o,r),e!==null&&(mi(e,t,r,i),zh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=hn(),r=ss(t),o=cr(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=is(t,o,r),e!==null&&(mi(e,t,r,i),zh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),i=ss(t),r=cr(n,i);r.tag=2,e!=null&&(r.callback=e),e=is(t,r,i),e!==null&&(mi(e,t,i,n),zh(e,t,i))}};function P0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Vu(n,i)||!Vu(r,o):!0}function PE(t,e,n){var i=!1,r=ys,o=e.contextType;return typeof o=="object"&&o!==null?o=Jn(o):(r=Tn(e)?po:rn.current,i=e.contextTypes,o=(i=i!=null)?za(t,r):ys),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_f,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function S0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&_f.enqueueReplaceState(e,e.state,null)}function Jm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ry(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Jn(o):(o=Tn(e)?po:rn.current,r.context=za(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Xm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&_f.enqueueReplaceState(r,r.state,null),Td(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function $a(t,e){try{var n="",i=e;do n+=xb(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Fp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Zk=typeof WeakMap=="function"?WeakMap:Map;function SE(t,e,n){n=cr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Id||(Id=!0,cg=i),eg(t,e)},n}function CE(t,e,n){n=cr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){eg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){eg(t,e),typeof i!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function C0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Zk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=lR.bind(null,t,e,n),e.then(t,t))}function I0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cr(-1,1),e.tag=2,is(n,e,1))),n.lanes|=1),t)}var Kk=Pr.ReactCurrentOwner,wn=!1;function cn(t,e,n,i){e.child=t===null?tE(e,null,n,i):Ha(e,t.child,n,i)}function b0(t,e,n,i,r){n=n.render;var o=e.ref;return Ma(e,r),i=Dy(t,e,n,i,o,r),n=Vy(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,yr(t,e,r)):(ut&&n&&Py(e),e.flags|=1,cn(t,e,i,r),e.child)}function k0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!qy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,IE(t,e,o,i,r)):(t=qh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Vu,n(a,i)&&t.ref===e.ref)return yr(t,e,r)}return e.flags|=1,t=os(o,i),t.ref=e.ref,t.return=e,e.child=t}function IE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Vu(o,i)&&t.ref===e.ref)if(wn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,yr(t,e,r)}return tg(t,e,n,i,r)}function AE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Pa,In),In|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(Pa,In),In|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,tt(Pa,In),In|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,tt(Pa,In),In|=i;return cn(t,e,r,n),e.child}function bE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tg(t,e,n,i,r){var o=Tn(n)?po:rn.current;return o=za(e,o),Ma(e,r),n=Dy(t,e,n,i,o,r),i=Vy(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,yr(t,e,r)):(ut&&i&&Py(e),e.flags|=1,cn(t,e,n,r),e.child)}function R0(t,e,n,i,r){if(Tn(n)){var o=!0;yd(e)}else o=!1;if(Ma(e,r),e.stateNode===null)Wh(t,e),PE(e,n,i),Jm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Jn(f):(f=Tn(n)?po:rn.current,f=za(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&S0(e,a,i,f),zr=!1;var _=e.memoizedState;a.state=_,Td(e,i,a,r),h=e.memoizedState,u!==i||_!==h||xn.current||zr?(typeof m=="function"&&(Xm(e,n,m,i),h=e.memoizedState),(u=zr||P0(e,n,u,i,_,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,iE(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ai(e.type,u),a.props=f,g=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Jn(h):(h=Tn(n)?po:rn.current,h=za(e,h));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==h)&&S0(e,a,i,h),zr=!1,_=e.memoizedState,a.state=_,Td(e,i,a,r);var k=e.memoizedState;u!==g||_!==k||xn.current||zr?(typeof E=="function"&&(Xm(e,n,E,i),k=e.memoizedState),(f=zr||P0(e,n,f,i,_,k,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return ng(t,e,n,i,o,r)}function ng(t,e,n,i,r,o){bE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&g0(e,n,!1),yr(t,e,o);i=e.stateNode,Kk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ha(e,t.child,null,o),e.child=Ha(e,null,u,o)):cn(t,e,u,o),e.memoizedState=i.state,r&&g0(e,n,!0),e.child}function kE(t){var e=t.stateNode;e.pendingContext?m0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&m0(t,e.context,!1),Ny(t,e.containerInfo)}function N0(t,e,n,i,r){return Ua(),Cy(r),e.flags|=256,cn(t,e,n,i),e.child}var ig={dehydrated:null,treeContext:null,retryLane:0};function rg(t){return{baseLanes:t,cachePool:null,transitions:null}}function RE(t,e,n){var i=e.pendingProps,r=ht.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),tt(ht,r&1),t===null)return Qm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=xf(a,i,0,null),t=oo(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=rg(n),e.memoizedState=ig,t):By(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Qk(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=os(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=os(u,o):(o=oo(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?rg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=ig,i}return o=t.child,t=o.sibling,i=os(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function By(t,e){return e=xf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yh(t,e,n,i){return i!==null&&Cy(i),Ha(e,t.child,null,n),t=By(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Qk(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Fp(Error(X(422))),yh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=xf({mode:"visible",children:i.children},r,0,null),o=oo(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ha(e,t.child,null,a),e.child.memoizedState=rg(a),e.memoizedState=ig,o);if(!(e.mode&1))return yh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=Fp(o,i,void 0),yh(t,e,a,i)}if(u=(a&t.childLanes)!==0,wn||u){if(i=Bt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,gr(t,r),mi(i,t,r,-1))}return Gy(),i=Fp(Error(X(421))),yh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=uR.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,bn=ns(r.nextSibling),kn=e,ut=!0,ui=null,t!==null&&(qn[Zn++]=sr,qn[Zn++]=or,qn[Zn++]=mo,sr=t.id,or=t.overflow,mo=e),e=By(e,i.children),e.flags|=4096,e)}function L0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ym(t.return,e,n)}function Bp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function NE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(cn(t,e,i.children,n),i=ht.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L0(t,n,e);else if(t.tag===19)L0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(tt(ht,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ed(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Bp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ed(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Bp(e,!0,n,null,o);break;case"together":Bp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=os(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=os(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yk(t,e,n){switch(e.tag){case 3:kE(e),Ua();break;case 5:rE(e);break;case 1:Tn(e.type)&&yd(e);break;case 4:Ny(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;tt(wd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(tt(ht,ht.current&1),e.flags|=128,null):n&e.child.childLanes?RE(t,e,n):(tt(ht,ht.current&1),t=yr(t,e,n),t!==null?t.sibling:null);tt(ht,ht.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return NE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),tt(ht,ht.current),i)break;return null;case 22:case 23:return e.lanes=0,AE(t,e,n)}return yr(t,e,n)}var LE,sg,ME,OE;LE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sg=function(){};ME=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,no(Ni.current);var o=null;switch(n){case"input":r=Im(t,r),i=Im(t,i),o=[];break;case"select":r=mt({},r,{value:void 0}),i=mt({},i,{value:void 0}),o=[];break;case"textarea":r=km(t,r),i=km(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=md)}Nm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ku.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ku.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&it("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};OE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Zl(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Xk(t,e,n){var i=e.pendingProps;switch(Sy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Tn(e.type)&&gd(),Qt(e),null;case 3:return i=e.stateNode,Wa(),ot(xn),ot(rn),My(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(mh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(fg(ui),ui=null))),sg(t,e),Qt(e),null;case 5:Ly(e);var r=no(Uu.current);if(n=e.type,t!==null&&e.stateNode!=null)ME(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Qt(e),null}if(t=no(Ni.current),mh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ki]=e,i[Bu]=o,t=(e.mode&1)!==0,n){case"dialog":it("cancel",i),it("close",i);break;case"iframe":case"object":case"embed":it("load",i);break;case"video":case"audio":for(r=0;r<ru.length;r++)it(ru[r],i);break;case"source":it("error",i);break;case"img":case"image":case"link":it("error",i),it("load",i);break;case"details":it("toggle",i);break;case"input":Uv(i,o),it("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},it("invalid",i);break;case"textarea":Wv(i,o),it("invalid",i)}Nm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&ph(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ph(i.textContent,u,t),r=["children",""+u]):ku.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&it("scroll",i)}switch(n){case"input":oh(i),Hv(i,o,!0);break;case"textarea":oh(i),$v(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=md)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ki]=e,t[Bu]=i,LE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Lm(n,i),n){case"dialog":it("cancel",t),it("close",t),r=i;break;case"iframe":case"object":case"embed":it("load",t),r=i;break;case"video":case"audio":for(r=0;r<ru.length;r++)it(ru[r],t);r=i;break;case"source":it("error",t),r=i;break;case"img":case"image":case"link":it("error",t),it("load",t),r=i;break;case"details":it("toggle",t),r=i;break;case"input":Uv(t,i),r=Im(t,i),it("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=mt({},i,{value:void 0}),it("invalid",t);break;case"textarea":Wv(t,i),r=km(t,i),it("invalid",t);break;default:r=i}Nm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?dT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&cT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Ru(t,h):typeof h=="number"&&Ru(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ku.hasOwnProperty(o)?h!=null&&o==="onScroll"&&it("scroll",t):h!=null&&cy(t,o,h,a))}switch(n){case"input":oh(t),Hv(t,i,!1);break;case"textarea":oh(t),$v(t);break;case"option":i.value!=null&&t.setAttribute("value",""+gs(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ka(t,!!i.multiple,o,!1):i.defaultValue!=null&&ka(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=md)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)OE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=no(Uu.current),no(Ni.current),mh(e)){if(i=e.stateNode,n=e.memoizedProps,i[ki]=e,(o=i.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:ph(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ph(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ki]=e,e.stateNode=i}return Qt(e),null;case 13:if(ot(ht),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&bn!==null&&e.mode&1&&!(e.flags&128))JT(),Ua(),e.flags|=98560,o=!1;else if(o=mh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[ki]=e}else Ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),o=!1}else ui!==null&&(fg(ui),ui=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ht.current&1?Lt===0&&(Lt=3):Gy())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return Wa(),sg(t,e),t===null&&ju(e.stateNode.containerInfo),Qt(e),null;case 10:return by(e.type._context),Qt(e),null;case 17:return Tn(e.type)&&gd(),Qt(e),null;case 19:if(ot(ht),o=e.memoizedState,o===null)return Qt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Zl(o,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ed(t),a!==null){for(e.flags|=128,Zl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tt(ht,ht.current&1|2),e.child}t=t.sibling}o.tail!==null&&xt()>Ga&&(e.flags|=128,i=!0,Zl(o,!1),e.lanes=4194304)}else{if(!i)if(t=Ed(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ut)return Qt(e),null}else 2*xt()-o.renderingStartTime>Ga&&n!==1073741824&&(e.flags|=128,i=!0,Zl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=xt(),e.sibling=null,n=ht.current,tt(ht,i?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return $y(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?In&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function Jk(t,e){switch(Sy(e),e.tag){case 1:return Tn(e.type)&&gd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wa(),ot(xn),ot(rn),My(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ly(e),null;case 13:if(ot(ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(ht),null;case 4:return Wa(),null;case 10:return by(e.type._context),null;case 22:case 23:return $y(),null;case 24:return null;default:return null}}var _h=!1,tn=!1,eR=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ea(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){_t(t,e,i)}else n.current=null}function og(t,e,n){try{n()}catch(i){_t(t,e,i)}}var M0=!1;function tR(t,e){if(Hm=dd,t=BT(),Ey(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var E;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(E=g.firstChild)!==null;)_=g,g=E;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(h=a),(E=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=E}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wm={focusedElem:t,selectionRange:n},dd=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,M=k.memoizedState,I=e.stateNode,T=I.getSnapshotBeforeUpdate(e.elementType===e.type?R:ai(e.type,R),M);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(F){_t(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return k=M0,M0=!1,k}function gu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&og(e,n,o)}r=r.next}while(r!==i)}}function vf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ag(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DE(t){var e=t.alternate;e!==null&&(t.alternate=null,DE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ki],delete e[Bu],delete e[qm],delete e[Vk],delete e[jk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function VE(t){return t.tag===5||t.tag===3||t.tag===4}function O0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=md));else if(i!==4&&(t=t.child,t!==null))for(lg(t,e,n),t=t.sibling;t!==null;)lg(t,e,n),t=t.sibling}function ug(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ug(t,e,n),t=t.sibling;t!==null;)ug(t,e,n),t=t.sibling}var zt=null,li=!1;function Dr(t,e,n){for(n=n.child;n!==null;)jE(t,e,n),n=n.sibling}function jE(t,e,n){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(hf,n)}catch{}switch(n.tag){case 5:tn||Ea(n,e);case 6:var i=zt,r=li;zt=null,Dr(t,e,n),zt=i,li=r,zt!==null&&(li?(t=zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(li?(t=zt,n=n.stateNode,t.nodeType===8?Lp(t.parentNode,n):t.nodeType===1&&Lp(t,n),Ou(t)):Lp(zt,n.stateNode));break;case 4:i=zt,r=li,zt=n.stateNode.containerInfo,li=!0,Dr(t,e,n),zt=i,li=r;break;case 0:case 11:case 14:case 15:if(!tn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&og(n,e,a),r=r.next}while(r!==i)}Dr(t,e,n);break;case 1:if(!tn&&(Ea(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){_t(n,e,u)}Dr(t,e,n);break;case 21:Dr(t,e,n);break;case 22:n.mode&1?(tn=(i=tn)||n.memoizedState!==null,Dr(t,e,n),tn=i):Dr(t,e,n);break;default:Dr(t,e,n)}}function D0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eR),e.forEach(function(i){var r=cR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function oi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:zt=u.stateNode,li=!1;break e;case 3:zt=u.stateNode.containerInfo,li=!0;break e;case 4:zt=u.stateNode.containerInfo,li=!0;break e}u=u.return}if(zt===null)throw Error(X(160));jE(o,a,r),zt=null,li=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){_t(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FE(e,t),e=e.sibling}function FE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),Si(t),i&4){try{gu(3,t,t.return),vf(3,t)}catch(R){_t(t,t.return,R)}try{gu(5,t,t.return)}catch(R){_t(t,t.return,R)}}break;case 1:oi(e,t),Si(t),i&512&&n!==null&&Ea(n,n.return);break;case 5:if(oi(e,t),Si(t),i&512&&n!==null&&Ea(n,n.return),t.flags&32){var r=t.stateNode;try{Ru(r,"")}catch(R){_t(t,t.return,R)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&aT(r,o),Lm(u,a);var f=Lm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?dT(r,g):m==="dangerouslySetInnerHTML"?cT(r,g):m==="children"?Ru(r,g):cy(r,m,g,f)}switch(u){case"input":Am(r,o);break;case"textarea":lT(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?ka(r,!!o.multiple,E,!1):_!==!!o.multiple&&(o.defaultValue!=null?ka(r,!!o.multiple,o.defaultValue,!0):ka(r,!!o.multiple,o.multiple?[]:"",!1))}r[Bu]=o}catch(R){_t(t,t.return,R)}}break;case 6:if(oi(e,t),Si(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(R){_t(t,t.return,R)}}break;case 3:if(oi(e,t),Si(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ou(e.containerInfo)}catch(R){_t(t,t.return,R)}break;case 4:oi(e,t),Si(t);break;case 13:oi(e,t),Si(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Hy=xt())),i&4&&D0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(f=tn)||m,oi(e,t),tn=f):oi(e,t),Si(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ae=t,m=t.child;m!==null;){for(g=ae=m;ae!==null;){switch(_=ae,E=_.child,_.tag){case 0:case 11:case 14:case 15:gu(4,_,_.return);break;case 1:Ea(_,_.return);var k=_.stateNode;if(typeof k.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(R){_t(i,n,R)}}break;case 5:Ea(_,_.return);break;case 22:if(_.memoizedState!==null){j0(g);continue}}E!==null?(E.return=_,ae=E):j0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=hT("display",a))}catch(R){_t(t,t.return,R)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(R){_t(t,t.return,R)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:oi(e,t),Si(t),i&4&&D0(t);break;case 21:break;default:oi(e,t),Si(t)}}function Si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(VE(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ru(r,""),i.flags&=-33);var o=O0(t);ug(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=O0(t);lg(t,u,a);break;default:throw Error(X(161))}}catch(h){_t(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nR(t,e,n){ae=t,BE(t)}function BE(t,e,n){for(var i=(t.mode&1)!==0;ae!==null;){var r=ae,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||_h;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||tn;u=_h;var f=tn;if(_h=a,(tn=h)&&!f)for(ae=r;ae!==null;)a=ae,h=a.child,a.tag===22&&a.memoizedState!==null?F0(r):h!==null?(h.return=a,ae=h):F0(r);for(;o!==null;)ae=o,BE(o),o=o.sibling;ae=r,_h=u,tn=f}V0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ae=o):V0(t)}}function V0(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||vf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!tn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ai(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&x0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}x0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Ou(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}tn||e.flags&512&&ag(e)}catch(_){_t(e,e.return,_)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function j0(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function F0(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vf(4,e)}catch(h){_t(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){_t(e,r,h)}}var o=e.return;try{ag(e)}catch(h){_t(e,o,h)}break;case 5:var a=e.return;try{ag(e)}catch(h){_t(e,a,h)}}}catch(h){_t(e,e.return,h)}if(e===t){ae=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ae=u;break}ae=e.return}}var iR=Math.ceil,Cd=Pr.ReactCurrentDispatcher,zy=Pr.ReactCurrentOwner,Xn=Pr.ReactCurrentBatchConfig,He=0,Bt=null,bt=null,Wt=0,In=0,Pa=As(0),Lt=0,Gu=null,yo=0,wf=0,Uy=0,yu=null,vn=null,Hy=0,Ga=1/0,ir=null,Id=!1,cg=null,rs=null,vh=!1,Qr=null,Ad=0,_u=0,hg=null,$h=-1,Gh=0;function hn(){return He&6?xt():$h!==-1?$h:$h=xt()}function ss(t){return t.mode&1?He&2&&Wt!==0?Wt&-Wt:Bk.transition!==null?(Gh===0&&(Gh=PT()),Gh):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:RT(t.type)),t):1}function mi(t,e,n,i){if(50<_u)throw _u=0,hg=null,Error(X(185));ac(t,n,i),(!(He&2)||t!==Bt)&&(t===Bt&&(!(He&2)&&(wf|=n),Lt===4&&Wr(t,Wt)),En(t,i),n===1&&He===0&&!(e.mode&1)&&(Ga=xt()+500,gf&&bs()))}function En(t,e){var n=t.callbackNode;Bb(t,e);var i=hd(t,t===Bt?Wt:0);if(i===0)n!==null&&Zv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Zv(n),e===1)t.tag===0?Fk(B0.bind(null,t)):QT(B0.bind(null,t)),Ok(function(){!(He&6)&&bs()}),n=null;else{switch(ST(i)){case 1:n=my;break;case 4:n=TT;break;case 16:n=cd;break;case 536870912:n=ET;break;default:n=cd}n=ZE(n,zE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zE(t,e){if($h=-1,Gh=0,He&6)throw Error(X(327));var n=t.callbackNode;if(Oa()&&t.callbackNode!==n)return null;var i=hd(t,t===Bt?Wt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=bd(t,i);else{e=i;var r=He;He|=2;var o=HE();(Bt!==t||Wt!==e)&&(ir=null,Ga=xt()+500,so(t,e));do try{oR();break}catch(u){UE(t,u)}while(!0);Ay(),Cd.current=o,He=r,bt!==null?e=0:(Bt=null,Wt=0,e=Lt)}if(e!==0){if(e===2&&(r=jm(t),r!==0&&(i=r,e=dg(t,r))),e===1)throw n=Gu,so(t,0),Wr(t,i),En(t,xt()),n;if(e===6)Wr(t,i);else{if(r=t.current.alternate,!(i&30)&&!rR(r)&&(e=bd(t,i),e===2&&(o=jm(t),o!==0&&(i=o,e=dg(t,o))),e===1))throw n=Gu,so(t,0),Wr(t,i),En(t,xt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:Zs(t,vn,ir);break;case 3:if(Wr(t,i),(i&130023424)===i&&(e=Hy+500-xt(),10<e)){if(hd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){hn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Gm(Zs.bind(null,t,vn,ir),e);break}Zs(t,vn,ir);break;case 4:if(Wr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-pi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*iR(i/1960))-i,10<i){t.timeoutHandle=Gm(Zs.bind(null,t,vn,ir),i);break}Zs(t,vn,ir);break;case 5:Zs(t,vn,ir);break;default:throw Error(X(329))}}}return En(t,xt()),t.callbackNode===n?zE.bind(null,t):null}function dg(t,e){var n=yu;return t.current.memoizedState.isDehydrated&&(so(t,e).flags|=256),t=bd(t,e),t!==2&&(e=vn,vn=n,e!==null&&fg(e)),t}function fg(t){vn===null?vn=t:vn.push.apply(vn,t)}function rR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!gi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wr(t,e){for(e&=~Uy,e&=~wf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pi(e),i=1<<n;t[n]=-1,e&=~i}}function B0(t){if(He&6)throw Error(X(327));Oa();var e=hd(t,0);if(!(e&1))return En(t,xt()),null;var n=bd(t,e);if(t.tag!==0&&n===2){var i=jm(t);i!==0&&(e=i,n=dg(t,i))}if(n===1)throw n=Gu,so(t,0),Wr(t,e),En(t,xt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zs(t,vn,ir),En(t,xt()),null}function Wy(t,e){var n=He;He|=1;try{return t(e)}finally{He=n,He===0&&(Ga=xt()+500,gf&&bs())}}function _o(t){Qr!==null&&Qr.tag===0&&!(He&6)&&Oa();var e=He;He|=1;var n=Xn.transition,i=Ye;try{if(Xn.transition=null,Ye=1,t)return t()}finally{Ye=i,Xn.transition=n,He=e,!(He&6)&&bs()}}function $y(){In=Pa.current,ot(Pa)}function so(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mk(n)),bt!==null)for(n=bt.return;n!==null;){var i=n;switch(Sy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&gd();break;case 3:Wa(),ot(xn),ot(rn),My();break;case 5:Ly(i);break;case 4:Wa();break;case 13:ot(ht);break;case 19:ot(ht);break;case 10:by(i.type._context);break;case 22:case 23:$y()}n=n.return}if(Bt=t,bt=t=os(t.current,null),Wt=In=e,Lt=0,Gu=null,Uy=wf=yo=0,vn=yu=null,to!==null){for(e=0;e<to.length;e++)if(n=to[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}to=null}return t}function UE(t,e){do{var n=bt;try{if(Ay(),Uh.current=Sd,Pd){for(var i=ft.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Pd=!1}if(go=0,Ft=Rt=ft=null,mu=!1,Hu=0,zy.current=null,n===null||n.return===null){Lt=1,Gu=e,bt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Wt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=I0(a);if(E!==null){E.flags&=-257,A0(E,a,u,o,e),E.mode&1&&C0(o,f,e),e=E,h=f;var k=e.updateQueue;if(k===null){var R=new Set;R.add(h),e.updateQueue=R}else k.add(h);break e}else{if(!(e&1)){C0(o,f,e),Gy();break e}h=Error(X(426))}}else if(ut&&u.mode&1){var M=I0(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),A0(M,a,u,o,e),Cy($a(h,u));break e}}o=h=$a(h,u),Lt!==4&&(Lt=2),yu===null?yu=[o]:yu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=SE(o,h,e);w0(o,I);break e;case 1:u=h;var T=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(rs===null||!rs.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=CE(o,u,e);w0(o,F);break e}}o=o.return}while(o!==null)}$E(n)}catch($){e=$,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(!0)}function HE(){var t=Cd.current;return Cd.current=Sd,t===null?Sd:t}function Gy(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Bt===null||!(yo&268435455)&&!(wf&268435455)||Wr(Bt,Wt)}function bd(t,e){var n=He;He|=2;var i=HE();(Bt!==t||Wt!==e)&&(ir=null,so(t,e));do try{sR();break}catch(r){UE(t,r)}while(!0);if(Ay(),He=n,Cd.current=i,bt!==null)throw Error(X(261));return Bt=null,Wt=0,Lt}function sR(){for(;bt!==null;)WE(bt)}function oR(){for(;bt!==null&&!Rb();)WE(bt)}function WE(t){var e=qE(t.alternate,t,In);t.memoizedProps=t.pendingProps,e===null?$E(t):bt=e,zy.current=null}function $E(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Jk(n,e),n!==null){n.flags&=32767,bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,bt=null;return}}else if(n=Xk(n,e,In),n!==null){bt=n;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);Lt===0&&(Lt=5)}function Zs(t,e,n){var i=Ye,r=Xn.transition;try{Xn.transition=null,Ye=1,aR(t,e,n,i)}finally{Xn.transition=r,Ye=i}return null}function aR(t,e,n,i){do Oa();while(Qr!==null);if(He&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(zb(t,o),t===Bt&&(bt=Bt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vh||(vh=!0,ZE(cd,function(){return Oa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xn.transition,Xn.transition=null;var a=Ye;Ye=1;var u=He;He|=4,zy.current=null,tR(t,n),FE(n,t),Ik(Wm),dd=!!Hm,Wm=Hm=null,t.current=n,nR(n),Nb(),He=u,Ye=a,Xn.transition=o}else t.current=n;if(vh&&(vh=!1,Qr=t,Ad=r),o=t.pendingLanes,o===0&&(rs=null),Ob(n.stateNode),En(t,xt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Id)throw Id=!1,t=cg,cg=null,t;return Ad&1&&t.tag!==0&&Oa(),o=t.pendingLanes,o&1?t===hg?_u++:(_u=0,hg=t):_u=0,bs(),null}function Oa(){if(Qr!==null){var t=ST(Ad),e=Xn.transition,n=Ye;try{if(Xn.transition=null,Ye=16>t?16:t,Qr===null)var i=!1;else{if(t=Qr,Qr=null,Ad=0,He&6)throw Error(X(331));var r=He;for(He|=4,ae=t.current;ae!==null;){var o=ae,a=o.child;if(ae.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(ae=f;ae!==null;){var m=ae;switch(m.tag){case 0:case 11:case 15:gu(8,m,o)}var g=m.child;if(g!==null)g.return=m,ae=g;else for(;ae!==null;){m=ae;var _=m.sibling,E=m.return;if(DE(m),m===f){ae=null;break}if(_!==null){_.return=E,ae=_;break}ae=E}}}var k=o.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var M=R.sibling;R.sibling=null,R=M}while(R!==null)}}ae=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ae=a;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gu(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,ae=I;break e}ae=o.return}}var T=t.current;for(ae=T;ae!==null;){a=ae;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ae=S;else e:for(a=T;ae!==null;){if(u=ae,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:vf(9,u)}}catch($){_t(u,u.return,$)}if(u===a){ae=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,ae=F;break e}ae=u.return}}if(He=r,bs(),Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(hf,t)}catch{}i=!0}return i}finally{Ye=n,Xn.transition=e}}return!1}function z0(t,e,n){e=$a(n,e),e=SE(t,e,1),t=is(t,e,1),e=hn(),t!==null&&(ac(t,1,e),En(t,e))}function _t(t,e,n){if(t.tag===3)z0(t,t,n);else for(;e!==null;){if(e.tag===3){z0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rs===null||!rs.has(i))){t=$a(n,t),t=CE(e,t,1),e=is(e,t,1),t=hn(),e!==null&&(ac(e,1,t),En(e,t));break}}e=e.return}}function lR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(Wt&n)===n&&(Lt===4||Lt===3&&(Wt&130023424)===Wt&&500>xt()-Hy?so(t,0):Uy|=n),En(t,e)}function GE(t,e){e===0&&(t.mode&1?(e=uh,uh<<=1,!(uh&130023424)&&(uh=4194304)):e=1);var n=hn();t=gr(t,e),t!==null&&(ac(t,e,n),En(t,n))}function uR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GE(t,n)}function cR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),GE(t,n)}var qE;qE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,Yk(t,e,n);wn=!!(t.flags&131072)}else wn=!1,ut&&e.flags&1048576&&YT(e,vd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Wh(t,e),t=e.pendingProps;var r=za(e,rn.current);Ma(e,n),r=Dy(null,e,i,t,r,n);var o=Vy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(i)?(o=!0,yd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ry(e),r.updater=_f,e.stateNode=r,r._reactInternals=e,Jm(e,i,t,n),e=ng(null,e,i,!0,o,n)):(e.tag=0,ut&&o&&Py(e),cn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Wh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=dR(i),t=ai(i,t),r){case 0:e=tg(null,e,i,t,n);break e;case 1:e=R0(null,e,i,t,n);break e;case 11:e=b0(null,e,i,t,n);break e;case 14:e=k0(null,e,i,ai(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),tg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),R0(t,e,i,r,n);case 3:e:{if(kE(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,iE(t,e),Td(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=$a(Error(X(423)),e),e=N0(t,e,i,n,r);break e}else if(i!==r){r=$a(Error(X(424)),e),e=N0(t,e,i,n,r);break e}else for(bn=ns(e.stateNode.containerInfo.firstChild),kn=e,ut=!0,ui=null,n=tE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ua(),i===r){e=yr(t,e,n);break e}cn(t,e,i,n)}e=e.child}return e;case 5:return rE(e),t===null&&Qm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,$m(i,r)?a=null:o!==null&&$m(i,o)&&(e.flags|=32),bE(t,e),cn(t,e,a,n),e.child;case 6:return t===null&&Qm(e),null;case 13:return RE(t,e,n);case 4:return Ny(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ha(e,null,i,n):cn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),b0(t,e,i,r,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,tt(wd,i._currentValue),i._currentValue=a,o!==null)if(gi(o.value,a)){if(o.children===r.children&&!xn.current){e=yr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=cr(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Ym(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Ym(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}cn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ma(e,n),r=Jn(r),i=i(r),e.flags|=1,cn(t,e,i,n),e.child;case 14:return i=e.type,r=ai(i,e.pendingProps),r=ai(i.type,r),k0(t,e,i,r,n);case 15:return IE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),Wh(t,e),e.tag=1,Tn(i)?(t=!0,yd(e)):t=!1,Ma(e,n),PE(e,i,r),Jm(e,i,r,n),ng(null,e,i,!0,t,n);case 19:return NE(t,e,n);case 22:return AE(t,e,n)}throw Error(X(156,e.tag))};function ZE(t,e){return xT(t,e)}function hR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,i){return new hR(t,e,n,i)}function qy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dR(t){if(typeof t=="function")return qy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dy)return 11;if(t===fy)return 14}return 2}function os(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")qy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case pa:return oo(n.children,r,o,e);case hy:a=8,r|=8;break;case Em:return t=Yn(12,n,e,r|2),t.elementType=Em,t.lanes=o,t;case Pm:return t=Yn(13,n,e,r),t.elementType=Pm,t.lanes=o,t;case Sm:return t=Yn(19,n,e,r),t.elementType=Sm,t.lanes=o,t;case rT:return xf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nT:a=10;break e;case iT:a=9;break e;case dy:a=11;break e;case fy:a=14;break e;case Br:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Yn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function oo(t,e,n,i){return t=Yn(7,t,i,e),t.lanes=n,t}function xf(t,e,n,i){return t=Yn(22,t,i,e),t.elementType=rT,t.lanes=n,t.stateNode={isHidden:!1},t}function zp(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function Up(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tp(0),this.expirationTimes=Tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Zy(t,e,n,i,r,o,a,u,h){return t=new fR(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ry(o),t}function pR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fa,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function KE(t){if(!t)return ys;t=t._reactInternals;e:{if(So(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Tn(n))return KT(t,n,e)}return e}function QE(t,e,n,i,r,o,a,u,h){return t=Zy(n,i,!0,t,r,o,a,u,h),t.context=KE(null),n=t.current,i=hn(),r=ss(n),o=cr(i,r),o.callback=e??null,is(n,o,r),t.current.lanes=r,ac(t,r,i),En(t,i),t}function Tf(t,e,n,i){var r=e.current,o=hn(),a=ss(r);return n=KE(n),e.context===null?e.context=n:e.pendingContext=n,e=cr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=is(r,e,a),t!==null&&(mi(t,r,a,o),zh(t,r,a)),a}function kd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function U0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ky(t,e){U0(t,e),(t=t.alternate)&&U0(t,e)}function mR(){return null}var YE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qy(t){this._internalRoot=t}Ef.prototype.render=Qy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Tf(t,e,null,null)};Ef.prototype.unmount=Qy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_o(function(){Tf(null,t,null,null)}),e[mr]=null}};function Ef(t){this._internalRoot=t}Ef.prototype.unstable_scheduleHydration=function(t){if(t){var e=AT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hr.length&&e!==0&&e<Hr[n].priority;n++);Hr.splice(n,0,t),n===0&&kT(t)}};function Yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function H0(){}function gR(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=kd(a);o.call(f)}}var a=QE(e,i,t,0,null,!1,!1,"",H0);return t._reactRootContainer=a,t[mr]=a.current,ju(t.nodeType===8?t.parentNode:t),_o(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=kd(h);u.call(f)}}var h=Zy(t,0,!1,null,null,!1,!1,"",H0);return t._reactRootContainer=h,t[mr]=h.current,ju(t.nodeType===8?t.parentNode:t),_o(function(){Tf(e,h,n,i)}),h}function Sf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=kd(a);u.call(h)}}Tf(e,a,t,r)}else a=gR(n,e,t,r,i);return kd(a)}CT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=iu(e.pendingLanes);n!==0&&(gy(e,n|1),En(e,xt()),!(He&6)&&(Ga=xt()+500,bs()))}break;case 13:_o(function(){var i=gr(t,1);if(i!==null){var r=hn();mi(i,t,1,r)}}),Ky(t,1)}};yy=function(t){if(t.tag===13){var e=gr(t,134217728);if(e!==null){var n=hn();mi(e,t,134217728,n)}Ky(t,134217728)}};IT=function(t){if(t.tag===13){var e=ss(t),n=gr(t,e);if(n!==null){var i=hn();mi(n,t,e,i)}Ky(t,e)}};AT=function(){return Ye};bT=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};Om=function(t,e,n){switch(e){case"input":if(Am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=mf(i);if(!r)throw Error(X(90));oT(i),Am(i,r)}}}break;case"textarea":lT(t,n);break;case"select":e=n.value,e!=null&&ka(t,!!n.multiple,e,!1)}};mT=Wy;gT=_o;var yR={usingClientEntryPoint:!1,Events:[uc,_a,mf,fT,pT,Wy]},Kl={findFiberByHostInstance:eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_R={bundleType:Kl.bundleType,version:Kl.version,rendererPackageName:Kl.rendererPackageName,rendererConfig:Kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vT(t),t===null?null:t.stateNode},findFiberByHostInstance:Kl.findFiberByHostInstance||mR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{hf=wh.inject(_R),Ri=wh}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yR;Mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yy(e))throw Error(X(200));return pR(t,e,null,n)};Mn.createRoot=function(t,e){if(!Yy(t))throw Error(X(299));var n=!1,i="",r=YE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Zy(t,1,!1,null,null,n,!1,i,r),t[mr]=e.current,ju(t.nodeType===8?t.parentNode:t),new Qy(e)};Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=vT(e),t=t===null?null:t.stateNode,t};Mn.flushSync=function(t){return _o(t)};Mn.hydrate=function(t,e,n){if(!Pf(e))throw Error(X(200));return Sf(null,t,e,!0,n)};Mn.hydrateRoot=function(t,e,n){if(!Yy(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=YE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=QE(e,null,t,1,n??null,r,!1,o,a),t[mr]=e.current,ju(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ef(e)};Mn.render=function(t,e,n){if(!Pf(e))throw Error(X(200));return Sf(null,t,e,!1,n)};Mn.unmountComponentAtNode=function(t){if(!Pf(t))throw Error(X(40));return t._reactRootContainer?(_o(function(){Sf(null,null,t,!1,function(){t._reactRootContainer=null,t[mr]=null})}),!0):!1};Mn.unstable_batchedUpdates=Wy;Mn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Pf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Sf(t,e,n,!1,i)};Mn.version="18.3.1-next-f1338f8080-20240426";function XE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XE)}catch(t){console.error(t)}}XE(),X1.exports=Mn;var vR=X1.exports,W0=vR;xm.createRoot=W0.createRoot,xm.hydrateRoot=W0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qu.apply(this,arguments)}var Yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yr||(Yr={}));const $0="popstate";function wR(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=Co(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),pg("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:Rd(o))}function i(r,o){Cf(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return TR(e,n,i,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xR(){return Math.random().toString(36).substr(2,8)}function G0(t,e){return{usr:t.state,key:t.key,idx:e}}function pg(t,e,n,i){return n===void 0&&(n=null),qu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Co(e):e,{state:n,key:e&&e.key||i||xR()})}function Rd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function TR(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Yr.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(qu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Yr.Pop;let M=m(),I=M==null?null:M-f;f=M,h&&h({action:u,location:R.location,delta:I})}function _(M,I){u=Yr.Push;let T=pg(R.location,M,I);n&&n(T,M),f=m()+1;let S=G0(T,f),F=R.createHref(T);try{a.pushState(S,"",F)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;r.location.assign(F)}o&&h&&h({action:u,location:R.location,delta:1})}function E(M,I){u=Yr.Replace;let T=pg(R.location,M,I);n&&n(T,M),f=m();let S=G0(T,f),F=R.createHref(T);a.replaceState(S,"",F),o&&h&&h({action:u,location:R.location,delta:0})}function k(M){let I=r.location.origin!=="null"?r.location.origin:r.location.href,T=typeof M=="string"?M:Rd(M);return T=T.replace(/ $/,"%20"),pt(I,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,I)}let R={get action(){return u},get location(){return t(r,a)},listen(M){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener($0,g),h=M,()=>{r.removeEventListener($0,g),h=null}},createHref(M){return e(r,M)},createURL:k,encodeLocation(M){let I=k(M);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:_,replace:E,go(M){return a.go(M)}};return R}var q0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(q0||(q0={}));function ER(t,e,n){return n===void 0&&(n="/"),PR(t,e,n)}function PR(t,e,n,i){let r=typeof e=="string"?Co(e):e,o=qa(r.pathname||"/",n);if(o==null)return null;let a=JE(t);SR(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=DR(o);u=MR(a[h],f)}return u}function JE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(pt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=as([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(pt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),JE(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:NR(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of eP(o.path))r(o,a,h)}),e}function eP(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=eP(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function SR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const CR=/^:[\w-]+$/,IR=3,AR=2,bR=1,kR=10,RR=-2,Z0=t=>t==="*";function NR(t,e){let n=t.split("/"),i=n.length;return n.some(Z0)&&(i+=RR),e&&(i+=AR),n.filter(r=>!Z0(r)).reduce((r,o)=>r+(CR.test(o)?IR:o===""?bR:kR),i)}function LR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function MR(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=mg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),_=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:as([o,g.pathname]),pathnameBase:zR(as([o,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(o=as([o,g.pathnameBase]))}return a}function mg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=OR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:_,isOptional:E}=m;if(_==="*"){let R=u[g]||"";a=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const k=u[g];return E&&!k?f[_]=void 0:f[_]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function OR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Cf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function DR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const VR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jR=t=>VR.test(t);function FR(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Co(t):t,o;if(n)if(jR(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Cf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=K0(n.substring(1),"/"):o=K0(n,e)}else o=e;return{pathname:o,search:UR(i),hash:HR(r)}}function K0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Hp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xy(t,e){let n=BR(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Jy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Co(t):(r=qu({},t),pt(!r.pathname||!r.pathname.includes("?"),Hp("?","pathname","search",r)),pt(!r.pathname||!r.pathname.includes("#"),Hp("#","pathname","hash",r)),pt(!r.search||!r.search.includes("#"),Hp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let h=FR(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const as=t=>t.join("/").replace(/\/\/+/g,"/"),zR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tP=["post","put","patch","delete"];new Set(tP);const $R=["get",...tP];new Set($R);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zu(){return Zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zu.apply(this,arguments)}const If=V.createContext(null),nP=V.createContext(null),Sr=V.createContext(null),Af=V.createContext(null),ks=V.createContext({outlet:null,matches:[],isDataRoute:!1}),iP=V.createContext(null);function GR(t,e){let{relative:n}=e===void 0?{}:e;ll()||pt(!1);let{basename:i,navigator:r}=V.useContext(Sr),{hash:o,pathname:a,search:u}=kf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:as([i,a])),r.createHref({pathname:h,search:u,hash:o})}function ll(){return V.useContext(Af)!=null}function Io(){return ll()||pt(!1),V.useContext(Af).location}function rP(t){V.useContext(Sr).static||V.useLayoutEffect(t)}function bf(){let{isDataRoute:t}=V.useContext(ks);return t?s2():qR()}function qR(){ll()||pt(!1);let t=V.useContext(If),{basename:e,future:n,navigator:i}=V.useContext(Sr),{matches:r}=V.useContext(ks),{pathname:o}=Io(),a=JSON.stringify(Xy(r,n.v7_relativeSplatPath)),u=V.useRef(!1);return rP(()=>{u.current=!0}),V.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=Jy(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:as([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function kf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=V.useContext(Sr),{matches:r}=V.useContext(ks),{pathname:o}=Io(),a=JSON.stringify(Xy(r,i.v7_relativeSplatPath));return V.useMemo(()=>Jy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function ZR(t,e){return KR(t,e)}function KR(t,e,n,i){ll()||pt(!1);let{navigator:r}=V.useContext(Sr),{matches:o}=V.useContext(ks),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=Io(),m;if(e){var g;let M=typeof e=="string"?Co(e):e;h==="/"||(g=M.pathname)!=null&&g.startsWith(h)||pt(!1),m=M}else m=f;let _=m.pathname||"/",E=_;if(h!=="/"){let M=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(M.length).join("/")}let k=ER(t,{pathname:E}),R=e2(k&&k.map(M=>Object.assign({},M,{params:Object.assign({},u,M.params),pathname:as([h,r.encodeLocation?r.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?h:as([h,r.encodeLocation?r.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),o,n,i);return e&&R?V.createElement(Af.Provider,{value:{location:Zu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Yr.Pop}},R):R}function QR(){let t=r2(),e=WR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:r},n):null,null)}const YR=V.createElement(QR,null);class XR extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(ks.Provider,{value:this.props.routeContext},V.createElement(iP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JR(t){let{routeContext:e,match:n,children:i}=t,r=V.useContext(If);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(ks.Provider,{value:e},i)}function e2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||pt(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:_,errors:E}=n,k=g.route.loader&&_[g.route.id]===void 0&&(!E||E[g.route.id]===void 0);if(g.route.lazy||k){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let E,k=!1,R=null,M=null;n&&(E=u&&g.route.id?u[g.route.id]:void 0,R=g.route.errorElement||YR,h&&(f<0&&_===0?(o2("route-fallback"),k=!0,M=null):f===_&&(k=!0,M=g.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,_+1)),T=()=>{let S;return E?S=R:k?S=M:g.route.Component?S=V.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=m,V.createElement(JR,{match:g,routeContext:{outlet:m,matches:I,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?V.createElement(XR,{location:n.location,revalidation:n.revalidation,component:R,error:E,children:T(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):T()},null)}var sP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sP||{}),oP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(oP||{});function t2(t){let e=V.useContext(If);return e||pt(!1),e}function n2(t){let e=V.useContext(nP);return e||pt(!1),e}function i2(t){let e=V.useContext(ks);return e||pt(!1),e}function aP(t){let e=i2(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function r2(){var t;let e=V.useContext(iP),n=n2(),i=aP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function s2(){let{router:t}=t2(sP.UseNavigateStable),e=aP(oP.UseNavigateStable),n=V.useRef(!1);return rP(()=>{n.current=!0}),V.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Zu({fromRouteId:e},o)))},[t,e])}const Q0={};function o2(t,e,n){Q0[t]||(Q0[t]=!0)}function a2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lP(t){let{to:e,replace:n,state:i,relative:r}=t;ll()||pt(!1);let{future:o,static:a}=V.useContext(Sr),{matches:u}=V.useContext(ks),{pathname:h}=Io(),f=bf(),m=Jy(e,Xy(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return V.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function jr(t){pt(!1)}function l2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Yr.Pop,navigator:o,static:a=!1,future:u}=t;ll()&&pt(!1);let h=e.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:h,navigator:o,static:a,future:Zu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=Co(i));let{pathname:m="/",search:g="",hash:_="",state:E=null,key:k="default"}=i,R=V.useMemo(()=>{let M=qa(m,h);return M==null?null:{location:{pathname:M,search:g,hash:_,state:E,key:k},navigationType:r}},[h,m,g,_,E,k,r]);return R==null?null:V.createElement(Sr.Provider,{value:f},V.createElement(Af.Provider,{children:n,value:R}))}function u2(t){let{children:e,location:n}=t;return ZR(gg(e),n)}new Promise(()=>{});function gg(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(i,r)=>{if(!V.isValidElement(i))return;let o=[...e,r];if(i.type===V.Fragment){n.push.apply(n,gg(i.props.children,o));return}i.type!==jr&&pt(!1),!i.props.index||!i.props.children||pt(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=gg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nd.apply(this,arguments)}function uP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function c2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function h2(t,e){return t.button===0&&(!e||e==="_self")&&!c2(t)}const d2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],p2="6";try{window.__reactRouterVersion=p2}catch{}const m2=V.createContext({isTransitioning:!1}),g2="startTransition",Y0=lb[g2];function y2(t){let{basename:e,children:n,future:i,window:r}=t,o=V.useRef();o.current==null&&(o.current=wR({window:r,v5Compat:!0}));let a=o.current,[u,h]=V.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=V.useCallback(g=>{f&&Y0?Y0(()=>h(g)):h(g)},[h,f]);return V.useLayoutEffect(()=>a.listen(m),[a,m]),V.useEffect(()=>a2(i),[i]),V.createElement(l2,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const _2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w2=V.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,_=uP(e,d2),{basename:E}=V.useContext(Sr),k,R=!1;if(typeof f=="string"&&v2.test(f)&&(k=f,_2))try{let S=new URL(window.location.href),F=f.startsWith("//")?new URL(S.protocol+f):new URL(f),$=qa(F.pathname,E);F.origin===S.origin&&$!=null?f=$+F.search+F.hash:R=!0}catch{}let M=GR(f,{relative:r}),I=E2(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function T(S){i&&i(S),S.defaultPrevented||I(S)}return V.createElement("a",Nd({},_,{href:k||M,onClick:R||o?i:T,ref:n,target:h}))}),x2=V.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=uP(e,f2),_=kf(h,{relative:g.relative}),E=Io(),k=V.useContext(nP),{navigator:R,basename:M}=V.useContext(Sr),I=k!=null&&P2(_)&&f===!0,T=R.encodeLocation?R.encodeLocation(_).pathname:_.pathname,S=E.pathname,F=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;r||(S=S.toLowerCase(),F=F?F.toLowerCase():null,T=T.toLowerCase()),F&&M&&(F=qa(F,M)||F);const $=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let U=S===T||!a&&S.startsWith(T)&&S.charAt($)==="/",b=F!=null&&(F===T||!a&&F.startsWith(T)&&F.charAt(T.length)==="/"),C={isActive:U,isPending:b,isTransitioning:I},N=U?i:void 0,j;typeof o=="function"?j=o(C):j=[o,U?"active":null,b?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(C):u;return V.createElement(w2,Nd({},g,{"aria-current":N,className:j,ref:n,style:O,to:h,viewTransition:f}),typeof m=="function"?m(C):m)});var yg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yg||(yg={}));var X0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(X0||(X0={}));function T2(t){let e=V.useContext(If);return e||pt(!1),e}function E2(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=bf(),f=Io(),m=kf(t,{relative:a});return V.useCallback(g=>{if(h2(g,n)){g.preventDefault();let _=i!==void 0?i:Rd(f)===Rd(m);h(t,{replace:_,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function P2(t,e){e===void 0&&(e={});let n=V.useContext(m2);n==null&&pt(!1);let{basename:i}=T2(yg.useViewTransitionState),r=kf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=qa(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=qa(n.nextLocation.pathname,i)||n.nextLocation.pathname;return mg(r.pathname,a)!=null||mg(r.pathname,o)!=null}const cP=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Rf=V.createContext({}),Nf=V.createContext(null),Lf=typeof document<"u",e_=Lf?V.useLayoutEffect:V.useEffect,hP=V.createContext({strict:!1}),t_=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),S2="framerAppearId",dP="data-"+t_(S2);function C2(t,e,n,i){const{visualElement:r}=V.useContext(Rf),o=V.useContext(hP),a=V.useContext(Nf),u=V.useContext(cP).reducedMotion,h=V.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;V.useInsertionEffect(()=>{f&&f.update(n,a)});const m=V.useRef(!!(n[dP]&&!window.HandoffComplete));return e_(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),V.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function Sa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function I2(t,e,n){return V.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Sa(n)&&(n.current=i))},[e])}function Ku(t){return typeof t=="string"||Array.isArray(t)}function Mf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const n_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],i_=["initial",...n_];function Of(t){return Mf(t.animate)||i_.some(e=>Ku(t[e]))}function fP(t){return!!(Of(t)||t.variants)}function A2(t,e){if(Of(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Ku(n)?n:void 0,animate:Ku(i)?i:void 0}}return t.inherit!==!1?e:{}}function b2(t){const{initial:e,animate:n}=A2(t,V.useContext(Rf));return V.useMemo(()=>({initial:e,animate:n}),[J0(e),J0(n)])}function J0(t){return Array.isArray(t)?t.join(" "):t}const ew={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qu={};for(const t in ew)Qu[t]={isEnabled:e=>ew[t].some(n=>!!e[n])};function k2(t){for(const e in t)Qu[e]={...Qu[e],...t[e]}}const r_=V.createContext({}),pP=V.createContext({}),R2=Symbol.for("motionComponentSymbol");function N2({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&k2(t);function o(u,h){let f;const m={...V.useContext(cP),...u,layoutId:L2(u)},{isStatic:g}=m,_=b2(u),E=i(u,g);if(!g&&Lf){_.visualElement=C2(r,E,m,e);const k=V.useContext(pP),R=V.useContext(hP).strict;_.visualElement&&(f=_.visualElement.loadFeatures(m,R,t,k))}return V.createElement(Rf.Provider,{value:_},f&&_.visualElement?V.createElement(f,{visualElement:_.visualElement,...m}):null,n(r,u,I2(E,_.visualElement,h),E,g,_.visualElement))}const a=V.forwardRef(o);return a[R2]=r,a}function L2({layoutId:t}){const e=V.useContext(r_).id;return e&&t!==void 0?e+"-"+t:t}function M2(t){function e(i,r={}){return N2(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const O2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function s_(t){return typeof t!="string"||t.includes("-")?!1:!!(O2.indexOf(t)>-1||/[A-Z]/.test(t))}const Ld={};function D2(t){Object.assign(Ld,t)}const hc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ao=new Set(hc);function mP(t,{layout:e,layoutId:n}){return Ao.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ld[t]||t==="opacity")}const Pn=t=>!!(t&&t.getVelocity),V2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},j2=hc.length;function F2(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<j2;a++){const u=hc[a];if(t[u]!==void 0){const h=V2[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const gP=t=>e=>typeof e=="string"&&e.startsWith(t),yP=gP("--"),_g=gP("var(--"),B2=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,z2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,_s=(t,e,n)=>Math.min(Math.max(n,t),e),bo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},vu={...bo,transform:t=>_s(0,1,t)},xh={...bo,default:1},wu=t=>Math.round(t*1e5)/1e5,Df=/(-)?([\d]*\.?[\d])+/g,_P=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,U2=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function dc(t){return typeof t=="string"}const fc=t=>({test:e=>dc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fr=fc("deg"),Li=fc("%"),ve=fc("px"),H2=fc("vh"),W2=fc("vw"),tw={...Li,parse:t=>Li.parse(t)/100,transform:t=>Li.transform(t*100)},nw={...bo,transform:Math.round},vP={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,size:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,rotate:Fr,rotateX:Fr,rotateY:Fr,rotateZ:Fr,scale:xh,scaleX:xh,scaleY:xh,scaleZ:xh,skew:Fr,skewX:Fr,skewY:Fr,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:vu,originX:tw,originY:tw,originZ:ve,zIndex:nw,fillOpacity:vu,strokeOpacity:vu,numOctaves:nw};function o_(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const _=e[g];if(yP(g)){o[g]=_;continue}const E=vP[g],k=z2(_,E);if(Ao.has(g)){if(h=!0,a[g]=k,!m)continue;_!==(E.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=k):r[g]=k}if(e.transform||(h||i?r.transform=F2(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:_="50%",originZ:E=0}=u;r.transformOrigin=`${g} ${_} ${E}`}}const a_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wP(t,e,n){for(const i in e)!Pn(e[i])&&!mP(i,n)&&(t[i]=e[i])}function $2({transformTemplate:t},e,n){return V.useMemo(()=>{const i=a_();return o_(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function G2(t,e,n){const i=t.style||{},r={};return wP(r,i,t),Object.assign(r,$2(t,e,n)),t.transformValues?t.transformValues(r):r}function q2(t,e,n){const i={},r=G2(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const Z2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Md(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Z2.has(t)}let xP=t=>!Md(t);function K2(t){t&&(xP=e=>e.startsWith("on")?!Md(e):t(e))}try{K2(require("@emotion/is-prop-valid").default)}catch{}function Q2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(xP(r)||n===!0&&Md(r)||!e&&!Md(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function iw(t,e,n){return typeof t=="string"?t:ve.transform(e+n*t)}function Y2(t,e,n){const i=iw(e,t.x,t.width),r=iw(n,t.y,t.height);return`${i} ${r}`}const X2={offset:"stroke-dashoffset",array:"stroke-dasharray"},J2={offset:"strokeDashoffset",array:"strokeDasharray"};function eN(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?X2:J2;t[o.offset]=ve.transform(-i);const a=ve.transform(e),u=ve.transform(n);t[o.array]=`${a} ${u}`}function l_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,_){if(o_(t,f,m,_),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:E,style:k,dimensions:R}=t;E.transform&&(R&&(k.transform=E.transform),delete E.transform),R&&(r!==void 0||o!==void 0||k.transform)&&(k.transformOrigin=Y2(R,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(E.x=e),n!==void 0&&(E.y=n),i!==void 0&&(E.scale=i),a!==void 0&&eN(E,a,u,h,!1)}const TP=()=>({...a_(),attrs:{}}),u_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function tN(t,e,n,i){const r=V.useMemo(()=>{const o=TP();return l_(o,e,{enableHardwareAcceleration:!1},u_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};wP(o,t.style,t),r.style={...o,...r.style}}return r}function nN(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(s_(n)?tN:q2)(i,o,a,n),m={...Q2(i,typeof n=="string",t),...h,ref:r},{children:g}=i,_=V.useMemo(()=>Pn(g)?g.get():g,[g]);return V.createElement(n,{...m,children:_})}}function EP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const PP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SP(t,e,n,i){EP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(PP.has(r)?r:t_(r),e.attrs[r])}function c_(t,e){const{style:n}=t,i={};for(const r in n)(Pn(n[r])||e.style&&Pn(e.style[r])||mP(r,t))&&(i[r]=n[r]);return i}function CP(t,e){const n=c_(t,e);for(const i in t)if(Pn(t[i])||Pn(e[i])){const r=hc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function h_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function IP(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const Od=t=>Array.isArray(t),iN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),rN=t=>Od(t)?t[t.length-1]||0:t;function Zh(t){const e=Pn(t)?t.get():t;return iN(e)?e.toValue():e}function sN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:oN(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const AP=t=>(e,n)=>{const i=V.useContext(Rf),r=V.useContext(Nf),o=()=>sN(t,e,i,r);return n?o():IP(o)};function oN(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Zh(o[_]);let{initial:a,animate:u}=t;const h=Of(t),f=fP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Mf(g)&&(Array.isArray(g)?g:[g]).forEach(E=>{const k=h_(t,E);if(!k)return;const{transitionEnd:R,transition:M,...I}=k;for(const T in I){let S=I[T];if(Array.isArray(S)){const F=m?S.length-1:0;S=S[F]}S!==null&&(r[T]=S)}for(const T in R)r[T]=R[T]}),r}const Tt=t=>t;class rw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function aN(t){let e=new rw,n=new rw,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,_=g?e:n;return f&&a.add(h),_.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const Th=["prepare","read","update","preRender","render","postRender"],lN=40;function uN(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=Th.reduce((g,_)=>(g[_]=aN(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,lN),1),r.timestamp=g,r.isProcessing=!0,Th.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:Th.reduce((g,_)=>{const E=o[_];return g[_]=(k,R=!1,M=!1)=>(n||h(),E.schedule(k,R,M)),g},{}),cancel:g=>Th.forEach(_=>o[_].cancel(g)),state:r,steps:o}}const{schedule:nt,cancel:_r,state:Jt,steps:Wp}=uN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tt,!0),cN={useVisualState:AP({scrapeMotionValuesFromProps:CP,createRenderState:TP,onMount:(t,e,{renderState:n,latestValues:i})=>{nt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),nt.render(()=>{l_(n,i,{enableHardwareAcceleration:!1},u_(e.tagName),t.transformTemplate),SP(e,n)})}})},hN={useVisualState:AP({scrapeMotionValuesFromProps:c_,createRenderState:a_})};function dN(t,{forwardMotionProps:e=!1},n,i){return{...s_(t)?cN:hN,preloadedFeatures:n,useRender:nN(e),createVisualElement:i,Component:t}}function ar(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const bP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Vf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const fN=t=>e=>bP(e)&&t(e,Vf(e));function hr(t,e,n,i){return ar(t,e,fN(n),i)}const pN=(t,e)=>n=>e(t(n)),ls=(...t)=>t.reduce(pN);function kP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const sw=kP("dragHorizontal"),ow=kP("dragVertical");function RP(t){let e=!1;if(t==="y")e=ow();else if(t==="x")e=sw();else{const n=sw(),i=ow();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function NP(){const t=RP(!0);return t?(t(),!1):!0}class Rs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function aw(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||NP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&nt.update(()=>u[i](o,a))};return hr(t.current,n,r,{passive:!t.getProps()[i]})}class mN extends Rs{mount(){this.unmount=ls(aw(this.node,!0),aw(this.node,!1))}unmount(){}}class gN extends Rs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ls(ar(this.node.current,"focus",()=>this.onFocus()),ar(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const LP=(t,e)=>e?t===e?!0:LP(t,e.parentElement):!1;function $p(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Vf(n))}class yN extends Rs{constructor(){super(...arguments),this.removeStartListeners=Tt,this.removeEndListeners=Tt,this.removeAccessibleListeners=Tt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=hr(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();nt.update(()=>{!g&&!LP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=hr(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ls(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||$p("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&nt.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=ar(this.node.current,"keyup",a),$p("down",(u,h)=>{this.startPress(u,h)})},n=ar(this.node.current,"keydown",e),i=()=>{this.isPressing&&$p("cancel",(o,a)=>this.cancelPress(o,a))},r=ar(this.node.current,"blur",i);this.removeAccessibleListeners=ls(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&nt.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!NP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&nt.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=hr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=ar(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ls(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const vg=new WeakMap,Gp=new WeakMap,_N=t=>{const e=vg.get(t.target);e&&e(t)},vN=t=>{t.forEach(_N)};function wN({root:t,...e}){const n=t||document;Gp.has(n)||Gp.set(n,{});const i=Gp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(vN,{root:t,...e})),i[r]}function xN(t,e,n){const i=wN(e);return vg.set(t,n),i.observe(t),()=>{vg.delete(t),i.unobserve(t)}}const TN={some:0,all:1};class EN extends Rs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:TN[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(h)};return xN(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(PN(e,n))&&this.startObserver()}unmount(){}}function PN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const SN={inView:{Feature:EN},tap:{Feature:yN},focus:{Feature:gN},hover:{Feature:mN}};function MP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function CN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function IN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function jf(t,e,n){const i=t.getProps();return h_(i,e,n!==void 0?n:i.custom,CN(t),IN(t))}let d_=Tt;const ao=t=>t*1e3,dr=t=>t/1e3,AN={current:!1},OP=t=>Array.isArray(t)&&typeof t[0]=="number";function DP(t){return!!(!t||typeof t=="string"&&VP[t]||OP(t)||Array.isArray(t)&&t.every(DP))}const su=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,VP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:su([0,.65,.55,1]),circOut:su([.55,0,1,.45]),backIn:su([.31,.01,.66,-.59]),backOut:su([.33,1.53,.69,.99])};function jP(t){if(t)return OP(t)?su(t):Array.isArray(t)?t.map(jP):VP[t]}function bN(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=jP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function kN(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const FP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,RN=1e-7,NN=12;function LN(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=FP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>RN&&++u<NN);return a}function pc(t,e,n,i){if(t===e&&n===i)return Tt;const r=o=>LN(o,0,1,t,n);return o=>o===0||o===1?o:FP(r(o),e,i)}const MN=pc(.42,0,1,1),ON=pc(0,0,.58,1),BP=pc(.42,0,.58,1),DN=t=>Array.isArray(t)&&typeof t[0]!="number",zP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,UP=t=>e=>1-t(1-e),f_=t=>1-Math.sin(Math.acos(t)),HP=UP(f_),VN=zP(f_),WP=pc(.33,1.53,.69,.99),p_=UP(WP),jN=zP(p_),FN=t=>(t*=2)<1?.5*p_(t):.5*(2-Math.pow(2,-10*(t-1))),BN={linear:Tt,easeIn:MN,easeInOut:BP,easeOut:ON,circIn:f_,circInOut:VN,circOut:HP,backIn:p_,backInOut:jN,backOut:WP,anticipate:FN},lw=t=>{if(Array.isArray(t)){d_(t.length===4);const[e,n,i,r]=t;return pc(e,n,i,r)}else if(typeof t=="string")return BN[t];return t},m_=(t,e)=>n=>!!(dc(n)&&U2.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),$P=(t,e,n)=>i=>{if(!dc(i))return i;const[r,o,a,u]=i.match(Df);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},zN=t=>_s(0,255,t),qp={...bo,transform:t=>Math.round(zN(t))},io={test:m_("rgb","red"),parse:$P("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+qp.transform(t)+", "+qp.transform(e)+", "+qp.transform(n)+", "+wu(vu.transform(i))+")"};function UN(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const wg={test:m_("#"),parse:UN,transform:io.transform},Ca={test:m_("hsl","hue"),parse:$P("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Li.transform(wu(e))+", "+Li.transform(wu(n))+", "+wu(vu.transform(i))+")"},un={test:t=>io.test(t)||wg.test(t)||Ca.test(t),parse:t=>io.test(t)?io.parse(t):Ca.test(t)?Ca.parse(t):wg.parse(t),transform:t=>dc(t)?t:t.hasOwnProperty("red")?io.transform(t):Ca.transform(t)},dt=(t,e,n)=>-n*t+n*e+t;function Zp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function HN({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Zp(h,u,t+1/3),o=Zp(h,u,t),a=Zp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Kp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},WN=[wg,io,Ca],$N=t=>WN.find(e=>e.test(t));function uw(t){const e=$N(t);let n=e.parse(t);return e===Ca&&(n=HN(n)),n}const GP=(t,e)=>{const n=uw(t),i=uw(e),r={...n};return o=>(r.red=Kp(n.red,i.red,o),r.green=Kp(n.green,i.green,o),r.blue=Kp(n.blue,i.blue,o),r.alpha=dt(n.alpha,i.alpha,o),io.transform(r))};function GN(t){var e,n;return isNaN(t)&&dc(t)&&(((e=t.match(Df))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(_P))===null||n===void 0?void 0:n.length)||0)>0}const qP={regex:B2,countKey:"Vars",token:"${v}",parse:Tt},ZP={regex:_P,countKey:"Colors",token:"${c}",parse:un.parse},KP={regex:Df,countKey:"Numbers",token:"${n}",parse:bo.parse};function Qp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Dd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Qp(n,qP),Qp(n,ZP),Qp(n,KP),n}function QP(t){return Dd(t).values}function YP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Dd(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(qP.token,a[h]):h<i+n?u=u.replace(ZP.token,un.transform(a[h])):u=u.replace(KP.token,wu(a[h]));return u}}const qN=t=>typeof t=="number"?0:t;function ZN(t){const e=QP(t);return YP(t)(e.map(qN))}const vs={test:GN,parse:QP,createTransformer:YP,getAnimatableNone:ZN},XP=(t,e)=>n=>`${n>0?e:t}`;function JP(t,e){return typeof t=="number"?n=>dt(t,e,n):un.test(t)?GP(t,e):t.startsWith("var(")?XP(t,e):tS(t,e)}const eS=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>JP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},KN=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=JP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},tS=(t,e)=>{const n=vs.createTransformer(e),i=Dd(t),r=Dd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?ls(eS(i.values,r.values),n):XP(t,e)},Yu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},cw=(t,e)=>n=>dt(t,e,n);function QN(t){return typeof t=="number"?cw:typeof t=="string"?un.test(t)?GP:tS:Array.isArray(t)?eS:typeof t=="object"?KN:cw}function YN(t,e,n){const i=[],r=n||QN(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||Tt:e;u=ls(h,u)}i.push(u)}return i}function nS(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(d_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=YN(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Yu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(_s(t[0],t[o-1],f)):h}function XN(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Yu(0,e,i);t.push(dt(n,1,r))}}function JN(t){const e=[0];return XN(e,t.length-1),e}function eL(t,e){return t.map(n=>n*e)}function tL(t,e){return t.map(()=>e||BP).splice(0,t.length-1)}function Vd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=DN(i)?i.map(lw):lw(i),o={done:!1,value:e[0]},a=eL(n&&n.length===e.length?n:JN(e),t),u=nS(a,e,{ease:Array.isArray(r)?r:tL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function iS(t,e){return e?t*(1e3/e):0}const nL=5;function rS(t,e,n){const i=Math.max(e-nL,0);return iS(n-t(i),e-i)}const Yp=.001,iL=.01,rL=10,sL=.05,oL=1;function aL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=_s(sL,oL,a),t=_s(iL,rL,dr(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,E=xg(f,a),k=Math.exp(-g);return Yp-_/E*k},o=f=>{const g=f*a*t,_=g*n+n,E=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-g),R=xg(Math.pow(f,2),a);return(-r(f)+Yp>0?-1:1)*((_-E)*k)/R}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Yp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=uL(r,o,u);if(t=ao(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const lL=12;function uL(t,e,n){let i=n;for(let r=1;r<lL;r++)i=i-t(i)/e(i);return i}function xg(t,e){return t*Math.sqrt(1-e*e)}const cL=["duration","bounce"],hL=["stiffness","damping","mass"];function hw(t,e){return e.some(n=>t[n]!==void 0)}function dL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!hw(t,hL)&&hw(t,cL)){const n=aL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function sS({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:_}=dL({...i,velocity:-dr(i.velocity||0)}),E=g||0,k=h/(2*Math.sqrt(u*f)),R=o-r,M=dr(Math.sqrt(u/f)),I=Math.abs(R)<5;n||(n=I?.01:2),e||(e=I?.005:.5);let T;if(k<1){const S=xg(M,k);T=F=>{const $=Math.exp(-k*M*F);return o-$*((E+k*M*R)/S*Math.sin(S*F)+R*Math.cos(S*F))}}else if(k===1)T=S=>o-Math.exp(-M*S)*(R+(E+M*R)*S);else{const S=M*Math.sqrt(k*k-1);T=F=>{const $=Math.exp(-k*M*F),U=Math.min(S*F,300);return o-$*((E+k*M*R)*Math.sinh(U)+S*R*Math.cosh(U))/S}}return{calculatedDuration:_&&m||null,next:S=>{const F=T(S);if(_)a.done=S>=m;else{let $=E;S!==0&&(k<1?$=rS(T,S,F):$=0);const U=Math.abs($)<=n,b=Math.abs(o-F)<=e;a.done=U&&b}return a.value=a.done?o:F,a}}}function dw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},E=C=>u!==void 0&&C<u||h!==void 0&&C>h,k=C=>u===void 0?h:h===void 0||Math.abs(u-C)<Math.abs(h-C)?u:h;let R=n*e;const M=g+R,I=a===void 0?M:a(M);I!==M&&(R=I-g);const T=C=>-R*Math.exp(-C/i),S=C=>I+T(C),F=C=>{const N=T(C),j=S(C);_.done=Math.abs(N)<=f,_.value=_.done?I:j};let $,U;const b=C=>{E(_.value)&&($=C,U=sS({keyframes:[_.value,k(_.value)],velocity:rS(S,C,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return b(0),{calculatedDuration:null,next:C=>{let N=!1;return!U&&$===void 0&&(N=!0,F(C),b(C)),$!==void 0&&C>$?U.next(C-$):(!N&&F(C),_)}}}const fL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>nt.update(e,!0),stop:()=>_r(e),now:()=>Jt.isProcessing?Jt.timestamp:performance.now()}},fw=2e4;function pw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<fw;)e+=n,i=t.next(e);return e>=fw?1/0:e}const pL={decay:dw,inertia:dw,tween:Vd,keyframes:Vd,spring:sS};function jd({autoplay:t=!0,delay:e=0,driver:n=fL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,..._}){let E=1,k=!1,R,M;const I=()=>{M=new Promise(ie=>{R=ie})};I();let T;const S=pL[r]||Vd;let F;S!==Vd&&typeof i[0]!="number"&&(F=nS([0,100],i,{clamp:!1}),i=[0,100]);const $=S({..._,keyframes:i});let U;u==="mirror"&&(U=S({..._,keyframes:[...i].reverse(),velocity:-(_.velocity||0)}));let b="idle",C=null,N=null,j=null;$.calculatedDuration===null&&o&&($.calculatedDuration=pw($));const{calculatedDuration:O}=$;let z=1/0,D=1/0;O!==null&&(z=O+a,D=z*(o+1)-a);let me=0;const Ge=ie=>{if(N===null)return;E>0&&(N=Math.min(N,ie)),E<0&&(N=Math.min(ie-D/E,N)),C!==null?me=C:me=Math.round(ie-N)*E;const Se=me-e*(E>=0?1:-1),Xe=E>=0?Se<0:Se>D;me=Math.max(Se,0),b==="finished"&&C===null&&(me=D);let Le=me,ke=$;if(o){const ee=Math.min(me,D)/z;let le=Math.floor(ee),ue=ee%1;!ue&&ee>=1&&(ue=1),ue===1&&le--,le=Math.min(le,o+1),!!(le%2)&&(u==="reverse"?(ue=1-ue,a&&(ue-=a/z)):u==="mirror"&&(ke=U)),Le=_s(0,1,ue)*z}const pe=Xe?{done:!1,value:i[0]}:ke.next(Le);F&&(pe.value=F(pe.value));let{done:ct}=pe;!Xe&&O!==null&&(ct=E>=0?me>=D:me<=0);const qt=C===null&&(b==="finished"||b==="running"&&ct);return g&&g(pe.value),qt&&Z(),pe},be=()=>{T&&T.stop(),T=void 0},at=()=>{b="idle",be(),R(),I(),N=j=null},Z=()=>{b="finished",m&&m(),be(),R()},he=()=>{if(k)return;T||(T=n(Ge));const ie=T.now();h&&h(),C!==null?N=ie-C:(!N||b==="finished")&&(N=ie),b==="finished"&&I(),j=N,C=null,b="running",T.start()};t&&he();const J={then(ie,Se){return M.then(ie,Se)},get time(){return dr(me)},set time(ie){ie=ao(ie),me=ie,C!==null||!T||E===0?C=ie:N=T.now()-ie/E},get duration(){const ie=$.calculatedDuration===null?pw($):$.calculatedDuration;return dr(ie)},get speed(){return E},set speed(ie){ie===E||!T||(E=ie,J.time=dr(me))},get state(){return b},play:he,pause:()=>{b="paused",C=me},stop:()=>{k=!0,b!=="idle"&&(b="idle",f&&f(),at())},cancel:()=>{j!==null&&Ge(j),at()},complete:()=>{b="finished"},sample:ie=>(N=0,Ge(ie))};return J}function mL(t){let e;return()=>(e===void 0&&(e=t()),e)}const gL=mL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),yL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Eh=10,_L=2e4,vL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!DP(e.ease);function wL(t,e,{onUpdate:n,onComplete:i,...r}){if(!(gL()&&yL.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(S=>{u=S})};m();let{keyframes:g,duration:_=300,ease:E,times:k}=r;if(vL(e,r)){const S=jd({...r,repeat:0,delay:0});let F={done:!1,value:g[0]};const $=[];let U=0;for(;!F.done&&U<_L;)F=S.sample(U),$.push(F.value),U+=Eh;k=void 0,g=$,_=U-Eh,E="linear"}const R=bN(t.owner.current,e,g,{...r,duration:_,ease:E,times:k}),M=()=>{f=!1,R.cancel()},I=()=>{f=!0,nt.update(M),u(),m()};return R.onfinish=()=>{f||(t.set(kN(g,r)),i&&i(),I())},{then(S,F){return h.then(S,F)},attachTimeline(S){return R.timeline=S,R.onfinish=null,Tt},get time(){return dr(R.currentTime||0)},set time(S){R.currentTime=ao(S)},get speed(){return R.playbackRate},set speed(S){R.playbackRate=S},get duration(){return dr(_)},play:()=>{a||(R.play(),_r(M))},pause:()=>R.pause(),stop:()=>{if(a=!0,R.playState==="idle")return;const{currentTime:S}=R;if(S){const F=jd({...r,autoplay:!1});t.setWithVelocity(F.sample(S-Eh).value,F.sample(S).value,Eh)}I()},complete:()=>{f||R.finish()},cancel:I}}function xL({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Tt,pause:Tt,stop:Tt,then:o=>(o(),Promise.resolve()),cancel:Tt,complete:Tt});return e?jd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const TL={type:"spring",stiffness:500,damping:25,restSpeed:10},EL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),PL={type:"keyframes",duration:.8},SL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CL=(t,{keyframes:e})=>e.length>2?PL:Ao.has(t)?t.startsWith("scale")?EL(e[1]):TL:SL,Tg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vs.test(e)||e==="0")&&!e.startsWith("url(")),IL=new Set(["brightness","contrast","saturate","opacity"]);function AL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Df)||[];if(!i)return t;const r=n.replace(i,"");let o=IL.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const bL=/([a-z-]*)\(.*?\)/g,Eg={...vs,getAnimatableNone:t=>{const e=t.match(bL);return e?e.map(AL).join(" "):t}},kL={...vP,color:un,backgroundColor:un,outlineColor:un,fill:un,stroke:un,borderColor:un,borderTopColor:un,borderRightColor:un,borderBottomColor:un,borderLeftColor:un,filter:Eg,WebkitFilter:Eg},g_=t=>kL[t];function oS(t,e){let n=g_(t);return n!==Eg&&(n=vs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const aS=t=>/^0[^.\s]+$/.test(t);function RL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||aS(t)}function NL(t,e,n,i){const r=Tg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),RL(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=oS(e,u)}return o}function LL({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function y_(t,e){return t[e]||t.default||t}const ML={skipAnimations:!1},__=(t,e,n,i={})=>r=>{const o=y_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-ao(a);const h=NL(e,t,n,o),f=h[0],m=h[h.length-1],g=Tg(t,f),_=Tg(t,m);let E={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:k=>{e.set(k),o.onUpdate&&o.onUpdate(k)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(LL(o)||(E={...E,...CL(t,E)}),E.duration&&(E.duration=ao(E.duration)),E.repeatDelay&&(E.repeatDelay=ao(E.repeatDelay)),!g||!_||AN.current||o.type===!1||ML.skipAnimations)return xL(E);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const k=wL(e,t,E);if(k)return k}return jd(E)};function Fd(t){return!!(Pn(t)&&t.add)}const lS=t=>/^\-?\d*\.?\d+$/.test(t);function v_(t,e){t.indexOf(e)===-1&&t.push(e)}function w_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class x_{constructor(){this.subscriptions=[]}add(e){return v_(this.subscriptions,e),()=>w_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const OL=t=>!isNaN(parseFloat(t));class DL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Jt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,nt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>nt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=OL(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new x_);const i=this.events[e].add(n);return e==="change"?()=>{i(),nt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?iS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Za(t,e){return new DL(t,e)}const uS=t=>e=>e.test(t),VL={test:t=>t==="auto",parse:t=>t},cS=[bo,ve,Li,Fr,W2,H2,VL],Ql=t=>cS.find(uS(t)),jL=[...cS,un,vs],FL=t=>jL.find(uS(t));function BL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Za(n))}function zL(t,e){const n=jf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=rN(o[a]);BL(t,a,u)}}function UL(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(lS(m)||aS(m))?m=parseFloat(m):!FL(m)&&vs.test(f)&&(m=oS(h,f)),t.addValue(h,Za(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function HL(t,e){return e?(e[t]||e.default||e).from:void 0}function WL(t,e,n){const i={};for(const r in t){const o=HL(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function $L({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function GL(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function hS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const _=t.getValue(g),E=u[g];if(!_||E===void 0||m&&$L(m,g))continue;const k={delay:n,elapsed:0,...y_(o||{},g)};if(window.HandoffAppearAnimations){const I=t.getProps()[dP];if(I){const T=window.HandoffAppearAnimations(I,g,_,nt);T!==null&&(k.elapsed=T,k.isHandoff=!0)}}let R=!k.isHandoff&&!GL(_,E);if(k.type==="spring"&&(_.getVelocity()||k.velocity)&&(R=!1),_.animation&&(R=!1),R)continue;_.start(__(g,_,E,t.shouldReduceMotion&&Ao.has(g)?{type:!1}:k));const M=_.animation;Fd(h)&&(h.add(g),M.then(()=>h.remove(g))),f.push(M)}return a&&Promise.all(f).then(()=>{a&&zL(t,a)}),f}function Pg(t,e,n={}){const i=jf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(hS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return qL(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function qL(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(ZL).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Pg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function ZL(t,e){return t.sortNodePosition(e)}function KL(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Pg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Pg(t,e,n);else{const r=typeof e=="function"?jf(t,e,n.custom):e;i=Promise.all(hS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const QL=[...n_].reverse(),YL=n_.length;function XL(t){return e=>Promise.all(e.map(({animation:n,options:i})=>KL(t,n,i)))}function JL(t){let e=XL(t);const n=tM();let i=!0;const r=(h,f)=>{const m=jf(t,f);if(m){const{transition:g,transitionEnd:_,...E}=m;h={...h,...E,..._}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},_=[],E=new Set;let k={},R=1/0;for(let I=0;I<YL;I++){const T=QL[I],S=n[T],F=m[T]!==void 0?m[T]:g[T],$=Ku(F),U=T===f?S.isActive:null;U===!1&&(R=I);let b=F===g[T]&&F!==m[T]&&$;if(b&&i&&t.manuallyAnimateOnMount&&(b=!1),S.protectedKeys={...k},!S.isActive&&U===null||!F&&!S.prevProp||Mf(F)||typeof F=="boolean")continue;let N=eM(S.prevProp,F)||T===f&&S.isActive&&!b&&$||I>R&&$,j=!1;const O=Array.isArray(F)?F:[F];let z=O.reduce(r,{});U===!1&&(z={});const{prevResolvedValues:D={}}=S,me={...D,...z},Ge=be=>{N=!0,E.has(be)&&(j=!0,E.delete(be)),S.needsAnimating[be]=!0};for(const be in me){const at=z[be],Z=D[be];if(k.hasOwnProperty(be))continue;let he=!1;Od(at)&&Od(Z)?he=!MP(at,Z):he=at!==Z,he?at!==void 0?Ge(be):E.add(be):at!==void 0&&E.has(be)?Ge(be):S.protectedKeys[be]=!0}S.prevProp=F,S.prevResolvedValues=z,S.isActive&&(k={...k,...z}),i&&t.blockInitialAnimation&&(N=!1),N&&(!b||j)&&_.push(...O.map(be=>({animation:be,options:{type:T,...h}})))}if(E.size){const I={};E.forEach(T=>{const S=t.getBaseTarget(T);S!==void 0&&(I[T]=S)}),_.push({animation:I})}let M=!!_.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(_):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(E=>{var k;return(k=E.animationState)===null||k===void 0?void 0:k.setActive(h,f)}),n[h].isActive=f;const _=a(m,h);for(const E in n)n[E].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function eM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!MP(e,t):!1}function $s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tM(){return{animate:$s(!0),whileInView:$s(),whileHover:$s(),whileTap:$s(),whileDrag:$s(),whileFocus:$s(),exit:$s()}}class nM extends Rs{constructor(e){super(e),e.animationState||(e.animationState=JL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Mf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let iM=0;class rM extends Rs{constructor(){super(...arguments),this.id=iM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const sM={animation:{Feature:nM},exit:{Feature:rM}},mw=(t,e)=>Math.abs(t-e);function oM(t,e){const n=mw(t.x,e.x),i=mw(t.y,e.y);return Math.sqrt(n**2+i**2)}class dS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Jp(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=oM(g.offset,{x:0,y:0})>=3;if(!_&&!E)return;const{point:k}=g,{timestamp:R}=Jt;this.history.push({...k,timestamp:R});const{onStart:M,onMove:I}=this.handlers;_||(M&&M(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Xp(_,this.transformPagePoint),nt.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:E,onSessionEnd:k,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Jp(g.type==="pointercancel"?this.lastMoveEventInfo:Xp(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,M),k&&k(g,M)},!bP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Vf(e),u=Xp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Jt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,Jp(u,this.history)),this.removeListeners=ls(hr(this.contextWindow,"pointermove",this.handlePointerMove),hr(this.contextWindow,"pointerup",this.handlePointerUp),hr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_r(this.updatePoint)}}function Xp(t,e){return e?{point:e(t.point)}:t}function gw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jp({point:t},e){return{point:t,delta:gw(t,fS(e)),offset:gw(t,aM(e)),velocity:lM(e,.1)}}function aM(t){return t[0]}function fS(t){return t[t.length-1]}function lM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=fS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>ao(e)));)n--;if(!i)return{x:0,y:0};const o=dr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Nn(t){return t.max-t.min}function Sg(t,e=0,n=.01){return Math.abs(t-e)<=n}function yw(t,e,n,i=.5){t.origin=i,t.originPoint=dt(e.min,e.max,t.origin),t.scale=Nn(n)/Nn(e),(Sg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=dt(n.min,n.max,t.origin)-t.originPoint,(Sg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function xu(t,e,n,i){yw(t.x,e.x,n.x,i?i.originX:void 0),yw(t.y,e.y,n.y,i?i.originY:void 0)}function _w(t,e,n){t.min=n.min+e.min,t.max=t.min+Nn(e)}function uM(t,e,n){_w(t.x,e.x,n.x),_w(t.y,e.y,n.y)}function vw(t,e,n){t.min=e.min-n.min,t.max=t.min+Nn(e)}function Tu(t,e,n){vw(t.x,e.x,n.x),vw(t.y,e.y,n.y)}function cM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?dt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?dt(n,t,i.max):Math.min(t,n)),t}function ww(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function hM(t,{top:e,left:n,bottom:i,right:r}){return{x:ww(t.x,n,r),y:ww(t.y,e,i)}}function xw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function dM(t,e){return{x:xw(t.x,e.x),y:xw(t.y,e.y)}}function fM(t,e){let n=.5;const i=Nn(t),r=Nn(e);return r>i?n=Yu(e.min,e.max-i,t.min):i>r&&(n=Yu(t.min,t.max-r,e.min)),_s(0,1,n)}function pM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Cg=.35;function mM(t=Cg){return t===!1?t=0:t===!0&&(t=Cg),{x:Tw(t,"left","right"),y:Tw(t,"top","bottom")}}function Tw(t,e,n){return{min:Ew(t,e),max:Ew(t,n)}}function Ew(t,e){return typeof t=="number"?t:t[e]||0}const Pw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ia=()=>({x:Pw(),y:Pw()}),Sw=()=>({min:0,max:0}),It=()=>({x:Sw(),y:Sw()});function Gn(t){return[t("x"),t("y")]}function pS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function gM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function yM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function em(t){return t===void 0||t===1}function Ig({scale:t,scaleX:e,scaleY:n}){return!em(t)||!em(e)||!em(n)}function Ks(t){return Ig(t)||mS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function mS(t){return Cw(t.x)||Cw(t.y)}function Cw(t){return t&&t!=="0%"}function Bd(t,e,n){const i=t-n,r=e*i;return n+r}function Iw(t,e,n,i,r){return r!==void 0&&(t=Bd(t,r,i)),Bd(t,n,i)+e}function Ag(t,e=0,n=1,i,r){t.min=Iw(t.min,e,n,i,r),t.max=Iw(t.max,e,n,i,r)}function gS(t,{x:e,y:n}){Ag(t.x,e.translate,e.scale,e.originPoint),Ag(t.y,n.translate,n.scale,n.originPoint)}function _M(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Aa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,gS(t,a)),i&&Ks(o.latestValues)&&Aa(t,o.latestValues))}e.x=Aw(e.x),e.y=Aw(e.y)}function Aw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ur(t,e){t.min=t.min+e,t.max=t.max+e}function bw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=dt(t.min,t.max,o);Ag(t,e[n],e[i],a,e.scale)}const vM=["x","scaleX","originX"],wM=["y","scaleY","originY"];function Aa(t,e){bw(t.x,e,vM),bw(t.y,e,wM)}function yS(t,e){return pS(yM(t.getBoundingClientRect(),e))}function xM(t,e,n){const i=yS(t,n),{scroll:r}=e;return r&&(Ur(i.x,r.offset.x),Ur(i.y,r.offset.y)),i}const _S=({current:t})=>t?t.ownerDocument.defaultView:null,TM=new WeakMap;class EM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vf(m,"page").point)},o=(m,g)=>{const{drag:_,dragPropagation:E,onDragStart:k}=this.getProps();if(_&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=RP(_),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gn(M=>{let I=this.getAxisMotionValue(M).get()||0;if(Li.test(I)){const{projection:T}=this.visualElement;if(T&&T.layout){const S=T.layout.layoutBox[M];S&&(I=Nn(S)*(parseFloat(I)/100))}}this.originPoint[M]=I}),k&&nt.update(()=>k(m,g),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:k,onDrag:R}=this.getProps();if(!_&&!this.openGlobalLock)return;const{offset:M}=g;if(E&&this.currentDirection===null){this.currentDirection=PM(M),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",g.point,M),this.updateAxis("y",g.point,M),this.visualElement.render(),R&&R(m,g)},u=(m,g)=>this.stop(m,g),h=()=>Gn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new dS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:_S(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&nt.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Ph(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=cM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Sa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=hM(r.layoutBox,n):this.constraints=!1,this.elastic=mM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=pM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Sa(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=xM(i,r.root,this.visualElement.getTransformPagePoint());let a=dM(r.layout.layoutBox,o);if(n){const u=n(gM(a));this.hasMutatedConstraints=!!u,u&&(a=pS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Gn(m=>{if(!Ph(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,E=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(__(e,i,0,n))}stopAnimation(){Gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Gn(n=>{const{drag:i}=this.getProps();if(!Ph(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-dt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Sa(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Gn(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=fM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Gn(a=>{if(!Ph(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(dt(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;TM.set(this.visualElement,this);const e=this.visualElement.current,n=hr(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Sa(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=ar(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Gn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Cg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Ph(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function PM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class SM extends Rs{constructor(e){super(e),this.removeGroupControls=Tt,this.removeListeners=Tt,this.controls=new EM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const kw=t=>(e,n)=>{t&&nt.update(()=>t(e,n))};class CM extends Rs{constructor(){super(...arguments),this.removePointerDownListener=Tt}onPointerDown(e){this.session=new dS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_S(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:kw(e),onStart:kw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&nt.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=hr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function IM(){const t=V.useContext(Nf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=V.useId();return V.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Kh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ve.test(t))t=parseFloat(t);else return t;const n=Rw(t,e.target.x),i=Rw(t,e.target.y);return`${n}% ${i}%`}},AM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=vs.parse(t);if(r.length>5)return i;const o=vs.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=dt(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class bM extends fo.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;D2(kM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Kh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||nt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vS(t){const[e,n]=IM(),i=V.useContext(r_);return fo.createElement(bM,{...t,layoutGroup:i,switchLayoutGroup:V.useContext(pP),isPresent:e,safeToRemove:n})}const kM={borderRadius:{...Yl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yl,borderTopRightRadius:Yl,borderBottomLeftRadius:Yl,borderBottomRightRadius:Yl,boxShadow:AM},wS=["TopLeft","TopRight","BottomLeft","BottomRight"],RM=wS.length,Nw=t=>typeof t=="string"?parseFloat(t):t,Lw=t=>typeof t=="number"||ve.test(t);function NM(t,e,n,i,r,o){r?(t.opacity=dt(0,n.opacity!==void 0?n.opacity:1,LM(i)),t.opacityExit=dt(e.opacity!==void 0?e.opacity:1,0,MM(i))):o&&(t.opacity=dt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<RM;a++){const u=`border${wS[a]}Radius`;let h=Mw(e,u),f=Mw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Lw(h)===Lw(f)?(t[u]=Math.max(dt(Nw(h),Nw(f),i),0),(Li.test(f)||Li.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=dt(e.rotate||0,n.rotate||0,i))}function Mw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const LM=xS(0,.5,HP),MM=xS(.5,.95,Tt);function xS(t,e,n){return i=>i<t?0:i>e?1:n(Yu(t,e,i))}function Ow(t,e){t.min=e.min,t.max=e.max}function $n(t,e){Ow(t.x,e.x),Ow(t.y,e.y)}function Dw(t,e,n,i,r){return t-=e,t=Bd(t,1/n,i),r!==void 0&&(t=Bd(t,1/r,i)),t}function OM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Li.test(e)&&(e=parseFloat(e),e=dt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=dt(o.min,o.max,i);t===o&&(u-=e),t.min=Dw(t.min,e,n,u,r),t.max=Dw(t.max,e,n,u,r)}function Vw(t,e,[n,i,r],o,a){OM(t,e[n],e[i],e[r],e.scale,o,a)}const DM=["x","scaleX","originX"],VM=["y","scaleY","originY"];function jw(t,e,n,i){Vw(t.x,e,DM,n?n.x:void 0,i?i.x:void 0),Vw(t.y,e,VM,n?n.y:void 0,i?i.y:void 0)}function Fw(t){return t.translate===0&&t.scale===1}function TS(t){return Fw(t.x)&&Fw(t.y)}function jM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function ES(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Bw(t){return Nn(t.x)/Nn(t.y)}class FM{constructor(){this.members=[]}add(e){v_(this.members,e),e.scheduleRender()}remove(e){if(w_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const BM=(t,e)=>t.depth-e.depth;class zM{constructor(){this.children=[],this.isDirty=!1}add(e){v_(this.children,e),this.isDirty=!0}remove(e){w_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BM),this.isDirty=!1,this.children.forEach(e)}}function UM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(_r(i),t(o-e))};return nt.read(i,!0),()=>_r(i)}function HM(t){window.MotionDebug&&window.MotionDebug.record(t)}function WM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function $M(t,e,n){const i=Pn(t)?t:Za(t);return i.start(__("",i,e,n)),i.animation}const Uw=["","X","Y","Z"],GM={visibility:"hidden"},Hw=1e3;let qM=0;const Qs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function PS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=qM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qs.totalNodes=Qs.resolvedTargetDeltas=Qs.recalculatedProjection=0,this.nodes.forEach(QM),this.nodes.forEach(tO),this.nodes.forEach(nO),this.nodes.forEach(YM),HM(Qs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new zM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new x_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=WM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=UM(_,250),Kh.hasAnimatedSinceResize&&(Kh.hasAnimatedSinceResize=!1,this.nodes.forEach($w))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:E,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||m.getDefaultTransition()||aO,{onLayoutAnimationStart:M,onLayoutAnimationComplete:I}=m.getProps(),T=!this.targetLayout||!ES(this.targetLayout,k)||E,S=!_&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||_&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,S);const F={...y_(R,"layout"),onPlay:M,onComplete:I};(m.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else _||$w(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_r(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ww);return}this.isUpdating||this.nodes.forEach(JM),this.isUpdating=!1,this.nodes.forEach(eO),this.nodes.forEach(ZM),this.nodes.forEach(KM),this.clearAllSnapshots();const u=performance.now();Jt.delta=_s(0,1e3/60,u-Jt.timestamp),Jt.timestamp=u,Jt.isProcessing=!0,Wp.update.process(Jt),Wp.preRender.process(Jt),Wp.render.process(Jt),Jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(XM),this.sharedNodes.forEach(rO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!TS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Ks(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),lO(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return It();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Ur(u.x,h.offset.x),Ur(u.y,h.offset.y)),u}removeElementScroll(a){const u=It();$n(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){$n(u,a);const{scroll:_}=this.root;_&&(Ur(u.x,-_.offset.x),Ur(u.y,-_.offset.y))}Ur(u.x,m.offset.x),Ur(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=It();$n(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Aa(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Ks(m.latestValues)&&Aa(h,m.latestValues)}return Ks(this.latestValues)&&Aa(h,this.latestValues),h}removeTransform(a){const u=It();$n(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Ks(f.latestValues))continue;Ig(f.latestValues)&&f.updateSnapshot();const m=It(),g=f.measurePageBox();$n(m,g),jw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Ks(this.latestValues)&&jw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Jt.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),Tu(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),$n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$n(this.target,this.layout.layoutBox),gS(this.target,this.targetDelta)):$n(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),Tu(this.relativeTargetOrigin,this.target,E.target),$n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ig(this.parent.latestValues)||mS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Jt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;$n(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,E=this.treeScale.y;_M(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:k}=u;if(!k){this.projectionTransform&&(this.projectionDelta=Ia(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ia(),this.projectionDeltaWithTransform=Ia());const R=this.projectionTransform;xu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),this.projectionTransform=zw(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==_||this.treeScale.y!==E)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),Qs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=Ia();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=It(),E=h?h.source:void 0,k=this.layout?this.layout.source:void 0,R=E!==k,M=this.getStack(),I=!M||M.members.length<=1,T=!!(R&&!I&&this.options.crossfade===!0&&!this.path.some(oO));this.animationProgress=0;let S;this.mixTargetDelta=F=>{const $=F/1e3;Gw(g.x,a.x,$),Gw(g.y,a.y,$),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sO(this.relativeTarget,this.relativeTargetOrigin,_,$),S&&jM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=It()),$n(S,this.relativeTarget)),R&&(this.animationValues=m,NM(m,f,this.latestValues,$,T,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_r(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nt.update(()=>{Kh.hasAnimatedSinceResize=!0,this.currentAnimation=$M(0,Hw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&SS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||It();const g=Nn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const _=Nn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}$n(u,h),Aa(u,m),xu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new FM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<Uw.length;m++){const g="rotate"+Uw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return GM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Zh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=Zh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ks(this.latestValues)&&(R.transform=m?m({},""):"none",this.hasProjected=!1),R}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=zw(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:E,y:k}=this.projectionDelta;f.transformOrigin=`${E.origin*100}% ${k.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const R in Ld){if(_[R]===void 0)continue;const{correct:M,applyTo:I}=Ld[R],T=f.transform==="none"?_[R]:M(_[R],g);if(I){const S=I.length;for(let F=0;F<S;F++)f[I[F]]=T}else f[R]=T}return this.options.layoutId&&(f.pointerEvents=g===this?Zh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Ww),this.root.sharedNodes.clear()}}}function ZM(t){t.updateLayout()}function KM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Gn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=Nn(_);_.min=i[g].min,_.max=_.min+E}):SS(o,n.layoutBox,i)&&Gn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=Nn(i[g]);_.max=_.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+E)});const u=Ia();xu(u,i,n.layoutBox);const h=Ia();a?xu(h,t.applyTransform(r,!0),n.measuredBox):xu(h,i,n.layoutBox);const f=!TS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:E}=g;if(_&&E){const k=It();Tu(k,n.layoutBox,_.layoutBox);const R=It();Tu(R,i,E.layoutBox),ES(k,R)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=k,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function QM(t){Qs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XM(t){t.clearSnapshot()}function Ww(t){t.clearMeasurements()}function JM(t){t.isLayoutDirty=!1}function eO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $w(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function tO(t){t.resolveTargetDelta()}function nO(t){t.calcProjection()}function iO(t){t.resetRotation()}function rO(t){t.removeLeadSnapshot()}function Gw(t,e,n){t.translate=dt(e.translate,0,n),t.scale=dt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qw(t,e,n,i){t.min=dt(e.min,n.min,i),t.max=dt(e.max,n.max,i)}function sO(t,e,n,i){qw(t.x,e.x,n.x,i),qw(t.y,e.y,n.y,i)}function oO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const aO={duration:.45,ease:[.4,0,.1,1]},Zw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Kw=Zw("applewebkit/")&&!Zw("chrome/")?Math.round:Tt;function Qw(t){t.min=Kw(t.min),t.max=Kw(t.max)}function lO(t){Qw(t.x),Qw(t.y)}function SS(t,e,n){return t==="position"||t==="preserve-aspect"&&!Sg(Bw(e),Bw(n),.2)}const uO=PS({attachResizeListener:(t,e)=>ar(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tm={current:void 0},CS=PS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tm.current){const t=new uO({});t.mount(window),t.setOptions({layoutScroll:!0}),tm.current=t}return tm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),cO={pan:{Feature:CM},drag:{Feature:SM,ProjectionNode:CS,MeasureLayout:vS}},hO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function dO(t){const e=hO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function bg(t,e,n=1){const[i,r]=dO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return lS(a)?parseFloat(a):a}else return _g(r)?bg(r,e,n+1):r}function fO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!_g(o))return;const a=bg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!_g(o))continue;const a=bg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const pO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),IS=t=>pO.has(t),mO=t=>Object.keys(t).some(IS),Yw=t=>t===bo||t===ve,Xw=(t,e)=>parseFloat(t.split(", ")[e]),Jw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Xw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Xw(o[1],t):0}},gO=new Set(["x","y","z"]),yO=hc.filter(t=>!gO.has(t));function _O(t){const e=[];return yO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ka={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Jw(4,13),y:Jw(5,14)};Ka.translateX=Ka.x;Ka.translateY=Ka.y;const vO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Ka[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Ka[f](h,o)}),t},wO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(IS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=Ql(m);const _=e[h];let E;if(Od(_)){const k=_.length,R=_[0]===null?1:0;m=_[R],g=Ql(m);for(let M=R;M<k&&_[M]!==null;M++)E?d_(Ql(_[M])===E):E=Ql(_[M])}else E=Ql(_);if(g!==E)if(Yw(g)&&Yw(E)){const k=f.get();typeof k=="string"&&f.set(parseFloat(k)),typeof _=="string"?e[h]=parseFloat(_):Array.isArray(_)&&E===ve&&(e[h]=_.map(parseFloat))}else g!=null&&g.transform&&(E!=null&&E.transform)&&(m===0||_===0)?m===0?f.set(E.transform(m)):e[h]=g.transform(_):(a||(o=_O(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(_))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=vO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),Lf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function xO(t,e,n,i){return mO(e)?wO(t,e,n,i):{target:e,transitionEnd:i}}const TO=(t,e,n,i)=>{const r=fO(t,e,i);return e=r.target,i=r.transitionEnd,xO(t,e,n,i)},kg={current:null},AS={current:!1};function EO(){if(AS.current=!0,!!Lf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kg.current=t.matches;t.addListener(e),e()}else kg.current=!1}function PO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(Pn(o))t.addValue(r,o),Fd(i)&&i.add(r);else if(Pn(a))t.addValue(r,Za(o,{owner:t})),Fd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Za(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const ex=new WeakMap,bS=Object.keys(Qu),SO=bS.length,tx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],CO=i_.length;class IO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>nt.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Of(n),this.isVariantNode=fP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const _=m[g];u[g]!==void 0&&Pn(_)&&(_.set(u[g],!1),Fd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,ex.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),AS.current||EO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ex.delete(this.current),this.projection&&this.projection.unmount(),_r(this.notifyUpdate),_r(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=Ao.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&nt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<SO;h++){const f=bS[h],{isEnabled:m,Feature:g,ProjectionNode:_,MeasureLayout:E}=Qu[f];_&&(a=_),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),E&&(u=E))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:_,layoutRoot:E}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&Sa(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:E})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<tx.length;i++){const r=tx[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=PO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<CO;i++){const r=i_[i],o=this.props[r];(Ku(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Za(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=h_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Pn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new x_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class kS extends IO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=WL(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){UL(this,i,a);const u=TO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function AO(t){return window.getComputedStyle(t)}class bO extends kS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ao.has(n)){const i=g_(n);return i&&i.default||0}else{const i=AO(e),r=(yP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return yS(e,n)}build(e,n,i,r){o_(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return c_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){EP(e,n,i,r)}}class kO extends kS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ao.has(n)){const i=g_(n);return i&&i.default||0}return n=PP.has(n)?n:t_(n),e.getAttribute(n)}measureInstanceViewportBox(){return It()}scrapeMotionValuesFromProps(e,n){return CP(e,n)}build(e,n,i,r){l_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){SP(e,n,i,r)}mount(e){this.isSVGTag=u_(e.tagName),super.mount(e)}}const RO=(t,e)=>s_(t)?new kO(e,{enableHardwareAcceleration:!1}):new bO(e,{enableHardwareAcceleration:!0}),NO={layout:{ProjectionNode:CS,MeasureLayout:vS}},LO={...sM,...SN,...cO,...NO},ne=M2((t,e)=>dN(t,e,LO,RO));function RS(){const t=V.useRef(!1);return e_(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function MO(){const t=RS(),[e,n]=V.useState(0),i=V.useCallback(()=>{t.current&&n(e+1)},[e]);return[V.useCallback(()=>nt.postRender(i),[i]),e]}class OO extends V.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function DO({children:t,isPresent:e}){const n=V.useId(),i=V.useRef(null),r=V.useRef({width:0,height:0,top:0,left:0});return V.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),V.createElement(OO,{isPresent:e,childRef:i,sizeRef:r},V.cloneElement(t,{ref:i}))}const nm=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=IP(VO),h=V.useId(),f=V.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return V.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),V.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=V.createElement(DO,{isPresent:n},t)),V.createElement(Nf.Provider,{value:f},t)};function VO(){return new Map}function jO(t){return V.useEffect(()=>()=>t(),[])}const Ys=t=>t.key||"";function FO(t,e){t.forEach(n=>{const i=Ys(n);e.set(i,n)})}function BO(t){const e=[];return V.Children.forEach(t,n=>{V.isValidElement(n)&&e.push(n)}),e}const Qa=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=V.useContext(r_).forceRender||MO()[0],h=RS(),f=BO(t);let m=f;const g=V.useRef(new Map).current,_=V.useRef(m),E=V.useRef(new Map).current,k=V.useRef(!0);if(e_(()=>{k.current=!1,FO(f,E),_.current=m}),jO(()=>{k.current=!0,E.clear(),g.clear()}),k.current)return V.createElement(V.Fragment,null,m.map(T=>V.createElement(nm,{key:Ys(T),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},T)));m=[...m];const R=_.current.map(Ys),M=f.map(Ys),I=R.length;for(let T=0;T<I;T++){const S=R[T];M.indexOf(S)===-1&&!g.has(S)&&g.set(S,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((T,S)=>{if(M.indexOf(S)!==-1)return;const F=E.get(S);if(!F)return;const $=R.indexOf(S);let U=T;if(!U){const b=()=>{g.delete(S);const C=Array.from(E.keys()).filter(N=>!M.includes(N));if(C.forEach(N=>E.delete(N)),_.current=f.filter(N=>{const j=Ys(N);return j===S||C.includes(j)}),!g.size){if(h.current===!1)return;u(),i&&i()}};U=V.createElement(nm,{key:Ys(F),isPresent:!1,onExitComplete:b,custom:e,presenceAffectsLayout:o,mode:a},F),g.set(S,U)}m.splice($,0,U)}),m=m.map(T=>{const S=T.key;return g.has(S)?T:V.createElement(nm,{key:Ys(T),isPresent:!0,presenceAffectsLayout:o,mode:a},T)}),V.createElement(V.Fragment,null,g.size?m:m.map(T=>V.cloneElement(T)))},zO=()=>{};var nx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},UO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},LS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,E=f&63;h||(E=64,a||(_=64)),i.push(n[m],n[g],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new HO;const _=o<<2|u>>4;if(i.push(_),f!==64){const E=u<<4&240|f>>2;if(i.push(E),g!==64){const k=f<<6&192|g;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WO=function(t){const e=NS(t);return LS.encodeByteArray(e,!0)},zd=function(t){return WO(t).replace(/\./g,"")},MS=function(t){try{return LS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=()=>$O().__FIREBASE_DEFAULTS__,qO=()=>{if(typeof process>"u"||typeof nx>"u")return;const t=nx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MS(t[1]);return e&&JSON.parse(e)},Ff=()=>{try{return zO()||GO()||qO()||ZO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OS=t=>{var e,n;return(n=(e=Ff())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},KO=t=>{const e=OS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},DS=()=>{var t;return(t=Ff())==null?void 0:t.config},VS=t=>{var e;return(e=Ff())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[zd(JSON.stringify(n)),zd(JSON.stringify(a)),""].join(".")}const Eu={};function XO(){const t={prod:[],emulator:[]};for(const e of Object.keys(Eu))Eu[e]?t.emulator.push(e):t.prod.push(e);return t}function JO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ix=!1;function FS(t,e){if(typeof window>"u"||typeof document>"u"||!ul(window.location.host)||Eu[t]===e||Eu[t]||ix)return;Eu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=XO().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{ix=!0,a()},_}function m(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=JO(i),E=n("text"),k=document.getElementById(E)||document.createElement("span"),R=n("learnmore"),M=document.getElementById(R)||document.createElement("a"),I=n("preprendIcon"),T=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const S=_.element;u(S),m(M,R);const F=f();h(T,I),S.append(T,k,M,F),document.body.appendChild(S)}o?(k.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function tD(){var e;const t=(e=Ff())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sD(){const t=sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oD(){return!tD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aD(){try{return typeof indexedDB=="object"}catch{return!1}}function lD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="FirebaseError";class Cr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=uD,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?cD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Cr(r,u,i)}}function cD(t,e){return t.replace(hD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const hD=/\{\$([^}]+)}/g;function dD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(rx(o)&&rx(a)){if(!vo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function rx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function fD(t,e){const n=new pD(t,e);return n.subscribe.bind(n)}class pD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");mD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=im),r.error===void 0&&(r.error=im),r.complete===void 0&&(r.complete=im);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t){return t&&t._delegate?t._delegate:t}class wo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new QO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_D(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yD(t){return t===Xs?void 0:t}function _D(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const wD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},xD=je.INFO,TD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},ED=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=TD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class T_{constructor(e){this.name=e,this._logLevel=xD,this._logHandler=ED,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const PD=(t,e)=>e.some(n=>t instanceof n);let sx,ox;function SD(){return sx||(sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CD(){return ox||(ox=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BS=new WeakMap,Rg=new WeakMap,zS=new WeakMap,rm=new WeakMap,E_=new WeakMap;function ID(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(us(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&BS.set(n,t)}).catch(()=>{}),E_.set(e,t),e}function AD(t){if(Rg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Rg.set(t,e)}let Ng={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bD(t){Ng=t(Ng)}function kD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(sm(this),e,...n);return zS.set(i,e.sort?e.sort():[e]),us(i)}:CD().includes(t)?function(...e){return t.apply(sm(this),e),us(BS.get(this))}:function(...e){return us(t.apply(sm(this),e))}}function RD(t){return typeof t=="function"?kD(t):(t instanceof IDBTransaction&&AD(t),PD(t,SD())?new Proxy(t,Ng):t)}function us(t){if(t instanceof IDBRequest)return ID(t);if(rm.has(t))return rm.get(t);const e=RD(t);return e!==t&&(rm.set(t,e),E_.set(e,t)),e}const sm=t=>E_.get(t);function ND(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=us(a);return i&&a.addEventListener("upgradeneeded",h=>{i(us(a.result),h.oldVersion,h.newVersion,us(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const LD=["get","getKey","getAll","getAllKeys","count"],MD=["put","add","delete","clear"],om=new Map;function ax(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(om.get(e))return om.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=MD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||LD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return om.set(e,o),o}bD(t=>({...t,get:(e,n,i)=>ax(e,n)||t.get(e,n,i),has:(e,n)=>!!ax(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function DD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lg="@firebase/app",lx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new T_("@firebase/app"),VD="@firebase/app-compat",jD="@firebase/analytics-compat",FD="@firebase/analytics",BD="@firebase/app-check-compat",zD="@firebase/app-check",UD="@firebase/auth",HD="@firebase/auth-compat",WD="@firebase/database",$D="@firebase/data-connect",GD="@firebase/database-compat",qD="@firebase/functions",ZD="@firebase/functions-compat",KD="@firebase/installations",QD="@firebase/installations-compat",YD="@firebase/messaging",XD="@firebase/messaging-compat",JD="@firebase/performance",eV="@firebase/performance-compat",tV="@firebase/remote-config",nV="@firebase/remote-config-compat",iV="@firebase/storage",rV="@firebase/storage-compat",sV="@firebase/firestore",oV="@firebase/ai",aV="@firebase/firestore-compat",lV="firebase",uV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]",cV={[Lg]:"fire-core",[VD]:"fire-core-compat",[FD]:"fire-analytics",[jD]:"fire-analytics-compat",[zD]:"fire-app-check",[BD]:"fire-app-check-compat",[UD]:"fire-auth",[HD]:"fire-auth-compat",[WD]:"fire-rtdb",[$D]:"fire-data-connect",[GD]:"fire-rtdb-compat",[qD]:"fire-fn",[ZD]:"fire-fn-compat",[KD]:"fire-iid",[QD]:"fire-iid-compat",[YD]:"fire-fcm",[XD]:"fire-fcm-compat",[JD]:"fire-perf",[eV]:"fire-perf-compat",[tV]:"fire-rc",[nV]:"fire-rc-compat",[iV]:"fire-gcs",[rV]:"fire-gcs-compat",[sV]:"fire-fst",[aV]:"fire-fst-compat",[oV]:"fire-vertex","fire-js":"fire-js",[lV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new Map,hV=new Map,Og=new Map;function ux(t,e){try{t.container.addComponent(e)}catch(n){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ya(t){const e=t.name;if(Og.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,t);for(const n of Ud.values())ux(n,t);for(const n of hV.values())ux(n,t);return!0}function P_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ci(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new mc("app","Firebase",dV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=uV;function US(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Mg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw cs.create("bad-app-name",{appName:String(r)});if(n||(n=DS()),!n)throw cs.create("no-options");const o=Ud.get(r);if(o){if(vo(n,o.options)&&vo(i,o.config))return o;throw cs.create("duplicate-app",{appName:r})}const a=new vD(r);for(const h of Og.values())a.addComponent(h);const u=new fV(n,i,a);return Ud.set(r,u),u}function HS(t=Mg){const e=Ud.get(t);if(!e&&t===Mg&&DS())return US();if(!e)throw cs.create("no-app",{appName:t});return e}function hs(t,e,n){let i=cV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(a.join(" "));return}Ya(new wo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="firebase-heartbeat-database",mV=1,Xu="firebase-heartbeat-store";let am=null;function WS(){return am||(am=ND(pV,mV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xu)}catch(n){console.warn(n)}}}}).catch(t=>{throw cs.create("idb-open",{originalErrorMessage:t.message})})),am}async function gV(t){try{const n=(await WS()).transaction(Xu),i=await n.objectStore(Xu).get($S(t));return await n.done,i}catch(e){if(e instanceof Cr)vr.warn(e.message);else{const n=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vr.warn(n.message)}}}async function cx(t,e){try{const i=(await WS()).transaction(Xu,"readwrite");await i.objectStore(Xu).put(e,$S(t)),await i.done}catch(n){if(n instanceof Cr)vr.warn(n.message);else{const i=cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vr.warn(i.message)}}}function $S(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=1024,_V=30;class vV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=hx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>_V){const a=TV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){vr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hx(),{heartbeatsToSend:i,unsentEntries:r}=wV(this._heartbeatsCache.heartbeats),o=zd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return vr.warn(n),""}}}function hx(){return new Date().toISOString().substring(0,10)}function wV(t,e=yV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),dx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),dx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aD()?lD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dx(t){return zd(JSON.stringify({version:2,heartbeats:t})).length}function TV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(t){Ya(new wo("platform-logger",e=>new OD(e),"PRIVATE")),Ya(new wo("heartbeat",e=>new vV(e),"PRIVATE")),hs(Lg,lx,t),hs(Lg,lx,"esm2020"),hs("fire-js","")}EV("");var fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,GS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,C){function N(){}N.prototype=C.prototype,b.F=C.prototype,b.prototype=new N,b.prototype.constructor=b,b.D=function(j,O,z){for(var D=Array(arguments.length-2),me=2;me<arguments.length;me++)D[me-2]=arguments[me];return C.prototype[O].apply(j,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,C,N){N||(N=0);const j=Array(16);if(typeof C=="string")for(var O=0;O<16;++O)j[O]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(O=0;O<16;++O)j[O]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=b.g[0],N=b.g[1],O=b.g[2];let z=b.g[3],D;D=C+(z^N&(O^z))+j[0]+3614090360&4294967295,C=N+(D<<7&4294967295|D>>>25),D=z+(O^C&(N^O))+j[1]+3905402710&4294967295,z=C+(D<<12&4294967295|D>>>20),D=O+(N^z&(C^N))+j[2]+606105819&4294967295,O=z+(D<<17&4294967295|D>>>15),D=N+(C^O&(z^C))+j[3]+3250441966&4294967295,N=O+(D<<22&4294967295|D>>>10),D=C+(z^N&(O^z))+j[4]+4118548399&4294967295,C=N+(D<<7&4294967295|D>>>25),D=z+(O^C&(N^O))+j[5]+1200080426&4294967295,z=C+(D<<12&4294967295|D>>>20),D=O+(N^z&(C^N))+j[6]+2821735955&4294967295,O=z+(D<<17&4294967295|D>>>15),D=N+(C^O&(z^C))+j[7]+4249261313&4294967295,N=O+(D<<22&4294967295|D>>>10),D=C+(z^N&(O^z))+j[8]+1770035416&4294967295,C=N+(D<<7&4294967295|D>>>25),D=z+(O^C&(N^O))+j[9]+2336552879&4294967295,z=C+(D<<12&4294967295|D>>>20),D=O+(N^z&(C^N))+j[10]+4294925233&4294967295,O=z+(D<<17&4294967295|D>>>15),D=N+(C^O&(z^C))+j[11]+2304563134&4294967295,N=O+(D<<22&4294967295|D>>>10),D=C+(z^N&(O^z))+j[12]+1804603682&4294967295,C=N+(D<<7&4294967295|D>>>25),D=z+(O^C&(N^O))+j[13]+4254626195&4294967295,z=C+(D<<12&4294967295|D>>>20),D=O+(N^z&(C^N))+j[14]+2792965006&4294967295,O=z+(D<<17&4294967295|D>>>15),D=N+(C^O&(z^C))+j[15]+1236535329&4294967295,N=O+(D<<22&4294967295|D>>>10),D=C+(O^z&(N^O))+j[1]+4129170786&4294967295,C=N+(D<<5&4294967295|D>>>27),D=z+(N^O&(C^N))+j[6]+3225465664&4294967295,z=C+(D<<9&4294967295|D>>>23),D=O+(C^N&(z^C))+j[11]+643717713&4294967295,O=z+(D<<14&4294967295|D>>>18),D=N+(z^C&(O^z))+j[0]+3921069994&4294967295,N=O+(D<<20&4294967295|D>>>12),D=C+(O^z&(N^O))+j[5]+3593408605&4294967295,C=N+(D<<5&4294967295|D>>>27),D=z+(N^O&(C^N))+j[10]+38016083&4294967295,z=C+(D<<9&4294967295|D>>>23),D=O+(C^N&(z^C))+j[15]+3634488961&4294967295,O=z+(D<<14&4294967295|D>>>18),D=N+(z^C&(O^z))+j[4]+3889429448&4294967295,N=O+(D<<20&4294967295|D>>>12),D=C+(O^z&(N^O))+j[9]+568446438&4294967295,C=N+(D<<5&4294967295|D>>>27),D=z+(N^O&(C^N))+j[14]+3275163606&4294967295,z=C+(D<<9&4294967295|D>>>23),D=O+(C^N&(z^C))+j[3]+4107603335&4294967295,O=z+(D<<14&4294967295|D>>>18),D=N+(z^C&(O^z))+j[8]+1163531501&4294967295,N=O+(D<<20&4294967295|D>>>12),D=C+(O^z&(N^O))+j[13]+2850285829&4294967295,C=N+(D<<5&4294967295|D>>>27),D=z+(N^O&(C^N))+j[2]+4243563512&4294967295,z=C+(D<<9&4294967295|D>>>23),D=O+(C^N&(z^C))+j[7]+1735328473&4294967295,O=z+(D<<14&4294967295|D>>>18),D=N+(z^C&(O^z))+j[12]+2368359562&4294967295,N=O+(D<<20&4294967295|D>>>12),D=C+(N^O^z)+j[5]+4294588738&4294967295,C=N+(D<<4&4294967295|D>>>28),D=z+(C^N^O)+j[8]+2272392833&4294967295,z=C+(D<<11&4294967295|D>>>21),D=O+(z^C^N)+j[11]+1839030562&4294967295,O=z+(D<<16&4294967295|D>>>16),D=N+(O^z^C)+j[14]+4259657740&4294967295,N=O+(D<<23&4294967295|D>>>9),D=C+(N^O^z)+j[1]+2763975236&4294967295,C=N+(D<<4&4294967295|D>>>28),D=z+(C^N^O)+j[4]+1272893353&4294967295,z=C+(D<<11&4294967295|D>>>21),D=O+(z^C^N)+j[7]+4139469664&4294967295,O=z+(D<<16&4294967295|D>>>16),D=N+(O^z^C)+j[10]+3200236656&4294967295,N=O+(D<<23&4294967295|D>>>9),D=C+(N^O^z)+j[13]+681279174&4294967295,C=N+(D<<4&4294967295|D>>>28),D=z+(C^N^O)+j[0]+3936430074&4294967295,z=C+(D<<11&4294967295|D>>>21),D=O+(z^C^N)+j[3]+3572445317&4294967295,O=z+(D<<16&4294967295|D>>>16),D=N+(O^z^C)+j[6]+76029189&4294967295,N=O+(D<<23&4294967295|D>>>9),D=C+(N^O^z)+j[9]+3654602809&4294967295,C=N+(D<<4&4294967295|D>>>28),D=z+(C^N^O)+j[12]+3873151461&4294967295,z=C+(D<<11&4294967295|D>>>21),D=O+(z^C^N)+j[15]+530742520&4294967295,O=z+(D<<16&4294967295|D>>>16),D=N+(O^z^C)+j[2]+3299628645&4294967295,N=O+(D<<23&4294967295|D>>>9),D=C+(O^(N|~z))+j[0]+4096336452&4294967295,C=N+(D<<6&4294967295|D>>>26),D=z+(N^(C|~O))+j[7]+1126891415&4294967295,z=C+(D<<10&4294967295|D>>>22),D=O+(C^(z|~N))+j[14]+2878612391&4294967295,O=z+(D<<15&4294967295|D>>>17),D=N+(z^(O|~C))+j[5]+4237533241&4294967295,N=O+(D<<21&4294967295|D>>>11),D=C+(O^(N|~z))+j[12]+1700485571&4294967295,C=N+(D<<6&4294967295|D>>>26),D=z+(N^(C|~O))+j[3]+2399980690&4294967295,z=C+(D<<10&4294967295|D>>>22),D=O+(C^(z|~N))+j[10]+4293915773&4294967295,O=z+(D<<15&4294967295|D>>>17),D=N+(z^(O|~C))+j[1]+2240044497&4294967295,N=O+(D<<21&4294967295|D>>>11),D=C+(O^(N|~z))+j[8]+1873313359&4294967295,C=N+(D<<6&4294967295|D>>>26),D=z+(N^(C|~O))+j[15]+4264355552&4294967295,z=C+(D<<10&4294967295|D>>>22),D=O+(C^(z|~N))+j[6]+2734768916&4294967295,O=z+(D<<15&4294967295|D>>>17),D=N+(z^(O|~C))+j[13]+1309151649&4294967295,N=O+(D<<21&4294967295|D>>>11),D=C+(O^(N|~z))+j[4]+4149444226&4294967295,C=N+(D<<6&4294967295|D>>>26),D=z+(N^(C|~O))+j[11]+3174756917&4294967295,z=C+(D<<10&4294967295|D>>>22),D=O+(C^(z|~N))+j[2]+718787259&4294967295,O=z+(D<<15&4294967295|D>>>17),D=N+(z^(O|~C))+j[9]+3951481745&4294967295,b.g[0]=b.g[0]+C&4294967295,b.g[1]=b.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+O&4294967295,b.g[3]=b.g[3]+z&4294967295}i.prototype.v=function(b,C){C===void 0&&(C=b.length);const N=C-this.blockSize,j=this.C;let O=this.h,z=0;for(;z<C;){if(O==0)for(;z<=N;)r(this,b,z),z+=this.blockSize;if(typeof b=="string"){for(;z<C;)if(j[O++]=b.charCodeAt(z++),O==this.blockSize){r(this,j),O=0;break}}else for(;z<C;)if(j[O++]=b[z++],O==this.blockSize){r(this,j),O=0;break}}this.h=O,this.o+=C},i.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var C=1;C<b.length-8;++C)b[C]=0;C=this.o*8;for(var N=b.length-8;N<b.length;++N)b[N]=C&255,C/=256;for(this.v(b),b=Array(16),C=0,N=0;N<4;++N)for(let j=0;j<32;j+=8)b[C++]=this.g[N]>>>j&255;return b};function o(b,C){var N=u;return Object.prototype.hasOwnProperty.call(N,b)?N[b]:N[b]=C(b)}function a(b,C){this.h=C;const N=[];let j=!0;for(let O=b.length-1;O>=0;O--){const z=b[O]|0;j&&z==C||(N[O]=z,j=!1)}this.g=N}var u={};function h(b){return-128<=b&&b<128?o(b,function(C){return new a([C|0],C<0?-1:0)}):new a([b|0],b<0?-1:0)}function f(b){if(isNaN(b)||!isFinite(b))return g;if(b<0)return M(f(-b));const C=[];let N=1;for(let j=0;b>=N;j++)C[j]=b/N|0,N*=4294967296;return new a(C,0)}function m(b,C){if(b.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b.charAt(0)=="-")return M(m(b.substring(1),C));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(C,8));let j=g;for(let z=0;z<b.length;z+=8){var O=Math.min(8,b.length-z);const D=parseInt(b.substring(z,z+O),C);O<8?(O=f(Math.pow(C,O)),j=j.j(O).add(f(D))):(j=j.j(N),j=j.add(f(D)))}return j}var g=h(0),_=h(1),E=h(16777216);t=a.prototype,t.m=function(){if(R(this))return-M(this).m();let b=0,C=1;for(let N=0;N<this.g.length;N++){const j=this.i(N);b+=(j>=0?j:4294967296+j)*C,C*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(k(this))return"0";if(R(this))return"-"+M(this).toString(b);const C=f(Math.pow(b,6));var N=this;let j="";for(;;){const O=F(N,C).g;N=I(N,O.j(C));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(b);if(N=O,k(N))return z+j;for(;z.length<6;)z="0"+z;j=z+j}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function k(b){if(b.h!=0)return!1;for(let C=0;C<b.g.length;C++)if(b.g[C]!=0)return!1;return!0}function R(b){return b.h==-1}t.l=function(b){return b=I(this,b),R(b)?-1:k(b)?0:1};function M(b){const C=b.g.length,N=[];for(let j=0;j<C;j++)N[j]=~b.g[j];return new a(N,~b.h).add(_)}t.abs=function(){return R(this)?M(this):this},t.add=function(b){const C=Math.max(this.g.length,b.g.length),N=[];let j=0;for(let O=0;O<=C;O++){let z=j+(this.i(O)&65535)+(b.i(O)&65535),D=(z>>>16)+(this.i(O)>>>16)+(b.i(O)>>>16);j=D>>>16,z&=65535,D&=65535,N[O]=D<<16|z}return new a(N,N[N.length-1]&-2147483648?-1:0)};function I(b,C){return b.add(M(C))}t.j=function(b){if(k(this)||k(b))return g;if(R(this))return R(b)?M(this).j(M(b)):M(M(this).j(b));if(R(b))return M(this.j(M(b)));if(this.l(E)<0&&b.l(E)<0)return f(this.m()*b.m());const C=this.g.length+b.g.length,N=[];for(var j=0;j<2*C;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(let O=0;O<b.g.length;O++){const z=this.i(j)>>>16,D=this.i(j)&65535,me=b.i(O)>>>16,Ge=b.i(O)&65535;N[2*j+2*O]+=D*Ge,T(N,2*j+2*O),N[2*j+2*O+1]+=z*Ge,T(N,2*j+2*O+1),N[2*j+2*O+1]+=D*me,T(N,2*j+2*O+1),N[2*j+2*O+2]+=z*me,T(N,2*j+2*O+2)}for(b=0;b<C;b++)N[b]=N[2*b+1]<<16|N[2*b];for(b=C;b<2*C;b++)N[b]=0;return new a(N,0)};function T(b,C){for(;(b[C]&65535)!=b[C];)b[C+1]+=b[C]>>>16,b[C]&=65535,C++}function S(b,C){this.g=b,this.h=C}function F(b,C){if(k(C))throw Error("division by zero");if(k(b))return new S(g,g);if(R(b))return C=F(M(b),C),new S(M(C.g),M(C.h));if(R(C))return C=F(b,M(C)),new S(M(C.g),C.h);if(b.g.length>30){if(R(b)||R(C))throw Error("slowDivide_ only works with positive integers.");for(var N=_,j=C;j.l(b)<=0;)N=$(N),j=$(j);var O=U(N,1),z=U(j,1);for(j=U(j,2),N=U(N,2);!k(j);){var D=z.add(j);D.l(b)<=0&&(O=O.add(N),z=D),j=U(j,1),N=U(N,1)}return C=I(b,O.j(C)),new S(O,C)}for(O=g;b.l(C)>=0;){for(N=Math.max(1,Math.floor(b.m()/C.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),z=f(N),D=z.j(C);R(D)||D.l(b)>0;)N-=j,z=f(N),D=z.j(C);k(z)&&(z=_),O=O.add(z),b=I(b,D)}return new S(O,b)}t.B=function(b){return F(this,b).h},t.and=function(b){const C=Math.max(this.g.length,b.g.length),N=[];for(let j=0;j<C;j++)N[j]=this.i(j)&b.i(j);return new a(N,this.h&b.h)},t.or=function(b){const C=Math.max(this.g.length,b.g.length),N=[];for(let j=0;j<C;j++)N[j]=this.i(j)|b.i(j);return new a(N,this.h|b.h)},t.xor=function(b){const C=Math.max(this.g.length,b.g.length),N=[];for(let j=0;j<C;j++)N[j]=this.i(j)^b.i(j);return new a(N,this.h^b.h)};function $(b){const C=b.g.length+1,N=[];for(let j=0;j<C;j++)N[j]=b.i(j)<<1|b.i(j-1)>>>31;return new a(N,b.h)}function U(b,C){const N=C>>5;C%=32;const j=b.g.length-N,O=[];for(let z=0;z<j;z++)O[z]=C>0?b.i(z+N)>>>C|b.i(z+N+1)<<32-C:b.i(z+N);return new a(O,b.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,GS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ds=a}).apply(typeof fx<"u"?fx:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qS,ou,ZS,Qh,Dg,KS,QS,YS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var x=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var H=c[A];if(!(H in x))break e;x=x[H]}c=c[c.length-1],A=x[c],y=y(A),y!=A&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var x=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&x.push([A,y[A]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,x){return c.call.apply(c.bind,arguments)}function f(c,y,x){return f=h,f.apply(null,arguments)}function m(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function g(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(A,H,G){for(var te=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)te[Ee-2]=arguments[Ee];return y.prototype[H].apply(A,te)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function E(c){const y=c.length;if(y>0){const x=Array(y);for(let A=0;A<y;A++)x[A]=c[A];return x}return[]}function k(c,y){for(let A=1;A<arguments.length;A++){const H=arguments[A];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=c.length||0;const G=H.length||0;c.length=x+G;for(let te=0;te<G;te++)c[x+te]=H[te]}else c.push(H)}}class R{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(c){a.setTimeout(()=>{throw c},0)}function I(){var c=b;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class T{constructor(){this.h=this.g=null}add(y,x){const A=S.get();A.set(y,x),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new R(()=>new F,c=>c.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let $,U=!1,b=new T,C=()=>{const c=Promise.resolve(void 0);$=()=>{c.then(N)}};function N(){for(var c;c=I();){try{c.h.call(c.g)}catch(x){M(x)}var y=S;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}U=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};a.addEventListener("test",x,y),a.removeEventListener("test",x,y)}catch{}return c}();function D(c){return/^[\s\xa0]*$/.test(c)}function me(c,y){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(me,O),me.prototype.init=function(c,y){const x=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ge="closure_listenable_"+(Math.random()*1e6|0),be=0;function at(c,y,x,A,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!A,this.ha=H,this.key=++be,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function he(c,y,x){for(const A in c)y.call(x,c[A],A,c)}function J(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function ie(c){const y={};for(const x in c)y[x]=c[x];return y}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xe(c,y){let x,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(x in A)c[x]=A[x];for(let G=0;G<Se.length;G++)x=Se[G],Object.prototype.hasOwnProperty.call(A,x)&&(c[x]=A[x])}}function Le(c){this.src=c,this.g={},this.h=0}Le.prototype.add=function(c,y,x,A,H){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const te=pe(c,y,A,H);return te>-1?(y=c[te],x||(y.fa=!1)):(y=new at(y,this.src,G,!!A,H),y.fa=x,c.push(y)),y};function ke(c,y){const x=y.type;if(x in c.g){var A=c.g[x],H=Array.prototype.indexOf.call(A,y,void 0),G;(G=H>=0)&&Array.prototype.splice.call(A,H,1),G&&(Z(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function pe(c,y,x,A){for(let H=0;H<c.length;++H){const G=c[H];if(!G.da&&G.listener==y&&G.capture==!!x&&G.ha==A)return H}return-1}var ct="closure_lm_"+(Math.random()*1e6|0),qt={};function ee(c,y,x,A,H){if(Array.isArray(y)){for(let G=0;G<y.length;G++)ee(c,y[G],x,A,H);return null}return x=Ae(x),c&&c[Ge]?c.J(y,x,u(A)?!!A.capture:!1,H):le(c,y,x,!1,A,H)}function le(c,y,x,A,H,G){if(!y)throw Error("Invalid event type");const te=u(H)?!!H.capture:!!H;let Ee=lt(c);if(Ee||(c[ct]=Ee=new Le(c)),x=Ee.add(y,x,A,te,G),x.proxy)return x;if(A=ue(),x.proxy=A,A.src=c,A.listener=x,c.addEventListener)z||(H=te),H===void 0&&(H=!1),c.addEventListener(y.toString(),A,H);else if(c.attachEvent)c.attachEvent(Ne(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ue(){function c(x){return y.call(c.src,c.listener,x)}const y=Et;return c}function Ie(c,y,x,A,H){if(Array.isArray(y))for(var G=0;G<y.length;G++)Ie(c,y[G],x,A,H);else A=u(A)?!!A.capture:!!A,x=Ae(x),c&&c[Ge]?(c=c.i,G=String(y).toString(),G in c.g&&(y=c.g[G],x=pe(y,x,A,H),x>-1&&(Z(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[G],c.h--)))):c&&(c=lt(c))&&(y=c.g[y.toString()],c=-1,y&&(c=pe(y,x,A,H)),(x=c>-1?y[c]:null)&&fe(x))}function fe(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ge])ke(y.i,c);else{var x=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(x,A,c.capture):y.detachEvent?y.detachEvent(Ne(x),A):y.addListener&&y.removeListener&&y.removeListener(A),(x=lt(y))?(ke(x,c),x.h==0&&(x.src=null,y[ct]=null)):Z(c)}}}function Ne(c){return c in qt?qt[c]:qt[c]="on"+c}function Et(c,y){if(c.da)c=!0;else{y=new me(y,this);const x=c.listener,A=c.ha||c.src;c.fa&&fe(c),c=x.call(A,y)}return c}function lt(c){return c=c[ct],c instanceof Le?c:null}var ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ae(c){return typeof c=="function"?c:(c[ye]||(c[ye]=function(y){return c.handleEvent(y)}),c[ye])}function Ve(){j.call(this),this.i=new Le(this),this.M=this,this.G=null}g(Ve,j),Ve.prototype[Ge]=!0,Ve.prototype.removeEventListener=function(c,y,x,A){Ie(this,c,y,x,A)};function Re(c,y){var x,A=c.G;if(A)for(x=[];A;A=A.G)x.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new O(y,c);else if(y instanceof O)y.target=y.target||c;else{var H=y;y=new O(A,c),Xe(y,H)}H=!0;let G,te;if(x)for(te=x.length-1;te>=0;te--)G=y.g=x[te],H=Je(G,A,!0,y)&&H;if(G=y.g=c,H=Je(G,A,!0,y)&&H,H=Je(G,A,!1,y)&&H,x)for(te=0;te<x.length;te++)G=y.g=x[te],H=Je(G,A,!1,y)&&H}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let A=0;A<x.length;A++)Z(x[A]);delete c.g[y],c.h--}}this.G=null},Ve.prototype.J=function(c,y,x,A){return this.i.add(String(c),y,!1,x,A)},Ve.prototype.K=function(c,y,x,A){return this.i.add(String(c),y,!0,x,A)};function Je(c,y,x,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let G=0;G<y.length;++G){const te=y[G];if(te&&!te.da&&te.capture==x){const Ee=te.listener,$e=te.ha||te.src;te.fa&&ke(c.i,te),H=Ee.call($e,A)!==!1&&H}}return H&&!A.defaultPrevented}function Wi(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function Vn(c){c.g=Wi(()=>{c.g=null,c.i&&(c.i=!1,Vn(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class gl extends j{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Vn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(c){j.call(this),this.h=c,this.g={}}g(Ns,j);var Oo=[];function yl(c){he(c.g,function(y,x){this.g.hasOwnProperty(x)&&fe(y)},c),c.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),yl(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Do=a.JSON.stringify,sp=a.JSON.parse,Ic=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function _l(){}function Ac(){}var Ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ls(){O.call(this,"d")}g(Ls,O);function Vo(){O.call(this,"c")}g(Vo,O);var $i={},Ar=null;function jo(){return Ar=Ar||new Ve}$i.Ia="serverreachability";function bc(c){O.call(this,$i.Ia,c)}g(bc,O);function br(c){const y=jo();Re(y,new bc(y))}$i.STAT_EVENT="statevent";function vl(c,y){O.call(this,$i.STAT_EVENT,c),this.stat=y}g(vl,O);function Dt(c){const y=jo();Re(y,new vl(y,c))}$i.Ja="timingevent";function kc(c,y){O.call(this,$i.Ja,c),this.size=y}g(kc,O);function Ms(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Os(){this.g=!0}Os.prototype.ua=function(){this.g=!1};function op(c,y,x,A,H,G){c.info(function(){if(c.g)if(G){var te="",Ee=G.split("&");for(let Ze=0;Ze<Ee.length;Ze++){var $e=Ee[Ze].split("=");if($e.length>1){const vt=$e[0];$e=$e[1];const Un=vt.split("_");te=Un.length>=2&&Un[1]=="type"?te+(vt+"="+$e+"&"):te+(vt+"=redacted&")}}}else te=null;else te=G;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+y+`
`+x+`
`+te})}function ap(c,y,x,A,H,G,te){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+y+`
`+x+`
`+G+" "+te})}function kr(c,y,x,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+lp(c,x)+(A?" "+A:"")})}function wl(c,y){c.info(function(){return"TIMEOUT: "+y})}Os.prototype.info=function(){};function lp(c,y){if(!c.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var x=G[c];if(!(x.length<2)){var A=x[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let te=1;te<A.length;te++)A[te]=""}}}}return Do(G)}catch{return y}}var Fo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nc;function pn(){}g(pn,_l),pn.prototype.g=function(){return new XMLHttpRequest},Nc=new pn;function ce(c){return encodeURIComponent(String(c))}function Lc(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function ti(c,y,x,A){this.j=c,this.i=y,this.l=x,this.S=A||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xl}function xl(){this.i=null,this.g="",this.h=!1}var Tl={},Ds={};function Bo(c,y,x){c.M=1,c.A=et(on(y)),c.u=x,c.R=!0,Gi(c,null)}function Gi(c,y){c.F=Date.now(),zo(c),c.B=on(c.A);var x=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Go(x.i,"t",A),c.C=0,x=c.j.L,c.h=new xl,c.g=Dl(c.j,x?y:null,!c.u),c.P>0&&(c.O=new gl(f(c.Y,c,c.g),c.P)),y=c.V,x=c.g,A=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Oo[0]=H.toString()),H=Oo);for(let G=0;G<H.length;G++){const te=ee(x,H[G],A||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=c.J?ie(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),br(),op(c.i,c.v,c.B,c.l,c.S,c.u)}ti.prototype.ba=function(c){c=c.target;const y=this.O;y&&wi(c)==3?y.j():this.Y(c)},ti.prototype.Y=function(c){try{if(c==this.g)e:{const Ee=wi(this.g),$e=this.g.ya(),Ze=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||bl(this.g)))){this.K||Ee!=4||$e==7||($e==8||Ze<=0?br(3):br(2)),Uo(this);var y=this.g.ca();this.X=y;var x=Mc(this);if(this.o=y==200,ap(this.i,this.v,this.B,this.l,this.S,Ee,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var G=A;break t}}G=null}if(c=G)kr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,El(this,c);else{this.o=!1,this.m=3,Dt(12),jn(this),Vs(this);break e}}if(this.R){c=!0;let vt;for(;!this.K&&this.C<x.length;)if(vt=up(this,x),vt==Ds){Ee==4&&(this.m=4,Dt(14),c=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Tl){this.m=4,Dt(15),kr(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else kr(this.i,this.l,vt,null),El(this,vt);if(Oc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||x.length!=0||this.h.h||(this.m=1,Dt(16),c=!1),this.o=this.o&&c,!c)kr(this.i,this.l,x,"[Invalid Chunked Response]"),jn(this),Vs(this);else if(x.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ml(te),te.P=!0,Dt(11))}}else kr(this.i,this.l,x,null),El(this,x);Ee==4&&jn(this),this.o&&!this.K&&(Ee==4?Cn(this.j,this):(this.o=!1,zo(this)))}else kl(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),jn(this),Vs(this)}}}catch{}finally{}};function Mc(c){if(!Oc(c))return c.g.la();const y=bl(c.g);if(y==="")return"";let x="";const A=y.length,H=wi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return jn(c),Vs(c),"";c.h.i=new a.TextDecoder}for(let G=0;G<A;G++)c.h.h=!0,x+=c.h.i.decode(y[G],{stream:!(H&&G==A-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function Oc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function up(c,y){var x=c.C,A=y.indexOf(`
`,x);return A==-1?Ds:(x=Number(y.substring(x,A)),isNaN(x)?Tl:(A+=1,A+x>y.length?Ds:(y=y.slice(A,A+x),c.C=A+x,y)))}ti.prototype.cancel=function(){this.K=!0,jn(this)};function zo(c){c.T=Date.now()+c.H,Dc(c,c.H)}function Dc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ms(f(c.aa,c),y)}function Uo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}ti.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(wl(this.i,this.B),this.M!=2&&(br(),Dt(17)),jn(this),this.m=2,Vs(this)):Dc(this,this.T-c)};function Vs(c){c.j.I==0||c.K||Cn(c.j,c)}function jn(c){Uo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,yl(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function El(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||js(x.h,c))){if(!c.L&&js(x.h,c)&&x.I==3){try{var A=x.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)Yo(x),Ko(x);else break e;Ll(x),Dt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Ms(f(x.Va,x),6e3));Fc(x.h)<=1&&x.ta&&(x.ta=void 0)}else Ti(x,11)}else if((c.L||x.g==c)&&Yo(x),!D(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let Ze=H[y];const vt=Ze[0];if(!(vt<=x.K))if(x.K=vt,Ze=Ze[1],x.I==2)if(Ze[0]=="c"){x.M=Ze[1],x.ba=Ze[2];const Un=Ze[3];Un!=null&&(x.ka=Un,x.j.info("VER="+x.ka));const ri=Ze[4];ri!=null&&(x.za=ri,x.j.info("SVER="+x.za));const Hn=Ze[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(A=1.5*Hn,x.O=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const Ei=c.g;if(Ei){const ea=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var G=A.h;G.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(qi(G,G.h),G.h=null))}if(A.G){const ta=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(A.wa=ta,oe(A.J,A.G,ta))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),A=x;var te=c;if(A.na=Ol(A,A.L?A.ba:null,A.W),te.L){Pl(A.h,te);var Ee=te,$e=A.O;$e&&(Ee.H=$e),Ee.D&&(Uo(Ee),zo(Ee)),A.g=te}else Nl(A);x.i.length>0&&xi(x)}else Ze[0]!="stop"&&Ze[0]!="close"||Ti(x,7);else x.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Ti(x,7):Me(x):Ze[0]!="noop"&&x.l&&x.l.qa(Ze),x.A=0)}}br(4)}catch{}}var cp=class{constructor(c,y){this.g=c,this.map=y}};function Vc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Fc(c){return c.h?1:c.g?c.g.size:0}function js(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function qi(c,y){c.g?c.g.add(y):c.h=y}function Pl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Vc.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Sl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return E(c.i)}var Rr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ze(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const A=c[x].indexOf("=");let H,G=null;A>=0?(H=c[x].substring(0,A),G=c[x].substring(A+1)):H=c[x],y(H,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function We(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof We?(this.l=c.l,Fn(this,c.j),this.o=c.o,this.g=c.g,Bn(this,c.u),this.h=c.h,Fs(this,Bs(c.i)),this.m=c.m):c&&(y=String(c).match(Rr))?(this.l=!1,Fn(this,y[1]||"",!0),this.o=Zi(y[2]||""),this.g=Zi(y[3]||"",!0),Bn(this,y[4]),this.h=Zi(y[5]||"",!0),Fs(this,y[6]||"",!0),this.m=Zi(y[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}We.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(yi(y,Bc,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(yi(y,Bc,!0),"@"),c.push(ce(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(yi(x,x.charAt(0)=="/"?Ki:Ho,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",yi(x,Qi)),c.join("")},We.prototype.resolve=function(c){const y=on(this);let x=!!c.j;x?Fn(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var A=c.h;if(x)Bn(y,c.u);else if(x=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=y.h.lastIndexOf("/");H!=-1&&(A=y.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const G=[];for(let te=0;te<H.length;){const Ee=H[te++];Ee=="."?A&&te==H.length&&G.push(""):Ee==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),A&&te==H.length&&G.push("")):(G.push(Ee),A=!0)}A=G.join("/")}else A=H}return x?y.h=A:x=c.i.toString()!=="",x?Fs(y,Bs(c.i)):x=!!c.m,x&&(y.m=c.m),y};function on(c){return new We(c)}function Fn(c,y,x){c.j=x?Zi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Bn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Fs(c,y,x){y instanceof ni?(c.i=y,Cl(c.i,c.l)):(x||(y=yi(y,yt)),c.i=new ni(y,c.l))}function oe(c,y,x){c.i.set(y,x)}function et(c){return oe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Zi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function yi(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,mn),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function mn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Bc=/[#\/\?@]/g,Ho=/[#\?:]/g,Ki=/[#\?]/g,yt=/[#\?@]/g,Qi=/#/g;function ni(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Sn(c){c.g||(c.g=new Map,c.h=0,c.i&&ze(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=ni.prototype,t.add=function(c,y){Sn(this),this.i=null,c=_i(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function Wo(c,y){Sn(c),y=_i(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Nr(c,y){return Sn(c),y=_i(c,y),c.g.has(y)}t.forEach=function(c,y){Sn(this),this.g.forEach(function(x,A){x.forEach(function(H){c.call(y,H,A,this)},this)},this)};function $o(c,y){Sn(c);let x=[];if(typeof y=="string")Nr(c,y)&&(x=x.concat(c.g.get(_i(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}t.set=function(c,y){return Sn(this),this.i=null,c=_i(this,c),Nr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=$o(this,c),c.length>0?String(c[0]):y):y};function Go(c,y,x){Wo(c,y),x.length>0&&(c.i=null,c.g.set(_i(c,y),E(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var x=y[A];const H=ce(x);x=$o(this,x);for(let G=0;G<x.length;G++){let te=H;x[G]!==""&&(te+="="+ce(x[G])),c.push(te)}}return this.i=c.join("&")};function Bs(c){const y=new ni;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function _i(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Cl(c,y){y&&!c.j&&(Sn(c),c.i=null,c.g.forEach(function(x,A){const H=A.toLowerCase();A!=H&&(Wo(this,A),Go(this,H,x))},c)),c.j=y}function qo(c,y){const x=new Os;if(a.Image){const A=new Image;A.onload=m(zn,x,"TestLoadImage: loaded",!0,y,A),A.onerror=m(zn,x,"TestLoadImage: error",!1,y,A),A.onabort=m(zn,x,"TestLoadImage: abort",!1,y,A),A.ontimeout=m(zn,x,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function zc(c,y){const x=new Os,A=new AbortController,H=setTimeout(()=>{A.abort(),zn(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(G=>{clearTimeout(H),G.ok?zn(x,"TestPingServer: ok",!0,y):zn(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),zn(x,"TestPingServer: error",!1,y)})}function zn(c,y,x,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(x)}catch{}}function hp(){this.g=new Ic}function Te(c){this.i=c.Sb||null,this.h=c.ab||!1}g(Te,_l),Te.prototype.g=function(){return new an(this.i,this.h)};function an(c,y){Ve.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(an,Ve),t=an.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Yi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qe(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qe(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Lr(this):Yi(this),this.readyState==3&&Qe(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Lr(this))},t.Na=function(c){this.g&&(this.response=c,Lr(this))},t.ga=function(){this.g&&Lr(this)};function Lr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Yi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Yi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(an.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Zo(c){let y="";return he(c,function(x,A){y+=A,y+=":",y+=x,y+=`\r
`}),y}function zs(c,y,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=Zo(x),typeof c=="string"?x!=null&&ce(x):oe(c,y,x))}function qe(c){Ve.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(qe,Ve);var Il=/^https?$/i,Us=["POST","PUT"];t=qe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(G){Pt(this,G);return}if(c=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)x.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())x.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(G=>G.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Us,y,void 0)>=0)||A||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,te]of x)this.g.setRequestHeader(G,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){Pt(this,G)}};function Pt(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,vi(c),Hs(c)}function vi(c){c.A||(c.A=!0,Re(c,"complete"),Re(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Re(this,"complete"),Re(this,"abort"),Hs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Al(this):this.Xa())},t.Xa=function(){Al(this)};function Al(c){if(c.h&&typeof o<"u"){if(c.v&&wi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Re(c,"readystatechange"),wi(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var A;if(A=G===0){let te=String(c.D).match(Rr)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),A=!Il.test(te?te.toLowerCase():"")}x=A}if(x)Re(c,"complete"),Re(c,"success");else{c.o=6;try{var H=wi(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",vi(c)}}finally{Hs(c)}}}}function Hs(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||Re(c,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function wi(c){return c.g?c.g.readyState:0}t.ca=function(){try{return wi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),sp(y)}};function bl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kl(c){const y={};c=(c.g&&wi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(D(c[A]))continue;var x=Lc(c[A]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const G=y[H]||[];y[H]=G,G.push(x)}J(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Rl(c){this.za=0,this.i=[],this.j=new Os,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,c),this.Za=Ws("retryDelaySeedMs",1e4,c),this.Ta=Ws("forwardChannelMaxRetries",2,c),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Vc(c&&c.concurrentRequestLimit),this.Ba=new hp,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Rl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,x,A){Dt(0),this.W=c,this.H=y||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.J=Ol(this,null,this.W),xi(this)};function Me(c){if(gn(c),c.I==3){var y=c.V++,x=on(c.J);if(oe(x,"SID",c.M),oe(x,"RID",y),oe(x,"TYPE","terminate"),Xi(c,x),y=new ti(c,c.j,y),y.M=2,y.A=et(on(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=y.A,x=!0),x||(y.g=Dl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),zo(y)}ii(c)}function Ko(c){c.g&&(Ml(c),c.g.cancel(),c.g=null)}function gn(c){Ko(c),c.v&&(a.clearTimeout(c.v),c.v=null),Yo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function xi(c){if(!jc(c.h)&&!c.m){c.m=!0;var y=c.Ea;$||C(),U||($(),U=!0),b.add(y,c),c.D=0}}function Uc(c,y){return Fc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ms(f(c.Ea,c,y),$c(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new ti(this,this.j,c);let G=this.o;if(this.U&&(G?(G=ie(G),Xe(G,this.U)):G=this.U),this.u!==null||this.R||(H.J=G,G=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Wc(this,H,y),x=on(this.J),oe(x,"RID",c),oe(x,"CVER",22),this.G&&oe(x,"X-HTTP-Session-Id",this.G),Xi(this,x),G&&(this.R?y="headers="+ce(Zo(G))+"&"+y:this.u&&zs(x,this.u,G)),qi(this.h,H),this.Ra&&oe(x,"TYPE","init"),this.S?(oe(x,"$req",y),oe(x,"SID","null"),H.U=!0,Bo(H,x,null)):Bo(H,x,y),this.I=2}}else this.I==3&&(c?Hc(this,c):this.i.length==0||jc(this.h)||Hc(this))};function Hc(c,y){var x;y?x=y.l:x=c.V++;const A=on(c.J);oe(A,"SID",c.M),oe(A,"RID",x),oe(A,"AID",c.K),Xi(c,A),c.u&&c.o&&zs(A,c.u,c.o),x=new ti(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Wc(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),qi(c.h,x),Bo(x,A,y)}function Xi(c,y){c.H&&he(c.H,function(x,A){oe(y,A,x)}),c.l&&he({},function(x,A){oe(y,A,x)})}function Wc(c,y,x){x=Math.min(c.i.length,x);const A=c.l?f(c.l.Ka,c.l,c):null;e:{var H=c.i;let Ee=-1;for(;;){const $e=["count="+x];Ee==-1?x>0?(Ee=H[0].g,$e.push("ofs="+Ee)):Ee=0:$e.push("ofs="+Ee);let Ze=!0;for(let vt=0;vt<x;vt++){var G=H[vt].g;const Un=H[vt].map;if(G-=Ee,G<0)Ee=Math.max(0,H[vt].g-100),Ze=!1;else try{G="req"+G+"_"||"";try{var te=Un instanceof Map?Un:Object.entries(Un);for(const[ri,Hn]of te){let Ei=Hn;u(Hn)&&(Ei=Do(Hn)),$e.push(G+ri+"="+encodeURIComponent(Ei))}}catch(ri){throw $e.push(G+"type="+encodeURIComponent("_badmap")),ri}}catch{A&&A(Un)}}if(Ze){te=$e.join("&");break e}}te=void 0}return c=c.i.splice(0,x),y.G=c,te}function Nl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;$||C(),U||($(),U=!0),b.add(y,c),c.A=0}}function Ll(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ms(f(c.Da,c),$c(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Qo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ms(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Ko(this),Qo(this))};function Ml(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Qo(c){c.g=new ti(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=on(c.na);oe(y,"RID","rpc"),oe(y,"SID",c.M),oe(y,"AID",c.K),oe(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&oe(y,"TO",c.ia),oe(y,"TYPE","xmlhttp"),Xi(c,y),c.u&&c.o&&zs(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=et(on(y)),x.u=null,x.R=!0,Gi(x,c)}t.Va=function(){this.C!=null&&(this.C=null,Ko(this),Ll(this),Dt(19))};function Yo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Cn(c,y){var x=null;if(c.g==y){Yo(c),Ml(c),c.g=null;var A=2}else if(js(c.h,y))x=y.G,Pl(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;A=jo(),Re(A,new kc(A,x)),xi(c)}else Nl(c);else if(H=y.m,H==3||H==0&&y.X>0||!(A==1&&Uc(c,y)||A==2&&Ll(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),H){case 1:Ti(c,5);break;case 4:Ti(c,10);break;case 3:Ti(c,6);break;default:Ti(c,2)}}}function $c(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function Ti(c,y){if(c.j.info("Error code "+y),y==2){var x=f(c.bb,c),A=c.Ua;const H=!A;A=new We(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fn(A,"https"),et(A),H?qo(A.toString(),x):zc(A.toString(),x)}else Dt(2);c.I=0,c.l&&c.l.pa(y),ii(c),gn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function ii(c){if(c.I=0,c.ja=[],c.l){const y=Sl(c.h);(y.length!=0||c.i.length!=0)&&(k(c.ja,y),k(c.ja,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.oa()}}function Ol(c,y,x){var A=x instanceof We?on(x):new We(x);if(A.g!="")y&&(A.g=y+"."+A.g),Bn(A,A.u);else{var H=a.location;A=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const G=new We(null);A&&Fn(G,A),y&&(G.g=y),H&&Bn(G,H),x&&(G.h=x),A=G}return x=c.G,y=c.wa,x&&y&&oe(A,x,y),oe(A,"VER",c.ka),Xi(c,A),A}function Dl(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new qe(new Te({ab:x})):new qe(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xo(){}t=Xo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Jo(){}Jo.prototype.g=function(c,y){return new Zt(c,y)};function Zt(c,y){Ve.call(this),this.g=new Rl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!D(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Mr(this)}g(Zt,Ve),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Me(this.g)},Zt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=Do(c),c=x);y.i.push(new cp(y.Ya++,c)),y.I==3&&xi(y)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Me(this.g),delete this.g,Zt.Z.N.call(this)};function Vl(c){Ls.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Vl,Ls);function Gc(){Vo.call(this),this.status=1}g(Gc,Vo);function Mr(c){this.g=c}g(Mr,Xo),Mr.prototype.ra=function(){Re(this.g,"a")},Mr.prototype.qa=function(c){Re(this.g,new Vl(c))},Mr.prototype.pa=function(c){Re(this.g,new Gc)},Mr.prototype.oa=function(){Re(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,YS=function(){return new Jo},QS=function(){return jo()},KS=$i,Dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,Qh=Fo,Rc.COMPLETE="complete",ZS=Rc,Ac.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,ou=Ac,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,qS=qe}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});const px="@firebase/firestore",mx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new T_("@firebase/firestore");function ua(){return xo.logLevel}function se(t,...e){if(xo.logLevel<=je.DEBUG){const n=e.map(S_);xo.debug(`Firestore (${hl}): ${t}`,...n)}}function wr(t,...e){if(xo.logLevel<=je.ERROR){const n=e.map(S_);xo.error(`Firestore (${hl}): ${t}`,...n)}}function Xa(t,...e){if(xo.logLevel<=je.WARN){const n=e.map(S_);xo.warn(`Firestore (${hl}): ${t}`,...n)}}function S_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,XS(t,i,n)}function XS(t,e,n){let i=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw wr(i),new Error(i)}function Ke(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||XS(e,r,i)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class SV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CV{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new JS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class IV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new IV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=kV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Fe(t,e){return t<e?-1:t>e?1:0}function Vg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return lm(r)===lm(o)?Fe(r,o):lm(r)?1:-1}return Fe(t.length,e.length)}const RV=55296,NV=57343;function lm(t){const e=t.charCodeAt(0);return e>=RV&&e<=NV}function Ja(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="__name__";class Ai{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Ai.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Fe(e.length,n.length)}static compareSegments(e,n){const i=Ai.isNumericId(e),r=Ai.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ai.extractNumericId(e).compare(Ai.extractNumericId(n)):Vg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class rt extends Ai{construct(e,n,i){return new rt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const LV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Ai{construct(e,n,i){return new Ht(e,n,i)}static isValidIdentifier(e){return LV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yx}static keyField(){return new Ht([yx])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new de(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new de(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new de(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new de(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(rt.fromString(e))}static fromName(e){return new ge(rt.fromString(e).popFirst(5))}static empty(){return new ge(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e,n){if(!n)throw new de(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MV(t,e,n,i){if(e===!0&&i===!0)throw new de(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _x(t){if(!ge.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vx(t){if(ge.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function I_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=I_(t);throw new de(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t,e){const n={typeString:t};return e&&(n.value=e),n}function yc(t,e){if(!tC(t))throw new de(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new de(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=-62135596800,xx=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*xx);return new st(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wx)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xx}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:kt("string",st._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new st(0,0))}static max(){return new Pe(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=-1;function OV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Pe.fromTimestamp(i===1e9?new st(n+1,0):new st(n,i));return new ws(r,ge.empty(),e)}function DV(t){return new ws(t.readTime,t.key,Ju)}class ws{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ws(Pe.min(),ge.empty(),Ju)}static max(){return new ws(Pe.max(),ge.empty(),Ju)}}function VV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==jV)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function BV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=-1;function zf(t){return t==null}function Hd(t){return t===0&&1/t==-1/0}function zV(t){return typeof t=="number"&&Number.isInteger(t)&&!Hd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="";function UV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Tx(e)),e=HV(t.get(n),e);return Tx(e)}function HV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case nC:n+="";break;default:n+=o}}return n}function Tx(t){return t+nC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||Ut.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ch(this.root,e,this.comparator,!0)}}class Ch{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ut.RED,this.left=r??Ut.EMPTY,this.right=o??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ut(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ut.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Px(this.data.getIterator())}getIteratorFrom(e){return new Px(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class Px{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new di([])}unionWith(e){let n=new Ot(Ht.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rC("Invalid base64 string: "+o):o}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const WV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=WV.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="server_timestamp",oC="__type__",aC="__previous_value__",lC="__local_write_time__";function b_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oC])==null?void 0:i.stringValue)===sC}function Uf(t){const e=t.mapValue.fields[aC];return b_(e)?Uf(e):e}function ec(t){const e=xs(t.mapValue.fields[lC].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Wd="(default)";class tc{constructor(e,n){this.projectId=e,this.database=n||Wd}static empty(){return new tc("","")}get isDefaultDatabase(){return this.database===Wd}isEqual(e){return e instanceof tc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="__type__",GV="__max__",Ih={mapValue:{}},cC="__vector__",$d="value";function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?b_(t)?4:ZV(t)?9007199254740991:qV(t)?10:11:we(28295,{value:t})}function zi(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ec(t).isEqual(ec(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=xs(r.timestampValue),u=xs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Ts(r.bytesValue).isEqual(Ts(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return wt(r.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(r.geoPointValue.longitude)===wt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return wt(r.integerValue)===wt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=wt(r.doubleValue),u=wt(o.doubleValue);return a===u?Hd(a)===Hd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ja(t.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(Ex(a)!==Ex(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!zi(a[h],u[h])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function nc(t,e){return(t.values||[]).find(n=>zi(n,e))!==void 0}function el(t,e){if(t===e)return 0;const n=Es(t),i=Es(e);if(n!==i)return Fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=wt(o.integerValue||o.doubleValue),h=wt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Sx(t.timestampValue,e.timestampValue);case 4:return Sx(ec(t),ec(e));case 5:return Vg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=Ts(o),h=Ts(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Fe(u[f],h[f]);if(m!==0)return m}return Fe(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Fe(wt(o.latitude),wt(a.latitude));return u!==0?u:Fe(wt(o.longitude),wt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cx(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,E,k,R;const u=o.fields||{},h=a.fields||{},f=(_=u[$d])==null?void 0:_.arrayValue,m=(E=h[$d])==null?void 0:E.arrayValue,g=Fe(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return g!==0?g:Cx(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ih.mapValue&&a===Ih.mapValue)return 0;if(o===Ih.mapValue)return 1;if(a===Ih.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=Vg(h[g],m[g]);if(_!==0)return _;const E=el(u[h[g]],f[m[g]]);if(E!==0)return E}return Fe(h.length,m.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Sx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=xs(t),i=xs(e),r=Fe(n.seconds,i.seconds);return r!==0?r:Fe(n.nanos,i.nanos)}function Cx(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=el(n[r],i[r]);if(o)return o}return Fe(n.length,i.length)}function tl(t){return jg(t)}function jg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=xs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=jg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${jg(n.fields[a])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function Yh(t){switch(Es(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(t);return e?16+Yh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Yh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return ko(i.fields,(o,a)=>{r+=o.length+Yh(a)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function Fg(t){return!!t&&"integerValue"in t}function k_(t){return!!t&&"arrayValue"in t}function Ix(t){return!!t&&"nullValue"in t}function Ax(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xh(t){return!!t&&"mapValue"in t}function qV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uC])==null?void 0:i.stringValue)===cC}function Pu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Pu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pu(t.arrayValue.values[n]);return e}return{...t}}function ZV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(n)}setAll(e){let n=Ht.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Pu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Xh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ko(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Kn(Pu(this.value))}}function hC(t){const e=[];return ko(t.fields,(n,i)=>{const r=new Ht([n]);if(Xh(i)){const o=hC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new nn(e,0,Pe.min(),Pe.min(),Pe.min(),Kn.empty(),0)}static newFoundDocument(e,n,i,r){return new nn(e,1,n,Pe.min(),i,r,0)}static newNoDocument(e,n){return new nn(e,2,n,Pe.min(),Pe.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Pe.min(),Pe.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n){this.position=e,this.inclusive=n}}function bx(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ge.comparator(ge.fromName(a.referenceValue),n.key):i=el(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function kx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n="asc"){this.field=e,this.dir=n}}function KV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{}class Nt extends dC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new YV(e,n,i):n==="array-contains"?new e4(e,i):n==="in"?new t4(e,i):n==="not-in"?new n4(e,i):n==="array-contains-any"?new i4(e,i):new Nt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new XV(e,i):new JV(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(el(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(el(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends dC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ui(e,n)}matches(e){return fC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fC(t){return t.op==="and"}function pC(t){return QV(t)&&fC(t)}function QV(t){for(const e of t.filters)if(e instanceof Ui)return!1;return!0}function Bg(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+tl(t.value);if(pC(t))return t.filters.map(e=>Bg(e)).join(",");{const e=t.filters.map(n=>Bg(n)).join(",");return`${t.op}(${e})`}}function mC(t,e){return t instanceof Nt?function(i,r){return r instanceof Nt&&i.op===r.op&&i.field.isEqual(r.field)&&zi(i.value,r.value)}(t,e):t instanceof Ui?function(i,r){return r instanceof Ui&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&mC(a,r.filters[u]),!0):!1}(t,e):void we(19439)}function gC(t){return t instanceof Nt?function(n){return`${n.field.canonicalString()} ${n.op} ${tl(n.value)}`}(t):t instanceof Ui?function(n){return n.op.toString()+" {"+n.getFilters().map(gC).join(" ,")+"}"}(t):"Filter"}class YV extends Nt{constructor(e,n,i){super(e,n,i),this.key=ge.fromName(i.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class XV extends Nt{constructor(e,n){super(e,"in",n),this.keys=yC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JV extends Nt{constructor(e,n){super(e,"not-in",n),this.keys=yC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ge.fromName(i.referenceValue))}class e4 extends Nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return k_(n)&&nc(n.arrayValue,this.value)}}class t4 extends Nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}}class n4 extends Nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nc(this.value.arrayValue,n)}}class i4 extends Nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!k_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>nc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Rx(t,e=null,n=[],i=[],r=null,o=null,a=null){return new r4(t,e,n,i,r,o,a)}function R_(t){const e=Ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Bg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),zf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>tl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>tl(i)).join(",")),e.Te=n}return e.Te}function N_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kx(t.startAt,e.startAt)&&kx(t.endAt,e.endAt)}function zg(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s4(t,e,n,i,r,o,a,u){return new Hf(t,e,n,i,r,o,a,u)}function L_(t){return new Hf(t)}function Nx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o4(t){return t.collectionGroup!==null}function Su(t){const e=Ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Ot(Ht.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new qd(o,i))}),n.has(Ht.keyField().canonicalString())||e.Ie.push(new qd(Ht.keyField(),i))}return e.Ie}function Mi(t){const e=Ce(t);return e.Ee||(e.Ee=a4(e,Su(t))),e.Ee}function a4(t,e){if(t.limitType==="F")return Rx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new qd(r.field,o)});const n=t.endAt?new Gd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Gd(t.startAt.position,t.startAt.inclusive):null;return Rx(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ug(t,e,n){return new Hf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wf(t,e){return N_(Mi(t),Mi(e))&&t.limitType===e.limitType}function _C(t){return`${R_(Mi(t))}|lt:${t.limitType}`}function ca(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>gC(r)).join(", ")}]`),zf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>tl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>tl(r)).join(",")),`Target(${i})`}(Mi(t))}; limitType=${t.limitType})`}function $f(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ge.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Su(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=bx(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,Su(i),r)||i.endAt&&!function(a,u,h){const f=bx(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,Su(i),r))}(t,e)}function l4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vC(t){return(e,n)=>{let i=!1;for(const r of Su(t)){const o=u4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function u4(t,e,n){const i=t.field.isKeyField()?ge.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?el(h,f):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return iC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new gt(ge.comparator);function xr(){return c4}const wC=new gt(ge.comparator);function au(...t){let e=wC;for(const n of t)e=e.insert(n.key,n);return e}function xC(t){let e=wC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ro(){return Cu()}function TC(){return Cu()}function Cu(){return new Ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const h4=new gt(ge.comparator),d4=new Ot(ge.comparator);function Be(...t){let e=d4;for(const n of t)e=e.add(n);return e}const f4=new Ot(Fe);function p4(){return f4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hd(e)?"-0":e}}function EC(t){return{integerValue:""+t}}function m4(t,e){return zV(e)?EC(e):M_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this._=void 0}}function g4(t,e,n){return t instanceof Zd?function(r,o){const a={fields:{[oC]:{stringValue:sC},[lC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&b_(o)&&(o=Uf(o)),o&&(a.fields[aC]=o),{mapValue:a}}(n,e):t instanceof ic?SC(t,e):t instanceof rc?CC(t,e):function(r,o){const a=PC(r,o),u=Lx(a)+Lx(r.Ae);return Fg(a)&&Fg(r.Ae)?EC(u):M_(r.serializer,u)}(t,e)}function y4(t,e,n){return t instanceof ic?SC(t,e):t instanceof rc?CC(t,e):n}function PC(t,e){return t instanceof Kd?function(i){return Fg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Zd extends Gf{}class ic extends Gf{constructor(e){super(),this.elements=e}}function SC(t,e){const n=IC(e);for(const i of t.elements)n.some(r=>zi(r,i))||n.push(i);return{arrayValue:{values:n}}}class rc extends Gf{constructor(e){super(),this.elements=e}}function CC(t,e){let n=IC(e);for(const i of t.elements)n=n.filter(r=>!zi(r,i));return{arrayValue:{values:n}}}class Kd extends Gf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Lx(t){return wt(t.integerValue||t.doubleValue)}function IC(t){return k_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ic&&r instanceof ic||i instanceof rc&&r instanceof rc?Ja(i.elements,r.elements,zi):i instanceof Kd&&r instanceof Kd?zi(i.Ae,r.Ae):i instanceof Zd&&r instanceof Zd}(t.transform,e.transform)}class v4{constructor(e,n){this.version=e,this.transformResults=n}}class Oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qf{}function AC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new O_(t.key,Oi.none()):new _c(t.key,t.data,Oi.none());{const n=t.data,i=Kn.empty();let r=new Ot(Ht.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new No(t.key,i,new di(r.toArray()),Oi.none())}}function w4(t,e,n){t instanceof _c?function(r,o,a){const u=r.value.clone(),h=Ox(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof No?function(r,o,a){if(!Jh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Ox(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(bC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Iu(t,e,n,i){return t instanceof _c?function(o,a,u,h){if(!Jh(o.precondition,a))return u;const f=o.value.clone(),m=Dx(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof No?function(o,a,u,h){if(!Jh(o.precondition,a))return u;const f=Dx(o.fieldTransforms,h,a),m=a.data;return m.setAll(bC(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Jh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function x4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=PC(i.transform,r||null);o!=null&&(n===null&&(n=Kn.empty()),n.set(i.field,o))}return n||null}function Mx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ja(i,r,(o,a)=>_4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _c extends qf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class No extends qf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Ox(t,e,n){const i=new Map;Ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,y4(a,u,n[r]))}return i}function Dx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,g4(o,a,e))}return i}class O_ extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T4 extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&w4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Iu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Iu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=TC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=AC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(n,i)=>Mx(n,i))&&Ja(this.baseMutations,e.baseMutations,(n,i)=>Mx(n,i))}}class D_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return h4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new D_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ue;function C4(t){switch(t){case Y.OK:return we(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function kC(t){if(t===void 0)return wr("GRPC error has no .code"),Y.UNKNOWN;switch(t){case Ct.OK:return Y.OK;case Ct.CANCELLED:return Y.CANCELLED;case Ct.UNKNOWN:return Y.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return Y.INTERNAL;case Ct.UNAVAILABLE:return Y.UNAVAILABLE;case Ct.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Ct.NOT_FOUND:return Y.NOT_FOUND;case Ct.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Ct.ABORTED:return Y.ABORTED;case Ct.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Ct.DATA_LOSS:return Y.DATA_LOSS;default:return we(39323,{code:t})}}(Ue=Ct||(Ct={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=new ds([4294967295,4294967295],0);function Vx(t){const e=I4().encode(t),n=new GS;return n.update(e),new Uint8Array(n.digest())}function jx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ds([n,i],0),new ds([r,o],0)]}class V_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new lu(`Invalid padding: ${n}`);if(i<0)throw new lu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new lu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ds.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(ds.fromNumber(i)));return r.compare(A4)===1&&(r=new ds([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Vx(e),[i,r]=jx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new V_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Vx(e),[i,r]=jx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Zf(Pe.min(),r,new gt(Fe),xr(),Be())}}class vc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new vc(i,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class RC{constructor(e,n){this.targetId=e,this.Ce=n}}class NC{constructor(e,n,i=Gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Fx{constructor(){this.ve=0,this.Fe=Bx(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),i=Be();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:we(38017,{changeType:o})}}),new vc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Bx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class b4{constructor(e){this.Ge=e,this.ze=new Map,this.je=xr(),this.Je=Ah(),this.He=Ah(),this.Ye=new gt(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(zg(o))if(i===0){const a=new ge(o.path);this.et(n,a,nn.newNoDocument(a,Pe.min()))}else Ke(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=Ts(i).toUint8Array()}catch(h){if(h instanceof rC)return Xa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new V_(a,r,o)}catch(h){return Xa(h instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&zg(u.target)){const h=new ge(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,nn.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Be();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Zf(e,n,this.Ye,this.je,i);return this.je=xr(),this.Je=Ah(),this.He=Ah(),this.Ye=new gt(Fe),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Fx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ot(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ot(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ah(){return new gt(ge.comparator)}function Bx(){return new gt(ge.comparator)}const k4={asc:"ASCENDING",desc:"DESCENDING"},R4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N4={and:"AND",or:"OR"};class L4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hg(t,e){return t.useProto3Json||zf(e)?e:{value:e}}function Qd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function M4(t,e){return Qd(t,e.toTimestamp())}function Di(t){return Ke(!!t,49232),Pe.fromTimestamp(function(n){const i=xs(n);return new st(i.seconds,i.nanos)}(t))}function j_(t,e){return Wg(t,e).canonicalString()}function Wg(t,e){const n=function(r){return new rt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MC(t){const e=rt.fromString(t);return Ke(FC(e),10190,{key:e.toString()}),e}function $g(t,e){return j_(t.databaseId,e.path)}function um(t,e){const n=MC(e);if(n.get(1)!==t.databaseId.projectId)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(DC(n))}function OC(t,e){return j_(t.databaseId,e)}function O4(t){const e=MC(t);return e.length===4?rt.emptyPath():DC(e)}function Gg(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DC(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zx(t,e,n){return{name:$g(t,e),fields:n.value.mapValue.fields}}function D4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ke(m===void 0||typeof m=="string",58123),Gt.fromBase64String(m||"")):(Ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Gt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?Y.UNKNOWN:kC(f.code);return new de(m,f.message||"")}(a);n=new NC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=um(t,i.document.name),o=Di(i.document.updateTime),a=i.document.createTime?Di(i.document.createTime):Pe.min(),u=new Kn({mapValue:{fields:i.document.fields}}),h=nn.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new ed(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=um(t,i.document),o=i.readTime?Di(i.readTime):Pe.min(),a=nn.newNoDocument(r,o),u=i.removedTargetIds||[];n=new ed([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=um(t,i.document),o=i.removedTargetIds||[];n=new ed([],o,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new S4(r,o),u=i.targetId;n=new RC(u,a)}}return n}function V4(t,e){let n;if(e instanceof _c)n={update:zx(t,e.key,e.value)};else if(e instanceof O_)n={delete:$g(t,e.key)};else if(e instanceof No)n={update:zx(t,e.key,e.data),updateMask:G4(e.fieldMask)};else{if(!(e instanceof T4))return we(16599,{Vt:e.type});n={verify:$g(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Zd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ic)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof rc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Kd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:M4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function j4(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Di(r.updateTime):Di(o);return a.isEqual(Pe.min())&&(a=Di(o)),new v4(a,r.transformResults||[])}(n,e))):[]}function F4(t,e){return{documents:[OC(t,e.path)]}}function B4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=OC(t,r);const o=function(f){if(f.length!==0)return jC(Ui.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:ha(_.field),direction:H4(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Hg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function z4(t){let e=O4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ke(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=VC(g);return _ instanceof Ui&&pC(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(k){return new qd(da(k.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,zf(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(g){const _=!!g.before,E=g.values||[];return new Gd(E,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,E=g.values||[];return new Gd(E,_)}(n.endAt)),s4(e,r,a,o,u,"F",h,f)}function U4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=da(n.unaryFilter.field);return Nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=da(n.unaryFilter.field);return Nt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=da(n.unaryFilter.field);return Nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=da(n.unaryFilter.field);return Nt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return Nt.create(da(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ui.create(n.compositeFilter.filters.map(i=>VC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function H4(t){return k4[t]}function W4(t){return R4[t]}function $4(t){return N4[t]}function ha(t){return{fieldPath:t.canonicalString()}}function da(t){return Ht.fromServerFormat(t.fieldPath)}function jC(t){return t instanceof Nt?function(n){if(n.op==="=="){if(Ax(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NAN"}};if(Ix(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ax(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NAN"}};if(Ix(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(n.field),op:W4(n.op),value:n.value}}}(t):t instanceof Ui?function(n){const i=n.getFilters().map(r=>jC(r));return i.length===1?i[0]:{compositeFilter:{op:$4(n.op),filters:i}}}(t):we(54877,{filter:t})}function G4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,i,r,o=Pe.min(),a=Pe.min(),u=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.yt=e}}function Z4(t){const e=z4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ug(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.Cn=new Q4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(ws.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class Q4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ot(rt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ot(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BC=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(BC,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="LruGarbageCollector",Y4=1048576;function Wx([t,e],[n,i]){const r=Fe(t,n);return r===0?Fe(e,i):r}class X4{constructor(e){this.Ir=e,this.buffer=new Ot(Wx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Wx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class J4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(Hx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fl(n)?se(Hx,"Ignoring IndexedDB error during garbage collection: ",n):await dl(n)}await this.Vr(3e5)})}}class e3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Bf.ce);const i=new X4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Ux)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ux):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),ua()<=je.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function t3(t,e){return new e3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.changes=new Ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Iu(i.mutation,r,di.empty(),st.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Be()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Be()){const r=ro();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=au();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=ro();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Be()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=xr();const a=Cu(),u=function(){return Cu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof No)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Iu(m.mutation,f,m.mutation.getFieldMask(),st.now())):a.set(f.key,di.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new i3(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Cu();let r=new gt((a,u)=>a-u),o=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||di.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||Be()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=TC();m.forEach(_=>{if(!o.has(_)){const E=AC(n.get(_),i.get(_));E!==null&&g.set(_,E),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ge.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(ro());let u=Ju,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Be())).next(m=>({batchId:u,changes:xC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(i=>{let r=au();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=au();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,_){return new Hf(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,nn.newInvalidDocument(m)))});let u=au();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&Iu(m.mutation,f,di.empty(),st.now()),$f(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Di(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:Z4(r.bundledQuery),readTime:Di(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.overlays=new gt(ge.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ro();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=ro(),o=n.length+1,a=new ge(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new gt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=ro(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=ro(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new P4(n,i));let o=this.qr.get(n);o===void 0&&(o=Be(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.Qr=new Ot(jt.$r),this.Ur=new Ot(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new jt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ge(new rt([])),i=new jt(n,e),r=new jt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new rt([])),i=new jt(n,e),r=new jt(n,e+1);let o=Be();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new jt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(jt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new E4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new jt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?A_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new jt(n,0),r=new jt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ot(Fe);return n.forEach(r=>{const o=new jt(r,0),a=new jt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ge.isDocumentKey(o)||(o=o.child(""));const a=new jt(new ge(o),0);let u=new Ot(Fe);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new jt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new jt(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.ri=e,this.docs=function(){return new gt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let i=xr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():nn.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=xr();const a=n.path,u=new ge(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||VV(DV(m),i)<=0||(r.has(m.key)||$f(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){we(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new c3(this)}getSize(e){return K.resolve(this.size)}}class c3 extends n3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.persistence=e,this.si=new Ro(n=>R_(n),N_),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new F_,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new nl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bf(0),this.li=!1,this.li=!0,this.hi=new a3,this.referenceDelegate=e(this),this.Pi=new h3(this),this.indexManager=new K4,this.remoteDocumentCache=function(r){return new u3(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new q4(n),this.Ii=new s3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new l3(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new d3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class d3 extends FV{constructor(e){super(),this.currentSequenceNumber=e}}class B_{constructor(e){this.persistence=e,this.Ri=new F_,this.Vi=null}static mi(e){return new B_(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=ge.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Pe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yd{constructor(e,n){this.persistence=e,this.pi=new Ro(i=>UV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=t3(this,n)}static mi(e,n){return new Yd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Pe.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Be(),r=Be();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new z_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return oD()?8:BV(sn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new f3;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(ua()<=je.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",ca(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(ua()<=je.DEBUG&&se("QueryEngine","Query:",ca(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ua()<=je.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",ca(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):K.resolve())}ys(e,n){if(Nx(n))return K.resolve(null);let i=Mi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ug(n,null,"F"),i=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Be(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Ug(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return Nx(n)||r.isEqual(Pe.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(ua()<=je.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ca(n)),this.vs(e,a,n,OV(r,Ju)).next(u=>u))})}Ds(e,n){let i=new Ot(vC(e));return n.forEach((r,o)=>{$f(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return ua()<=je.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",ca(n)),this.ps.getDocumentsMatchingQuery(e,n,ws.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="LocalStore",m3=3e8;class g3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new gt(Fe),this.xs=new Ro(o=>R_(o),N_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function y3(t,e,n,i){return new g3(t,e,n,i)}async function UC(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Be();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function _3(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,_=g.keys();let E=K.resolve();return _.forEach(k=>{E=E.next(()=>m.getEntry(h,k)).next(R=>{const M=f.docVersions.get(k);Ke(M!==null,48541),R.version.compareTo(M)<0&&(g.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),m.addEntry(R)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Be();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function HC(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function v3(t,e){const n=Ce(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Gt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(g,E),function(R,M,I){return R.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=m3?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(_,E,m)&&u.push(n.Pi.updateTargetData(o,E))});let h=xr(),f=Be();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(w3(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Pe.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function w3(t,e,n){let i=Be(),r=Be();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=xr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Pe.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):se(U_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function x3(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=A_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function T3(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Xr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function qg(t,e,n){const i=Ce(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!fl(a))throw a;se(U_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function $x(t,e,n){const i=Ce(t);let r=Pe.min(),o=Be();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Ce(h),_=g.xs.get(m);return _!==void 0?K.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,Mi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Pe.min(),n?o:Be())).next(u=>(E3(i,l4(e),u),{documents:u,Qs:o})))}function E3(t,e,n){let i=t.Os.get(e)||Pe.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Gx{constructor(){this.activeTargetIds=p4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P3{constructor(){this.Mo=new Gx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="ConnectivityMonitor";class Zx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(qx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(qx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh=null;function Zg(){return bh===null?bh=function(){return 268435456+Math.round(2147483648*Math.random())}():bh++,"0x"+bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="RestConnection",C3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class I3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Wd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Zg(),u=this.zo(e,n.toUriEncodedString());se(cm,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=ul(f);return this.Jo(e,u,h,i,m).then(g=>(se(cm,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Xa(cm,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=C3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class b3 extends I3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Zg();return new Promise((u,h)=>{const f=new qS;f.setWithCredentials(!0),f.listenOnce(ZS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Qh.NO_ERROR:const g=f.getResponseJson();se(Yt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Qh.TIMEOUT:se(Yt,`RPC '${e}' ${a} timed out`),h(new de(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Qh.HTTP_ERROR:const _=f.getStatus();if(se(Yt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const R=function(I){const T=I.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(T)>=0?T:Y.UNKNOWN}(k.status);h(new de(R,k.message))}else h(new de(Y.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new de(Y.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{se(Yt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);se(Yt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Zg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=YS(),u=QS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");se(Yt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let _=!1,E=!1;const k=new A3({Yo:M=>{E?se(Yt,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(_||(se(Yt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),se(Yt,`RPC '${e}' stream ${r} sending:`,M),g.send(M))},Zo:()=>g.close()}),R=(M,I,T)=>{M.listen(I,S=>{try{T(S)}catch(F){setTimeout(()=>{throw F},0)}})};return R(g,ou.EventType.OPEN,()=>{E||(se(Yt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),R(g,ou.EventType.CLOSE,()=>{E||(E=!0,se(Yt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(g))}),R(g,ou.EventType.ERROR,M=>{E||(E=!0,Xa(Yt,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),k.a_(new de(Y.UNAVAILABLE,"The operation could not be completed")))}),R(g,ou.EventType.MESSAGE,M=>{var I;if(!E){const T=M.data[0];Ke(!!T,16349);const S=T,F=(S==null?void 0:S.error)||((I=S[0])==null?void 0:I.error);if(F){se(Yt,`RPC '${e}' stream ${r} received error:`,F);const $=F.status;let U=function(N){const j=Ct[N];if(j!==void 0)return kC(j)}($),b=F.message;U===void 0&&(U=Y.INTERNAL,b="Unknown error status: "+$+" with message "+F.message),E=!0,k.a_(new de(U,b)),g.close()}else se(Yt,`RPC '${e}' stream ${r} received:`,T),k.u_(T)}}),R(u,KS.STAT_EVENT,M=>{M.stat===Dg.PROXY?se(Yt,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===Dg.NOPROXY&&se(Yt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){return new L4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="PersistentStream";class $C{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new WC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new de(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(Kx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(Kx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class k3 extends $C{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=D4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Pe.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Pe.min():a.readTime?Di(a.readTime):Pe.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Gg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=zg(h)?{documents:F4(o,h)}:{query:B4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=LC(o,a.resumeToken);const f=Hg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Pe.min())>0){u.readTime=Qd(o,a.snapshotVersion.toTimestamp());const f=Hg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=U4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Gg(this.serializer),n.removeTarget=e,this.q_(n)}}class R3 extends $C{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=j4(e.writeResults,e.commitTime),i=Di(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Gg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>V4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{}class L3 extends N3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Wg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Y.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Wg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(Y.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class M3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wr(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="RemoteStore";class O3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Lo(this)&&(se(To,"Restarting streams for network reachability change."),await async function(h){const f=Ce(h);f.Ea.add(4),await wc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Qf(f)}(this))})}),this.Ra=new M3(i,r)}}async function Qf(t){if(Lo(t))for(const e of t.da)await e(!0)}async function wc(t){for(const e of t.da)await e(!1)}function GC(t,e){const n=Ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),G_(n)?$_(n):pl(n).O_()&&W_(n,e))}function H_(t,e){const n=Ce(t),i=pl(n);n.Ia.delete(e),i.O_()&&qC(n,e),n.Ia.size===0&&(i.O_()?i.L_():Lo(n)&&n.Ra.set("Unknown"))}function W_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pl(t).Y_(e)}function qC(t,e){t.Va.Ue(e),pl(t).Z_(e)}function $_(t){t.Va=new b4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pl(t).start(),t.Ra.ua()}function G_(t){return Lo(t)&&!pl(t).x_()&&t.Ia.size>0}function Lo(t){return Ce(t).Ea.size===0}function ZC(t){t.Va=void 0}async function D3(t){t.Ra.set("Online")}async function V3(t){t.Ia.forEach((e,n)=>{W_(t,e)})}async function j3(t,e){ZC(t),G_(t)?(t.Ra.ha(e),$_(t)):t.Ra.set("Unknown")}async function F3(t,e,n){if(t.Ra.set("Online"),e instanceof NC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){se(To,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xd(t,i)}else if(e instanceof ed?t.Va.Ze(e):e instanceof RC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Pe.min()))try{const i=await HC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Gt.EMPTY_BYTE_STRING,m.snapshotVersion)),qC(o,h);const g=new Xr(m.target,h,f,m.sequenceNumber);W_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){se(To,"Failed to raise snapshot:",i),await Xd(t,i)}}async function Xd(t,e,n){if(!fl(e))throw e;t.Ea.add(1),await wc(t),t.Ra.set("Offline"),n||(n=()=>HC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(To,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qf(t)})}function KC(t,e){return e().catch(n=>Xd(t,n,e))}async function Yf(t){const e=Ce(t),n=Ps(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:A_;for(;B3(e);)try{const r=await x3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,z3(e,r)}catch(r){await Xd(e,r)}QC(e)&&YC(e)}function B3(t){return Lo(t)&&t.Ta.length<10}function z3(t,e){t.Ta.push(e);const n=Ps(t);n.O_()&&n.X_&&n.ea(e.mutations)}function QC(t){return Lo(t)&&!Ps(t).x_()&&t.Ta.length>0}function YC(t){Ps(t).start()}async function U3(t){Ps(t).ra()}async function H3(t){const e=Ps(t);for(const n of t.Ta)e.ea(n.mutations)}async function W3(t,e,n){const i=t.Ta.shift(),r=D_.from(i,e,n);await KC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Yf(t)}async function $3(t,e){e&&Ps(t).X_&&await async function(i,r){if(function(a){return C4(a)&&a!==Y.ABORTED}(r.code)){const o=i.Ta.shift();Ps(i).B_(),await KC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Yf(i)}}(t,e),QC(t)&&YC(t)}async function Qx(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),se(To,"RemoteStore received new credentials");const i=Lo(n);n.Ea.add(3),await wc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qf(n)}async function G3(t,e){const n=Ce(t);e?(n.Ea.delete(2),await Qf(n)):e||(n.Ea.add(2),await wc(n),n.Ra.set("Unknown"))}function pl(t){return t.ma||(t.ma=function(n,i,r){const o=Ce(n);return o.sa(),new k3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:D3.bind(null,t),t_:V3.bind(null,t),r_:j3.bind(null,t),H_:F3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),G_(t)?$_(t):t.Ra.set("Unknown")):(await t.ma.stop(),ZC(t))})),t.ma}function Ps(t){return t.fa||(t.fa=function(n,i,r){const o=Ce(n);return o.sa(),new R3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:U3.bind(null,t),r_:$3.bind(null,t),ta:H3.bind(null,t),na:W3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Yf(t)):(await t.fa.stop(),t.Ta.length>0&&(se(To,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new q_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Z_(t,e){if(wr("AsyncQueue",`${e}: ${t}`),fl(t))return new de(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ge.comparator(n.key,i.key):(n,i)=>ge.comparator(n.key,i.key),this.keyedMap=au(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Da;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.ga=new gt(ge.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class il{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new il(e,n,Da.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Z3{constructor(){this.queries=Xx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ce(n),o=r.queries;r.queries=Xx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new de(Y.ABORTED,"Firestore shutting down"))}}function Xx(){return new Ro(t=>_C(t),Wf)}async function XC(t,e){const n=Ce(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new q3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Z_(a,`Initialization of query '${ca(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&K_(n)}async function JC(t,e){const n=Ce(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function K3(t,e){const n=Ce(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&K_(n)}function Q3(t,e,n){const i=Ce(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function K_(t){t.Ca.forEach(e=>{e.next()})}var Kg,Jx;(Jx=Kg||(Kg={})).Ma="default",Jx.Cache="cache";class eI{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.key=e}}class nI{constructor(e){this.key=e}}class Y3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=vC(e),this.tu=new Da(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Yx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),E=$f(this.query,g)?g:null,k=!!_&&this.mutatedKeys.has(_.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let M=!1;_&&E?_.data.isEqual(E.data)?k!==R&&(i.track({type:3,doc:E}),M=!0):this.su(_,E)||(i.track({type:2,doc:E}),M=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(u=!0)):!_&&E?(i.track({type:0,doc:E}),M=!0):_&&!E&&(i.track({type:1,doc:_}),M=!0,(h||f)&&(u=!0)),M&&(E?(a=a.add(E),o=R?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(E,k){const R=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:M})}};return R(E)-R(k)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new il(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new nI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new tI(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Q_="SyncEngine";class X3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class J3{constructor(e){this.key=e,this.hu=!1}}class ej{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ro(u=>_C(u),Wf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(ge.comparator),this.Au=new Map,this.Ru=new F_,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tj(t,e,n=!0){const i=lI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await iI(i,e,n,!0),r}async function nj(t,e){const n=lI(t);await iI(n,e,!0,!1)}async function iI(t,e,n,i){const r=await T3(t.localStore,Mi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await ij(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&GC(t.remoteStore,r),u}async function ij(t,e,n,i,r){t.pu=(g,_,E)=>async function(R,M,I,T){let S=M.view.ru(I);S.Cs&&(S=await $x(R.localStore,M.query,!1).then(({documents:b})=>M.view.ru(b,S)));const F=T&&T.targetChanges.get(M.targetId),$=T&&T.targetMismatches.get(M.targetId)!=null,U=M.view.applyChanges(S,R.isPrimaryClient,F,$);return t1(R,M.targetId,U.au),U.snapshot}(t,g,_,E);const o=await $x(t.localStore,e,!0),a=new Y3(e,o.Qs),u=a.ru(o.documents),h=vc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);t1(t,n,f.au);const m=new X3(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function rj(t,e,n){const i=Ce(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Wf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await qg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&H_(i.remoteStore,r.targetId),Qg(i,r.targetId)}).catch(dl)):(Qg(i,r.targetId),await qg(i.localStore,r.targetId,!0))}async function sj(t,e){const n=Ce(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),H_(n.remoteStore,i.targetId))}async function oj(t,e,n){const i=fj(t);try{const r=await function(a,u){const h=Ce(a),f=st.now(),m=u.reduce((E,k)=>E.add(k.key),Be());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=xr(),R=Be();return h.Ns.getEntries(E,m).next(M=>{k=M,k.forEach((I,T)=>{T.isValidDocument()||(R=R.add(I))})}).next(()=>h.localDocuments.getOverlayedDocuments(E,k)).next(M=>{g=M;const I=[];for(const T of u){const S=x4(T,g.get(T.key).overlayedDocument);S!=null&&I.push(new No(T.key,S,hC(S.value.mapValue),Oi.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,I,u)}).next(M=>{_=M;const I=M.applyToLocalDocumentSet(g,R);return h.documentOverlayCache.saveOverlays(E,M.batchId,I)})}).then(()=>({batchId:_.batchId,changes:xC(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new gt(Fe)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await xc(i,r.changes),await Yf(i.remoteStore)}catch(r){const o=Z_(r,"Failed to persist write");n.reject(o)}}async function rI(t,e){const n=Ce(t);try{const i=await v3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Ke(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Ke(a.hu,14607):r.removedDocuments.size>0&&(Ke(a.hu,42227),a.hu=!1))}),await xc(n,i,e)}catch(i){await dl(i)}}function e1(t,e,n){const i=Ce(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Ce(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&K_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function aj(t,e,n){const i=Ce(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new gt(ge.comparator);a=a.insert(o,nn.newNoDocument(o,Pe.min()));const u=Be().add(o),h=new Zf(Pe.min(),new Map,new gt(Fe),a,u);await rI(i,h),i.du=i.du.remove(o),i.Au.delete(e),Y_(i)}else await qg(i.localStore,e,!1).then(()=>Qg(i,e,n)).catch(dl)}async function lj(t,e){const n=Ce(t),i=e.batch.batchId;try{const r=await _3(n.localStore,e);oI(n,i,null),sI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await xc(n,r)}catch(r){await dl(r)}}async function uj(t,e,n){const i=Ce(t);try{const r=await function(a,u){const h=Ce(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(Ke(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);oI(i,e,n),sI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await xc(i,r)}catch(r){await dl(r)}}function sI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function oI(t,e,n){const i=Ce(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Qg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||aI(t,i)})}function aI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(H_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Y_(t))}function t1(t,e,n){for(const i of n)i instanceof tI?(t.Ru.addReference(i.key,e),cj(t,i)):i instanceof nI?(se(Q_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||aI(t,i.key)):we(19791,{wu:i})}function cj(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(se(Q_,"New document in limbo: "+n),t.Eu.add(i),Y_(t))}function Y_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ge(rt.fromString(e)),i=t.fu.next();t.Au.set(i,new J3(n)),t.du=t.du.insert(n,i),GC(t.remoteStore,new Xr(Mi(L_(n.path)),i,"TargetPurposeLimboResolution",Bf.ce))}}async function xc(t,e,n){const i=Ce(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=z_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Ce(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,_=>K.forEach(_.Es,E=>m.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>K.forEach(_.ds,E=>m.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!fl(g))throw g;se(U_,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const E=m.Ms.get(_),k=E.snapshotVersion,R=E.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(_,R)}}}(i.localStore,o))}async function hj(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){se(Q_,"User change. New user:",e.toKey());const i=await UC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new de(Y.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xc(n,i.Ls)}}function dj(t,e){const n=Ce(t),i=n.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let r=Be();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function lI(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aj.bind(null,e),e.Pu.H_=K3.bind(null,e.eventManager),e.Pu.yu=Q3.bind(null,e.eventManager),e}function fj(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uj.bind(null,e),e}class Jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return y3(this.persistence,new p3,e.initialUser,this.serializer)}Cu(e){return new zC(B_.mi,this.serializer)}Du(e){return new P3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jd.provider={build:()=>new Jd};class pj extends Jd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof Yd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new J4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new zC(i=>Yd.mi(i,n),this.serializer)}}class Yg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>e1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hj.bind(null,this.syncEngine),await G3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Z3}()}createDatastore(e){const n=Kf(e.databaseInfo.databaseId),i=function(o){return new b3(o)}(e.databaseInfo);return function(o,a,u,h){return new L3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new O3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>e1(this.syncEngine,n,0),function(){return Zx.v()?new Zx:new S3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new ej(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ce(r);se(To,"RemoteStore shutting down."),o.Ea.add(5),await wc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Yg.provider={build:()=>new Yg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="FirestoreClient";class mj{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=C_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{se(Ss,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(se(Ss,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Z_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function dm(t,e){t.asyncQueue.verifyOperationInProgress(),se(Ss,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await UC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function n1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gj(t);se(Ss,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Qx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Qx(e.remoteStore,r)),t._onlineComponents=e}async function gj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Ss,"Using user provided OfflineComponentProvider");try{await dm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Xa("Error using user provided cache. Falling back to memory cache: "+n),await dm(t,new Jd)}}else se(Ss,"Using default OfflineComponentProvider"),await dm(t,new pj(void 0));return t._offlineComponents}async function cI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Ss,"Using user provided OnlineComponentProvider"),await n1(t,t._uninitializedComponentsProvider._online)):(se(Ss,"Using default OnlineComponentProvider"),await n1(t,new Yg))),t._onlineComponents}function yj(t){return cI(t).then(e=>e.syncEngine)}async function Xg(t){const e=await cI(t),n=e.eventManager;return n.onListen=tj.bind(null,e.syncEngine),n.onUnlisten=rj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sj.bind(null,e.syncEngine),n}function _j(t,e,n={}){const i=new fs;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new uI({next:_=>{m.Nu(),a.enqueueAndForget(()=>JC(o,g)),_.fromCache&&h.source==="server"?f.reject(new de(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new eI(u,m,{includeMetadataChanges:!0,qa:!0});return XC(o,g)}(await Xg(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="firestore.googleapis.com",r1=!0;class s1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dI,this.ssl=r1}else this.host=e.host,this.ssl=e.ssl??r1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y4)throw new de(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new PV;switch(i.type){case"firstParty":return new AV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=i1.get(n);i&&(se("ComponentProvider","Removing Datastore"),i1.delete(n),i.terminate())}(this),Promise.resolve()}}function vj(t,e,n,i={}){var f;t=fr(t,Xf);const r=ul(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(jS(`https://${u}`),FS("Firestore",!0)),o.host!==dI&&o.host!==u&&Xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!vo(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=en.MOCK_USER;else{m=YO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new de(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new en(_)}t._authCredentials=new SV(new JS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Tc(this.firestore,e,this._query)}}class Mt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(yc(n,Mt._jsonSchema))return new Mt(e,i||null,new ge(rt.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:kt("string",Mt._jsonSchemaVersion),referencePath:kt("string")};class ps extends Tc{constructor(e,n,i){super(e,n,L_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new ge(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function Js(t,e,...n){if(t=Ln(t),eC("collection","path",e),t instanceof Xf){const i=rt.fromString(e,...n);return vx(i),new ps(t,null,i)}{if(!(t instanceof Mt||t instanceof ps))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(rt.fromString(e,...n));return vx(i),new ps(t.firestore,null,i)}}function An(t,e,...n){if(t=Ln(t),arguments.length===1&&(e=C_.newId()),eC("doc","path",e),t instanceof Xf){const i=rt.fromString(e,...n);return _x(i),new Mt(t,null,new ge(i))}{if(!(t instanceof Mt||t instanceof ps))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(rt.fromString(e,...n));return _x(i),new Mt(t.firestore,t instanceof ps?t.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="AsyncQueue";class a1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new WC(this,"async_queue_retry"),this._c=()=>{const i=hm();i&&se(o1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new fs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fl(e))throw e;se(o1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,wr("INTERNAL UNHANDLED ERROR: ",l1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=q_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:l1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function l1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class rl extends Xf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new a1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a1(e),this._firestoreClient=void 0,await e}}}function wj(t,e){const n=typeof t=="object"?t:HS(),i=typeof t=="string"?t:Wd,r=P_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=KO("firestore");o&&vj(r,...o)}return r}function X_(t){if(t._terminated)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xj(t),t._firestoreClient}function xj(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new $V(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,hI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new mj(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(Gt.fromBase64String(e))}catch(n){throw new de(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:kt("string",Qn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(yc(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:kt("string",Vi._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ji(e.vectorValues);throw new de(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ji._jsonSchemaVersion="firestore/vectorValue/1.0",ji._jsonSchema={type:kt("string",ji._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=/^__.*__$/;class Ej{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,n,this.fieldTransforms):new _c(e,this.data,n,this.fieldTransforms)}}function pI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class ev{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ev({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ef(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pI(this.Ac)&&Tj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Pj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Kf(e)}Cc(e,n,i,r=!1){return new ev({Ac:e,methodName:n,Dc:i,path:Ht.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sj(t){const e=t._freezeSettings(),n=Kf(t._databaseId);return new Pj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cj(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);_I("Data must be an object, but it was:",a,i);const u=gI(i,a);let h,f;if(o.merge)h=new di(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=Ij(e,g,n);if(!a.contains(_))throw new de(Y.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);bj(m,_)||m.push(_)}h=new di(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new Ej(new Kn(u),h,f)}function mI(t,e){if(yI(t=Ln(t)))return _I("Unsupported field value:",e,t),gI(t,e);if(t instanceof fI)return function(i,r){if(!pI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=mI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Ln(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return m4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=st.fromDate(i);return{timestampValue:Qd(r.serializer,o)}}if(i instanceof st){const o=new st(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Qd(r.serializer,o)}}if(i instanceof Vi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qn)return{bytesValue:LC(r.serializer,i._byteString)};if(i instanceof Mt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:j_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ji)return function(a,u){return{mapValue:{fields:{[uC]:{stringValue:cC},[$d]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return M_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${I_(i)}`)}(t,e)}function gI(t,e){const n={};return iC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,(i,r)=>{const o=mI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function yI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Vi||t instanceof Qn||t instanceof Mt||t instanceof fI||t instanceof ji)}function _I(t,e,n){if(!yI(n)||!tC(n)){const i=I_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Ij(t,e,n){if((e=Ln(e))instanceof J_)return e._internalPath;if(typeof e=="string")return vI(t,e);throw ef("Field path arguments must be of type string or ",t,!1,void 0,n)}const Aj=new RegExp("[~\\*/\\[\\]]");function vI(t,e,n){if(e.search(Aj)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new J_(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ef(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new de(Y.INVALID_ARGUMENT,u+t+h)}function bj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kj extends wI{data(){return super.data()}}function xI(t,e){return typeof e=="string"?vI(t,e):e instanceof J_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rj{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ko(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[$d].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>wt(a.doubleValue));return new ji(n)}convertGeoPoint(e){return new Vi(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Uf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const n=xs(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=rt.fromString(e);Ke(FC(i),9688,{name:e});const r=new tc(i.get(1),i.get(3)),o=new ge(i.popFirst(5));return r.isEqual(n)||wr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends wI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(xI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=lo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:kt("string",lo._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class td extends lo{data(e={}){return super.data(e)}}class uo{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new uu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new td(this._firestore,this._userDataWriter,i.key,i,new uu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new td(r._firestore,r._userDataWriter,u.doc.key,u.doc,new uu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new td(r._firestore,r._userDataWriter,u.doc.key,u.doc,new uu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:Lj(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=C_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Lj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:kt("string",uo._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class tv extends Rj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function tf(t){t=fr(t,Tc);const e=fr(t.firestore,rl),n=X_(e),i=new tv(e);return TI(t._query),_j(n,t._query).then(r=>new uo(e,i,t,r))}function bi(t,e,n){t=fr(t,Mt);const i=fr(t.firestore,rl),r=Nj(t.converter,e,n);return EI(i,[Cj(Sj(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Oi.none())])}function Au(t){return EI(fr(t.firestore,rl),[new O_(t._key,Oi.none())])}function fm(t,...e){var h,f,m;t=Ln(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||u1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(u1(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof Mt)a=fr(t.firestore,rl),u=L_(t._key.path),o={next:g=>{e[i]&&e[i](Mj(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=fr(t,Tc);a=fr(g.firestore,rl),u=g._query;const _=new tv(a);o={next:E=>{e[i]&&e[i](new uo(a,_,g,E))},error:e[i+1],complete:e[i+2]},TI(t._query)}return function(_,E,k,R){const M=new uI(R),I=new eI(E,M,k);return _.asyncQueue.enqueueAndForget(async()=>XC(await Xg(_),I)),()=>{M.Nu(),_.asyncQueue.enqueueAndForget(async()=>JC(await Xg(_),I))}}(X_(a),u,r,o)}function EI(t,e){return function(i,r){const o=new fs;return i.asyncQueue.enqueueAndForget(async()=>oj(await yj(i),r,o)),o.promise}(X_(t),e)}function Mj(t,e,n){const i=n.docs.get(e._key),r=new tv(t);return new lo(t,r,e._key,i,new uu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){hl=r})(cl),Ya(new wo("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new rl(new CV(i.getProvider("auth-internal")),new bV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),hs(px,mx,e),hs(px,mx,"esm2020")})();function PI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oj=PI,SI=new mc("auth","Firebase",PI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new T_("@firebase/auth");function Dj(t,...e){nf.logLevel<=je.WARN&&nf.warn(`Auth (${cl}): ${t}`,...e)}function nd(t,...e){nf.logLevel<=je.ERROR&&nf.error(`Auth (${cl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,...e){throw nv(t,...e)}function Fi(t,...e){return nv(t,...e)}function CI(t,e,n){const i={...Oj(),[e]:n};return new mc("auth","Firebase",i).create(e,{appName:t.name})}function ms(t){return CI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return SI.create(t,...e)}function xe(t,e,...n){if(!t)throw nv(e,...n)}function lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nd(e),new Error(e)}function Er(t,e){t||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Vj(){return c1()==="http:"||c1()==="https:"}function c1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vj()||iD()||"connection"in navigator)?navigator.onLine:!0}function Fj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,Er(n>e,"Short delay should be less than long delay!"),this.isMobile=eD()||rD()}get(){return jj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t,e){Er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Uj=new Ec(3e4,6e4);function Jf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ml(t,e,n,i,r={}){return AI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=gc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return nD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ul(t.emulatorConfig.host)&&(f.credentials="include"),II.fetch()(await kI(t,t.config.apiHost,n,u),f)})}async function AI(t,e,n){t._canInitEmulator=!1;const i={...Bj,...e};try{const r=new Hj(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw kh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw kh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw kh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw kh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw CI(t,m,f);Tr(t,m)}}catch(r){if(r instanceof Cr)throw r;Tr(t,"network-request-failed",{message:String(r)})}}async function bI(t,e,n,i,r={}){const o=await ml(t,e,n,i,r);return"mfaPendingCredential"in o&&Tr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function kI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?iv(t.config,r):`${t.config.apiScheme}://${r}`;return zj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class Hj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fi(this.auth,"network-request-failed")),Uj.get())})}}function kh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Fi(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wj(t,e){return ml(t,"POST","/v1/accounts:delete",e)}async function rf(t,e){return ml(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $j(t,e=!1){const n=Ln(t),i=await n.getIdToken(e),r=rv(i);xe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:bu(pm(r.auth_time)),issuedAtTime:bu(pm(r.iat)),expirationTime:bu(pm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function pm(t){return Number(t)*1e3}function rv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{const r=MS(n);return r?JSON.parse(r):(nd("Failed to decode base64 JWT payload"),null)}catch(r){return nd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function h1(t){const e=rv(t);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Cr&&Gj(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Gj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bu(this.lastLoginAt),this.creationTime=bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(t){var g;const e=t.auth,n=await t.getIdToken(),i=await sc(t,rf(e,{idToken:n}));xe(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?RI(r.providerUserInfo):[],a=Kj(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new ey(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function Zj(t){const e=Ln(t);await sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kj(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function RI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(t,e){const n=await AI(t,{},async()=>{const i=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await kI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&ul(t.emulatorConfig.host)&&(h.credentials="include"),II.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Yj(t,e){return ml(t,"POST","/v2/accounts:revokeToken",Jf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=h1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await Qj(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Va;return i&&(xe(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(xe(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(xe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Va,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new qj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ey(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await sc(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $j(this,e)}reload(){return Zj(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await sf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await sc(this,Wj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:E,providerData:k,stsTokenManager:R}=n;xe(g&&R,e,"internal-error");const M=Va.fromJSON(this.name,R);xe(typeof g=="string",e,"internal-error"),Vr(i,e.name),Vr(r,e.name),xe(typeof _=="boolean",e,"internal-error"),xe(typeof E=="boolean",e,"internal-error"),Vr(o,e.name),Vr(a,e.name),Vr(u,e.name),Vr(h,e.name),Vr(f,e.name),Vr(m,e.name);const I=new fi({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:E,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:M,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(I.providerData=k.map(T=>({...T}))),h&&(I._redirectEventId=h),I}static async _fromIdTokenResponse(e,n,i=!1){const r=new Va;r.updateFromServerResponse(n);const o=new fi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await sf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];xe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?RI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Va;u.updateFromIdToken(i);const h=new fi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ey(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Map;function ur(t){Er(t instanceof Function,"Expected a class definition");let e=d1.get(t);return e?(Er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,d1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NI.type="NONE";const f1=NI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t,e,n){return`firebase:${t}:${e}:${n}`}class ja{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=id(this.userKey,r.apiKey,o),this.fullPersistenceKey=id("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rf(this.auth,{idToken:e}).catch(()=>{});return n?fi._fromGetAccountInfoResponse(this.auth,n,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ja(ur(f1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ur(f1);const a=id(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await rf(e,{idToken:m}).catch(()=>{});if(!_)break;g=await fi._fromGetAccountInfoResponse(e,_,m)}else g=fi._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new ja(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new ja(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jI(e))return"Blackberry";if(FI(e))return"Webos";if(MI(e))return"Safari";if((e.includes("chrome/")||OI(e))&&!e.includes("edge/"))return"Chrome";if(VI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function LI(t=sn()){return/firefox\//i.test(t)}function MI(t=sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OI(t=sn()){return/crios\//i.test(t)}function DI(t=sn()){return/iemobile/i.test(t)}function VI(t=sn()){return/android/i.test(t)}function jI(t=sn()){return/blackberry/i.test(t)}function FI(t=sn()){return/webos/i.test(t)}function sv(t=sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Xj(t=sn()){var e;return sv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Jj(){return sD()&&document.documentMode===10}function BI(t=sn()){return sv(t)||VI(t)||FI(t)||jI(t)||/windows phone/i.test(t)||DI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e=[]){let n;switch(t){case"Browser":n=p1(sn());break;case"Worker":n=`${p1(sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(t,e={}){return ml(t,"GET","/v2/passwordPolicy",Jf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=6;class i5{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??n5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m1(this),this.idTokenSubscription=new m1(this),this.beforeStateQueue=new e5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await ja.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rf(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Fj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(ms(this));const n=e?Ln(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t5(this),n=new i5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Yj(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ur(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Dj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ep(t){return Ln(t)}class m1{constructor(e){this.auth=e,this.observer=null,this.addObserver=fD(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s5(t){ov=t}function o5(t){return ov.loadJS(t)}function a5(){return ov.gapiScript}function l5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t,e){const n=P_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(vo(o,e??{}))return r;Tr(r,"already-initialized")}return n.initialize({options:e})}function c5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function h5(t,e,n){const i=ep(t);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=UI(e),{host:a,port:u}=d5(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(vo(f,i.config.emulator)&&vo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,ul(a)?(jS(`${o}//${a}${h}`),FS("Auth",!0)):f5()}function UI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d5(t){const e=UI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:g1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:g1(a)}}}function g1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function f5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(t,e){return bI(t,"POST","/v1/accounts:signInWithIdp",Jf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="http://localhost";class Eo extends HI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new Eo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Fa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fa(e,n)}buildRequest(){const e={requestUri:p5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends WI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Pc{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Eo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Gr.credential(n,i)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Pc{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Pc{constructor(){super("twitter.com")}static credential(e,n){return Eo._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Zr.credential(n,i)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(t,e){return bI(t,"POST","/v1/accounts:signUp",Jf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await fi._fromIdTokenResponse(e,i,r),a=y1(i);return new Cs({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=y1(i);return new Cs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function y1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t){var r;if(ci(t.app))return Promise.reject(ms(t));const e=ep(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new Cs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await m5(e,{returnSecureToken:!0}),i=await Cs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends Cr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,of.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new of(e,n,i,r)}}function $I(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?of._fromErrorAndOperation(t,o,e,i):o})}async function y5(t,e,n=!1){const i=await sc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(t,e,n=!1){const{auth:i}=t;if(ci(i.app))return Promise.reject(ms(i));const r="reauthenticate";try{const o=await sc(t,$I(i,r,e,t),n);xe(o.idToken,i,"internal-error");const a=rv(o.idToken);xe(a,i,"internal-error");const{sub:u}=a;return xe(t.uid===u,i,"user-mismatch"),Cs._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Tr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e,n=!1){if(ci(t.app))return Promise.reject(ms(t));const i="signIn",r=await $I(t,i,e),o=await Cs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function w5(t,e,n,i){return Ln(t).onIdTokenChanged(e,n,i)}function x5(t,e,n){return Ln(t).beforeAuthStateChanged(e,n)}function T5(t,e,n,i){return Ln(t).onAuthStateChanged(e,n,i)}const af="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(af,"1"),this.storage.removeItem(af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=1e3,P5=10;class qI extends GI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Jj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,P5):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},E5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qI.type="LOCAL";const S5=qI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI extends GI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZI.type="SESSION";const KI=ZI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new tp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await C5(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=av("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){return window}function A5(t){Bi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function b5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function R5(){return QI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="firebaseLocalStorageDb",N5=1,lf="firebaseLocalStorage",XI="fbase_key";class Sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function np(t,e){return t.transaction([lf],e?"readwrite":"readonly").objectStore(lf)}function L5(){const t=indexedDB.deleteDatabase(YI);return new Sc(t).toPromise()}function ty(){const t=indexedDB.open(YI,N5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(lf,{keyPath:XI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(lf)?e(i):(i.close(),await L5(),e(await ty()))})})}async function _1(t,e,n){const i=np(t,!0).put({[XI]:e,value:n});return new Sc(i).toPromise()}async function M5(t,e){const n=np(t,!1).get(e),i=await new Sc(n).toPromise();return i===void 0?null:i.value}function v1(t,e){const n=np(t,!0).delete(e);return new Sc(n).toPromise()}const O5=800,D5=3;class JI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ty(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>D5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tp._getInstance(R5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await b5(),!this.activeServiceWorker)return;this.sender=new I5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ty();return await _1(e,af,"1"),await v1(e,af),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>_1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>M5(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=np(r,!1).getAll();return new Sc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),O5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JI.type="LOCAL";const V5=JI;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(t,e){return e?ur(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv extends HI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function F5(t){return v5(t.auth,new lv(t),t.bypassAuthState)}function B5(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),_5(n,new lv(t),t.bypassAuthState)}async function z5(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),y5(n,new lv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F5;case"linkViaPopup":case"linkViaRedirect":return z5;case"reauthViaPopup":case"reauthViaRedirect":return B5;default:Tr(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=new Ec(2e3,1e4);class ba extends eA{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=av();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,U5.get())};e()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="pendingRedirect",rd=new Map;class W5 extends eA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=rd.get(this.auth._key());if(!e){try{const i=await $5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}rd.set(this.auth._key(),e)}return this.bypassAuthState||rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $5(t,e){const n=Z5(e),i=q5(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function G5(t,e){rd.set(t._key(),e)}function q5(t){return ur(t._redirectPersistence)}function Z5(t){return id(H5,t.config.apiKey,t.name)}async function K5(t,e,n=!1){if(ci(t.app))return Promise.reject(ms(t));const i=ep(t),r=j5(i,e),a=await new W5(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=10*60*1e3;class Y5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!tA(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q5&&this.cachedEventUids.clear(),this.cachedEventUids.has(w1(e))}saveEventToCache(e){this.cachedEventUids.add(w1(e)),this.lastProcessedEventTime=Date.now()}}function w1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function X5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J5(t,e={}){return ml(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t6=/^https?/;async function n6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await J5(t);for(const n of e)try{if(i6(n))return}catch{}Tr(t,"unauthorized-domain")}function i6(t){const e=Jg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!t6.test(n))return!1;if(e6.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new Ec(3e4,6e4);function x1(){const t=Bi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s6(t){return new Promise((e,n)=>{var r,o,a;function i(){x1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x1(),n(Fi(t,"network-request-failed"))},timeout:r6.get()})}if((o=(r=Bi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Bi().gapi)!=null&&a.load)i();else{const u=l5("iframefcb");return Bi()[u]=()=>{gapi.load?i():n(Fi(t,"network-request-failed"))},o5(`${a5()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw sd=null,e})}let sd=null;function o6(t){return sd=sd||s6(t),sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=new Ec(5e3,15e3),l6="__/auth/iframe",u6="emulator/auth/iframe",c6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d6(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?iv(e,u6):`https://${t.config.authDomain}/${l6}`,i={apiKey:e.apiKey,appName:t.name,v:cl},r=h6.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${gc(i).slice(1)}`}async function f6(t){const e=await o6(t),n=Bi().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:d6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c6,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Fi(t,"network-request-failed"),u=Bi().setTimeout(()=>{o(a)},a6.get());function h(){Bi().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m6=500,g6=600,y6="_blank",_6="http://localhost";class T1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v6(t,e,n,i=m6,r=g6){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...p6,width:i.toString(),height:r.toString(),top:o,left:a},f=sn().toLowerCase();n&&(u=OI(f)?y6:n),LI(f)&&(e=e||_6,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[E,k])=>`${_}${E}=${k},`,"");if(Xj(f)&&u!=="_self")return w6(e||"",u),new T1(null);const g=window.open(e||"",u,m);xe(g,t,"popup-blocked");try{g.focus()}catch{}return new T1(g)}function w6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="__/auth/handler",T6="emulator/auth/handler",E6=encodeURIComponent("fac");async function E1(t,e,n,i,r,o){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:cl,eventId:r};if(e instanceof WI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",dD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Pc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${E6}=${encodeURIComponent(h)}`:"";return`${P6(t)}?${gc(u).slice(1)}${f}`}function P6({config:t}){return t.emulator?iv(t,T6):`https://${t.authDomain}/${x6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class S6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KI,this._completeRedirectFn=K5,this._overrideRedirectResult=G5}async _openPopup(e,n,i,r){var a;Er((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await E1(e,n,i,Jg(),r);return v6(e,o,av())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await E1(e,n,i,Jg(),r);return A5(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Er(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await f6(e),i=new Y5(e);return n.register("authEvent",r=>(xe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mm,{type:mm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[mm];o!==void 0&&n(!!o),Tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BI()||MI()||sv()}}const C6=S6;var P1="@firebase/auth",S1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b6(t){Ya(new wo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;xe(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zI(t)},f=new r5(i,r,o,h);return c5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ya(new wo("auth-internal",e=>{const n=ep(e.getProvider("auth").getImmediate());return(i=>new I6(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(P1,S1,A6(t)),hs(P1,S1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=5*60,R6=VS("authIdTokenMaxAge")||k6;let C1=null;const N6=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>R6)return;const r=n==null?void 0:n.token;C1!==r&&(C1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function L6(t=HS()){const e=P_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=u5(t,{popupRedirectResolver:C6,persistence:[V5,S5,KI]}),i=VS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=N6(o.toString());x5(n,a,()=>a(n.currentUser)),w5(n,u=>a(u))}}const r=OS("auth");return r&&h5(n,`http://${r}`),n}function M6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}s5({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Fi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",M6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b6("Browser");var O6="firebase",D6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(O6,D6,"app");const V6={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},nA=US(V6),At=wj(nA),I1=L6(nA),uf={praha:{id:"praha",name:"Praha",center:[50.095,14.465],zoom:14,description:"Prague city - includes Centrum, Palmovka, Vysoany, Karln, Libe"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},j6="praha",iA=uf[j6].center,rA=15,F6=13,B6=18,A1={tileUrl:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},co=["red","blue"],sA={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},b1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],hi=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"praha"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"praha"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"praha"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-46",name:"Centrum 1",location:[50.091525,14.440142],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Florenc",hood:"praha"},{id:"art-47",name:"Centrum 2",location:[50.089364,14.437222],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Florenc",hood:"praha"},{id:"art-48",name:"Centrum 3",location:[50.087811,14.432578],size:"large",status:"active",mhd:null,capturedBy:null,area:"Karln",hood:"praha"},{id:"art-49",name:"Centrum 4",location:[50.084514,14.429217],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Karln",hood:"praha"},{id:"art-50",name:"Centrum 5",location:[50.083103,14.426833],size:"small",status:"active",mhd:null,capturedBy:null,area:"Karln",hood:"praha"},{id:"art-51",name:"Centrum 6",location:[50.080575,14.423917],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-52",name:"Centrum 7",location:[50.079044,14.422033],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-53",name:"Centrum 8",location:[50.082172,14.418336],size:"large",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-54",name:"Centrum 9",location:[50.081775,14.416789],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-55",name:"Centrum 10",location:[50.081547,14.413769],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-56",name:"Centrum 11",location:[50.092544,14.444431],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Florenc",hood:"praha"},{id:"art-57",name:"Vysoany 11",location:[50.110867,14.516553],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"}];function ho(t){var e;return((e=sA[t.size])==null?void 0:e.points)||100}function z6(t,e=.008){const n={};co.forEach(r=>n[r]=[]);const i={};return co.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),co.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],m=o[h],g=`${f.id}-${m.id}`,_=f.location[0]-m.location[0],E=(f.location[1]-m.location[1])*1.6,k=Math.sqrt(_*_+E*E);k<=e&&!a.has(g)&&(a.add(g),n[r].push({from:f.location,to:m.location,distance:k}))}}),n}function gm(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function oA(t){const e={};return co.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=ho(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const aA=V.createContext(null),Xt={player:"streetart-ctf-player",captures:"streetart-ctf-captures",discoveries:"streetart-discoveries",gameMode:"streetart-game-mode"},Rh={SOLO:"solo",TEAM:"team"},Xl="streetart-captures",Nh="streetart-players",ym="streetart-teams",U6={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function Jl(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function Gs(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function H6({children:t}){const[e,n]=V.useState(null),[i,r]=V.useState(!0),[o,a]=V.useState(()=>Jl(Xt.gameMode,Rh.SOLO)),[u,h]=V.useState(()=>Jl(Xt.discoveries,{})),[f,m]=V.useState(()=>Jl(Xt.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0,discoveryCount:0,uniqueAreasVisited:[]})),[g,_]=V.useState(()=>{const ee=Jl(Xt.captures,{});return hi.map(le=>({...le,capturedBy:ee[le.id]||null}))}),[E,k]=V.useState(null),[R,M]=V.useState(!1),[I,T]=V.useState(null);V.useEffect(()=>{const ee=T5(I1,le=>{le?(n(le),m(ue=>({...ue,id:le.uid}))):g5(I1).catch(ue=>{console.log("Auth not available, using local mode")})});return()=>ee()},[]);const[S,F]=V.useState(null),[$,U]=V.useState([]),b=V.useRef({});V.useEffect(()=>{let ee=!0;const le=Js(At,Xl),ue=fm(le,Ie=>{const fe={},Ne={},Et=[];Ie.forEach(ye=>{var Ve,Re,Je,Wi;const Ae=ye.data();if(Ae.status&&(Ne[ye.id]=Ae.status),Ae.capturedBy){fe[ye.id]={team:Ae.capturedBy,playerName:Ae.playerName||"Unknown",capturedAt:((Re=(Ve=Ae.capturedAt)==null?void 0:Ve.toDate)==null?void 0:Re.call(Ve))||null};const Vn=hi.find(gl=>gl.id===ye.id);Et.push({id:ye.id,artName:(Vn==null?void 0:Vn.name)||ye.id,area:(Vn==null?void 0:Vn.area)||"Unknown",team:Ae.capturedBy,playerName:Ae.playerName||"Unknown",capturedAt:((Wi=(Je=Ae.capturedAt)==null?void 0:Je.toDate)==null?void 0:Wi.call(Je))||new Date,points:Ae.points||100,isRecapture:Ae.isRecapture||!1})}});const lt=Et.sort((ye,Ae)=>Ae.capturedAt-ye.capturedAt).slice(0,10);U(lt),ee||Ie.docChanges().forEach(ye=>{var Ae;if(ye.type==="added"||ye.type==="modified"){const Ve=ye.doc.data(),Re=(Ae=b.current[ye.doc.id])==null?void 0:Ae.team;if(Ve.capturedBy&&Re!==Ve.capturedBy){const Je=hi.find(Wi=>Wi.id===ye.doc.id);Je&&(F({artId:Je.id,artName:Je.name,location:Je.location,team:Ve.capturedBy,playerId:Ve.playerId,playerName:Ve.playerName||"Someone",points:Ve.points||ho(Je),streak:Ve.streak||0,isRecapture:Ve.isRecapture||!!Re,prevOwner:Re||null,timestamp:Date.now()}),setTimeout(()=>F(null),3900))}}}),ee=!1,b.current=fe,_(hi.map(ye=>{const Ae=fe[ye.id];return{...ye,capturedBy:(Ae==null?void 0:Ae.team)||null,capturedByPlayer:(Ae==null?void 0:Ae.playerName)||null,capturedAt:(Ae==null?void 0:Ae.capturedAt)||null,status:Ne[ye.id]||ye.status}})),Gs(Xt.captures,fe),r(!0),console.log("Firebase: Synced",Object.keys(fe).length,"captures")},Ie=>{console.warn("Firestore sync error:",Ie),r(!1)});return()=>ue()},[]);const[C,N]=V.useState({red:0,blue:0});V.useEffect(()=>{const ee=Js(At,ym),le=fm(ee,ue=>{const Ie={red:0,blue:0};ue.forEach(fe=>{const Ne=fe.data();(fe.id==="red"||fe.id==="blue")&&(Ie[fe.id]=Ne.score||0)}),N(Ie),console.log("Team scores:",Ie)});return()=>le()},[]);const[j,O]=V.useState([]);V.useEffect(()=>{const ee=Js(At,Nh),le=fm(ee,ue=>{const Ie=[];ue.forEach(fe=>{const Ne=fe.data();Ne.name&&Ne.team&&Ie.push({id:fe.id,name:Ne.name,team:Ne.team,score:Ne.score||0,captures:Ne.captures||0})}),O(Ie.sort((fe,Ne)=>Ne.score-fe.score)),console.log("Players loaded:",Ie.length)});return()=>le()},[]),V.useEffect(()=>{Gs(Xt.player,f)},[f]);const z=V.useCallback(async(ee,le)=>{if(i)try{await bi(An(At,Xl,ee),{artId:ee,capturedBy:le.team,capturedAt:new Date,playerId:f.id,playerName:f.name,points:le.points,streak:le.streak,isFirstCapture:le.isFirstCapture,isRecapture:le.isRecapture})}catch(ue){console.warn("Failed to sync capture to Firebase:",ue)}},[i,f.id,f.name]);V.useCallback(async ee=>{if(i)try{await bi(An(At,Xl,"global"),ee,{merge:!0})}catch(le){console.warn("Failed to sync to Firebase:",le)}},[i]);const D=oA(g),me={red:Math.max(C.red,D.red),blue:Math.max(C.blue,D.blue)},Ge=V.useCallback(async ee=>{if(!(!i||!ee.id)&&!(!ee.name||ee.name==="Street Artist")&&ee.team)try{await bi(An(At,Nh,ee.id),{name:ee.name,team:ee.team,score:ee.score||0,captures:ee.captureCount||0,joinedAt:new Date},{merge:!0})}catch(le){console.warn("Failed to sync player to Firebase:",le)}},[i]),be=V.useCallback(async ee=>{co.includes(ee)&&m(le=>{const ue={...le,team:ee};return Gs(Xt.player,ue),Ge(ue).catch(()=>{}),ue})},[Ge]),at=V.useCallback(async ee=>{m(le=>{const ue={...le,name:ee};return Gs(Xt.player,ue),Ge(ue).catch(()=>{}),ue})},[Ge]),Z=V.useCallback((ee,le,ue=50)=>{let Ie=null,fe=1/0;return g.forEach(Ne=>{const Et=(Ne.location[0]-ee)*111e3,lt=(Ne.location[1]-le)*111e3*Math.cos(ee*Math.PI/180),ye=Math.sqrt(Et*Et+lt*lt);ye<fe&&ye<=ue&&(fe=ye,Ie={...Ne,distance:Math.round(ye)})}),Ie},[g]),he=V.useCallback((ee,le,ue,Ie)=>{const fe=(ue-ee)*111e3,Ne=(Ie-le)*111e3*Math.cos(ee*Math.PI/180);return Math.sqrt(fe*fe+Ne*Ne)},[]),J=V.useCallback((ee,le,ue=null)=>{const Ie=ho(ee),fe=[];let Ne=Ie;const Et=ee.capturedBy&&ee.capturedBy!==le.team,lt=!ee.capturedBy,ye=Date.now(),Ae=le.lastCaptureTime?(ye-le.lastCaptureTime)/1e3/60:1/0,Ve=le.streak||0;if(Ve>0){const Re=Math.min(Ve*.1,1),Je=Math.round(Ie*Re);Je>0&&(Ne+=Je,fe.push({type:"streak",label:`${Ve}x Streak`,points:Je}))}if(Et){const Re=Math.round(Ie*.5);Ne+=Re,fe.push({type:"recapture",label:"Recapture",points:Re})}if(lt){const Re=Math.round(Ie*.25);Ne+=Re,fe.push({type:"first",label:"First Capture",points:Re})}if(Ae<5){const Re=Math.round(Ie*.2);Ne+=Re,fe.push({type:"speed",label:"Speed Bonus",points:Re})}if(ue&&le.lastCaptureLocation){const Re=he(le.lastCaptureLocation[0],le.lastCaptureLocation[1],ue[0],ue[1]);if(Re>50){const Je=Math.min(Math.round(Re/100)*5,50);Je>0&&(Ne+=Je,fe.push({type:"distance",label:`${Math.round(Re)}m walked`,points:Je}))}}return{basePoints:Ie,totalPoints:Ne,bonuses:fe,isRecapture:Et,isFirstCapture:lt}},[he]),ie=V.useCallback((ee,le=null)=>{if(!f.team)return{success:!1,message:"Join a team first!"};const ue=g.find(ye=>ye.id===ee);if(!ue)return{success:!1,message:"Art not found"};if(ue.capturedBy===f.team)return{success:!1,message:"Already yours!"};if(ue.status==="ghost")return{success:!1,message:"This art no longer exists"};const Ie=le||ue.location,fe=J(ue,f,Ie),Ne=ue.capturedBy;_(ye=>ye.map(Ae=>Ae.id===ee?{...Ae,capturedBy:f.team}:Ae));const Et=f.streak+1;m(ye=>({...ye,score:ye.score+fe.totalPoints,capturedArt:[...ye.capturedArt.filter(Ae=>Ae!==ee),ee],streak:Et,maxStreak:Math.max(ye.maxStreak,Et),lastCaptureTime:Date.now(),lastCaptureLocation:Ie,captureCount:ye.captureCount+1,recaptureCount:fe.isRecapture?ye.recaptureCount+1:ye.recaptureCount,firstCaptureCount:fe.isFirstCapture?ye.firstCaptureCount+1:ye.firstCaptureCount,totalDistance:ye.totalDistance+(le&&ye.lastCaptureLocation?he(ye.lastCaptureLocation[0],ye.lastCaptureLocation[1],le[0],le[1]):0)})),z(ee,{team:f.team,points:fe.totalPoints,streak:Et,isFirstCapture:fe.isFirstCapture,isRecapture:fe.isRecapture});const lt=Jl(Xt.captures,{});return Gs(Xt.captures,{...lt,[ee]:f.team}),{success:!0,art:ue,points:fe.totalPoints,basePoints:fe.basePoints,bonuses:fe.bonuses,streak:Et,previousTeam:Ne,message:Ne?`Stolen from ${Ne}!`:"Captured!"}},[f,g,z,J,he]),Se=V.useCallback(async(ee,le)=>{M(!0);const ue=Z(le.lat,le.lng,100);if(!ue){M(!1),k({success:!1,message:"No street art nearby. Get closer!"});return}T({art:ue,photo:ee,location:le}),M(!1)},[Z]),Xe=V.useCallback(()=>{if(!I)return;const ee=ie(I.art.id);k(ee),T(null)},[I,ie]),Le=V.useCallback(()=>{T(null),k(null)},[]),ke=V.useCallback(ee=>{(ee===Rh.SOLO||ee===Rh.TEAM)&&(a(ee),Gs(Xt.gameMode,ee))},[]),pe=V.useCallback(async(ee,le=null)=>{const ue=g.find(lt=>lt.id===ee);if(!ue)return{success:!1,message:"Art not found"};if(u[ee])return{success:!1,message:"Already discovered!",alreadyDiscovered:!0};const Ie=new Date,fe={artId:ee,artName:ue.name,area:ue.area,size:ue.size,points:ho(ue),discoveredAt:Ie.toISOString(),location:le||ue.location},Ne={...u,[ee]:fe};h(Ne),Gs(Xt.discoveries,Ne);const Et=new Set([...f.uniqueAreasVisited,ue.area]);if(m(lt=>({...lt,score:lt.score+fe.points,discoveryCount:lt.discoveryCount+1,uniqueAreasVisited:[...Et],lastCaptureTime:Ie.getTime(),lastCaptureLocation:le||ue.location})),i&&f.id)try{await bi(An(At,"streetart-discoveries",`${f.id}_${ee}`),{...fe,playerId:f.id,playerName:f.name})}catch(lt){console.warn("Failed to sync discovery to Firebase:",lt)}return{success:!0,message:"Discovered!",discovery:fe}},[g,u,f,i]),ct=V.useCallback(async()=>{if(console.log("Resetting all data..."),localStorage.removeItem(Xt.player),localStorage.removeItem(Xt.captures),localStorage.removeItem(Xt.discoveries),localStorage.removeItem(Xt.gameMode),Object.keys(localStorage).forEach(ee=>{ee.startsWith("streetart-")&&localStorage.removeItem(ee)}),i)try{const ee=await tf(Js(At,Xl)),le=ee.docs.map(fe=>Au(An(At,Xl,fe.id)));await Promise.all(le),console.log("Deleted",ee.size,"captures");const ue=await tf(Js(At,Nh)),Ie=ue.docs.map(fe=>Au(An(At,Nh,fe.id)));await Promise.all(Ie),console.log("Deleted",ue.size,"players"),await bi(An(At,ym,"red"),{score:0}),await bi(An(At,ym,"blue"),{score:0}),console.log("Reset team scores")}catch(ee){console.warn("Failed to reset Firebase:",ee)}m({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,captureCount:0,recaptureCount:0,firstCaptureCount:0,totalDistance:0,discoveryCount:0,uniqueAreasVisited:[]}),_(hi.map(ee=>({...ee,capturedBy:null}))),h({}),k(null),T(null),U([]),console.log("Reset complete!"),window.location.reload()},[e,i]),qt={player:f,artPoints:g,teamScores:me,globalTeamScores:C,allPlayers:j,recentCaptures:$,captureNotification:S,scanResult:E,isScanning:R,pendingCapture:I,isOnline:i,teams:co,gameMode:o,discoveries:u,discoveryCount:Object.keys(u).length,setGameMode:ke,joinTeam:be,setPlayerName:at,captureArt:ie,discoverArt:pe,startCapture:Se,confirmCapture:Xe,cancelCapture:Le,findNearestArt:Z,setScanResult:k,resetAll:ct,TEAM_COLORS:U6,GAME_MODES:Rh};return w.jsx(aA.Provider,{value:qt,children:t})}function Hi(){const t=V.useContext(aA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}const k1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],R1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function N1(){const t=k1[Math.floor(Math.random()*k1.length)],e=R1[Math.floor(Math.random()*R1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function W6({text:t,className:e="",delay:n=0}){const i=t.split(" ");return w.jsx("span",{className:e,children:i.map((r,o)=>w.jsx(ne.span,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n+o*.08,duration:.4},className:"inline-block mr-[0.3em]",children:r},o))})}function Lh({text:t,className:e="",delay:n=0}){return w.jsx("span",{className:e,children:t.split("").map((i,r)=>w.jsx(ne.span,{initial:{opacity:0,y:40,rotate:-10},animate:{opacity:1,y:0,rotate:0},transition:{delay:n+r*.04,duration:.5,type:"spring",stiffness:200},className:"inline-block",style:{display:i===" "?"inline":"inline-block"},children:i===" "?"":i},r))})}function $6(){const t=bf(),{player:e,joinTeam:n,setPlayerName:i,allPlayers:r}=Hi(),[o,a]=V.useState(0),[u,h]=V.useState(()=>e.name&&e.name!=="Street Artist"?e.name:N1()),[f,m]=V.useState(null);V.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]);const g=()=>{if(f)return f;const I=r.filter(F=>F.team==="red").length,T=r.filter(F=>F.team==="blue").length;return I<T?"red":T<I?"blue":Math.random()<.5?"red":"blue"},_=()=>h(N1()),E=async()=>{if(o===1&&u.trim()){const I=g();m(I),await i(u.trim()),await n(I)}if(o===3){t("/map");return}a(o+1)},k=()=>o===1?u.trim().length>=2:!0,R=f==="red"?"#E53935":"#1E88E5",M=f==="red"?"RED":"BLUE";return w.jsxs("div",{className:"h-screen bg-[#FAFAFA] flex flex-col overflow-hidden font-nohemi",children:[w.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-black/5 z-10",children:w.jsx(ne.div,{className:"h-full bg-black",initial:{width:"0%"},animate:{width:`${(o+1)/4*100}%`},transition:{duration:.5,ease:"easeOut"}})}),w.jsxs(Qa,{mode:"wait",children:[o===0&&w.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-center items-center p-6 pt-16 text-center",children:[w.jsx(ne.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"mb-8",children:w.jsx("img",{src:"/street-art-ctf/animations/jump.gif",alt:"Chomp jumping",className:"w-48 h-48 object-contain"})}),w.jsxs("h1",{className:"text-[4rem] leading-[0.95] font-black text-black mb-4 tracking-tight",children:[w.jsx(Lh,{text:"CHOMP",delay:.3}),w.jsx("br",{}),w.jsx(Lh,{text:"GAME",delay:.6})]}),w.jsx(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-lg text-black/40 max-w-[280px] leading-relaxed",children:"Find. Scan. Collect."})]},"intro"),o===1&&w.jsxs(ne.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-center p-6",children:[w.jsx(ne.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-sm tracking-widest text-black/40 mb-4",children:"STEP 1 OF 3"}),w.jsx("h1",{className:"text-4xl font-bold text-black mb-3 tracking-tight",children:w.jsx(W6,{text:"Who are you?",delay:.2})}),w.jsx(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-black/40 mb-10",children:"Pick a name. Make it memorable."}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[w.jsx("input",{type:"text",value:u,onChange:I=>h(I.target.value),placeholder:"Your name",maxLength:20,className:"w-full py-4 text-3xl font-bold text-black bg-transparent border-b-2 border-black/20 focus:border-black focus:outline-none placeholder:text-black/20 transition-colors"}),w.jsx("button",{onClick:_,className:"mt-6 text-sm text-black/40 hover:text-black transition-colors underline underline-offset-4",children:"Randomize"})]})]},"name"),o===2&&w.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-center items-center p-6 text-center relative overflow-hidden",style:{backgroundColor:R},children:[w.jsx(ne.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"mb-4",children:w.jsx("img",{src:"/street-art-ctf/animations/eat.gif",alt:"Chomp eating",className:"w-40 h-40 object-contain"})}),w.jsxs(ne.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:150},children:[w.jsxs(ne.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/60 text-sm tracking-widest mb-2",children:[u.toUpperCase(),", YOU ARE"]}),w.jsxs("h1",{className:"text-[4rem] leading-none font-black text-white tracking-tight",children:[w.jsx(Lh,{text:"TEAM",delay:.6}),w.jsx("br",{}),w.jsx(Lh,{text:M,delay:.9})]}),w.jsx(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4},className:"mt-4 text-white/50 text-lg",children:f==="red"?"Burn bright. Conquer all.":"Flow strong. Take over."})]})]},"team"),o===3&&w.jsxs(ne.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0},transition:{duration:.4},className:"flex-1 flex flex-col p-6 pt-12 overflow-y-auto",children:[w.jsx(ne.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"flex justify-center mb-6",children:w.jsx("img",{src:"/street-art-ctf/animations/scan.gif",alt:"Scanning",className:"w-32 h-32 object-contain"})}),w.jsx(ne.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-3 text-center",children:"HOW TO PLAY"}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs(ne.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex gap-4",children:[w.jsx("div",{className:"text-4xl font-black text-black/10",children:"1"}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold text-black mb-1",children:"Find Chomps"}),w.jsx("p",{className:"text-sm text-black/50 leading-relaxed",children:"Walk the streets and look for Chomp stickers hiding in the city."})]})]}),w.jsxs(ne.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.5},className:"flex gap-4",children:[w.jsx("div",{className:"text-4xl font-black text-black/10",children:"2"}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold text-black mb-1",children:"Scan to Collect"}),w.jsx("p",{className:"text-sm text-black/50 leading-relaxed",children:"Use the AR scanner to recognize and capture the Chomp."})]})]}),w.jsxs(ne.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.7},className:"flex gap-4",children:[w.jsx("div",{className:"text-4xl font-black text-black/10",children:"3"}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold text-black mb-1",children:"Two Ways to Play"}),w.jsxs("p",{className:"text-sm text-black/50 leading-relaxed",children:[w.jsx("span",{className:"font-bold text-black",children:"Solo:"})," Collect Chomps for your personal collection.",w.jsx("br",{}),w.jsx("span",{className:"font-bold text-black",children:"Battle:"})," Claim territory for your team and compete!"]})]})]})]})]},"how")]}),w.jsx("div",{className:"p-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:w.jsx(ne.button,{whileTap:{scale:.98},onClick:E,disabled:!k(),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:`w-full py-5 font-bold text-lg tracking-wide transition-all ${o===2?"bg-white text-black":k()?"bg-black text-white":"bg-black/10 text-black/30 cursor-not-allowed"}`,children:o===3?"LET'S GO":o===2?"CONTINUE":"NEXT"})})]})}const Ci={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}},G6=24*60*60*1e3;function q6(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"now";const n=Math.floor(e/60);if(n<60)return`${n}m`;const i=Math.floor(n/60);return i<24?`${i}h`:`${Math.floor(i/24)}d`}function _m(t){if(!t)return!1;const e=t.toDate?t.toDate():new Date(t);return Date.now()-e.getTime()<G6}function Z6(){const{player:t,teamScores:e,recentCaptures:n,isOnline:i,artPoints:r,allPlayers:o}=Hi(),a=V.useMemo(()=>{let M=0,I=0;return r==null||r.forEach(T=>{if(T.capturedBy&&T.status!=="ghost"&&_m(T.capturedAt)){const S=ho(T);T.capturedBy==="red"&&(M+=S),T.capturedBy==="blue"&&(I+=S)}}),{red:M,blue:I}},[r]),u=a.red+a.blue,h=u>0?Math.round(a.red/u*100):50,f=100-h,m=a.red>a.blue?"red":a.blue>a.red?"blue":null,g=(r==null?void 0:r.filter(M=>M.capturedBy==="red"&&M.status!=="ghost"&&_m(M.capturedAt)).length)||0,_=(r==null?void 0:r.filter(M=>M.capturedBy==="blue"&&M.status!=="ghost"&&_m(M.capturedAt)).length)||0,k=((r==null?void 0:r.filter(M=>M.status!=="ghost").length)||0)-g-_,R=V.useMemo(()=>{var T,S;const M=(o==null?void 0:o.filter(F=>F.name&&F.name!=="Street Artist"))||[],I=M.findIndex(F=>F.id===t.id||F.name===t.name);return I>=0?M[I]={...M[I],score:Math.max(M[I].score,t.score||0),captures:Math.max(M[I].captures||0,t.captureCount||((T=t.capturedArt)==null?void 0:T.length)||0)}:t.team&&t.name&&t.name!=="Street Artist"&&M.push({id:t.id||"current",name:t.name,team:t.team,score:t.score||0,captures:t.captureCount||((S=t.capturedArt)==null?void 0:S.length)||0}),M.sort((F,$)=>($.score||0)-(F.score||0)).slice(0,5)},[o,t]);return w.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi",children:[w.jsxs("div",{className:"p-6 pt-10",children:[w.jsx(ne.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-1",children:i?"LIVE":"OFFLINE"}),w.jsx(ne.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl font-bold text-black tracking-tight",children:"Battle Room"})]}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-6 mb-8",children:[w.jsxs("div",{className:"flex justify-between items-end mb-4",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-sm text-black/40 mb-1",children:"RED"}),w.jsx("div",{className:"text-5xl font-black",style:{color:m==="red"?Ci.red.color:"rgba(0,0,0,0.2)"},children:a.red})]}),w.jsx("div",{className:"text-2xl font-bold text-black/20 pb-2",children:"vs"}),w.jsxs("div",{className:"text-right",children:[w.jsx("div",{className:"text-sm text-black/40 mb-1",children:"BLUE"}),w.jsx("div",{className:"text-5xl font-black",style:{color:m==="blue"?Ci.blue.color:"rgba(0,0,0,0.2)"},children:a.blue})]})]}),w.jsxs("div",{className:"h-2 bg-black/5 flex overflow-hidden",children:[w.jsx(ne.div,{className:"h-full",style:{backgroundColor:Ci.red.color},initial:{width:"50%"},animate:{width:`${h}%`},transition:{duration:.8,ease:"easeOut"}}),w.jsx(ne.div,{className:"h-full",style:{backgroundColor:Ci.blue.color},initial:{width:"50%"},animate:{width:`${f}%`},transition:{duration:.8,ease:"easeOut"}})]}),w.jsxs("div",{className:"flex justify-between mt-2 text-xs text-black/30",children:[w.jsxs("span",{children:[h,"%"]}),w.jsxs("span",{children:[f,"%"]})]}),w.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t border-black/5",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-2xl font-black",style:{color:Ci.red.color},children:g}),w.jsx("div",{className:"text-xs text-black/30",children:g===1?"chomp":"chomps"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-lg font-bold text-black/20",children:k}),w.jsx("div",{className:"text-xs text-black/30",children:"unclaimed"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-2xl font-black",style:{color:Ci.blue.color},children:_}),w.jsx("div",{className:"text-xs text-black/30",children:_===1?"chomp":"chomps"})]})]})]}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"px-6 mb-6",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-3",children:"TOP PLAYERS"}),w.jsx("div",{className:"space-y-1",children:R.length===0?w.jsx("div",{className:"py-4 text-center text-black/30 text-sm",children:"No players yet"}):R.map((M,I)=>{var F;const T=M.name===t.name,S=((F=Ci[M.team])==null?void 0:F.color)||"#888";return w.jsxs("div",{className:`flex items-center gap-3 py-2 ${T?"bg-black/5 -mx-2 px-2":""}`,children:[w.jsx("div",{className:"w-6 text-lg font-black text-black/20",children:I+1}),w.jsx("div",{className:"w-1 h-6",style:{backgroundColor:S}}),w.jsx("div",{className:"flex-1 min-w-0",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-bold text-black truncate",children:M.name}),T&&w.jsx("span",{className:"text-[10px] tracking-widest text-black/40",children:"YOU"})]})}),w.jsxs("div",{className:"text-right",children:[w.jsx("div",{className:"text-lg font-black text-black",children:M.score}),w.jsxs("div",{className:"text-[10px] text-black/30",children:[M.captures||0," chomps"]})]})]},M.id||M.name)})})]}),t.team&&w.jsx(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mx-6 mb-8 p-5",style:{backgroundColor:Ci[t.team].color},children:w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-white/60 text-xs tracking-widest mb-1",children:"YOU"}),w.jsx("div",{className:"text-2xl font-bold text-white",children:t.name}),w.jsxs("div",{className:"text-white/60 text-sm mt-1",children:["Team ",Ci[t.team].name]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("div",{className:"text-4xl font-black text-white",children:t.score}),w.jsx("div",{className:"text-white/60 text-xs",children:"points"})]})]})}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"px-6 pb-32",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40",children:"ACTIVITY"}),w.jsx("p",{className:"text-[10px] text-black/20",children:"First +50%  Steal +25%"})]}),n.length===0?w.jsxs("div",{className:"py-12 text-center",children:[w.jsx("div",{className:"text-6xl font-black text-black/5 mb-2",children:"0"}),w.jsx("div",{className:"text-black/30",children:"No captures yet"}),w.jsx("div",{className:"text-black/20 text-sm",children:"Be the first to claim territory"})]}):w.jsx("div",{className:"space-y-1",children:n.map((M,I)=>{const T=Ci[M.team]||{color:"#888"},S=M.isFirstCapture?"FIRST":M.isRecapture?"STEAL":null;return w.jsxs(ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+I*.05},className:"flex items-center gap-4 py-3 border-b border-black/5",children:[w.jsx("div",{className:"w-1 h-10 flex-shrink-0",style:{backgroundColor:T.color}}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"font-bold text-black truncate",children:M.artName}),w.jsxs("div",{className:"text-sm text-black/40",children:[M.playerName,"  ",M.area]})]}),w.jsxs("div",{className:"text-right flex-shrink-0",children:[w.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[w.jsxs("span",{className:"font-bold",style:{color:T.color},children:["+",M.points]}),S&&w.jsx("span",{className:"text-[9px] text-black/30 bg-black/5 px-1",children:S})]}),w.jsx("div",{className:"text-xs text-black/30",children:q6(M.capturedAt)})]})]},M.id)})})]})]})}function K6(t,e){const n=V.useRef(e);V.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function Q6(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const Y6=1;function X6(t){return Object.freeze({__version:Y6,map:t})}function ip(t,e){return Object.freeze({...t,...e})}const lA=V.createContext(null),uA=lA.Provider;function uv(){const t=V.useContext(lA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function cA(t){function e(n,i){const{instance:r,context:o}=t(n).current;return V.useImperativeHandle(i,()=>r),n.children==null?null:fo.createElement(uA,{value:o},n.children)}return V.forwardRef(e)}function J6(t){function e(n,i){const{instance:r}=t(n).current;return V.useImperativeHandle(i,()=>r),null}return V.forwardRef(e)}function hA(t,e){const n=V.useRef();V.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function cv(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var ny={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(GA,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,P,B;return B=function(){p=!1,v&&(P.apply(d,v),v=!1)},P=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(B,l),p=!0)},P}function m(s,l,d){var p=l[1],v=l[0],P=p-v;return s===p&&d?s:((s-v)%P+P)%P+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function E(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return E(s).split(/\s+/)}function R(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function M(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function T(s,l){return s.replace(I,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var $="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var b=0;function C(s){var l=+new Date,d=Math.max(0,16-(l-b));return b=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||U("RequestAnimationFrame")||C,j=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function O(s,l,d){if(d&&N===C)s.call(l);else return N.call(window,a(s,l))}function z(s){s&&j.call(window,s)}var D={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:E,splitWords:k,setOptions:R,getParamString:M,template:T,isArray:S,indexOf:F,emptyImageUrl:$,requestFn:N,cancelFn:j,requestAnimFrame:O,cancelAnimFrame:z};function me(){}me.extend=function(s){var l=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(Ge(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,B=p._initHooks.length;P<B;P++)p._initHooks[P].call(this)}},l},me.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},me.mergeOptions=function(s){return r(this.prototype.options,s),this},me.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Ge(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var be={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var v=0,P=s.length;v<P;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var v=arguments.length===1,P=0,B=s.length;P<B;P++)v?this._off(s[P]):this._off(s[P],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,P;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,P=p.length;v<P;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var B=this._listens(s,l,d);if(B!==!1){var W=p[B];this._firingCount&&(W.fn=g,this._events[s]=p=p.slice()),p.splice(B,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var P=0,B=v.length;P<B;P++){var W=v[P],q=W.fn;W.once&&this.off(s,q,W.ctx),q.call(W.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var P=this._events&&this._events[s];if(P&&P.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var B in this._eventParents)if(this._eventParents[B].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,P=p.length;v<P;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var v=0,P=s.length;v<P;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};be.addEventListener=be.on,be.removeEventListener=be.clearAllEventListeners=be.off,be.addOneTimeEventListener=be.once,be.fireEvent=be.fire,be.hasEventListeners=be.listens;var at=me.extend(be);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var he=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=he(this.x),this.y=he(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function J(s,l,d){return s instanceof Z?s:S(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function ie(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}ie.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Se(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=J(s):s=Se(s),s instanceof ie?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Se(s);var l=this.min,d=this.max,p=s.min,v=s.max,P=v.x>=l.x&&p.x<=d.x,B=v.y>=l.y&&p.y<=d.y;return P&&B},overlaps:function(s){s=Se(s);var l=this.min,d=this.max,p=s.min,v=s.max,P=v.x>l.x&&p.x<d.x,B=v.y>l.y&&p.y<d.y;return P&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return Se(J(l.x-p,l.y-v),J(d.x+p,d.y+v))},equals:function(s){return s?(s=Se(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Se(s,l){return!s||s instanceof ie?s:new ie(s,l)}function Xe(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}Xe.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof ke)p=s,v=s;else if(s instanceof Xe){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(pe(s)||Le(s)):this;return!l&&!d?(this._southWest=new ke(p.lat,p.lng),this._northEast=new ke(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new Xe(new ke(l.lat-p,l.lng-v),new ke(d.lat+p,d.lng+v))},getCenter:function(){return new ke((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ke(this.getNorth(),this.getWest())},getSouthEast:function(){return new ke(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ke||"lat"in s?s=pe(s):s=Le(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof Xe?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=Le(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),P=v.lat>=l.lat&&p.lat<=d.lat,B=v.lng>=l.lng&&p.lng<=d.lng;return P&&B},overlaps:function(s){s=Le(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),P=v.lat>l.lat&&p.lat<d.lat,B=v.lng>l.lng&&p.lng<d.lng;return P&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Le(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(s,l){return s instanceof Xe?s:new Xe(s,l)}function ke(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}ke.prototype={equals:function(s,l){if(!s)return!1;s=pe(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return qt.distance(this,pe(s))},wrap:function(){return qt.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Le([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new ke(this.lat,this.lng,this.alt)}};function pe(s,l,d){return s instanceof ke?s:S(s)&&typeof s[0]!="object"?s.length===3?new ke(s[0],s[1],s[2]):s.length===2?new ke(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ke(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new ke(s,l,d)}var ct={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new ie(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ke(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var P=s.getSouthWest(),B=s.getNorthEast(),W=new ke(P.lat-p,P.lng-v),q=new ke(B.lat-p,B.lng-v);return new Xe(W,q)}},qt=r({},ct,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,P=Math.sin((l.lat-s.lat)*d/2),B=Math.sin((l.lng-s.lng)*d/2),W=P*P+Math.cos(p)*Math.cos(v)*B*B,q=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*q}}),ee=6378137,le={R:ee,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new ke((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=ee*Math.PI;return new ie([-s,-s],[s,s])}()};function ue(s,l,d,p){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}ue.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ie(s,l,d,p){return new ue(s,l,d,p)}var fe=r({},qt,{code:"EPSG:3857",projection:le,transformation:function(){var s=.5/(Math.PI*le.R);return Ie(s,.5,-s,.5)}()}),Ne=r({},fe,{code:"EPSG:900913"});function Et(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function lt(s,l){var d="",p,v,P,B,W,q;for(p=0,P=s.length;p<P;p++){for(W=s[p],v=0,B=W.length;v<B;v++)q=W[v],d+=(v?"L":"M")+q.x+" "+q.y;d+=l?ce.svg?"z":"x":""}return d||"M0 0"}var ye=document.documentElement.style,Ae="ActiveXObject"in window,Ve=Ae&&!document.addEventListener,Re="msLaunchUri"in navigator&&!("documentMode"in document),Je=pn("webkit"),Wi=pn("android"),Vn=pn("android 2")||pn("android 3"),gl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ns=Wi&&pn("Google")&&gl<537&&!("AudioNode"in window),Oo=!!window.opera,yl=!Re&&pn("chrome"),Do=pn("gecko")&&!Je&&!Oo&&!Ae,sp=!yl&&pn("safari"),Ic=pn("phantom"),_l="OTransition"in ye,Ac=navigator.platform.indexOf("Win")===0,Ir=Ae&&"transition"in ye,Ls="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Vn,Vo="MozPerspective"in ye,$i=!window.L_DISABLE_3D&&(Ir||Ls||Vo)&&!_l&&!Ic,Ar=typeof orientation<"u"||pn("mobile"),jo=Ar&&Je,bc=Ar&&Ls,br=!window.PointerEvent&&window.MSPointerEvent,vl=!!(window.PointerEvent||br),Dt="ontouchstart"in window||!!window.TouchEvent,kc=!window.L_NO_TOUCH&&(Dt||vl),Ms=Ar&&Oo,Os=Ar&&Do,op=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ap=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),kr=function(){return!!document.createElement("canvas").getContext}(),wl=!!(document.createElementNS&&Et("svg").createSVGRect),lp=!!wl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Fo=!wl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Rc=navigator.platform.indexOf("Mac")===0,Nc=navigator.platform.indexOf("Linux")===0;function pn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ce={ie:Ae,ielt9:Ve,edge:Re,webkit:Je,android:Wi,android23:Vn,androidStock:Ns,opera:Oo,chrome:yl,gecko:Do,safari:sp,phantom:Ic,opera12:_l,win:Ac,ie3d:Ir,webkit3d:Ls,gecko3d:Vo,any3d:$i,mobile:Ar,mobileWebkit:jo,mobileWebkit3d:bc,msPointer:br,pointer:vl,touch:kc,touchNative:Dt,mobileOpera:Ms,mobileGecko:Os,retina:op,passiveEvents:ap,canvas:kr,svg:wl,vml:Fo,inlineSvg:lp,mac:Rc,linux:Nc},Lc=ce.msPointer?"MSPointerDown":"pointerdown",ti=ce.msPointer?"MSPointerMove":"pointermove",xl=ce.msPointer?"MSPointerUp":"pointerup",Tl=ce.msPointer?"MSPointerCancel":"pointercancel",Ds={touchstart:Lc,touchmove:ti,touchend:xl,touchcancel:Tl},Bo={touchstart:El,touchmove:jn,touchend:jn,touchcancel:jn},Gi={},Mc=!1;function Oc(s,l,d){return l==="touchstart"&&Vs(),Bo[l]?(d=Bo[l].bind(this,d),s.addEventListener(Ds[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function up(s,l,d){if(!Ds[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ds[l],d,!1)}function zo(s){Gi[s.pointerId]=s}function Dc(s){Gi[s.pointerId]&&(Gi[s.pointerId]=s)}function Uo(s){delete Gi[s.pointerId]}function Vs(){Mc||(document.addEventListener(Lc,zo,!0),document.addEventListener(ti,Dc,!0),document.addEventListener(xl,Uo,!0),document.addEventListener(Tl,Uo,!0),Mc=!0)}function jn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Gi)l.touches.push(Gi[d]);l.changedTouches=[l],s(l)}}function El(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Pt(l),jn(s,l)}function cp(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Vc=200;function jc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(P){if(P.detail!==1){p=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var B=Al(P);if(!(B.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!B.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var W=Date.now();W-d<=Vc?(p++,p===2&&l(cp(P))):p=1,d=W}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Fc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var js=Ho(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qi=Ho(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Pl=qi==="webkitTransition"||qi==="OTransition"?qi+"End":"transitionend";function Sl(s){return typeof s=="string"?document.getElementById(s):s}function Rr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function ze(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function We(s){var l=s.parentNode;l&&l.removeChild(s)}function on(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Fn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Bn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Fs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=yi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function oe(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Fs(s,l)){var P=yi(s);Zi(s,(P?P+" ":"")+l)}}function et(s,l){s.classList!==void 0?s.classList.remove(l):Zi(s,E((" "+yi(s)+" ").replace(" "+l+" "," ")))}function Zi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function yi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function mn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Bc(s,l)}function Bc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Ho(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Ki(s,l,d){var p=l||new Z(0,0);s.style[js]=(ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function yt(s,l){s._leaflet_pos=l,ce.any3d?Ki(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Qi(s){return s._leaflet_pos||new Z(0,0)}var ni,Sn,Wo;if("onselectstart"in document)ni=function(){Te(window,"selectstart",Pt)},Sn=function(){Qe(window,"selectstart",Pt)};else{var Nr=Ho(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ni=function(){if(Nr){var s=document.documentElement.style;Wo=s[Nr],s[Nr]="none"}},Sn=function(){Nr&&(document.documentElement.style[Nr]=Wo,Wo=void 0)}}function $o(){Te(window,"dragstart",Pt)}function Go(){Qe(window,"dragstart",Pt)}var Bs,_i;function Cl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(qo(),Bs=s,_i=s.style.outlineStyle,s.style.outlineStyle="none",Te(window,"keydown",qo))}function qo(){Bs&&(Bs.style.outlineStyle=_i,Bs=void 0,_i=void 0,Qe(window,"keydown",qo))}function zc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function zn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var hp={__proto__:null,TRANSFORM:js,TRANSITION:qi,TRANSITION_END:Pl,get:Sl,getStyle:Rr,create:ze,remove:We,empty:on,toFront:Fn,toBack:Bn,hasClass:Fs,addClass:oe,removeClass:et,setClass:Zi,getClass:yi,setOpacity:mn,testProp:Ho,setTransform:Ki,setPosition:yt,getPosition:Qi,get disableTextSelection(){return ni},get enableTextSelection(){return Sn},disableImageDrag:$o,enableImageDrag:Go,preventOutline:Cl,restoreOutline:qo,getSizedParentNode:zc,getScale:zn};function Te(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Zo(s,v,l[v],d);else{l=k(l);for(var P=0,B=l.length;P<B;P++)Zo(s,l[P],d,p)}return this}var an="_leaflet_events";function Qe(s,l,d,p){if(arguments.length===1)Lr(s),delete s[an];else if(l&&typeof l=="object")for(var v in l)zs(s,v,l[v],d);else if(l=k(l),arguments.length===2)Lr(s,function(W){return F(l,W)!==-1});else for(var P=0,B=l.length;P<B;P++)zs(s,l[P],d,p);return this}function Lr(s,l){for(var d in s[an]){var p=d.split(/\d/)[0];(!l||l(p))&&zs(s,p,null,null,d)}}var Yi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zo(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[an]&&s[an][v])return this;var P=function(W){return d.call(p||s,W||window.event)},B=P;!ce.touchNative&&ce.pointer&&l.indexOf("touch")===0?P=Oc(s,l,P):ce.touch&&l==="dblclick"?P=jc(s,P):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Yi[l]||l,P,ce.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(W){W=W||window.event,kl(s,W)&&B(W)},s.addEventListener(Yi[l],P,!1)):s.addEventListener(l,B,!1):s.attachEvent("on"+l,P),s[an]=s[an]||{},s[an][v]=P}function zs(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var P=s[an]&&s[an][v];if(!P)return this;!ce.touchNative&&ce.pointer&&l.indexOf("touch")===0?up(s,l,P):ce.touch&&l==="dblclick"?Fc(s,P):"removeEventListener"in s?s.removeEventListener(Yi[l]||l,P,!1):s.detachEvent("on"+l,P),s[an][v]=null}function qe(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Il(s){return Zo(s,"wheel",qe),this}function Us(s){return Te(s,"mousedown touchstart dblclick contextmenu",qe),s._leaflet_disable_click=!0,this}function Pt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function vi(s){return Pt(s),qe(s),this}function Al(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Hs(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=zn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var wi=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function bl(s){return ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/wi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function kl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Ws={__proto__:null,on:Te,off:Qe,stopPropagation:qe,disableScrollPropagation:Il,disableClickPropagation:Us,preventDefault:Pt,stop:vi,getPropagationPath:Al,getMousePosition:Hs,getWheelDelta:bl,isExternalTarget:kl,addListener:Te,removeListener:Qe},Rl=at.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Qi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),yt(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Me=at.extend({options:{crs:fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=R(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(pe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qi&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Te(this._proxy,Pl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(pe(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),P=s instanceof Z?s:this.latLngToContainerPoint(s),B=P.subtract(v).multiplyBy(1-1/p),W=this.containerPointToLatLng(v.add(B));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Le(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var P=p.subtract(d).divideBy(2),B=this.project(s.getSouthWest(),v),W=this.project(s.getNorthEast(),v),q=this.unproject(B.add(W).divideBy(2).add(P),v);return{center:q,zoom:v}},fitBounds:function(s,l){if(s=Le(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Rl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){oe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ce.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),P=this.getSize(),B=this._zoom;s=pe(s),l=l===void 0?B:l;var W=Math.max(P.x,P.y),q=W*this.getZoomScale(B,l),Q=v.distanceTo(p)||1,re=1.42,_e=re*re;function Oe(St){var ih=St?-1:1,zA=St?q:W,UA=q*q-W*W+ih*_e*_e*Q*Q,HA=2*zA*_e*Q,gp=UA/HA,Ov=Math.sqrt(gp*gp+1)-gp,WA=Ov<1e-9?-18:Math.log(Ov);return WA}function ln(St){return(Math.exp(St)-Math.exp(-St))/2}function Vt(St){return(Math.exp(St)+Math.exp(-St))/2}function Wn(St){return ln(St)/Vt(St)}var yn=Oe(0);function aa(St){return W*(Vt(yn)/Vt(yn+re*St))}function VA(St){return W*(Vt(yn)*Wn(yn+re*St)-ln(yn))/_e}function jA(St){return 1-Math.pow(1-St,1.5)}var FA=Date.now(),Lv=(Oe(1)-yn)/re,BA=d.duration?1e3*d.duration:1e3*Lv*.8;function Mv(){var St=(Date.now()-FA)/BA,ih=jA(St)*Lv;St<=1?(this._flyToFrame=O(Mv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(VA(ih)/Q)),B),this.getScaleZoom(W/aa(ih),B),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Mv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Le(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Le(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),P=this.project(s),B=this.getPixelBounds(),W=Se([B.min.add(d),B.max.subtract(p)]),q=W.getSize();if(!W.contains(P)){this._enforcingBounds=!0;var Q=P.subtract(W.getCenter()),re=W.extend(P).getSize().subtract(q);v.x+=Q.x<0?-re.x:re.x,v.y+=Q.y<0?-re.y:re.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),P=p.subtract(v);return!P.x&&!P.y?this:(s.animate&&s.pan?this.panBy(P):(s.pan&&this._rawPanBy(P),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new ke(l,d),v=p.toBounds(s.coords.accuracy*2),P=this._locateOptions;if(P.setView){var B=this.getBoundsZoom(v);this.setView(p,P.maxZoom?Math.min(B,P.maxZoom):B)}var W={latlng:p,bounds:v,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&(W[q]=s.coords[q]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),We(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)We(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=ze("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Xe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Le(s),d=J(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),P=this.getMaxZoom(),B=s.getNorthWest(),W=s.getSouthEast(),q=this.getSize().subtract(d),Q=Se(this.project(W,p),this.project(B,p)).getSize(),re=ce.any3d?this.options.zoomSnap:1,_e=q.x/Q.x,Oe=q.y/Q.y,ln=l?Math.max(_e,Oe):Math.min(_e,Oe);return p=this.getScaleZoom(ln,p),re&&(p=Math.round(p/(re/100))*(re/100),p=l?Math.ceil(p/re)*re:Math.floor(p/re)*re),Math.max(v,Math.min(P,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ie(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(pe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(pe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(pe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Le(s))},distance:function(s,l){return this.options.crs.distance(pe(s),pe(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(s)))},mouseEventToContainerPoint:function(s){return Hs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Sl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Te(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,oe(s,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Rr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),yt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(oe(s.markerPane,"leaflet-zoom-hide"),oe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){yt(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){yt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Qe:Te;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",P=s.target||s.srcElement,B=!1;P;){if(p=this._targets[h(P)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){B=!0;break}if(p&&p.listens(l,!0)&&(v&&!kl(P,s)||(d.push(p),v))||P===this._container)break;P=P.parentNode}return!d.length&&!B&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Cl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var P=[],B=0;B<d.length;B++)d[B].listens(l,!0)&&P.push(d[B]);v=P.concat(v)}if(v.length){l==="contextmenu"&&Pt(s);var W=v[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);q.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Q?W.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(B=0;B<v.length;B++)if(v[B].fire(l,q,!0),q.originalEvent._stopped||v[B].options.bubblingMouseEvents===!1&&F(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Qi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Se([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),P=new ie(p.subtract(v),p.add(v)),B=this._getBoundsOffset(P,d,l);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?s:this.unproject(p.add(B),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ie(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Se(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),P=p.max.subtract(s.max),B=this._rebound(v.x,-P.x),W=this._rebound(v.y,-P.y);return new Z(B,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ce.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=js,p=this._proxy.style[d];Ki(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){We(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Ki(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(O(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ko(s,l){return new Me(s,l)}var gn=me.extend({options:{position:"topright"},initialize:function(s){R(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return oe(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(We(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),xi=function(s){return new gn(s)};Me.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=ze("div",l+"control-container",this._container);function p(v,P){var B=l+v+" "+l+P;s[v+P]=ze("div",B,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)We(this._controlCorners[s]);We(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Uc=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){R(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return gn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=ze("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Us(l),Il(l);var p=this._section=ze("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Te(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=ze("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Te(v,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){Pt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=ze("div",s+"-base",p),this._separator=ze("div",s+"-separator",p),this._overlaysList=ze("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;on(this._baseLayersList),on(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Te(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(p),P.appendChild(v);var B=s.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var P=s.length-1;P>=0;P--)l=s[P],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(P=0;P<v.length;P++)this._map.hasLayer(v[P])&&this._map.removeLayer(v[P]);for(P=0;P<p.length;P++)this._map.hasLayer(p[P])||this._map.addLayer(p[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Te(s,"click",Pt),this.expand();var l=this;setTimeout(function(){Qe(s,"click",Pt),l._preventClick=!1})}}),Hc=function(s,l,d){return new Uc(s,l,d)},Xi=gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=ze("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var P=ze("a",d,p);return P.innerHTML=s,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),Us(P),Te(P,"click",vi),Te(P,"click",v,this),Te(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";et(this._zoomInButton,l),et(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(oe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(oe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Me.mergeOptions({zoomControl:!0}),Me.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xi,this.addControl(this.zoomControl))});var Wc=function(s){return new Xi(s)},Nl=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=ze("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=ze("div",l,d)),s.imperial&&(this._iScale=ze("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Ll=function(s){return new Nl(s)},Ml='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Qo=gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?Ml+" ":"")+"Leaflet</a>"},initialize:function(s){R(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=ze("div","leaflet-control-attribution"),Us(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Me.mergeOptions({attributionControl:!0}),Me.addInitHook(function(){this.options.attributionControl&&new Qo().addTo(this)});var Yo=function(s){return new Qo(s)};gn.Layers=Uc,gn.Zoom=Xi,gn.Scale=Nl,gn.Attribution=Qo,xi.layers=Hc,xi.zoom=Wc,xi.scale=Ll,xi.attribution=Yo;var Cn=me.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Cn.addTo=function(s,l){return s.addHandler(l,this),this};var $c={Events:be},Ti=ce.touch?"touchstart mousedown":"mousedown",ii=at.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){R(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Te(this._dragStartTarget,Ti,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ii._dragging===this&&this.finishDrag(!0),Qe(this._dragStartTarget,Ti,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Fs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ii._dragging===this&&this.finishDrag();return}if(!(ii._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ii._dragging=this,this._preventOutline&&Cl(this._element),$o(),ni(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=zc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Qi(this._element),this._parentScale=zn(d);var p=s.type==="mousedown";Te(document,p?"mousemove":"touchmove",this._onMove,this),Te(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Pt(s),this._moved||(this.fire("dragstart"),this._moved=!0,oe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),yt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){et(document.body,"leaflet-dragging"),this._lastTarget&&(et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qe(document,"mousemove touchmove",this._onMove,this),Qe(document,"mouseup touchend touchcancel",this._onUp,this),Go(),Sn();var l=this._moved&&this._moving;this._moving=!1,ii._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ol(s,l,d){var p,v=[1,4,2,8],P,B,W,q,Q,re,_e,Oe;for(P=0,re=s.length;P<re;P++)s[P]._code=G(s[P],l);for(W=0;W<4;W++){for(_e=v[W],p=[],P=0,re=s.length,B=re-1;P<re;B=P++)q=s[P],Q=s[B],q._code&_e?Q._code&_e||(Oe=H(Q,q,_e,l,d),Oe._code=G(Oe,l),p.push(Oe)):(Q._code&_e&&(Oe=H(Q,q,_e,l,d),Oe._code=G(Oe,l),p.push(Oe)),p.push(q));s=p}return s}function Dl(s,l){var d,p,v,P,B,W,q,Q,re;if(!s||s.length===0)throw new Error("latlngs not passed");$e(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var _e=pe([0,0]),Oe=Le(s),ln=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());ln<1700&&(_e=Xo(s));var Vt=s.length,Wn=[];for(d=0;d<Vt;d++){var yn=pe(s[d]);Wn.push(l.project(pe([yn.lat-_e.lat,yn.lng-_e.lng])))}for(W=q=Q=0,d=0,p=Vt-1;d<Vt;p=d++)v=Wn[d],P=Wn[p],B=v.y*P.x-P.y*v.x,q+=(v.x+P.x)*B,Q+=(v.y+P.y)*B,W+=B*3;W===0?re=Wn[0]:re=[q/W,Q/W];var aa=l.unproject(J(re));return pe([aa.lat+_e.lat,aa.lng+_e.lng])}function Xo(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var P=pe(s[v]);l+=P.lat,d+=P.lng,p++}return pe([l/p,d/p])}var Jo={__proto__:null,clipPolygon:Ol,polygonCenter:Dl,centroid:Xo};function Zt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Mr(s,d),s}function Vl(s,l,d){return Math.sqrt(Ee(s,l,d,!0))}function Gc(s,l,d){return Ee(s,l,d)}function Mr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var P,B=[];for(P=0;P<d;P++)v[P]&&B.push(s[P]);return B}function c(s,l,d,p,v){var P=0,B,W,q;for(W=p+1;W<=v-1;W++)q=Ee(s[W],s[p],s[v],!0),q>P&&(B=W,P=q);P>d&&(l[B]=1,c(s,l,d,p,B),c(s,l,d,B,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,P=s.length;p<P;p++)te(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<P-1&&d.push(s[P-1]),d}var x;function A(s,l,d,p,v){var P=p?x:G(s,d),B=G(l,d),W,q,Q;for(x=B;;){if(!(P|B))return[s,l];if(P&B)return!1;W=P||B,q=H(s,l,W,d,v),Q=G(q,d),W===P?(s=q,P=Q):(l=q,B=Q)}}function H(s,l,d,p,v){var P=l.x-s.x,B=l.y-s.y,W=p.min,q=p.max,Q,re;return d&8?(Q=s.x+P*(q.y-s.y)/B,re=q.y):d&4?(Q=s.x+P*(W.y-s.y)/B,re=W.y):d&2?(Q=q.x,re=s.y+B*(q.x-s.x)/P):d&1&&(Q=W.x,re=s.y+B*(W.x-s.x)/P),new Z(Q,re,v)}function G(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function te(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Ee(s,l,d,p){var v=l.x,P=l.y,B=d.x-v,W=d.y-P,q=B*B+W*W,Q;return q>0&&(Q=((s.x-v)*B+(s.y-P)*W)/q,Q>1?(v=d.x,P=d.y):Q>0&&(v+=B*Q,P+=W*Q)),B=s.x-v,W=s.y-P,p?B*B+W*W:new Z(v,P)}function $e(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ze(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$e(s)}function vt(s,l){var d,p,v,P,B,W,q,Q;if(!s||s.length===0)throw new Error("latlngs not passed");$e(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var re=pe([0,0]),_e=Le(s),Oe=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());Oe<1700&&(re=Xo(s));var ln=s.length,Vt=[];for(d=0;d<ln;d++){var Wn=pe(s[d]);Vt.push(l.project(pe([Wn.lat-re.lat,Wn.lng-re.lng])))}for(d=0,p=0;d<ln-1;d++)p+=Vt[d].distanceTo(Vt[d+1])/2;if(p===0)Q=Vt[0];else for(d=0,P=0;d<ln-1;d++)if(B=Vt[d],W=Vt[d+1],v=B.distanceTo(W),P+=v,P>p){q=(P-p)/v,Q=[W.x-q*(W.x-B.x),W.y-q*(W.y-B.y)];break}var yn=l.unproject(J(Q));return pe([yn.lat+re.lat,yn.lng+re.lng])}var Un={__proto__:null,simplify:Zt,pointToSegmentDistance:Vl,closestPointOnSegment:Gc,clipSegment:A,_getEdgeIntersection:H,_getBitCode:G,_sqClosestPointOnSegment:Ee,isFlat:$e,_flat:Ze,polylineCenter:vt},ri={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new ke(s.y,s.x)},bounds:new ie([-180,-90],[180,90])},Hn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,P=Math.sqrt(1-v*v),B=P*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-B)/(1+B),P/2);return p=-d*Math.log(Math.max(W,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),P=Math.exp(-s.y/d),B=Math.PI/2-2*Math.atan(P),W=0,q=.1,Q;W<15&&Math.abs(q)>1e-7;W++)Q=v*Math.sin(B),Q=Math.pow((1-Q)/(1+Q),v/2),q=Math.PI/2-2*Math.atan(P*Q)-B,B+=q;return new ke(B*l,s.x*l/d)}},Ei={__proto__:null,LonLat:ri,Mercator:Hn,SphericalMercator:le},ea=r({},qt,{code:"EPSG:3395",projection:Hn,transformation:function(){var s=.5/(Math.PI*Hn.R);return Ie(s,.5,-s,.5)}()}),ta=r({},qt,{code:"EPSG:4326",projection:ri,transformation:Ie(1/180,1,-1/180,.5)}),mA=r({},ct,{projection:ri,transformation:Ie(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});ct.Earth=qt,ct.EPSG3395=ea,ct.EPSG3857=fe,ct.EPSG900913=Ne,ct.EPSG4326=ta,ct.Simple=mA;var si=at.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Me.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var na=si.extend({initialize:function(s,l){R(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),gA=function(s,l){return new na(s,l)},Ji=na.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),na.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),na.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Xe;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),yA=function(s,l){return new Ji(s,l)},ia=me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){R(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=J(p),P=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),P&&(s.style.marginLeft=-P.x+"px",s.style.marginTop=-P.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function _A(s){return new ia(s)}var jl=ia.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof jl.imagePath!="string"&&(jl.imagePath=this._detectIconPath()),(this.options.imagePath||jl.imagePath)+ia.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var P=p.exec(d);return P&&P[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=ze("div","leaflet-default-icon-path",document.body),l=Rr(s,"background-image")||Rr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),pv=Cn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ii(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),oe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,P=Qi(l._icon),B=d.getPixelBounds(),W=d.getPixelOrigin(),q=Se(B.min._subtract(W).add(v),B.max._subtract(W).subtract(v));if(!q.contains(P)){var Q=J((Math.max(q.max.x,P.x)-q.max.x)/(B.max.x-q.max.x)-(Math.min(q.min.x,P.x)-q.min.x)/(B.min.x-q.min.x),(Math.max(q.max.y,P.y)-q.max.y)/(B.max.y-q.max.y)-(Math.min(q.min.y,P.y)-q.min.y)/(B.min.y-q.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),yt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=O(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Qi(l._icon),v=l._map.layerPointToLatLng(p);d&&yt(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),qc=si.extend({options:{icon:new jl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){R(this,l),this._latlng=pe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),oe(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Te(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),P=!1;v!==this._shadow&&(this._removeShadow(),P=!0),v&&(oe(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&P&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(this._icon,"focus",this._panOnFocus,this),We(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&We(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&yt(this._icon,s),this._shadow&&yt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),pv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new pv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&mn(this._icon,s),this._shadow&&mn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vA(s,l){return new qc(s,l)}var Or=si.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return R(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zc=Or.extend({options:{fill:!0,radius:10},initialize:function(s,l){R(this,l),this._latlng=pe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Or.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ie(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wA(s,l){return new Zc(s,l)}var dp=Zc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),R(this,l),this._latlng=pe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Xe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Or.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===qt.distance){var v=Math.PI/180,P=this._mRadius/qt.R/v,B=d.project([l+P,s]),W=d.project([l-P,s]),q=B.add(W).divideBy(2),Q=d.unproject(q).lat,re=Math.acos((Math.cos(P*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(re)||re===0)&&(re=P/Math.cos(Math.PI/180*l)),this._point=q.subtract(d.getPixelOrigin()),this._radius=isNaN(re)?0:q.x-d.project([Q,s-re]).x,this._radiusY=q.y-B.y}else{var _e=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(_e).x}this._updateBounds()}});function xA(s,l,d){return new dp(s,l,d)}var er=Or.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){R(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Ee,v,P,B=0,W=this._parts.length;B<W;B++)for(var q=this._parts[B],Q=1,re=q.length;Q<re;Q++){v=q[Q-1],P=q[Q];var _e=p(s,v,P,!0);_e<l&&(l=_e,d=p(s,v,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=pe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Xe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return $e(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=$e(s),p=0,v=s.length;p<v;p++)d?(l[p]=pe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof ke,v=s.length,P,B;if(p){for(B=[],P=0;P<v;P++)B[P]=this._map.latLngToLayerPoint(s[P]),d.extend(B[P]);l.push(B)}else for(P=0;P<v;P++)this._projectLatlngs(s[P],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,P,B,W,q;for(d=0,v=0,P=this._rings.length;d<P;d++)for(q=this._rings[d],p=0,B=q.length;p<B-1;p++)W=A(q[p],q[p+1],s,p,!0),W&&(l[v]=l[v]||[],l[v].push(W[0]),(W[1]!==q[p+1]||p===B-2)&&(l[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Zt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,P,B,W,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,P=this._parts.length;d<P;d++)for(W=this._parts[d],p=0,B=W.length,v=B-1;p<B;v=p++)if(!(!l&&p===0)&&Vl(s,W[v],W[p])<=q)return!0;return!1}});function TA(s,l){return new er(s,l)}er._flat=Ze;var ra=er.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=er.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof ke&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){er.prototype._setLatLngs.call(this,s),$e(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $e(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new ie(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,P;p<v;p++)P=Ol(this._rings[p],s,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,P,B,W,q,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(P=0,q=this._parts.length;P<q;P++)for(d=this._parts[P],B=0,Q=d.length,W=Q-1;B<Q;W=B++)p=d[B],v=d[W],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||er.prototype._containsPoint.call(this,s,!0)}});function EA(s,l){return new ra(s,l)}var tr=Ji.extend({initialize:function(s,l){R(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var P=this.options;if(P.filter&&!P.filter(s))return this;var B=Kc(s,P);return B?(B.feature=Xc(s),B.defaultOptions=B.options,this.resetStyle(B),P.onEachFeature&&P.onEachFeature(s,B),this.addLayer(B)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Kc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],P=l&&l.pointToLayer,B=l&&l.coordsToLatLng||fp,W,q,Q,re;if(!p&&!d)return null;switch(d.type){case"Point":return W=B(p),mv(P,s,W,l);case"MultiPoint":for(Q=0,re=p.length;Q<re;Q++)W=B(p[Q]),v.push(mv(P,s,W,l));return new Ji(v);case"LineString":case"MultiLineString":return q=Qc(p,d.type==="LineString"?0:1,B),new er(q,l);case"Polygon":case"MultiPolygon":return q=Qc(p,d.type==="Polygon"?1:2,B),new ra(q,l);case"GeometryCollection":for(Q=0,re=d.geometries.length;Q<re;Q++){var _e=Kc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);_e&&v.push(_e)}return new Ji(v);case"FeatureCollection":for(Q=0,re=d.features.length;Q<re;Q++){var Oe=Kc(d.features[Q],l);Oe&&v.push(Oe)}return new Ji(v);default:throw new Error("Invalid GeoJSON object.")}}function mv(s,l,d,p){return s?s(l,d):new qc(d,p&&p.markersInheritOptions&&p)}function fp(s){return new ke(s[1],s[0],s[2])}function Qc(s,l,d){for(var p=[],v=0,P=s.length,B;v<P;v++)B=l?Qc(s[v],l-1,d):(d||fp)(s[v]),p.push(B);return p}function pp(s,l){return s=pe(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function Yc(s,l,d,p){for(var v=[],P=0,B=s.length;P<B;P++)v.push(l?Yc(s[P],$e(s[P])?0:l-1,d,p):pp(s[P],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function sa(s,l){return s.feature?r({},s.feature,{geometry:l}):Xc(l)}function Xc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var mp={toGeoJSON:function(s){return sa(this,{type:"Point",coordinates:pp(this.getLatLng(),s)})}};qc.include(mp),dp.include(mp),Zc.include(mp),er.include({toGeoJSON:function(s){var l=!$e(this._latlngs),d=Yc(this._latlngs,l?1:0,!1,s);return sa(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ra.include({toGeoJSON:function(s){var l=!$e(this._latlngs),d=l&&!$e(this._latlngs[0]),p=Yc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),sa(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),na.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),sa(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var P=v.toGeoJSON(s);if(d)p.push(P.geometry);else{var B=Xc(P);B.type==="FeatureCollection"?p.push.apply(p,B.features):p.push(B)}}}),d?sa(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function gv(s,l){return new tr(s,l)}var PA=gv,Jc=si.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Le(l),R(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){We(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Fn(this._image),this},bringToBack:function(){return this._map&&Bn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Le(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:ze("img");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ki(this._image,d,l)},_reset:function(){var s=this._image,l=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();yt(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),SA=function(s,l,d){return new Jc(s,l,d)},yv=Jc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:ze("video");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var B=ze("source");B.src=this._url[P],l.appendChild(B)}}});function CA(s,l,d){return new yv(s,l,d)}var _v=Jc.extend({_initImage:function(){var s=this._image=this._url;oe(s,"leaflet-image-layer"),this._zoomAnimated&&oe(s,"leaflet-zoom-animated"),this.options.className&&oe(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function IA(s,l,d){return new _v(s,l,d)}var Pi=si.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof ke||S(s))?(this._latlng=pe(s),R(this,l)):(R(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&mn(this._container,1),this.bringToFront(),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(mn(this._container,0),this._removeTimeout=setTimeout(a(We,void 0,this._container),200)):We(this._container),this.options.interactive&&(et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=pe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Fn(this._container),this},bringToBack:function(){return this._map&&Bn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Ji){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?yt(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Me.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),si.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(R(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var eh=Pi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Pi.prototype.openOn.call(this,s)},onAdd:function(s){Pi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Or||this._source.on("preclick",qe))},onRemove:function(s){Pi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Or||this._source.off("preclick",qe))},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=ze("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=ze("div",s+"-content-wrapper",l);if(this._contentNode=ze("div",s+"-content",d),Us(l),Il(this._contentNode),Te(l,"contextmenu",qe),this._tipContainer=ze("div",s+"-tip-container",l),this._tip=ze("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=ze("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Te(p,"click",function(v){Pt(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,P="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",oe(s,P)):et(s,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();yt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Rr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new Z(this._containerLeft,-d-this._containerBottom);v._add(Qi(this._container));var P=s.layerPointToContainerPoint(v),B=J(this.options.autoPanPadding),W=J(this.options.autoPanPaddingTopLeft||B),q=J(this.options.autoPanPaddingBottomRight||B),Q=s.getSize(),re=0,_e=0;P.x+p+q.x>Q.x&&(re=P.x+p-Q.x+q.x),P.x-re-W.x<0&&(re=P.x-W.x),P.y+d+q.y>Q.y&&(_e=P.y+d-Q.y+q.y),P.y-_e-W.y<0&&(_e=P.y-W.y),(re||_e)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([re,_e]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),AA=function(s,l){return new eh(s,l)};Me.mergeOptions({closePopupOnClick:!0}),Me.include({openPopup:function(s,l,d){return this._initOverlay(eh,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),si.include({bindPopup:function(s,l){return this._popup=this._initOverlay(eh,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ji||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){vi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Or)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var th=Pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Pi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Pi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ze("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,P=p.latLngToContainerPoint(p.getCenter()),B=p.layerPointToContainerPoint(s),W=this.options.direction,q=v.offsetWidth,Q=v.offsetHeight,re=J(this.options.offset),_e=this._getAnchor();W==="top"?(l=q/2,d=Q):W==="bottom"?(l=q/2,d=0):W==="center"?(l=q/2,d=Q/2):W==="right"?(l=0,d=Q/2):W==="left"?(l=q,d=Q/2):B.x<P.x?(W="right",l=0,d=Q/2):(W="left",l=q+(re.x+_e.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(re).add(_e),et(v,"leaflet-tooltip-right"),et(v,"leaflet-tooltip-left"),et(v,"leaflet-tooltip-top"),et(v,"leaflet-tooltip-bottom"),oe(v,"leaflet-tooltip-"+W),yt(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&mn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bA=function(s,l){return new th(s,l)};Me.include({openTooltip:function(s,l,d){return this._initOverlay(th,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),si.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(th,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ji||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Te(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Te(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var vv=ia.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(on(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function kA(s){return new vv(s)}ia.Default=jl;var Fl=si.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){R(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),We(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Fn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Bn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,P;p<v;p++)P=l[p].style.zIndex,l[p]!==this._container&&P&&(d=s(d,+P));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){mn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var P=Math.min(1,(s-v.loaded)/200);mn(v.el,P),P<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(We(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)We(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),P=Math.floor(l/2),B=d-1,W=new Z(+v,+P);W.z=+B;var q=this._tileCoordsToKey(W),Q=this._tiles[q];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),B>p?this._retainParent(v,P,B,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var P=2*l;P<2*l+2;P++){var B=new Z(v,P);B.z=d+1;var W=this._tileCoordsToKey(B),q=this._tiles[W];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);d+1<p&&this._retainChildren(v,P,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var P=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||P)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ce.any3d?Ki(s.el,v,p):yt(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),P=l.getSize().divideBy(p*2);return new ie(v.subtract(P),v.add(P))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),P=v.getCenter(),B=[],W=this.options.keepBuffer,q=new ie(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var re=this._tiles[Q].coords;(re.z!==this._tileZoom||!q.contains(new Z(re.x,re.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var _e=v.min.y;_e<=v.max.y;_e++)for(var Oe=v.min.x;Oe<=v.max.x;Oe++){var ln=new Z(Oe,_e);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var Vt=this._tiles[this._tileCoordsToKey(ln)];Vt?Vt.current=!0:B.push(ln)}}if(B.sort(function(yn,aa){return yn.distanceTo(P)-aa.distanceTo(P)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Wn=document.createDocumentFragment();for(Oe=0;Oe<B.length;Oe++)this._addTile(B[Oe],Wn);this._level.el.appendChild(Wn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Le(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),P=l.unproject(p,s.z),B=l.unproject(v,s.z);return[P,B]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Xe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(We(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){oe(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,ce.ielt9&&this.options.opacity<1&&mn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&O(a(this._tileReady,this,s,null,v)),yt(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(mn(d.el,0),z(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(oe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ie(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function RA(s){return new Fl(s)}var oa=Fl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=R(this,l),l.detectRetina&&ce.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Te(d,"load",a(this._tileOnLoad,this,l,d)),Te(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return T(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ce.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=$;var d=this._tiles[s].coords;We(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",$),Fl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===$))return Fl.prototype._tileReady.call(this,s,l,d)}});function wv(s,l){return new oa(s,l)}var xv=oa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=R(this,l);var v=l.detectRetina&&ce.retina?2:1,P=this.getTileSize();d.width=P.x*v,d.height=P.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,oa.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Se(d.project(l[0]),d.project(l[1])),v=p.min,P=p.max,B=(this._wmsVersion>=1.3&&this._crs===ta?[v.y,v.x,P.y,P.x]:[v.x,v.y,P.x,P.y]).join(","),W=oa.prototype.getTileUrl.call(this,s);return W+M(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function NA(s,l){return new xv(s,l)}oa.WMS=xv,wv.wms=NA;var nr=si.extend({options:{padding:.1},initialize:function(s){R(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),P=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));ce.any3d?Ki(this._container,P,d):yt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ie(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Tv=nr.extend({options:{tolerance:0},getEvents:function(){var s=nr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){nr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Te(s,"mousemove",this._onMouseMove,this),Te(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Te(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,We(this._container),Qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){nr.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=ce.retina?2:1;yt(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){nr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,P,B=s._parts,W=B.length,q=this._ctx;if(W){for(q.beginPath(),d=0;d<W;d++){for(p=0,v=B[d].length;p<v;p++)P=B[d][p],q[p?"lineTo":"moveTo"](P.x,P.y);l&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(et(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(oe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Ev(s){return ce.canvas?new Tv(s):null}var Bl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),LA={_initContainer:function(){this._container=ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(nr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Bl("shape");oe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Bl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;We(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Bl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Bl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Fn(s._container)},_bringToBack:function(s){Bn(s._container)}},nh=ce.vml?Bl:Et,zl=nr.extend({_initContainer:function(){this._container=nh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){We(this._container),Qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){nr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),yt(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=nh("path");s.options.className&&oe(l,s.options.className),s.options.interactive&&oe(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){We(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,lt(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",P=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,P)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Fn(s._path)},_bringToBack:function(s){Bn(s._path)}});ce.vml&&zl.include(LA);function Pv(s){return ce.svg||ce.vml?new zl(s):null}Me.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Ev(s)||Pv(s)}});var Sv=ra.extend({initialize:function(s,l){ra.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Le(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function MA(s,l){return new Sv(s,l)}zl.create=nh,zl.pointsToPath=lt,tr.geometryToLayer=Kc,tr.coordsToLatLng=fp,tr.coordsToLatLngs=Qc,tr.latLngToCoords=pp,tr.latLngsToCoords=Yc,tr.getFeature=sa,tr.asFeature=Xc,Me.mergeOptions({boxZoom:!0});var Cv=Cn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){We(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ni(),$o(),this._startPoint=this._map.mouseEventToContainerPoint(s),Te(document,{contextmenu:vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=ze("div","leaflet-zoom-box",this._container),oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ie(this._point,this._startPoint),d=l.getSize();yt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(We(this._box),et(this._container,"leaflet-crosshair")),Sn(),Go(),Qe(document,{contextmenu:vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Me.addInitHook("addHandler","boxZoom",Cv),Me.mergeOptions({doubleClickZoom:!0});var Iv=Cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Me.addInitHook("addHandler","doubleClickZoom",Iv),Me.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Av=Cn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ii(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){et(this._map._container,"leaflet-grab"),et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Le(this._map.options.maxBounds);this._offsetLimit=Se(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,P=(p+l+d)%s-l-d,B=Math.abs(v+d)<Math.abs(P+d)?v:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,B=d.easeLinearity,W=v.multiplyBy(B/P),q=W.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,q),re=W.multiplyBy(Q/q),_e=Q/(d.inertiaDeceleration*B),Oe=re.multiplyBy(-_e/2).round();!Oe.x&&!Oe.y?l.fire("moveend"):(Oe=l._limitOffset(Oe,l.options.maxBounds),O(function(){l.panBy(Oe,{duration:_e,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});Me.addInitHook("addHandler","dragging",Av),Me.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bv=Cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Te(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;vi(s)}}});Me.addInitHook("addHandler","keyboard",bv),Me.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var kv=Cn.extend({addHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=bl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),vi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,P=d?Math.ceil(v/d)*d:v,B=s._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,B&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+B):s.setZoomAround(this._lastMousePos,l+B))}});Me.addInitHook("addHandler","scrollWheelZoom",kv);var OA=600;Me.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var Rv=Cn.extend({addHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Te(document,"touchend",Pt),Te(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),OA),Te(document,"touchend touchcancel contextmenu",this._cancel,this),Te(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Qe(document,"touchend",Pt),Qe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Me.addInitHook("addHandler","tapHold",Rv),Me.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var Nv=Cn.extend({addHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){et(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend touchcancel",this._onTouchEnd,this),Pt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var P=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var B=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(B,this,!0),Pt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Me.addInitHook("addHandler","touchZoom",Nv),Me.BoxZoom=Cv,Me.DoubleClickZoom=Iv,Me.Drag=Av,Me.Keyboard=bv,Me.ScrollWheelZoom=kv,Me.TapHold=Rv,Me.TouchZoom=Nv,n.Bounds=ie,n.Browser=ce,n.CRS=ct,n.Canvas=Tv,n.Circle=dp,n.CircleMarker=Zc,n.Class=me,n.Control=gn,n.DivIcon=vv,n.DivOverlay=Pi,n.DomEvent=Ws,n.DomUtil=hp,n.Draggable=ii,n.Evented=at,n.FeatureGroup=Ji,n.GeoJSON=tr,n.GridLayer=Fl,n.Handler=Cn,n.Icon=ia,n.ImageOverlay=Jc,n.LatLng=ke,n.LatLngBounds=Xe,n.Layer=si,n.LayerGroup=na,n.LineUtil=Un,n.Map=Me,n.Marker=qc,n.Mixin=$c,n.Path=Or,n.Point=Z,n.PolyUtil=Jo,n.Polygon=ra,n.Polyline=er,n.Popup=eh,n.PosAnimation=Rl,n.Projection=Ei,n.Rectangle=Sv,n.Renderer=nr,n.SVG=zl,n.SVGOverlay=_v,n.TileLayer=oa,n.Tooltip=th,n.Transformation=ue,n.Util=D,n.VideoOverlay=yv,n.bind=a,n.bounds=Se,n.canvas=Ev,n.circle=xA,n.circleMarker=wA,n.control=xi,n.divIcon=kA,n.extend=r,n.featureGroup=yA,n.geoJSON=gv,n.geoJson=PA,n.gridLayer=RA,n.icon=_A,n.imageOverlay=SA,n.latLng=pe,n.latLngBounds=Le,n.layerGroup=gA,n.map=Ko,n.marker=vA,n.point=J,n.polygon=EA,n.polyline=TA,n.popup=AA,n.rectangle=MA,n.setOptions=R,n.stamp=h,n.svg=Pv,n.svgOverlay=IA,n.tileLayer=wv,n.tooltip=bA,n.transformation=Ie,n.version=i,n.videoOverlay=CA;var DA=window.L;n.noConflict=function(){return window.L=DA,this},window.L=n})})(ny,ny.exports);var Mo=ny.exports;const hv=B1(Mo);function Cc(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function dv(t,e){return e==null?function(i,r){const o=V.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=V.useRef();o.current||(o.current=t(i,r));const a=V.useRef(i),{instance:u}=o.current;return V.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function dA(t,e){V.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function fA(t){return function(n){const i=uv(),r=t(cv(n,i),i);return K6(i.map,n.attribution),hA(r.current,n.eventHandlers),dA(r.current,i),r}}function eF(t,e){const n=V.useRef();V.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function tF(t){return function(n){const i=uv(),r=t(cv(n,i),i);return hA(r.current,n.eventHandlers),dA(r.current,i),eF(r.current,n),r}}function nF(t,e){const n=dv(t,e),i=fA(n);return cA(i)}function fv(t,e){const n=dv(t,e),i=tF(n);return cA(i)}function iF(t,e){const n=dv(t,e),i=fA(n);return J6(i)}function rF(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function rp(){return uv().map}function sF(t){const e=rp();return V.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const oF=fv(function({center:e,children:n,...i},r){const o=new Mo.CircleMarker(e,i);return Cc(o,ip(r,{overlayContainer:o}))},Q6);function iy(){return iy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iy.apply(this,arguments)}function aF({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[_]=V.useState({className:r,id:o,style:u}),[E,k]=V.useState(null);V.useImperativeHandle(g,()=>(E==null?void 0:E.map)??null,[E]);const R=V.useCallback(I=>{if(I!==null&&E===null){const T=new Mo.Map(I,m);n!=null&&f!=null?T.setView(n,f):t!=null&&T.fitBounds(t,e),h!=null&&T.whenReady(h),k(X6(T))}},[]);V.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const M=E?fo.createElement(uA,{value:E},i):a??null;return fo.createElement("div",iy({},_,{ref:R}),M)}const lF=V.forwardRef(aF),uF=nF(function({position:e,...n},i){const r=new Mo.Marker(e,n);return Cc(r,ip(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),cF=fv(function({positions:e,...n},i){const r=new Mo.Polygon(e,n);return Cc(r,ip(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),L1=fv(function({positions:e,...n},i){const r=new Mo.Polyline(e,n);return Cc(r,ip(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),hF=iF(function({url:e,...n},i){const r=new Mo.TileLayer(e,cv(n,i));return Cc(r,i)},function(e,n,i){rF(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Dn=(t,e)=>{const n=V.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>V.createElement("svg",{ref:m,...dF,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${fF(t)}`,u].join(" "),...f},[...e.map(([g,_])=>V.createElement(g,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=Dn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=Dn("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=Dn("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=Dn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=Dn("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=Dn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=Dn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Dn("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=Dn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=Dn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=Dn("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=Dn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=Dn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),od={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};delete hv.Icon.Default.prototype._getIconUrl;hv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const PF="/street-art-ctf/chumper.png",D1=t=>{if(!t)return 0;const e=Date.now(),n=t instanceof Date?t.getTime():new Date(t).getTime(),i=(e-n)/(1e3*60*60);return Math.min(i/24,1)},SF=(t,e=!1,n=!1,i=0,r=!1,o=!1)=>{let a="";const u=1-i*.5,h=1-i*.3;return e?a="grayscale(100%) opacity(0.1)":t?t==="red"?a=`hue-rotate(160deg) saturate(${1.5*u}) opacity(${h})`:a=`saturate(${u}) opacity(${h})`:a=`grayscale(100%) opacity(${r||o&&!n?.3:1})`,hv.divIcon({html:`<div style="position:relative;"><img src="${PF}" style="width: 32px; height: 32px; filter: ${a};" /></div>`,className:"chumper-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};function CF({devMode:t}){const[e,n]=V.useState(rA),[i,r]=V.useState(iA);return sF({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?w.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-purple-500 shadow-lg px-3 py-2 font-nohemi",children:w.jsxs("div",{className:"text-[10px] font-mono text-white",children:[w.jsxs("div",{children:["Z ",e]}),w.jsx("div",{children:i[0]}),w.jsx("div",{children:i[1]})]})}):null}function IF({hood:t}){const e=rp();return V.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function AF(){const t=rp();return V.useEffect(()=>{const e=localStorage.getItem("streetart-ctf-lastCapture");if(e)try{const n=JSON.parse(e);localStorage.removeItem("streetart-ctf-lastCapture"),n.location&&Array.isArray(n.location)&&n.location.length===2&&setTimeout(()=>{t.flyTo(n.location,17,{duration:1.5})},500)}catch{localStorage.removeItem("streetart-ctf-lastCapture")}},[t]),null}function bF(){const t=rp(),[e,n]=V.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return w.jsx(ne.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 bg-[#FAFAFA] shadow-lg flex items-center justify-center",whileTap:{scale:.95},children:w.jsx(ne.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:w.jsx(gF,{size:20,className:"text-black"})})})}function kF({point:t,onClose:e,isDiscovered:n,isSoloView:i}){var u;const r=t.capturedBy?((u=od[t.capturedBy])==null?void 0:u.color)||"#888":null,o=ho(t),a=t.status==="ghost";return w.jsx(ne.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000] font-nohemi",children:w.jsxs("div",{className:"bg-[#FAFAFA] p-5 shadow-2xl",children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-black/30 hover:text-black transition-colors",children:w.jsx(TF,{size:20})}),w.jsxs("div",{className:"pr-8",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a&&w.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"ARCHIVED"}),i?n?w.jsx("span",{className:"text-[10px] tracking-widest text-purple-600",children:"DISCOVERED"}):w.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"UNDISCOVERED"}):t.capturedBy?w.jsxs("span",{className:"text-[10px] tracking-widest",style:{color:r},children:["TEAM ",t.capturedBy.toUpperCase()]}):w.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"UNCLAIMED"})]}),w.jsx("h3",{className:"text-2xl font-bold text-black tracking-tight mb-1",children:t.name}),w.jsx("p",{className:"text-black/40 mb-4",children:t.area}),w.jsxs("div",{className:"flex items-center gap-6",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-3xl font-black text-black",children:o}),w.jsx("div",{className:"text-xs text-black/40",children:"points"})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-lg font-bold text-black capitalize",children:t.size}),w.jsx("div",{className:"text-xs text-black/40",children:"size"})]}),t.mhd&&w.jsxs("div",{children:[w.jsx("div",{className:"text-lg font-bold",style:{color:t.mhd==="metroB"?"#eab308":"#E53935"},children:t.mhd==="metroB"?"Metro B":"Tram 12"}),w.jsx("div",{className:"text-xs text-black/40",children:"nearby"})]})]}),!i&&t.capturedByPlayer&&w.jsxs("div",{className:"mt-4 pt-4 border-t border-black/10",children:[w.jsx("span",{className:"text-xs text-black/40",children:"Captured by "}),w.jsx("span",{className:"text-sm font-bold text-black",children:t.capturedByPlayer})]})]})]})})}const vm=[null,...co],RF=(t,e)=>{if(e==="off")return[];const n=t.filter(r=>r.capturedBy&&r.status!=="ghost"),i=[];return n.forEach(r=>{const[o,a]=r.location,u=.002,h=r.capturedBy;if(e==="circles"){const m=[];for(let g=0;g<32;g++){const _=g/32*2*Math.PI;m.push([o+u*Math.cos(_),a+u*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id,capturedAt:r.capturedAt})}else if(e==="squares"){const f=u*.8;i.push({team:h,coords:[[o-f,a-f*1.5],[o-f,a+f*1.5],[o+f,a+f*1.5],[o+f,a-f*1.5]],pointId:r.id,capturedAt:r.capturedAt})}else if(e==="hexagons"){const f=u*.9,m=[];for(let g=0;g<6;g++){const _=g/6*2*Math.PI+Math.PI/6;m.push([o+f*Math.cos(_),a+f*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id,capturedAt:r.capturedAt})}}),i};function NF(){var j;const{player:t,artPoints:e,captureArt:n,discoveries:i}=Hi(),[r,o]=V.useState(null),[a,u]=V.useState(!1),[h,f]=V.useState(e),[m,g]=V.useState(uf.praha),[_,E]=V.useState("solo"),[k,R]=V.useState(!1),[M,I]=V.useState("circles");V.useEffect(()=>{f(e)},[e]);const T=O=>{a?f(z=>z.map(D=>{if(D.id===O.id){const Ge=(vm.indexOf(D.capturedBy)+1)%vm.length;return{...D,capturedBy:vm[Ge]}}return D})):o(O)},S=()=>{f(e.map(O=>({...O,capturedBy:null})))},F=a?h:e,$=V.useMemo(()=>z6(F),[F]),U=V.useMemo(()=>RF(F,M),[F,M]),b=V.useMemo(()=>oA(F),[F]);Object.values(b).reduce((O,z)=>O+z,0),Object.keys(i).length,hi.length;const C=V.useMemo(()=>{const O=hi.filter(D=>D.hood===m.id);return{found:O.filter(D=>i[D.id]).length,total:O.length}},[i,m]),N=_==="solo";return w.jsxs("div",{className:"relative w-full h-full",children:[w.jsxs("div",{className:"absolute top-0 left-0 right-0 pt-safe px-3 pb-2 z-[1000] flex flex-col gap-2 font-nohemi",style:{paddingTop:"max(env(safe-area-inset-top), 12px)"},children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"flex bg-[#FAFAFA] shadow-lg",children:Object.values(uf).map(O=>w.jsx("button",{onClick:()=>g(O),className:`px-4 py-2 text-xs font-bold transition-all whitespace-nowrap ${m.id===O.id?"bg-black text-white":"text-black/40"}`,children:O.name.toUpperCase()},O.id))}),w.jsx("div",{className:"ml-auto flex items-center gap-2 bg-[#FAFAFA] shadow-lg px-4 py-2",children:N?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"text-sm font-black",style:{color:(j=od[t.team])==null?void 0:j.color},children:C.found}),w.jsxs("span",{className:"text-xs text-black/30",children:["/ ",C.total]})]}):w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"text-sm font-black",style:{color:od.red.color},children:b.red||0}),w.jsx("span",{className:"text-xs text-black/20",children:"vs"}),w.jsx("span",{className:"text-sm font-black",style:{color:od.blue.color},children:b.blue||0})]})})]}),w.jsxs("div",{className:"flex bg-[#FAFAFA] shadow-lg",children:[w.jsx("button",{onClick:()=>E("solo"),className:`flex-1 px-6 py-3 text-sm font-black tracking-wide transition-all ${N?"bg-black text-white":"text-black/30"}`,children:"SOLO"}),w.jsx("button",{onClick:()=>E("multi"),className:`flex-1 px-6 py-3 text-sm font-black tracking-wide transition-all ${N?"text-black/30":"bg-black text-white"}`,children:"BATTLE"})]})]}),w.jsxs("div",{className:"absolute bottom-24 right-4 z-[1000] flex flex-col gap-2",children:[w.jsx(ne.button,{onClick:()=>u(!a),className:`w-10 h-10 shadow-lg flex items-center justify-center transition-colors ${a?"bg-purple-500 text-white":"bg-[#FAFAFA] text-black/30"}`,whileTap:{scale:.95},children:w.jsx(mF,{size:16})}),a&&w.jsx(ne.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:S,className:"w-10 h-10 bg-[#FAFAFA] shadow-lg flex items-center justify-center text-black/30",whileTap:{scale:.95},children:w.jsx(vF,{size:16})})]}),w.jsx(Qa,{children:a&&w.jsx(ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-16 left-1/2 -translate-x-1/2 z-[1000] px-4 py-2 bg-purple-500 shadow-lg font-nohemi",children:w.jsx("span",{className:"text-xs text-white font-bold tracking-widest",children:"DEV MODE"})})}),w.jsxs(lF,{center:iA,zoom:rA,minZoom:F6,maxZoom:B6,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#FAFAFA"},children:[w.jsx(hF,{url:A1.tileUrl,attribution:A1.attribution}),w.jsx(bF,{}),w.jsx(CF,{devMode:a}),w.jsx(IF,{hood:m}),w.jsx(AF,{}),w.jsx(L1,{positions:b1.map(O=>O.location),pathOptions:{color:"#eab308",weight:4,opacity:.6}}),b1.map(O=>w.jsx(oF,{center:O.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#FAFAFA",fillOpacity:1,weight:2}},O.name)),!N&&U.map((O,z)=>{const D=O.capturedAt?D1(O.capturedAt):0,me=.15*(1-D*.7),Ge=.4*(1-D*.5);return w.jsx(cF,{positions:O.coords,pathOptions:{color:gm(O.team),fillColor:gm(O.team),fillOpacity:me,weight:1,opacity:Ge}},`territory-${O.pointId}`)}),!N&&k&&Object.entries($).map(([O,z])=>z.map((D,me)=>w.jsx(L1,{positions:[D.from,D.to],pathOptions:{color:gm(O),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${O}-line-${me}`))),F.filter(O=>N||O.status!=="ghost").map(O=>{const z=O.status==="ghost",D=i[O.id],me=N?D?t.team:null:O.capturedBy,Ge=!N&&O.capturedBy&&O.capturedAt?D1(O.capturedAt):0,be=SF(me,z,D,Ge,!N,N);return w.jsx(uF,{position:O.location,icon:be,eventHandlers:{click:at=>{at.originalEvent.stopPropagation(),T(O)}}},`${O.id}-${me||"none"}-${Math.floor(Ge*10)}`)})]}),w.jsx(Qa,{children:r&&w.jsx(kF,{point:r,onClose:()=>o(null),isDiscovered:i[r.id],isSoloView:N})})]})}function LF(){return w.jsx(ne.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w.jsx(NF,{})})}function MF(){const{player:t}=Hi(),[e,n]=V.useState(!1);return V.useEffect(()=>{if(t.team&&!e){n(!0);const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"}},[t.team,e]),t.team?w.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-[#FAFAFA] font-nohemi",children:w.jsxs(ne.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},children:[w.jsx(ne.div,{className:"text-7xl font-black text-black/10 mb-4",animate:{opacity:[.1,.2,.1]},transition:{repeat:1/0,duration:1.5},children:"AR"}),w.jsx("h2",{className:"text-xl font-bold mb-2 text-black",children:"Opening Scanner"}),w.jsx("p",{className:"text-black/40 text-sm",children:"Point camera at street art"})]})}):w.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-[#FAFAFA] font-nohemi",children:w.jsxs(ne.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[w.jsx("div",{className:"text-8xl font-black text-black/5 mb-4",children:"!"}),w.jsx("h2",{className:"text-2xl font-bold mb-2 text-black",children:"Join a Team"}),w.jsx("p",{className:"text-black/40 text-sm",children:"Select your team from home to start scanning"})]})})}const eu={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};function OF(){var m,g;const{teamScores:t,player:e,allPlayers:n}=Hi(),i=t.red+t.blue,r=i>0?Math.round(t.red/i*100):50,o=i>0?100-r:50,a=t.red>t.blue?"red":t.blue>t.red?"blue":null,u=n.filter(_=>_.name&&_.name!=="Street Artist"),h=u.findIndex(_=>_.id===e.id||_.name===e.name);h>=0?u[h]={...u[h],score:Math.max(u[h].score,e.score||0),captures:Math.max(u[h].captures||0,e.captureCount||((m=e.capturedArt)==null?void 0:m.length)||0)}:e.team&&e.name&&e.name!=="Street Artist"&&u.push({id:e.id||"current",name:e.name,team:e.team,score:e.score||0,captures:e.captureCount||((g=e.capturedArt)==null?void 0:g.length)||0});const f=u.sort((_,E)=>(E.score||0)-(_.score||0));return w.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi pb-20",children:[w.jsxs("div",{className:"p-6 pt-10",children:[w.jsx(ne.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-1",children:"LEADERBOARD"}),w.jsx(ne.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl font-bold text-black tracking-tight",children:"Rankings"})]}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-6 mb-8",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"TEAMS"}),w.jsxs("div",{className:"flex justify-between items-end mb-4",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-6xl font-black",style:{color:a==="red"?eu.red.color:"rgba(0,0,0,0.15)"},children:t.red}),w.jsxs("div",{className:"text-sm text-black/40 mt-1",children:["RED  ",r,"%"]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("div",{className:"text-6xl font-black",style:{color:a==="blue"?eu.blue.color:"rgba(0,0,0,0.15)"},children:t.blue}),w.jsxs("div",{className:"text-sm text-black/40 mt-1",children:["BLUE  ",o,"%"]})]})]}),w.jsxs("div",{className:"h-3 bg-black/5 flex overflow-hidden",children:[w.jsx(ne.div,{style:{backgroundColor:eu.red.color},initial:{width:"50%"},animate:{width:`${r}%`},transition:{duration:.8}}),w.jsx(ne.div,{style:{backgroundColor:eu.blue.color},initial:{width:"50%"},animate:{width:`${o}%`},transition:{duration:.8}})]})]}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"px-6",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"PLAYERS"}),w.jsxs("div",{className:"space-y-1",children:[f.map((_,E)=>{var I;const k=_.name===e.name,R=((I=eu[_.team])==null?void 0:I.color)||"#888",M=E<3;return w.jsxs(ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+E*.03},className:`flex items-center gap-4 py-3 border-b border-black/5 ${k?"bg-black/5 -mx-2 px-2":""}`,children:[w.jsx("div",{className:"w-8",children:w.jsx("span",{className:`text-2xl font-black ${M?"text-black":"text-black/20"}`,children:E+1})}),w.jsx("div",{className:"w-1 h-8",style:{backgroundColor:R}}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:`font-bold truncate ${k?"text-black":"text-black/80"}`,children:_.name}),k&&w.jsx("span",{className:"text-[10px] tracking-widest text-black/40",children:"YOU"})]}),w.jsxs("div",{className:"text-xs text-black/40",children:[_.captures||0," captures"]})]}),w.jsx("div",{className:"text-right",children:w.jsx("div",{className:"text-xl font-black text-black",children:_.score})})]},_.id||_.name)}),f.length===0&&w.jsxs("div",{className:"py-12 text-center",children:[w.jsx("div",{className:"text-6xl font-black text-black/5 mb-2",children:"0"}),w.jsx("div",{className:"text-black/30",children:"No players yet"})]})]})]})]})}const DF={"art-46":{id:"art-46",badgeNumber:1,name:"Centrum Chomp #1",image:"badges/badge-1.png",area:"Florenc"},"art-47":{id:"art-47",badgeNumber:2,name:"Centrum Chomp #2",image:"badges/badge-2.png",area:"Florenc"},"art-48":{id:"art-48",badgeNumber:3,name:"Centrum Chomp #3",image:"badges/badge-3.png",area:"Karln"},"art-49":{id:"art-49",badgeNumber:4,name:"Centrum Chomp #4",image:"badges/badge-4.png",area:"Karln"},"art-50":{id:"art-50",badgeNumber:5,name:"Centrum Chomp #5",image:"badges/badge-5.png",area:"Karln"},"art-51":{id:"art-51",badgeNumber:6,name:"Centrum Chomp #6",image:"badges/badge-6.png",area:"Centrum"},"art-52":{id:"art-52",badgeNumber:7,name:"Centrum Chomp #7",image:"badges/badge-7.png",area:"Centrum"},"art-53":{id:"art-53",badgeNumber:8,name:"Centrum Chomp #8",image:"badges/badge-8.png",area:"Centrum"},"art-54":{id:"art-54",badgeNumber:9,name:"Centrum Chomp #9",image:"badges/badge-9.png",area:"Centrum"},"art-55":{id:"art-55",badgeNumber:10,name:"Centrum Chomp #10",image:"badges/badge-10.png",area:"Centrum"},"art-56":{id:"art-56",badgeNumber:11,name:"Centrum Chomp #11",image:"badges/badge-11.png",area:"Florenc"}},pA=Object.values(DF).sort((t,e)=>t.badgeNumber-e.badgeNumber),V1=pA.length,VF=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,jF=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,j1={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}},wm={Vysoany:{name:"Vysoany"},Hloubtn:{name:"Hloubtn"},Podbrady:{name:"Podbrady"},Palmovka:{name:"Palmovka"},Karln:{name:"Karln"},Libe:{name:"Libe"},Prosek:{name:"Prosek"},Florenc:{name:"Florenc"},Centrum:{name:"Centrum"}};function FF(){const{player:t,artPoints:e,resetAll:n,discoveries:i}=Hi(),[r,o]=V.useState(!1),[a,u]=V.useState(!1),[h,f]=V.useState(!1);V.useEffect(()=>{f(VF())},[]);const m=(e==null?void 0:e.filter(T=>t.capturedArt.includes(T.id)))||[],g=V.useMemo(()=>{const T={},S=Object.keys(i||{});return Object.keys(wm).forEach(F=>{const $=hi.filter(b=>b.area===F),U=$.filter(b=>S.includes(b.id));T[F]={total:$.length,found:U.length,complete:U.length===$.length&&$.length>0}}),T},[i]),_=V.useMemo(()=>{const T=hi.length,S=Object.keys(i||{}).length;return{total:T,found:S,percent:Math.round(S/T*100)}},[i]),E=t.team?j1[t.team].color:"#888",k=t.team?j1[t.team].name:"?",R=V.useMemo(()=>{const T=Object.keys(i||{}),S=new Set;return hi.forEach(F=>{T.includes(F.id)&&S.add(F.area)}),S.size},[i]),M=V.useMemo(()=>{const T=Object.keys(i||{});return pA.filter(S=>T.includes(S.id))},[i]),I=async()=>{if(!r){o(!0);try{const T=["red","blue"];let S=0,F=0;for(const $ of hi){const U=T[Math.floor(Math.random()*T.length)],b=ho($);U==="red"?S+=b:F+=b,await bi(An(At,"streetart-captures",$.id),{artId:$.id,capturedBy:U,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:b,isFirstCapture:!0,isRecapture:!1})}await bi(An(At,"streetart-teams","red"),{score:S},{merge:!0}),await bi(An(At,"streetart-teams","blue"),{score:F},{merge:!0})}catch(T){console.error("Failed to randomize:",T)}o(!1)}};return w.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi pb-20",children:[w.jsxs("div",{className:"p-6 pt-10",children:[w.jsx(ne.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-1",children:"YOUR COLLECTION"}),w.jsx(ne.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl font-bold text-black tracking-tight",children:t.name}),w.jsxs(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},style:{color:E},children:["Team ",k]})]}),w.jsx(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-6 mb-8",children:w.jsxs("div",{className:"flex gap-6",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-5xl font-black text-black",children:t.score}),w.jsx("div",{className:"text-xs text-black/40 mt-1",children:"POINTS"})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-5xl font-black text-black",children:t.captureCount||m.length}),w.jsx("div",{className:"text-xs text-black/40 mt-1",children:"CAPTURES"})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-5xl font-black text-black",children:t.maxStreak||0}),w.jsx("div",{className:"text-xs text-black/40 mt-1",children:"BEST STREAK"})]})]})}),V1>0&&w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"px-6 mb-8",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40",children:"CHOMPS"}),w.jsxs("p",{className:"text-sm text-black/40",children:[w.jsx("span",{className:"font-bold text-black",children:M.length})," / ",V1]})]}),M.length===0?w.jsxs("div",{className:"py-8 text-center",children:[w.jsx("div",{className:"text-4xl font-black text-black/10 mb-2",children:"?"}),w.jsx("p",{className:"text-black/30 text-sm",children:"Scan street art to collect Chomps!"})]}):w.jsx("div",{className:"flex flex-wrap gap-3",children:M.map((T,S)=>w.jsxs(ne.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+S*.05,type:"spring",stiffness:300,damping:15},className:"relative",children:[w.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden shadow-lg",style:{boxShadow:`0 4px 15px ${E}40`,border:`2px solid ${E}`},children:w.jsx("img",{src:T.image,alt:T.name,className:"w-full h-full object-cover"})}),w.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:E},children:T.badgeNumber})]},T.id))})]}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"px-6 mb-8",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"COLLECTION"}),w.jsxs("div",{className:"mb-4",children:[w.jsxs("div",{className:"flex justify-between mb-2",children:[w.jsx("span",{className:"font-bold text-black",children:"Total Collected"}),w.jsxs("span",{className:"text-black/40",children:[_.found," / ",_.total]})]}),w.jsx("div",{className:"h-2 bg-black/5",children:w.jsx(ne.div,{className:"h-full",style:{backgroundColor:E},initial:{width:0},animate:{width:`${_.percent}%`},transition:{duration:.8,delay:.4}})})]}),w.jsx("div",{className:"space-y-3",children:Object.entries(wm).map(([T,S],F)=>{const $=g[T]||{found:0,total:0,complete:!1},U=$.total>0?Math.round($.found/$.total*100):0;return w.jsxs(ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+F*.1},className:"flex items-center gap-4",children:[w.jsx("div",{className:"w-8 text-2xl font-black text-black/10",children:$.found}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex justify-between mb-1",children:[w.jsxs("span",{className:`text-sm ${$.complete?"font-bold text-black":"text-black/60"}`,children:[S.name,$.complete&&w.jsx("span",{className:"ml-2 text-green-600",children:"COMPLETE"})]}),w.jsxs("span",{className:"text-xs text-black/30",children:[$.found,"/",$.total]})]}),w.jsx("div",{className:"h-1 bg-black/5",children:w.jsx("div",{className:"h-full transition-all duration-500",style:{backgroundColor:$.complete?"#22c55e":"rgba(0,0,0,0.2)",width:`${U}%`}})})]})]},T)})})]}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"px-6 mb-8",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"STATS"}),w.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[w.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[w.jsx("span",{className:"text-black/50",children:"Recaptures"}),w.jsx("span",{className:"font-bold text-black",children:t.recaptureCount||0})]}),w.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[w.jsx("span",{className:"text-black/50",children:"First captures"}),w.jsx("span",{className:"font-bold text-black",children:t.firstCaptureCount||0})]}),w.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[w.jsx("span",{className:"text-black/50",children:"Current streak"}),w.jsx("span",{className:"font-bold text-black",children:t.streak||0})]}),w.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[w.jsx("span",{className:"text-black/50",children:"Areas"}),w.jsxs("span",{className:"font-bold text-black",children:[R," / ",Object.keys(wm).length]})]})]})]}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"px-6 mb-8",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"ADMIN"}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("button",{onClick:I,disabled:r,className:"w-full py-3 bg-black/5 text-black/60 font-bold text-sm tracking-wide hover:bg-black/10 transition-colors disabled:opacity-50",children:r?"RANDOMIZING...":"RANDOMIZE TERRITORIES"}),w.jsx("button",{onClick:n,className:"w-full py-3 text-black/30 font-bold text-sm tracking-wide hover:text-red-500 transition-colors",children:"RESET ALL DATA"})]})]}),w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"px-6 mb-6",children:[!h&&w.jsx("button",{onClick:()=>u(!0),className:"w-full py-3 bg-black text-white font-bold text-sm tracking-wide mb-3",children:"ADD TO HOME SCREEN"}),w.jsx("p",{className:"text-center text-xs text-black/40",children:"Best experience on Chrome browser"})]}),w.jsx(Qa,{children:a&&w.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-6",onClick:()=>u(!1),children:w.jsxs(ne.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white p-6 max-w-sm w-full",onClick:T=>T.stopPropagation(),children:[w.jsx("h3",{className:"text-xl font-bold text-black mb-4",children:"Add to Home Screen"}),jF()?w.jsxs("div",{className:"space-y-4 text-black/70",children:[w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"1."}),w.jsxs("p",{children:["Tap the ",w.jsx("strong",{children:"Share"})," button ",w.jsx("span",{className:"inline-block w-5 h-5 align-middle",children:w.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:w.jsx("path",{d:"M16 5l-1.42 1.42-1.59-1.59V16h-2V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z"})})})," at the bottom of Safari"]})]}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"2."}),w.jsxs("p",{children:["Scroll down and tap ",w.jsx("strong",{children:'"Add to Home Screen"'})]})]}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"3."}),w.jsxs("p",{children:["Tap ",w.jsx("strong",{children:'"Add"'})," in the top right"]})]})]}):w.jsxs("div",{className:"space-y-4 text-black/70",children:[w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"1."}),w.jsxs("p",{children:["Tap the ",w.jsx("strong",{children:"menu"})," () in Chrome"]})]}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"2."}),w.jsxs("p",{children:["Tap ",w.jsx("strong",{children:'"Add to Home screen"'})," or ",w.jsx("strong",{children:'"Install app"'})]})]})]}),w.jsx("button",{onClick:()=>u(!1),className:"w-full mt-6 py-3 bg-black text-white font-bold text-sm",children:"GOT IT"})]})})}),w.jsxs("div",{className:"flex justify-center gap-6 py-6",children:[w.jsxs("a",{href:"https://www.instagram.com/postptacek/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-black/40 hover:text-black transition-colors",children:[w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),w.jsx("span",{className:"text-sm font-bold",children:"Instagram"})]}),w.jsxs("a",{href:"https://discord.gg/UdR2Gkpd",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-black/40 hover:text-black transition-colors",children:[w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),w.jsx("span",{className:"text-sm font-bold",children:"Discord"})]})]}),w.jsx("p",{className:"text-center text-xs text-black/20 pb-4",children:"v3.0.5"})]})}const BF="123";function zF(){const t=bf(),{artPoints:e,allPlayers:n,teamScores:i}=Hi(),[r,o]=V.useState(!1),[a,u]=V.useState(""),[h,f]=V.useState("all"),[m,g]=V.useState({}),[_,E]=V.useState(null);V.useEffect(()=>{sessionStorage.getItem("admin-auth")==="true"&&o(!0)},[]);const k=U=>{U.preventDefault(),a===BF?(o(!0),sessionStorage.setItem("admin-auth","true")):(E({type:"error",text:"Wrong password"}),setTimeout(()=>E(null),2e3))},R=(U,b)=>{E({type:U,text:b}),setTimeout(()=>E(null),3e3)},M=async(U,b)=>{g(C=>({...C,[U]:!0}));try{const C=b==="ghost"?"active":"ghost";await bi(An(At,"streetart-captures",U),{status:C,statusUpdatedAt:new Date},{merge:!0}),R("success",`Point ${U} set to ${C}`)}catch(C){R("error","Failed to update: "+C.message),console.error(C)}g(C=>({...C,[U]:!1}))},I=async U=>{g(b=>({...b,[`reset-${U}`]:!0}));try{await Au(An(At,"streetart-captures",U)),R("success",`Ownership reset for ${U}`)}catch(b){R("error","Failed to reset ownership"),console.error(b)}g(b=>({...b,[`reset-${U}`]:!1}))},T=async()=>{if(confirm("Are you sure? This will reset ALL captures!")){g(U=>({...U,resetAll:!0}));try{const b=(await tf(Js(At,"streetart-captures"))).docs.map(C=>Au(C.ref));await Promise.all(b),R("success","All captures reset!")}catch(U){R("error","Failed to reset all captures"),console.error(U)}g(U=>({...U,resetAll:!1}))}},S=async()=>{if(confirm("Are you sure? This will delete ALL player data!")){g(U=>({...U,resetPlayers:!0}));try{const b=(await tf(Js(At,"streetart-players"))).docs.map(C=>Au(C.ref));await Promise.all(b),R("success","All players reset!")}catch(U){R("error","Failed to reset players"),console.error(U)}g(U=>({...U,resetPlayers:!1}))}},F=h==="all"?e:e.filter(U=>U.hood===h),$={total:e.length,captured:e.filter(U=>U.capturedBy).length,red:e.filter(U=>U.capturedBy==="red").length,blue:e.filter(U=>U.capturedBy==="blue").length,ghost:e.filter(U=>U.status==="ghost").length,players:n.length};return r?w.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] pb-24 overflow-y-auto",children:[w.jsx("div",{className:"sticky top-0 z-50 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-4 py-3",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2",children:w.jsx(pF,{size:24,className:"text-white/70"})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(M1,{size:18,className:"text-purple-400"}),w.jsx("span",{className:"font-bold",children:"God Mode"})]}),w.jsx("div",{className:"w-10"})]})}),_&&w.jsx(ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:`fixed top-16 left-4 right-4 z-50 p-3 rounded-xl text-center text-sm font-medium ${_.type==="error"?"bg-red-500/90":"bg-green-500/90"}`,children:_.text}),w.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:$.total}),w.jsx("div",{className:"text-xs text-white/40",children:"Points"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-red-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-red-400",children:$.red}),w.jsx("div",{className:"text-xs text-red-400/60",children:"Red"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-blue-400",children:$.blue}),w.jsx("div",{className:"text-xs text-blue-400/60",children:"Blue"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-white/60",children:$.ghost}),w.jsx("div",{className:"text-xs text-white/40",children:"Ghost"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:$.players}),w.jsx("div",{className:"text-xs text-white/40",children:"Players"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:$.captured}),w.jsx("div",{className:"text-xs text-white/40",children:"Captured"})]})]}),w.jsxs("div",{className:"px-4 mb-6",children:[w.jsxs("h2",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[w.jsx(EF,{size:14}),"Danger Zone"]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("button",{onClick:T,disabled:m.resetAll,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetAll?w.jsx(Mh,{size:16,className:"animate-spin"}):w.jsx(wF,{size:16}),"Reset Captures"]}),w.jsxs("button",{onClick:S,disabled:m.resetPlayers,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetPlayers?w.jsx(Mh,{size:16,className:"animate-spin"}):w.jsx(O1,{size:16}),"Reset Players"]})]})]}),w.jsx("div",{className:"px-4 mb-4",children:w.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[w.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h==="all"?"bg-white text-black":"bg-white/10 text-white/60"}`,children:"All"}),Object.values(uf).map(U=>w.jsx("button",{onClick:()=>f(U.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h===U.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:U.name},U.id))]})}),w.jsxs("div",{className:"px-4 space-y-2",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2",children:["Art Points (",F.length,")"]}),F.map(U=>{var C;const b=U.status==="ghost";return w.jsxs("div",{className:`p-4 rounded-xl border ${b?"bg-white/5 border-white/10 opacity-60":"bg-white/5 border-white/10"}`,children:[w.jsxs("div",{className:"flex items-start justify-between mb-2",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-medium",children:U.name}),b&&w.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-white/10 text-white/40",children:"GHOST"})]}),w.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[U.id,"  ",U.area,"  ",U.size,"  ",(C=sA[U.size])==null?void 0:C.points,"pts"]})]}),U.capturedBy&&w.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:U.capturedBy==="red"?"#ff6b6b20":"#4dabf720",color:U.capturedBy==="red"?"#ff6b6b":"#4dabf7"},children:U.capturedBy.toUpperCase()})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>M(U.id,U.status),disabled:m[U.id],className:`flex-1 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-1.5 ${b?"bg-green-500/20 text-green-400":"bg-white/10 text-white/60"}`,children:m[U.id]?w.jsx(Mh,{size:14,className:"animate-spin"}):b?w.jsxs(w.Fragment,{children:[w.jsx(yF,{size:14})," Make Active"]}):w.jsxs(w.Fragment,{children:[w.jsx(_F,{size:14})," Make Ghost"]})}),U.capturedBy&&w.jsx("button",{onClick:()=>I(U.id),disabled:m[`reset-${U.id}`],className:"py-2 px-3 rounded-lg bg-white/10 text-white/60 text-xs font-medium flex items-center gap-1.5",children:m[`reset-${U.id}`]?w.jsx(Mh,{size:14,className:"animate-spin"}):w.jsxs(w.Fragment,{children:[w.jsx(xF,{size:14})," Reset"]})})]})]},U.id)})]}),w.jsxs("div",{className:"px-4 mt-8",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2 flex items-center gap-2",children:[w.jsx(O1,{size:14}),"Players (",n.length,")"]}),w.jsx("div",{className:"space-y-2",children:n.map(U=>w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("div",{className:"font-medium",children:U.name}),w.jsxs("div",{className:"text-xs text-white/40",children:[U.captures||0," captures"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-sm font-bold",children:U.score||0}),w.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:U.team==="red"?"#ff6b6b":"#4dabf7"}})]})]},U.id))})]})]}):w.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-6",children:w.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:w.jsx(M1,{size:32,className:"text-purple-400"})}),w.jsx("h1",{className:"text-2xl font-bold",children:"Admin Access"}),w.jsx("p",{className:"text-white/40 text-sm mt-1",children:"God Mode Panel"})]}),w.jsxs("form",{onSubmit:k,className:"space-y-4",children:[w.jsx("input",{type:"password",value:a,onChange:U=>u(U.target.value),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-center focus:outline-none focus:border-purple-500/50"}),w.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-purple-500 text-white font-bold",children:"Enter"})]}),_&&w.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-3 rounded-lg text-center text-sm ${_.type==="error"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:_.text}),w.jsx("button",{onClick:()=>t(-1),className:"mt-6 w-full py-2 text-white/40 text-sm",children:" Back"})]})})}const UF=[{path:"/",label:"BATTLE"},{path:"/map",label:"MAP"},{path:"/scanner",label:"SCAN"},{path:"/leaderboard",label:"RANKS"},{path:"/profile",label:"COLLECTION"}];function HF(){return w.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000] font-nohemi",children:[w.jsx("div",{className:"absolute inset-0 bg-[#FAFAFA] shadow-[0_-4px_20px_rgba(0,0,0,0.1)]"}),w.jsx("div",{className:"relative flex justify-around items-center h-14 px-2",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:UF.map(({path:t,label:e})=>{const n=e==="SCAN";return w.jsx(x2,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>w.jsxs(ne.div,{className:"relative py-2 px-3",whileTap:{scale:.95},children:[i&&w.jsx(ne.div,{layoutId:"nav-indicator",className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 bg-black",transition:{type:"spring",stiffness:400,damping:30}}),w.jsx("span",{className:`text-xs tracking-wider transition-colors ${n?`font-black text-sm ${i?"text-black":"text-black/50"}`:`font-bold ${i?"text-black":"text-black/30"}`}`,children:e})]})},t)})})]})}const F1={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};function WF(){const[t,e]=V.useState(0),[n,i]=V.useState("a"),r=41;V.useEffect(()=>{const h=setInterval(()=>{e(f=>{const m=f+1;return m>=r?(i(g=>g==="a"?"b":"a"),0):m})},42);return()=>clearInterval(h)},[]);const o=n==="a"?"eat_a":"eat_b",a=String(t).padStart(5,"0"),u=`animation/${o}/eat_${n}_${a}.png`;return w.jsx("img",{src:u,alt:"Chomp animation",className:"w-48 h-48 object-contain"})}function $F(){var g,_;const{captureNotification:t,player:e}=Hi();if(!t)return null;const n=((g=F1[t.team])==null?void 0:g.color)||"#888",i=((_=F1[t.team])==null?void 0:_.name)||"?",r=t.points||100,o=t.streak||0,a=t.playerId===e.id,u=t.isRecapture&&t.prevOwner===e.team&&t.team!==e.team;if(!a&&!u)return null;let h,f;a?(h=t.isRecapture?"TERRITORY STOLEN":"TERRITORY CAPTURED",f=t.isRecapture?"STOLEN":"CAPTURED"):u?(h="TERRITORY LOST",f="LOST"):(h=t.isRecapture?"TERRITORY CHANGED":"NEW CAPTURE",f="CLAIMED");const m=a;return w.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden bg-[#FAFAFA] font-nohemi",children:[w.jsx(ne.div,{className:"absolute top-0 left-0 right-0 h-2",style:{backgroundColor:u?"#888":n},initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.3}}),w.jsxs(ne.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,type:"spring",stiffness:100},className:"text-center px-8",children:[w.jsx(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-sm tracking-widest text-black/30 mb-2",children:h}),w.jsx(ne.h1,{className:"text-5xl font-black text-black tracking-tight mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},children:f}),w.jsx(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},className:"text-lg text-black/50 mb-4",children:t.artName}),w.jsx(ne.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:100},className:"mb-4 flex justify-center",children:w.jsx(WF,{})}),m&&w.jsxs(w.Fragment,{children:[w.jsx(ne.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:150},className:"mb-2",children:w.jsxs("span",{className:"text-8xl font-black",style:{color:n},children:["+",r]})}),w.jsx(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-sm tracking-widest text-black/30 mb-6",children:"POINTS"})]}),!m&&w.jsx("div",{className:"mb-6"}),a&&o>1&&w.jsx(ne.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.45},className:"inline-flex items-center gap-2 px-4 py-2 bg-black/5 mb-6",children:w.jsxs("span",{className:"font-black text-black",children:["STREAK x",o]})}),w.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex items-center justify-center gap-2",children:[w.jsx("span",{className:"font-bold text-black",children:t.playerName}),w.jsx("span",{className:"px-3 py-1 text-xs font-black text-white",style:{backgroundColor:n},children:i})]})]})]})}function Oh({children:t}){const{player:e}=Hi();return e.team&&e.name&&e.name!=="Street Artist"?t:w.jsx(lP,{to:"/onboarding",replace:!0})}function GF(){const t=Io(),{player:e}=Hi(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding"||t.pathname==="/admin";return w.jsxs("div",{className:"h-full w-full flex flex-col",children:[w.jsx(Qa,{children:w.jsx($F,{})}),w.jsx(Qa,{mode:"wait",children:w.jsxs(u2,{location:t,children:[w.jsx(jr,{path:"/onboarding",element:w.jsx($6,{})}),w.jsx(jr,{path:"/",element:n?w.jsx(Z6,{}):w.jsx(lP,{to:"/onboarding",replace:!0})}),w.jsx(jr,{path:"/map",element:w.jsx(Oh,{children:w.jsx(LF,{})})}),w.jsx(jr,{path:"/scanner",element:w.jsx(Oh,{children:w.jsx(MF,{})})}),w.jsx(jr,{path:"/leaderboard",element:w.jsx(Oh,{children:w.jsx(OF,{})})}),w.jsx(jr,{path:"/profile",element:w.jsx(Oh,{children:w.jsx(FF,{})})}),w.jsx(jr,{path:"/admin",element:w.jsx(zF,{})})]},t.pathname)}),!i&&n&&w.jsx(HF,{})]})}function qF(){return w.jsx(H6,{children:w.jsx(GF,{})})}xm.createRoot(document.getElementById("root")).render(w.jsx(fo.StrictMode,{children:w.jsx(y2,{children:w.jsx(qF,{})})}));
