function kA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var bA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T1={exports:{}},Gd={},x1={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zu=Symbol.for("react.element"),RA=Symbol.for("react.portal"),LA=Symbol.for("react.fragment"),NA=Symbol.for("react.strict_mode"),MA=Symbol.for("react.profiler"),OA=Symbol.for("react.provider"),DA=Symbol.for("react.context"),VA=Symbol.for("react.forward_ref"),jA=Symbol.for("react.suspense"),FA=Symbol.for("react.memo"),BA=Symbol.for("react.lazy"),xv=Symbol.iterator;function zA(t){return t===null||typeof t!="object"?null:(t=xv&&t[xv]||t["@@iterator"],typeof t=="function"?t:null)}var E1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P1=Object.assign,S1={};function Ga(t,e,n){this.props=t,this.context=e,this.refs=S1,this.updater=n||E1}Ga.prototype.isReactComponent={};Ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function I1(){}I1.prototype=Ga.prototype;function qg(t,e,n){this.props=t,this.context=e,this.refs=S1,this.updater=n||E1}var Gg=qg.prototype=new I1;Gg.constructor=qg;P1(Gg,Ga.prototype);Gg.isPureReactComponent=!0;var Ev=Array.isArray,C1=Object.prototype.hasOwnProperty,Zg={current:null},A1={key:!0,ref:!0,__self:!0,__source:!0};function k1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)C1.call(e,i)&&!A1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Zu,type:t,key:o,ref:a,props:r,_owner:Zg.current}}function UA(t,e){return{$$typeof:Zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zu}function HA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pv=/\/+/g;function np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HA(""+t.key):e.toString(36)}function xh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Zu:case RA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+np(a,0):i,Ev(r)?(n="",t!=null&&(n=t.replace(Pv,"$&/")+"/"),xh(r,e,n,"",function(f){return f})):r!=null&&(Kg(r)&&(r=UA(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Pv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Ev(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+np(o,u);a+=xh(o,e,n,h,r)}else if(h=zA(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+np(o,u++),a+=xh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Zc(t,e,n){if(t==null)return t;var i=[],r=0;return xh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function WA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Eh={transition:null},$A={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Eh,ReactCurrentOwner:Zg};function b1(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Zc,forEach:function(t,e,n){Zc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zc(t,function(){e++}),e},toArray:function(t){return Zc(t,function(e){return e})||[]},only:function(t){if(!Kg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Ga;ke.Fragment=LA;ke.Profiler=MA;ke.PureComponent=qg;ke.StrictMode=NA;ke.Suspense=jA;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$A;ke.act=b1;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=P1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Zg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)C1.call(e,h)&&!A1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Zu,type:t.type,key:r,ref:o,props:i,_owner:a}};ke.createContext=function(t){return t={$$typeof:DA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OA,_context:t},t.Consumer=t};ke.createElement=k1;ke.createFactory=function(t){var e=k1.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:VA,render:t}};ke.isValidElement=Kg;ke.lazy=function(t){return{$$typeof:BA,_payload:{_status:-1,_result:t},_init:WA}};ke.memo=function(t,e){return{$$typeof:FA,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Eh.transition;Eh.transition={};try{t()}finally{Eh.transition=e}};ke.unstable_act=b1;ke.useCallback=function(t,e){return rn.current.useCallback(t,e)};ke.useContext=function(t){return rn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return rn.current.useEffect(t,e)};ke.useId=function(){return rn.current.useId()};ke.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return rn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};ke.useRef=function(t){return rn.current.useRef(t)};ke.useState=function(t){return rn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return rn.current.useTransition()};ke.version="18.3.1";x1.exports=ke;var j=x1.exports;const Js=w1(j),qA=kA({__proto__:null,default:Js},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA=j,ZA=Symbol.for("react.element"),KA=Symbol.for("react.fragment"),QA=Object.prototype.hasOwnProperty,XA=GA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YA={key:!0,ref:!0,__self:!0,__source:!0};function R1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)QA.call(e,i)&&!YA.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:ZA,type:t,key:o,ref:a,props:r,_owner:XA.current}}Gd.Fragment=KA;Gd.jsx=R1;Gd.jsxs=R1;T1.exports=Gd;var P=T1.exports,om={},L1={exports:{}},Sn={},N1={exports:{}},M1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,ce){var G=Z.length;Z.push(ce);e:for(;0<G;){var X=G-1>>>1,ue=Z[X];if(0<r(ue,ce))Z[X]=ce,Z[G]=ue,G=X;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],G=Z.pop();if(G!==ce){Z[0]=G;e:for(var X=0,ue=Z.length,xe=ue>>>1;X<xe;){var de=2*(X+1)-1,oe=Z[de],ae=de+1,Se=Z[ae];if(0>r(oe,G))ae<ue&&0>r(Se,oe)?(Z[X]=Se,Z[ae]=G,X=ae):(Z[X]=oe,Z[de]=G,X=de);else if(ae<ue&&0>r(Se,G))Z[X]=Se,Z[ae]=G,X=ae;else break e}}return ce}function r(Z,ce){var G=Z.sortIndex-ce.sortIndex;return G!==0?G:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,v=3,T=!1,k=!1,b=!1,F=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var ce=n(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=Z)i(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(f)}}function B(Z){if(b=!1,S(Z),!k)if(n(h)!==null)k=!0,Ie(q);else{var ce=n(f);ce!==null&&ot(B,ce.startTime-Z)}}function q(Z,ce){k=!1,b&&(b=!1,C(I),I=-1),T=!0;var G=v;try{for(S(ce),g=n(h);g!==null&&(!(g.expirationTime>ce)||Z&&!D());){var X=g.callback;if(typeof X=="function"){g.callback=null,v=g.priorityLevel;var ue=X(g.expirationTime<=ce);ce=t.unstable_now(),typeof ue=="function"?g.callback=ue:g===n(h)&&i(h),S(ce)}else i(h);g=n(h)}if(g!==null)var xe=!0;else{var de=n(f);de!==null&&ot(B,de.startTime-ce),xe=!1}return xe}finally{g=null,v=G,T=!1}}var K=!1,R=null,I=-1,N=5,O=-1;function D(){return!(t.unstable_now()-O<N)}function z(){if(R!==null){var Z=t.unstable_now();O=Z;var ce=!0;try{ce=R(!0,Z)}finally{ce?M():(K=!1,R=null)}}else K=!1}var M;if(typeof E=="function")M=function(){E(z)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,pt=_e.port2;_e.port1.onmessage=z,M=function(){pt.postMessage(null)}}else M=function(){F(z,0)};function Ie(Z){R=Z,K||(K=!0,M())}function ot(Z,ce){I=F(function(){Z(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,Ie(q))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var G=v;v=ce;try{return Z()}finally{v=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var G=v;v=Z;try{return ce()}finally{v=G}},t.unstable_scheduleCallback=function(Z,ce,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,Z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=G+ue,Z={id:m++,callback:ce,priorityLevel:Z,startTime:G,expirationTime:ue,sortIndex:-1},G>X?(Z.sortIndex=G,e(f,Z),n(h)===null&&Z===n(f)&&(b?(C(I),I=-1):b=!0,ot(B,G-X))):(Z.sortIndex=ue,e(h,Z),k||T||(k=!0,Ie(q))),Z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(Z){var ce=v;return function(){var G=v;v=ce;try{return Z.apply(this,arguments)}finally{v=G}}}})(M1);N1.exports=M1;var JA=N1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek=j,xn=JA;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O1=new Set,yu={};function co(t,e){ba(t,e),ba(t+"Capture",e)}function ba(t,e){for(yu[t]=e,t=0;t<e.length;t++)O1.add(e[t])}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=Object.prototype.hasOwnProperty,tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sv={},Iv={};function nk(t){return am.call(Iv,t)?!0:am.call(Sv,t)?!1:tk.test(t)?Iv[t]=!0:(Sv[t]=!0,!1)}function ik(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rk(t,e,n,i){if(e===null||typeof e>"u"||ik(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qg=/[\-:]([a-z])/g;function Xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qg,Xg);Vt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qg,Xg);Vt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qg,Xg);Vt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yg(t,e,n,i){var r=Vt.hasOwnProperty(e)?Vt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rk(e,n,r,i)&&(n=null),i||r===null?nk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var lr=ek.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kc=Symbol.for("react.element"),ta=Symbol.for("react.portal"),na=Symbol.for("react.fragment"),Jg=Symbol.for("react.strict_mode"),lm=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),V1=Symbol.for("react.context"),ey=Symbol.for("react.forward_ref"),um=Symbol.for("react.suspense"),cm=Symbol.for("react.suspense_list"),ty=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),j1=Symbol.for("react.offscreen"),Cv=Symbol.iterator;function bl(t){return t===null||typeof t!="object"?null:(t=Cv&&t[Cv]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,ip;function Bl(t){if(ip===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ip=e&&e[1]||""}return`
`+ip+t}var rp=!1;function sp(t,e){if(!t||rp)return"";rp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{rp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bl(t):""}function sk(t){switch(t.tag){case 5:return Bl(t.type);case 16:return Bl("Lazy");case 13:return Bl("Suspense");case 19:return Bl("SuspenseList");case 0:case 2:case 15:return t=sp(t.type,!1),t;case 11:return t=sp(t.type.render,!1),t;case 1:return t=sp(t.type,!0),t;default:return""}}function hm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case na:return"Fragment";case ta:return"Portal";case lm:return"Profiler";case Jg:return"StrictMode";case um:return"Suspense";case cm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V1:return(t.displayName||"Context")+".Consumer";case D1:return(t._context.displayName||"Context")+".Provider";case ey:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ty:return e=t.displayName||null,e!==null?e:hm(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return hm(t(e))}catch{}}return null}function ok(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hm(e);case 8:return e===Jg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function is(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ak(t){var e=F1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qc(t){t._valueTracker||(t._valueTracker=ak(t))}function B1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=F1(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dm(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Av(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=is(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function z1(t,e){e=e.checked,e!=null&&Yg(t,"checked",e,!1)}function fm(t,e){z1(t,e);var n=is(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pm(t,e.type,n):e.hasOwnProperty("defaultValue")&&pm(t,e.type,is(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pm(t,e,n){(e!=="number"||qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zl=Array.isArray;function _a(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+is(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function mm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(zl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:is(n)}}function U1(t,e){var n=is(e.value),i=is(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Rv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function H1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?H1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xc,W1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xc=Xc||document.createElement("div"),Xc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _u(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lk=["Webkit","ms","Moz","O"];Object.keys(Ql).forEach(function(t){lk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ql[e]=Ql[t]})});function $1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ql.hasOwnProperty(t)&&Ql[t]?(""+e).trim():e+"px"}function q1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=$1(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var uk=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(t,e){if(e){if(uk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function _m(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vm=null;function ny(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wm=null,va=null,wa=null;function Lv(t){if(t=Xu(t)){if(typeof wm!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Yd(e),wm(t.stateNode,t.type,e))}}function G1(t){va?wa?wa.push(t):wa=[t]:va=t}function Z1(){if(va){var t=va,e=wa;if(wa=va=null,Lv(t),e)for(t=0;t<e.length;t++)Lv(e[t])}}function K1(t,e){return t(e)}function Q1(){}var op=!1;function X1(t,e,n){if(op)return t(e,n);op=!0;try{return K1(t,e,n)}finally{op=!1,(va!==null||wa!==null)&&(Q1(),Z1())}}function vu(t,e){var n=t.stateNode;if(n===null)return null;var i=Yd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Tm=!1;if(Yi)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){Tm=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{Tm=!1}function ck(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Xl=!1,Gh=null,Zh=!1,xm=null,hk={onError:function(t){Xl=!0,Gh=t}};function dk(t,e,n,i,r,o,a,u,h){Xl=!1,Gh=null,ck.apply(hk,arguments)}function fk(t,e,n,i,r,o,a,u,h){if(dk.apply(this,arguments),Xl){if(Xl){var f=Gh;Xl=!1,Gh=null}else throw Error(ee(198));Zh||(Zh=!0,xm=f)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Y1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nv(t){if(ho(t)!==t)throw Error(ee(188))}function pk(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Nv(r),t;if(o===i)return Nv(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function J1(t){return t=pk(t),t!==null?ex(t):null}function ex(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ex(t);if(e!==null)return e;t=t.sibling}return null}var tx=xn.unstable_scheduleCallback,Mv=xn.unstable_cancelCallback,mk=xn.unstable_shouldYield,gk=xn.unstable_requestPaint,dt=xn.unstable_now,yk=xn.unstable_getCurrentPriorityLevel,iy=xn.unstable_ImmediatePriority,nx=xn.unstable_UserBlockingPriority,Kh=xn.unstable_NormalPriority,_k=xn.unstable_LowPriority,ix=xn.unstable_IdlePriority,Zd=null,_i=null;function vk(t){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Zd,t,void 0,(t.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:xk,wk=Math.log,Tk=Math.LN2;function xk(t){return t>>>=0,t===0?32:31-(wk(t)/Tk|0)|0}var Yc=64,Jc=4194304;function Ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Ul(u):(o&=a,o!==0&&(i=Ul(o)))}else a=n&~r,a!==0?i=Ul(a):o!==0&&(i=Ul(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ii(e),r=1<<n,i|=t[n],e&=~r;return i}function Ek(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ii(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=Ek(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Em(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rx(){var t=Yc;return Yc<<=1,!(Yc&4194240)&&(Yc=64),t}function ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ku(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ii(e),t[e]=n}function Sk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ii(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function ry(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ii(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var He=0;function sx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ox,sy,ax,lx,ux,Pm=!1,eh=[],Br=null,zr=null,Ur=null,wu=new Map,Tu=new Map,kr=[],Ik="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ov(t,e){switch(t){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":wu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(e.pointerId)}}function Ll(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Xu(e),e!==null&&sy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Ck(t,e,n,i,r){switch(e){case"focusin":return Br=Ll(Br,t,e,n,i,r),!0;case"dragenter":return zr=Ll(zr,t,e,n,i,r),!0;case"mouseover":return Ur=Ll(Ur,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return wu.set(o,Ll(wu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Tu.set(o,Ll(Tu.get(o)||null,t,e,n,i,r)),!0}return!1}function cx(t){var e=Hs(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=Y1(n),e!==null){t.blockedOn=e,ux(t.priority,function(){ax(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ph(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);vm=i,n.target.dispatchEvent(i),vm=null}else return e=Xu(n),e!==null&&sy(e),t.blockedOn=n,!1;e.shift()}return!0}function Dv(t,e,n){Ph(t)&&n.delete(e)}function Ak(){Pm=!1,Br!==null&&Ph(Br)&&(Br=null),zr!==null&&Ph(zr)&&(zr=null),Ur!==null&&Ph(Ur)&&(Ur=null),wu.forEach(Dv),Tu.forEach(Dv)}function Nl(t,e){t.blockedOn===e&&(t.blockedOn=null,Pm||(Pm=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,Ak)))}function xu(t){function e(r){return Nl(r,t)}if(0<eh.length){Nl(eh[0],t);for(var n=1;n<eh.length;n++){var i=eh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Br!==null&&Nl(Br,t),zr!==null&&Nl(zr,t),Ur!==null&&Nl(Ur,t),wu.forEach(e),Tu.forEach(e),n=0;n<kr.length;n++)i=kr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<kr.length&&(n=kr[0],n.blockedOn===null);)cx(n),n.blockedOn===null&&kr.shift()}var Ta=lr.ReactCurrentBatchConfig,Xh=!0;function kk(t,e,n,i){var r=He,o=Ta.transition;Ta.transition=null;try{He=1,oy(t,e,n,i)}finally{He=r,Ta.transition=o}}function bk(t,e,n,i){var r=He,o=Ta.transition;Ta.transition=null;try{He=4,oy(t,e,n,i)}finally{He=r,Ta.transition=o}}function oy(t,e,n,i){if(Xh){var r=Sm(t,e,n,i);if(r===null)yp(t,e,i,Yh,n),Ov(t,i);else if(Ck(r,t,e,n,i))i.stopPropagation();else if(Ov(t,i),e&4&&-1<Ik.indexOf(t)){for(;r!==null;){var o=Xu(r);if(o!==null&&ox(o),o=Sm(t,e,n,i),o===null&&yp(t,e,i,Yh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else yp(t,e,i,null,n)}}var Yh=null;function Sm(t,e,n,i){if(Yh=null,t=ny(i),t=Hs(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Y1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yh=t,null}function hx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yk()){case iy:return 1;case nx:return 4;case Kh:case _k:return 16;case ix:return 536870912;default:return 16}default:return 16}}var Dr=null,ay=null,Sh=null;function dx(){if(Sh)return Sh;var t,e=ay,n=e.length,i,r="value"in Dr?Dr.value:Dr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Sh=r.slice(t,1<i?1-i:void 0)}function Ih(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function th(){return!0}function Vv(){return!1}function In(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?th:Vv,this.isPropagationStopped=Vv,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=th)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=th)},persist:function(){},isPersistent:th}),e}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ly=In(Za),Qu=rt({},Za,{view:0,detail:0}),Rk=In(Qu),lp,up,Ml,Kd=rt({},Qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ml&&(Ml&&t.type==="mousemove"?(lp=t.screenX-Ml.screenX,up=t.screenY-Ml.screenY):up=lp=0,Ml=t),lp)},movementY:function(t){return"movementY"in t?t.movementY:up}}),jv=In(Kd),Lk=rt({},Kd,{dataTransfer:0}),Nk=In(Lk),Mk=rt({},Qu,{relatedTarget:0}),cp=In(Mk),Ok=rt({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=In(Ok),Vk=rt({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jk=In(Vk),Fk=rt({},Za,{data:0}),Fv=In(Fk),Bk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uk[t])?!!e[t]:!1}function uy(){return Hk}var Wk=rt({},Qu,{key:function(t){if(t.key){var e=Bk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ih(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uy,charCode:function(t){return t.type==="keypress"?Ih(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ih(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$k=In(Wk),qk=rt({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bv=In(qk),Gk=rt({},Qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uy}),Zk=In(Gk),Kk=rt({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qk=In(Kk),Xk=rt({},Kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yk=In(Xk),Jk=[9,13,27,32],cy=Yi&&"CompositionEvent"in window,Yl=null;Yi&&"documentMode"in document&&(Yl=document.documentMode);var eb=Yi&&"TextEvent"in window&&!Yl,fx=Yi&&(!cy||Yl&&8<Yl&&11>=Yl),zv=" ",Uv=!1;function px(t,e){switch(t){case"keyup":return Jk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ia=!1;function tb(t,e){switch(t){case"compositionend":return mx(e);case"keypress":return e.which!==32?null:(Uv=!0,zv);case"textInput":return t=e.data,t===zv&&Uv?null:t;default:return null}}function nb(t,e){if(ia)return t==="compositionend"||!cy&&px(t,e)?(t=dx(),Sh=ay=Dr=null,ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fx&&e.locale!=="ko"?null:e.data;default:return null}}var ib={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ib[t.type]:e==="textarea"}function gx(t,e,n,i){G1(i),e=Jh(e,"onChange"),0<e.length&&(n=new ly("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Jl=null,Eu=null;function rb(t){Cx(t,0)}function Qd(t){var e=oa(t);if(B1(e))return t}function sb(t,e){if(t==="change")return e}var yx=!1;if(Yi){var hp;if(Yi){var dp="oninput"in document;if(!dp){var Wv=document.createElement("div");Wv.setAttribute("oninput","return;"),dp=typeof Wv.oninput=="function"}hp=dp}else hp=!1;yx=hp&&(!document.documentMode||9<document.documentMode)}function $v(){Jl&&(Jl.detachEvent("onpropertychange",_x),Eu=Jl=null)}function _x(t){if(t.propertyName==="value"&&Qd(Eu)){var e=[];gx(e,Eu,t,ny(t)),X1(rb,e)}}function ob(t,e,n){t==="focusin"?($v(),Jl=e,Eu=n,Jl.attachEvent("onpropertychange",_x)):t==="focusout"&&$v()}function ab(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qd(Eu)}function lb(t,e){if(t==="click")return Qd(e)}function ub(t,e){if(t==="input"||t==="change")return Qd(e)}function cb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var si=typeof Object.is=="function"?Object.is:cb;function Pu(t,e){if(si(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!am.call(e,r)||!si(t[r],e[r]))return!1}return!0}function qv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gv(t,e){var n=qv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qv(n)}}function vx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wx(){for(var t=window,e=qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qh(t.document)}return e}function hy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hb(t){var e=wx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vx(n.ownerDocument.documentElement,n)){if(i!==null&&hy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Gv(n,o);var a=Gv(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var db=Yi&&"documentMode"in document&&11>=document.documentMode,ra=null,Im=null,eu=null,Cm=!1;function Zv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cm||ra==null||ra!==qh(i)||(i=ra,"selectionStart"in i&&hy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),eu&&Pu(eu,i)||(eu=i,i=Jh(Im,"onSelect"),0<i.length&&(e=new ly("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ra)))}function nh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sa={animationend:nh("Animation","AnimationEnd"),animationiteration:nh("Animation","AnimationIteration"),animationstart:nh("Animation","AnimationStart"),transitionend:nh("Transition","TransitionEnd")},fp={},Tx={};Yi&&(Tx=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function Xd(t){if(fp[t])return fp[t];if(!sa[t])return t;var e=sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tx)return fp[t]=e[n];return t}var xx=Xd("animationend"),Ex=Xd("animationiteration"),Px=Xd("animationstart"),Sx=Xd("transitionend"),Ix=new Map,Kv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){Ix.set(t,e),co(e,[t])}for(var pp=0;pp<Kv.length;pp++){var mp=Kv[pp],fb=mp.toLowerCase(),pb=mp[0].toUpperCase()+mp.slice(1);ps(fb,"on"+pb)}ps(xx,"onAnimationEnd");ps(Ex,"onAnimationIteration");ps(Px,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(Sx,"onTransitionEnd");ba("onMouseEnter",["mouseout","mouseover"]);ba("onMouseLeave",["mouseout","mouseover"]);ba("onPointerEnter",["pointerout","pointerover"]);ba("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hl));function Qv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,fk(i,e,void 0,t),t.currentTarget=null}function Cx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;Qv(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;Qv(r,u,f),o=h}}}if(Zh)throw t=xm,Zh=!1,xm=null,t}function Ze(t,e){var n=e[Lm];n===void 0&&(n=e[Lm]=new Set);var i=t+"__bubble";n.has(i)||(Ax(e,t,2,!1),n.add(i))}function gp(t,e,n){var i=0;e&&(i|=4),Ax(n,t,i,e)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Su(t){if(!t[ih]){t[ih]=!0,O1.forEach(function(n){n!=="selectionchange"&&(mb.has(n)||gp(n,!1,t),gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ih]||(e[ih]=!0,gp("selectionchange",!1,e))}}function Ax(t,e,n,i){switch(hx(e)){case 1:var r=kk;break;case 4:r=bk;break;default:r=oy}n=r.bind(null,e,n,t),r=void 0,!Tm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function yp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Hs(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}X1(function(){var f=o,m=ny(n),g=[];e:{var v=Ix.get(t);if(v!==void 0){var T=ly,k=t;switch(t){case"keypress":if(Ih(n)===0)break e;case"keydown":case"keyup":T=$k;break;case"focusin":k="focus",T=cp;break;case"focusout":k="blur",T=cp;break;case"beforeblur":case"afterblur":T=cp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=jv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Nk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Zk;break;case xx:case Ex:case Px:T=Dk;break;case Sx:T=Qk;break;case"scroll":T=Rk;break;case"wheel":T=Yk;break;case"copy":case"cut":case"paste":T=jk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Bv}var b=(e&4)!==0,F=!b&&t==="scroll",C=b?v!==null?v+"Capture":null:v;b=[];for(var E=f,S;E!==null;){S=E;var B=S.stateNode;if(S.tag===5&&B!==null&&(S=B,C!==null&&(B=vu(E,C),B!=null&&b.push(Iu(E,B,S)))),F)break;E=E.return}0<b.length&&(v=new T(v,k,null,n,m),g.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==vm&&(k=n.relatedTarget||n.fromElement)&&(Hs(k)||k[Ji]))break e;if((T||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=f,k=k?Hs(k):null,k!==null&&(F=ho(k),k!==F||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=f),T!==k)){if(b=jv,B="onMouseLeave",C="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=Bv,B="onPointerLeave",C="onPointerEnter",E="pointer"),F=T==null?v:oa(T),S=k==null?v:oa(k),v=new b(B,E+"leave",T,n,m),v.target=F,v.relatedTarget=S,B=null,Hs(m)===f&&(b=new b(C,E+"enter",k,n,m),b.target=S,b.relatedTarget=F,B=b),F=B,T&&k)t:{for(b=T,C=k,E=0,S=b;S;S=Ko(S))E++;for(S=0,B=C;B;B=Ko(B))S++;for(;0<E-S;)b=Ko(b),E--;for(;0<S-E;)C=Ko(C),S--;for(;E--;){if(b===C||C!==null&&b===C.alternate)break t;b=Ko(b),C=Ko(C)}b=null}else b=null;T!==null&&Xv(g,v,T,b,!1),k!==null&&F!==null&&Xv(g,F,k,b,!0)}}e:{if(v=f?oa(f):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var q=sb;else if(Hv(v))if(yx)q=ub;else{q=ab;var K=ob}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=lb);if(q&&(q=q(t,f))){gx(g,q,n,m);break e}K&&K(t,v,f),t==="focusout"&&(K=v._wrapperState)&&K.controlled&&v.type==="number"&&pm(v,"number",v.value)}switch(K=f?oa(f):window,t){case"focusin":(Hv(K)||K.contentEditable==="true")&&(ra=K,Im=f,eu=null);break;case"focusout":eu=Im=ra=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,Zv(g,n,m);break;case"selectionchange":if(db)break;case"keydown":case"keyup":Zv(g,n,m)}var R;if(cy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ia?px(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(fx&&n.locale!=="ko"&&(ia||I!=="onCompositionStart"?I==="onCompositionEnd"&&ia&&(R=dx()):(Dr=m,ay="value"in Dr?Dr.value:Dr.textContent,ia=!0)),K=Jh(f,I),0<K.length&&(I=new Fv(I,t,null,n,m),g.push({event:I,listeners:K}),R?I.data=R:(R=mx(n),R!==null&&(I.data=R)))),(R=eb?tb(t,n):nb(t,n))&&(f=Jh(f,"onBeforeInput"),0<f.length&&(m=new Fv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}Cx(g,e)})}function Iu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=vu(t,n),o!=null&&i.unshift(Iu(t,o,r)),o=vu(t,e),o!=null&&i.push(Iu(t,o,r))),t=t.return}return i}function Ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xv(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=vu(n,o),h!=null&&a.unshift(Iu(n,h,u))):r||(h=vu(n,o),h!=null&&a.push(Iu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var gb=/\r\n?/g,yb=/\u0000|\uFFFD/g;function Yv(t){return(typeof t=="string"?t:""+t).replace(gb,`
`).replace(yb,"")}function rh(t,e,n){if(e=Yv(e),Yv(t)!==e&&n)throw Error(ee(425))}function ed(){}var Am=null,km=null;function bm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rm=typeof setTimeout=="function"?setTimeout:void 0,_b=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,vb=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(t){return Jv.resolve(null).then(t).catch(wb)}:Rm;function wb(t){setTimeout(function(){throw t})}function _p(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),xu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);xu(e)}function Hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function e0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ka=Math.random().toString(36).slice(2),yi="__reactFiber$"+Ka,Cu="__reactProps$"+Ka,Ji="__reactContainer$"+Ka,Lm="__reactEvents$"+Ka,Tb="__reactListeners$"+Ka,xb="__reactHandles$"+Ka;function Hs(t){var e=t[yi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ji]||n[yi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=e0(t);t!==null;){if(n=t[yi])return n;t=e0(t)}return e}t=n,n=t.parentNode}return null}function Xu(t){return t=t[yi]||t[Ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Yd(t){return t[Cu]||null}var Nm=[],aa=-1;function ms(t){return{current:t}}function Ye(t){0>aa||(t.current=Nm[aa],Nm[aa]=null,aa--)}function qe(t,e){aa++,Nm[aa]=t.current,t.current=e}var rs={},Kt=ms(rs),fn=ms(!1),eo=rs;function Ra(t,e){var n=t.type.contextTypes;if(!n)return rs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function pn(t){return t=t.childContextTypes,t!=null}function td(){Ye(fn),Ye(Kt)}function t0(t,e,n){if(Kt.current!==rs)throw Error(ee(168));qe(Kt,e),qe(fn,n)}function kx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,ok(t)||"Unknown",r));return rt({},n,i)}function nd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rs,eo=Kt.current,qe(Kt,t),qe(fn,fn.current),!0}function n0(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=kx(t,e,eo),i.__reactInternalMemoizedMergedChildContext=t,Ye(fn),Ye(Kt),qe(Kt,t)):Ye(fn),qe(fn,n)}var Ui=null,Jd=!1,vp=!1;function bx(t){Ui===null?Ui=[t]:Ui.push(t)}function Eb(t){Jd=!0,bx(t)}function gs(){if(!vp&&Ui!==null){vp=!0;var t=0,e=He;try{var n=Ui;for(He=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ui=null,Jd=!1}catch(r){throw Ui!==null&&(Ui=Ui.slice(t+1)),tx(iy,gs),r}finally{He=e,vp=!1}}return null}var la=[],ua=0,id=null,rd=0,Dn=[],Vn=0,to=null,Hi=1,Wi="";function Ds(t,e){la[ua++]=rd,la[ua++]=id,id=t,rd=e}function Rx(t,e,n){Dn[Vn++]=Hi,Dn[Vn++]=Wi,Dn[Vn++]=to,to=t;var i=Hi;t=Wi;var r=32-ii(i)-1;i&=~(1<<r),n+=1;var o=32-ii(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Hi=1<<32-ii(e)+r|n<<r|i,Wi=o+t}else Hi=1<<o|n<<r|i,Wi=t}function dy(t){t.return!==null&&(Ds(t,1),Rx(t,1,0))}function fy(t){for(;t===id;)id=la[--ua],la[ua]=null,rd=la[--ua],la[ua]=null;for(;t===to;)to=Dn[--Vn],Dn[Vn]=null,Wi=Dn[--Vn],Dn[Vn]=null,Hi=Dn[--Vn],Dn[Vn]=null}var Tn=null,wn=null,Je=!1,Jn=null;function Lx(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function i0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,wn=Hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:Hi,overflow:Wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,wn=null,!0):!1;default:return!1}}function Mm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Om(t){if(Je){var e=wn;if(e){var n=e;if(!i0(t,e)){if(Mm(t))throw Error(ee(418));e=Hr(n.nextSibling);var i=Tn;e&&i0(t,e)?Lx(i,n):(t.flags=t.flags&-4097|2,Je=!1,Tn=t)}}else{if(Mm(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Je=!1,Tn=t}}}function r0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function sh(t){if(t!==Tn)return!1;if(!Je)return r0(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bm(t.type,t.memoizedProps)),e&&(e=wn)){if(Mm(t))throw Nx(),Error(ee(418));for(;e;)Lx(t,e),e=Hr(e.nextSibling)}if(r0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=Tn?Hr(t.stateNode.nextSibling):null;return!0}function Nx(){for(var t=wn;t;)t=Hr(t.nextSibling)}function La(){wn=Tn=null,Je=!1}function py(t){Jn===null?Jn=[t]:Jn.push(t)}var Pb=lr.ReactCurrentBatchConfig;function Ol(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function oh(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function s0(t){var e=t._init;return e(t._payload)}function Mx(t){function e(C,E){if(t){var S=C.deletions;S===null?(C.deletions=[E],C.flags|=16):S.push(E)}}function n(C,E){if(!t)return null;for(;E!==null;)e(C,E),E=E.sibling;return null}function i(C,E){for(C=new Map;E!==null;)E.key!==null?C.set(E.key,E):C.set(E.index,E),E=E.sibling;return C}function r(C,E){return C=Gr(C,E),C.index=0,C.sibling=null,C}function o(C,E,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<E?(C.flags|=2,E):S):(C.flags|=2,E)):(C.flags|=1048576,E)}function a(C){return t&&C.alternate===null&&(C.flags|=2),C}function u(C,E,S,B){return E===null||E.tag!==6?(E=Ip(S,C.mode,B),E.return=C,E):(E=r(E,S),E.return=C,E)}function h(C,E,S,B){var q=S.type;return q===na?m(C,E,S.props.children,B,S.key):E!==null&&(E.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ir&&s0(q)===E.type)?(B=r(E,S.props),B.ref=Ol(C,E,S),B.return=C,B):(B=Nh(S.type,S.key,S.props,null,C.mode,B),B.ref=Ol(C,E,S),B.return=C,B)}function f(C,E,S,B){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Cp(S,C.mode,B),E.return=C,E):(E=r(E,S.children||[]),E.return=C,E)}function m(C,E,S,B,q){return E===null||E.tag!==7?(E=Ks(S,C.mode,B,q),E.return=C,E):(E=r(E,S),E.return=C,E)}function g(C,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ip(""+E,C.mode,S),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Kc:return S=Nh(E.type,E.key,E.props,null,C.mode,S),S.ref=Ol(C,null,E),S.return=C,S;case ta:return E=Cp(E,C.mode,S),E.return=C,E;case Ir:var B=E._init;return g(C,B(E._payload),S)}if(zl(E)||bl(E))return E=Ks(E,C.mode,S,null),E.return=C,E;oh(C,E)}return null}function v(C,E,S,B){var q=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return q!==null?null:u(C,E,""+S,B);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Kc:return S.key===q?h(C,E,S,B):null;case ta:return S.key===q?f(C,E,S,B):null;case Ir:return q=S._init,v(C,E,q(S._payload),B)}if(zl(S)||bl(S))return q!==null?null:m(C,E,S,B,null);oh(C,S)}return null}function T(C,E,S,B,q){if(typeof B=="string"&&B!==""||typeof B=="number")return C=C.get(S)||null,u(E,C,""+B,q);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Kc:return C=C.get(B.key===null?S:B.key)||null,h(E,C,B,q);case ta:return C=C.get(B.key===null?S:B.key)||null,f(E,C,B,q);case Ir:var K=B._init;return T(C,E,S,K(B._payload),q)}if(zl(B)||bl(B))return C=C.get(S)||null,m(E,C,B,q,null);oh(E,B)}return null}function k(C,E,S,B){for(var q=null,K=null,R=E,I=E=0,N=null;R!==null&&I<S.length;I++){R.index>I?(N=R,R=null):N=R.sibling;var O=v(C,R,S[I],B);if(O===null){R===null&&(R=N);break}t&&R&&O.alternate===null&&e(C,R),E=o(O,E,I),K===null?q=O:K.sibling=O,K=O,R=N}if(I===S.length)return n(C,R),Je&&Ds(C,I),q;if(R===null){for(;I<S.length;I++)R=g(C,S[I],B),R!==null&&(E=o(R,E,I),K===null?q=R:K.sibling=R,K=R);return Je&&Ds(C,I),q}for(R=i(C,R);I<S.length;I++)N=T(R,C,I,S[I],B),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?I:N.key),E=o(N,E,I),K===null?q=N:K.sibling=N,K=N);return t&&R.forEach(function(D){return e(C,D)}),Je&&Ds(C,I),q}function b(C,E,S,B){var q=bl(S);if(typeof q!="function")throw Error(ee(150));if(S=q.call(S),S==null)throw Error(ee(151));for(var K=q=null,R=E,I=E=0,N=null,O=S.next();R!==null&&!O.done;I++,O=S.next()){R.index>I?(N=R,R=null):N=R.sibling;var D=v(C,R,O.value,B);if(D===null){R===null&&(R=N);break}t&&R&&D.alternate===null&&e(C,R),E=o(D,E,I),K===null?q=D:K.sibling=D,K=D,R=N}if(O.done)return n(C,R),Je&&Ds(C,I),q;if(R===null){for(;!O.done;I++,O=S.next())O=g(C,O.value,B),O!==null&&(E=o(O,E,I),K===null?q=O:K.sibling=O,K=O);return Je&&Ds(C,I),q}for(R=i(C,R);!O.done;I++,O=S.next())O=T(R,C,I,O.value,B),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?I:O.key),E=o(O,E,I),K===null?q=O:K.sibling=O,K=O);return t&&R.forEach(function(z){return e(C,z)}),Je&&Ds(C,I),q}function F(C,E,S,B){if(typeof S=="object"&&S!==null&&S.type===na&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Kc:e:{for(var q=S.key,K=E;K!==null;){if(K.key===q){if(q=S.type,q===na){if(K.tag===7){n(C,K.sibling),E=r(K,S.props.children),E.return=C,C=E;break e}}else if(K.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ir&&s0(q)===K.type){n(C,K.sibling),E=r(K,S.props),E.ref=Ol(C,K,S),E.return=C,C=E;break e}n(C,K);break}else e(C,K);K=K.sibling}S.type===na?(E=Ks(S.props.children,C.mode,B,S.key),E.return=C,C=E):(B=Nh(S.type,S.key,S.props,null,C.mode,B),B.ref=Ol(C,E,S),B.return=C,C=B)}return a(C);case ta:e:{for(K=S.key;E!==null;){if(E.key===K)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(C,E.sibling),E=r(E,S.children||[]),E.return=C,C=E;break e}else{n(C,E);break}else e(C,E);E=E.sibling}E=Cp(S,C.mode,B),E.return=C,C=E}return a(C);case Ir:return K=S._init,F(C,E,K(S._payload),B)}if(zl(S))return k(C,E,S,B);if(bl(S))return b(C,E,S,B);oh(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(C,E.sibling),E=r(E,S),E.return=C,C=E):(n(C,E),E=Ip(S,C.mode,B),E.return=C,C=E),a(C)):n(C,E)}return F}var Na=Mx(!0),Ox=Mx(!1),sd=ms(null),od=null,ca=null,my=null;function gy(){my=ca=od=null}function yy(t){var e=sd.current;Ye(sd),t._currentValue=e}function Dm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function xa(t,e){od=t,my=ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Un(t){var e=t._currentValue;if(my!==t)if(t={context:t,memoizedValue:e,next:null},ca===null){if(od===null)throw Error(ee(308));ca=t,od.dependencies={lanes:0,firstContext:t}}else ca=ca.next=t;return e}var Ws=null;function _y(t){Ws===null?Ws=[t]:Ws.push(t)}function Dx(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,_y(e)):(n.next=r.next,r.next=n),e.interleaved=n,er(t,i)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function vy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,De&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,er(t,n)}return r=i.interleaved,r===null?(e.next=e,_y(i)):(e.next=r.next,r.next=e),i.interleaved=e,er(t,n)}function Ch(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ry(t,n)}}function o0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ad(t,e,n,i){var r=t.updateQueue;Cr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var v=u.lane,T=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,b=u;switch(v=e,T=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){g=k.call(T,g,v);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,v=typeof k=="function"?k.call(T,g,v):k,v==null)break e;g=rt({},g,v);break e;case 2:Cr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,h=g):m=m.next=T,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);io|=a,t.lanes=a,t.memoizedState=g}}function a0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var Yu={},vi=ms(Yu),Au=ms(Yu),ku=ms(Yu);function $s(t){if(t===Yu)throw Error(ee(174));return t}function wy(t,e){switch(qe(ku,e),qe(Au,t),qe(vi,Yu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gm(e,t)}Ye(vi),qe(vi,e)}function Ma(){Ye(vi),Ye(Au),Ye(ku)}function jx(t){$s(ku.current);var e=$s(vi.current),n=gm(e,t.type);e!==n&&(qe(Au,t),qe(vi,n))}function Ty(t){Au.current===t&&(Ye(vi),Ye(Au))}var et=ms(0);function ld(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wp=[];function xy(){for(var t=0;t<wp.length;t++)wp[t]._workInProgressVersionPrimary=null;wp.length=0}var Ah=lr.ReactCurrentDispatcher,Tp=lr.ReactCurrentBatchConfig,no=0,nt=null,Tt=null,Rt=null,ud=!1,tu=!1,bu=0,Sb=0;function Ut(){throw Error(ee(321))}function Ey(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!si(t[n],e[n]))return!1;return!0}function Py(t,e,n,i,r,o){if(no=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ah.current=t===null||t.memoizedState===null?kb:bb,t=n(i,r),tu){o=0;do{if(tu=!1,bu=0,25<=o)throw Error(ee(301));o+=1,Rt=Tt=null,e.updateQueue=null,Ah.current=Rb,t=n(i,r)}while(tu)}if(Ah.current=cd,e=Tt!==null&&Tt.next!==null,no=0,Rt=Tt=nt=null,ud=!1,e)throw Error(ee(300));return t}function Sy(){var t=bu!==0;return bu=0,t}function mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Hn(){if(Tt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Rt===null?nt.memoizedState:Rt.next;if(e!==null)Rt=e,Tt=t;else{if(t===null)throw Error(ee(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Ru(t,e){return typeof e=="function"?e(t):e}function xp(t){var e=Hn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=Tt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((no&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,nt.lanes|=m,io|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,si(i,e.memoizedState)||(dn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,nt.lanes|=o,io|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ep(t){var e=Hn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);si(o,e.memoizedState)||(dn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Fx(){}function Bx(t,e){var n=nt,i=Hn(),r=e(),o=!si(i.memoizedState,r);if(o&&(i.memoizedState=r,dn=!0),i=i.queue,Iy(Hx.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Lu(9,Ux.bind(null,n,i,r,e),void 0,null),Lt===null)throw Error(ee(349));no&30||zx(n,e,r)}return r}function zx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ux(t,e,n,i){e.value=n,e.getSnapshot=i,Wx(e)&&$x(t)}function Hx(t,e,n){return n(function(){Wx(e)&&$x(t)})}function Wx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!si(t,n)}catch{return!0}}function $x(t){var e=er(t,1);e!==null&&ri(e,t,1,-1)}function l0(t){var e=mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ru,lastRenderedState:t},e.queue=t,t=t.dispatch=Ab.bind(null,nt,t),[e.memoizedState,t]}function Lu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function qx(){return Hn().memoizedState}function kh(t,e,n,i){var r=mi();nt.flags|=t,r.memoizedState=Lu(1|e,n,void 0,i===void 0?null:i)}function ef(t,e,n,i){var r=Hn();i=i===void 0?null:i;var o=void 0;if(Tt!==null){var a=Tt.memoizedState;if(o=a.destroy,i!==null&&Ey(i,a.deps)){r.memoizedState=Lu(e,n,o,i);return}}nt.flags|=t,r.memoizedState=Lu(1|e,n,o,i)}function u0(t,e){return kh(8390656,8,t,e)}function Iy(t,e){return ef(2048,8,t,e)}function Gx(t,e){return ef(4,2,t,e)}function Zx(t,e){return ef(4,4,t,e)}function Kx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qx(t,e,n){return n=n!=null?n.concat([t]):null,ef(4,4,Kx.bind(null,e,t),n)}function Cy(){}function Xx(t,e){var n=Hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ey(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Yx(t,e){var n=Hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ey(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Jx(t,e,n){return no&21?(si(n,e)||(n=rx(),nt.lanes|=n,io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function Ib(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var i=Tp.transition;Tp.transition={};try{t(!1),e()}finally{He=n,Tp.transition=i}}function eE(){return Hn().memoizedState}function Cb(t,e,n){var i=qr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},tE(t))nE(e,n);else if(n=Dx(t,e,n,i),n!==null){var r=nn();ri(n,t,i,r),iE(n,e,i)}}function Ab(t,e,n){var i=qr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(tE(t))nE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,si(u,a)){var h=e.interleaved;h===null?(r.next=r,_y(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=Dx(t,e,r,i),n!==null&&(r=nn(),ri(n,t,i,r),iE(n,e,i))}}function tE(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function nE(t,e){tu=ud=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ry(t,n)}}var cd={readContext:Un,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},kb={readContext:Un,useCallback:function(t,e){return mi().memoizedState=[t,e===void 0?null:e],t},useContext:Un,useEffect:u0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kh(4194308,4,Kx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kh(4194308,4,t,e)},useInsertionEffect:function(t,e){return kh(4,2,t,e)},useMemo:function(t,e){var n=mi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=mi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Cb.bind(null,nt,t),[i.memoizedState,t]},useRef:function(t){var e=mi();return t={current:t},e.memoizedState=t},useState:l0,useDebugValue:Cy,useDeferredValue:function(t){return mi().memoizedState=t},useTransition:function(){var t=l0(!1),e=t[0];return t=Ib.bind(null,t[1]),mi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nt,r=mi();if(Je){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Lt===null)throw Error(ee(349));no&30||zx(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,u0(Hx.bind(null,i,o,t),[t]),i.flags|=2048,Lu(9,Ux.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=mi(),e=Lt.identifierPrefix;if(Je){var n=Wi,i=Hi;n=(i&~(1<<32-ii(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=bu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bb={readContext:Un,useCallback:Xx,useContext:Un,useEffect:Iy,useImperativeHandle:Qx,useInsertionEffect:Gx,useLayoutEffect:Zx,useMemo:Yx,useReducer:xp,useRef:qx,useState:function(){return xp(Ru)},useDebugValue:Cy,useDeferredValue:function(t){var e=Hn();return Jx(e,Tt.memoizedState,t)},useTransition:function(){var t=xp(Ru)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:Fx,useSyncExternalStore:Bx,useId:eE,unstable_isNewReconciler:!1},Rb={readContext:Un,useCallback:Xx,useContext:Un,useEffect:Iy,useImperativeHandle:Qx,useInsertionEffect:Gx,useLayoutEffect:Zx,useMemo:Yx,useReducer:Ep,useRef:qx,useState:function(){return Ep(Ru)},useDebugValue:Cy,useDeferredValue:function(t){var e=Hn();return Tt===null?e.memoizedState=t:Jx(e,Tt.memoizedState,t)},useTransition:function(){var t=Ep(Ru)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:Fx,useSyncExternalStore:Bx,useId:eE,unstable_isNewReconciler:!1};function Xn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tf={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=nn(),r=qr(t),o=Zi(i,r);o.payload=e,n!=null&&(o.callback=n),e=Wr(t,o,r),e!==null&&(ri(e,t,r,i),Ch(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=nn(),r=qr(t),o=Zi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Wr(t,o,r),e!==null&&(ri(e,t,r,i),Ch(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),i=qr(t),r=Zi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Wr(t,r,i),e!==null&&(ri(e,t,i,n),Ch(e,t,i))}};function c0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Pu(n,i)||!Pu(r,o):!0}function rE(t,e,n){var i=!1,r=rs,o=e.contextType;return typeof o=="object"&&o!==null?o=Un(o):(r=pn(e)?eo:Kt.current,i=e.contextTypes,o=(i=i!=null)?Ra(t,r):rs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function h0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&tf.enqueueReplaceState(e,e.state,null)}function jm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},vy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Un(o):(o=pn(e)?eo:Kt.current,r.context=Ra(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Vm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&tf.enqueueReplaceState(r,r.state,null),ad(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Oa(t,e){try{var n="",i=e;do n+=sk(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Pp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lb=typeof WeakMap=="function"?WeakMap:Map;function sE(t,e,n){n=Zi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){dd||(dd=!0,Km=i),Fm(t,e)},n}function oE(t,e,n){n=Zi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Fm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Fm(t,e),typeof i!="function"&&($r===null?$r=new Set([this]):$r.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function d0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Lb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=qb.bind(null,t,e,n),e.then(t,t))}function f0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function p0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zi(-1,1),e.tag=2,Wr(n,e,1))),n.lanes|=1),t)}var Nb=lr.ReactCurrentOwner,dn=!1;function tn(t,e,n,i){e.child=t===null?Ox(e,null,n,i):Na(e,t.child,n,i)}function m0(t,e,n,i,r){n=n.render;var o=e.ref;return xa(e,r),i=Py(t,e,n,i,o,r),n=Sy(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,tr(t,e,r)):(Je&&n&&dy(e),e.flags|=1,tn(t,e,i,r),e.child)}function g0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Oy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,aE(t,e,o,i,r)):(t=Nh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Pu,n(a,i)&&t.ref===e.ref)return tr(t,e,r)}return e.flags|=1,t=Gr(o,i),t.ref=e.ref,t.return=e,e.child=t}function aE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Pu(o,i)&&t.ref===e.ref)if(dn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,tr(t,e,r)}return Bm(t,e,n,i,r)}function lE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(da,vn),vn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(da,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,qe(da,vn),vn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,qe(da,vn),vn|=i;return tn(t,e,r,n),e.child}function uE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bm(t,e,n,i,r){var o=pn(n)?eo:Kt.current;return o=Ra(e,o),xa(e,r),n=Py(t,e,n,i,o,r),i=Sy(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,tr(t,e,r)):(Je&&i&&dy(e),e.flags|=1,tn(t,e,n,r),e.child)}function y0(t,e,n,i,r){if(pn(n)){var o=!0;nd(e)}else o=!1;if(xa(e,r),e.stateNode===null)bh(t,e),rE(e,n,i),jm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Un(f):(f=pn(n)?eo:Kt.current,f=Ra(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&h0(e,a,i,f),Cr=!1;var v=e.memoizedState;a.state=v,ad(e,i,a,r),h=e.memoizedState,u!==i||v!==h||fn.current||Cr?(typeof m=="function"&&(Vm(e,n,m,i),h=e.memoizedState),(u=Cr||c0(e,n,u,i,v,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Vx(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Xn(e.type,u),a.props=f,g=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Un(h):(h=pn(n)?eo:Kt.current,h=Ra(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||v!==h)&&h0(e,a,i,h),Cr=!1,v=e.memoizedState,a.state=v,ad(e,i,a,r);var k=e.memoizedState;u!==g||v!==k||fn.current||Cr?(typeof T=="function"&&(Vm(e,n,T,i),k=e.memoizedState),(f=Cr||c0(e,n,f,i,v,k,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return zm(t,e,n,i,o,r)}function zm(t,e,n,i,r,o){uE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&n0(e,n,!1),tr(t,e,o);i=e.stateNode,Nb.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Na(e,t.child,null,o),e.child=Na(e,null,u,o)):tn(t,e,u,o),e.memoizedState=i.state,r&&n0(e,n,!0),e.child}function cE(t){var e=t.stateNode;e.pendingContext?t0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&t0(t,e.context,!1),wy(t,e.containerInfo)}function _0(t,e,n,i,r){return La(),py(r),e.flags|=256,tn(t,e,n,i),e.child}var Um={dehydrated:null,treeContext:null,retryLane:0};function Hm(t){return{baseLanes:t,cachePool:null,transitions:null}}function hE(t,e,n){var i=e.pendingProps,r=et.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),qe(et,r&1),t===null)return Om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=sf(a,i,0,null),t=Ks(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Hm(n),e.memoizedState=Um,t):Ay(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Mb(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Gr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Gr(u,o):(o=Ks(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Hm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Um,i}return o=t.child,t=o.sibling,i=Gr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ay(t,e){return e=sf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ah(t,e,n,i){return i!==null&&py(i),Na(e,t.child,null,n),t=Ay(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mb(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Pp(Error(ee(422))),ah(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=sf({mode:"visible",children:i.children},r,0,null),o=Ks(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Na(e,t.child,null,a),e.child.memoizedState=Hm(a),e.memoizedState=Um,o);if(!(e.mode&1))return ah(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=Pp(o,i,void 0),ah(t,e,a,i)}if(u=(a&t.childLanes)!==0,dn||u){if(i=Lt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,er(t,r),ri(i,t,r,-1))}return My(),i=Pp(Error(ee(421))),ah(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Gb.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,wn=Hr(r.nextSibling),Tn=e,Je=!0,Jn=null,t!==null&&(Dn[Vn++]=Hi,Dn[Vn++]=Wi,Dn[Vn++]=to,Hi=t.id,Wi=t.overflow,to=e),e=Ay(e,i.children),e.flags|=4096,e)}function v0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Dm(t.return,e,n)}function Sp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function dE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(tn(t,e,i.children,n),i=et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v0(t,n,e);else if(t.tag===19)v0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(qe(et,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ld(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Sp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ld(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Sp(e,!0,n,null,o);break;case"together":Sp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ob(t,e,n){switch(e.tag){case 3:cE(e),La();break;case 5:jx(e);break;case 1:pn(e.type)&&nd(e);break;case 4:wy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;qe(sd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(qe(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?hE(t,e,n):(qe(et,et.current&1),t=tr(t,e,n),t!==null?t.sibling:null);qe(et,et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return dE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),qe(et,et.current),i)break;return null;case 22:case 23:return e.lanes=0,lE(t,e,n)}return tr(t,e,n)}var fE,Wm,pE,mE;fE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wm=function(){};pE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,$s(vi.current);var o=null;switch(n){case"input":r=dm(t,r),i=dm(t,i),o=[];break;case"select":r=rt({},r,{value:void 0}),i=rt({},i,{value:void 0}),o=[];break;case"textarea":r=mm(t,r),i=mm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ed)}ym(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(yu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(yu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ze("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};mE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Dl(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Db(t,e,n){var i=e.pendingProps;switch(fy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return pn(e.type)&&td(),Ht(e),null;case 3:return i=e.stateNode,Ma(),Ye(fn),Ye(Kt),xy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(sh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(Ym(Jn),Jn=null))),Wm(t,e),Ht(e),null;case 5:Ty(e);var r=$s(ku.current);if(n=e.type,t!==null&&e.stateNode!=null)pE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return Ht(e),null}if(t=$s(vi.current),sh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[yi]=e,i[Cu]=o,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(r=0;r<Hl.length;r++)Ze(Hl[r],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":Av(i,o),Ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ze("invalid",i);break;case"textarea":bv(i,o),Ze("invalid",i)}ym(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&rh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&rh(i.textContent,u,t),r=["children",""+u]):yu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ze("scroll",i)}switch(n){case"input":Qc(i),kv(i,o,!0);break;case"textarea":Qc(i),Rv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=ed)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=H1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[yi]=e,t[Cu]=i,fE(t,e,!1,!1),e.stateNode=t;e:{switch(a=_m(n,i),n){case"dialog":Ze("cancel",t),Ze("close",t),r=i;break;case"iframe":case"object":case"embed":Ze("load",t),r=i;break;case"video":case"audio":for(r=0;r<Hl.length;r++)Ze(Hl[r],t);r=i;break;case"source":Ze("error",t),r=i;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),r=i;break;case"details":Ze("toggle",t),r=i;break;case"input":Av(t,i),r=dm(t,i),Ze("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=rt({},i,{value:void 0}),Ze("invalid",t);break;case"textarea":bv(t,i),r=mm(t,i),Ze("invalid",t);break;default:r=i}ym(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?q1(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&W1(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&_u(t,h):typeof h=="number"&&_u(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(yu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ze("scroll",t):h!=null&&Yg(t,o,h,a))}switch(n){case"input":Qc(t),kv(t,i,!1);break;case"textarea":Qc(t),Rv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+is(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?_a(t,!!i.multiple,o,!1):i.defaultValue!=null&&_a(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ed)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)mE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=$s(ku.current),$s(vi.current),sh(e)){if(i=e.stateNode,n=e.memoizedProps,i[yi]=e,(o=i.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:rh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[yi]=e,e.stateNode=i}return Ht(e),null;case 13:if(Ye(et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&wn!==null&&e.mode&1&&!(e.flags&128))Nx(),La(),e.flags|=98560,o=!1;else if(o=sh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[yi]=e}else La(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),o=!1}else Jn!==null&&(Ym(Jn),Jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?Et===0&&(Et=3):My())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return Ma(),Wm(t,e),t===null&&Su(e.stateNode.containerInfo),Ht(e),null;case 10:return yy(e.type._context),Ht(e),null;case 17:return pn(e.type)&&td(),Ht(e),null;case 19:if(Ye(et),o=e.memoizedState,o===null)return Ht(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Dl(o,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ld(t),a!==null){for(e.flags|=128,Dl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(et,et.current&1|2),e.child}t=t.sibling}o.tail!==null&&dt()>Da&&(e.flags|=128,i=!0,Dl(o,!1),e.lanes=4194304)}else{if(!i)if(t=ld(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Dl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Je)return Ht(e),null}else 2*dt()-o.renderingStartTime>Da&&n!==1073741824&&(e.flags|=128,i=!0,Dl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=dt(),e.sibling=null,n=et.current,qe(et,i?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return Ny(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?vn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function Vb(t,e){switch(fy(e),e.tag){case 1:return pn(e.type)&&td(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ma(),Ye(fn),Ye(Kt),xy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ty(e),null;case 13:if(Ye(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));La()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(et),null;case 4:return Ma(),null;case 10:return yy(e.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var lh=!1,Gt=!1,jb=typeof WeakSet=="function"?WeakSet:Set,se=null;function ha(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ut(t,e,i)}else n.current=null}function $m(t,e,n){try{n()}catch(i){ut(t,e,i)}}var w0=!1;function Fb(t,e){if(Am=Xh,t=wx(),hy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,v=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)v=g,g=T;for(;;){if(g===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++m===i&&(h=a),(T=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:t,selectionRange:n},Xh=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,F=k.memoizedState,C=e.stateNode,E=C.getSnapshotBeforeUpdate(e.elementType===e.type?b:Xn(e.type,b),F);C.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(B){ut(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return k=w0,w0=!1,k}function nu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&$m(e,n,o)}r=r.next}while(r!==i)}}function nf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function qm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gE(t){var e=t.alternate;e!==null&&(t.alternate=null,gE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yi],delete e[Cu],delete e[Lm],delete e[Tb],delete e[xb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yE(t){return t.tag===5||t.tag===3||t.tag===4}function T0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ed));else if(i!==4&&(t=t.child,t!==null))for(Gm(t,e,n),t=t.sibling;t!==null;)Gm(t,e,n),t=t.sibling}function Zm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}var Nt=null,Yn=!1;function xr(t,e,n){for(n=n.child;n!==null;)_E(t,e,n),n=n.sibling}function _E(t,e,n){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Zd,n)}catch{}switch(n.tag){case 5:Gt||ha(n,e);case 6:var i=Nt,r=Yn;Nt=null,xr(t,e,n),Nt=i,Yn=r,Nt!==null&&(Yn?(t=Nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Yn?(t=Nt,n=n.stateNode,t.nodeType===8?_p(t.parentNode,n):t.nodeType===1&&_p(t,n),xu(t)):_p(Nt,n.stateNode));break;case 4:i=Nt,r=Yn,Nt=n.stateNode.containerInfo,Yn=!0,xr(t,e,n),Nt=i,Yn=r;break;case 0:case 11:case 14:case 15:if(!Gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&$m(n,e,a),r=r.next}while(r!==i)}xr(t,e,n);break;case 1:if(!Gt&&(ha(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){ut(n,e,u)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(Gt=(i=Gt)||n.memoizedState!==null,xr(t,e,n),Gt=i):xr(t,e,n);break;default:xr(t,e,n)}}function x0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jb),e.forEach(function(i){var r=Zb.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Nt=u.stateNode,Yn=!1;break e;case 3:Nt=u.stateNode.containerInfo,Yn=!0;break e;case 4:Nt=u.stateNode.containerInfo,Yn=!0;break e}u=u.return}if(Nt===null)throw Error(ee(160));_E(o,a,r),Nt=null,Yn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){ut(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vE(e,t),e=e.sibling}function vE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),pi(t),i&4){try{nu(3,t,t.return),nf(3,t)}catch(b){ut(t,t.return,b)}try{nu(5,t,t.return)}catch(b){ut(t,t.return,b)}}break;case 1:Qn(e,t),pi(t),i&512&&n!==null&&ha(n,n.return);break;case 5:if(Qn(e,t),pi(t),i&512&&n!==null&&ha(n,n.return),t.flags&32){var r=t.stateNode;try{_u(r,"")}catch(b){ut(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&z1(r,o),_m(u,a);var f=_m(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?q1(r,g):m==="dangerouslySetInnerHTML"?W1(r,g):m==="children"?_u(r,g):Yg(r,m,g,f)}switch(u){case"input":fm(r,o);break;case"textarea":U1(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?_a(r,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?_a(r,!!o.multiple,o.defaultValue,!0):_a(r,!!o.multiple,o.multiple?[]:"",!1))}r[Cu]=o}catch(b){ut(t,t.return,b)}}break;case 6:if(Qn(e,t),pi(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){ut(t,t.return,b)}}break;case 3:if(Qn(e,t),pi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{xu(e.containerInfo)}catch(b){ut(t,t.return,b)}break;case 4:Qn(e,t),pi(t);break;case 13:Qn(e,t),pi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Ry=dt())),i&4&&x0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Gt=(f=Gt)||m,Qn(e,t),Gt=f):Qn(e,t),pi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(se=t,m=t.child;m!==null;){for(g=se=m;se!==null;){switch(v=se,T=v.child,v.tag){case 0:case 11:case 14:case 15:nu(4,v,v.return);break;case 1:ha(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){ut(i,n,b)}}break;case 5:ha(v,v.return);break;case 22:if(v.memoizedState!==null){P0(g);continue}}T!==null?(T.return=v,se=T):P0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=$1("display",a))}catch(b){ut(t,t.return,b)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(b){ut(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Qn(e,t),pi(t),i&4&&x0(t);break;case 21:break;default:Qn(e,t),pi(t)}}function pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yE(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(_u(r,""),i.flags&=-33);var o=T0(t);Zm(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=T0(t);Gm(t,u,a);break;default:throw Error(ee(161))}}catch(h){ut(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bb(t,e,n){se=t,wE(t)}function wE(t,e,n){for(var i=(t.mode&1)!==0;se!==null;){var r=se,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||lh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Gt;u=lh;var f=Gt;if(lh=a,(Gt=h)&&!f)for(se=r;se!==null;)a=se,h=a.child,a.tag===22&&a.memoizedState!==null?S0(r):h!==null?(h.return=a,se=h):S0(r);for(;o!==null;)se=o,wE(o),o=o.sibling;se=r,lh=u,Gt=f}E0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,se=o):E0(t)}}function E0(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||nf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Gt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Xn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&a0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}a0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&xu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Gt||e.flags&512&&qm(e)}catch(v){ut(e,e.return,v)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function P0(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function S0(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nf(4,e)}catch(h){ut(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){ut(e,r,h)}}var o=e.return;try{qm(e)}catch(h){ut(e,o,h)}break;case 5:var a=e.return;try{qm(e)}catch(h){ut(e,a,h)}}}catch(h){ut(e,e.return,h)}if(e===t){se=null;break}var u=e.sibling;if(u!==null){u.return=e.return,se=u;break}se=e.return}}var zb=Math.ceil,hd=lr.ReactCurrentDispatcher,ky=lr.ReactCurrentOwner,zn=lr.ReactCurrentBatchConfig,De=0,Lt=null,vt=null,Dt=0,vn=0,da=ms(0),Et=0,Nu=null,io=0,rf=0,by=0,iu=null,hn=null,Ry=0,Da=1/0,zi=null,dd=!1,Km=null,$r=null,uh=!1,Vr=null,fd=0,ru=0,Qm=null,Rh=-1,Lh=0;function nn(){return De&6?dt():Rh!==-1?Rh:Rh=dt()}function qr(t){return t.mode&1?De&2&&Dt!==0?Dt&-Dt:Pb.transition!==null?(Lh===0&&(Lh=rx()),Lh):(t=He,t!==0||(t=window.event,t=t===void 0?16:hx(t.type)),t):1}function ri(t,e,n,i){if(50<ru)throw ru=0,Qm=null,Error(ee(185));Ku(t,n,i),(!(De&2)||t!==Lt)&&(t===Lt&&(!(De&2)&&(rf|=n),Et===4&&br(t,Dt)),mn(t,i),n===1&&De===0&&!(e.mode&1)&&(Da=dt()+500,Jd&&gs()))}function mn(t,e){var n=t.callbackNode;Pk(t,e);var i=Qh(t,t===Lt?Dt:0);if(i===0)n!==null&&Mv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Mv(n),e===1)t.tag===0?Eb(I0.bind(null,t)):bx(I0.bind(null,t)),vb(function(){!(De&6)&&gs()}),n=null;else{switch(sx(i)){case 1:n=iy;break;case 4:n=nx;break;case 16:n=Kh;break;case 536870912:n=ix;break;default:n=Kh}n=AE(n,TE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TE(t,e){if(Rh=-1,Lh=0,De&6)throw Error(ee(327));var n=t.callbackNode;if(Ea()&&t.callbackNode!==n)return null;var i=Qh(t,t===Lt?Dt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=pd(t,i);else{e=i;var r=De;De|=2;var o=EE();(Lt!==t||Dt!==e)&&(zi=null,Da=dt()+500,Zs(t,e));do try{Wb();break}catch(u){xE(t,u)}while(!0);gy(),hd.current=o,De=r,vt!==null?e=0:(Lt=null,Dt=0,e=Et)}if(e!==0){if(e===2&&(r=Em(t),r!==0&&(i=r,e=Xm(t,r))),e===1)throw n=Nu,Zs(t,0),br(t,i),mn(t,dt()),n;if(e===6)br(t,i);else{if(r=t.current.alternate,!(i&30)&&!Ub(r)&&(e=pd(t,i),e===2&&(o=Em(t),o!==0&&(i=o,e=Xm(t,o))),e===1))throw n=Nu,Zs(t,0),br(t,i),mn(t,dt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:Vs(t,hn,zi);break;case 3:if(br(t,i),(i&130023424)===i&&(e=Ry+500-dt(),10<e)){if(Qh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){nn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Rm(Vs.bind(null,t,hn,zi),e);break}Vs(t,hn,zi);break;case 4:if(br(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ii(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=dt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zb(i/1960))-i,10<i){t.timeoutHandle=Rm(Vs.bind(null,t,hn,zi),i);break}Vs(t,hn,zi);break;case 5:Vs(t,hn,zi);break;default:throw Error(ee(329))}}}return mn(t,dt()),t.callbackNode===n?TE.bind(null,t):null}function Xm(t,e){var n=iu;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=pd(t,e),t!==2&&(e=hn,hn=n,e!==null&&Ym(e)),t}function Ym(t){hn===null?hn=t:hn.push.apply(hn,t)}function Ub(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!si(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~by,e&=~rf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ii(e),i=1<<n;t[n]=-1,e&=~i}}function I0(t){if(De&6)throw Error(ee(327));Ea();var e=Qh(t,0);if(!(e&1))return mn(t,dt()),null;var n=pd(t,e);if(t.tag!==0&&n===2){var i=Em(t);i!==0&&(e=i,n=Xm(t,i))}if(n===1)throw n=Nu,Zs(t,0),br(t,e),mn(t,dt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vs(t,hn,zi),mn(t,dt()),null}function Ly(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(Da=dt()+500,Jd&&gs())}}function ro(t){Vr!==null&&Vr.tag===0&&!(De&6)&&Ea();var e=De;De|=1;var n=zn.transition,i=He;try{if(zn.transition=null,He=1,t)return t()}finally{He=i,zn.transition=n,De=e,!(De&6)&&gs()}}function Ny(){vn=da.current,Ye(da)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_b(n)),vt!==null)for(n=vt.return;n!==null;){var i=n;switch(fy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&td();break;case 3:Ma(),Ye(fn),Ye(Kt),xy();break;case 5:Ty(i);break;case 4:Ma();break;case 13:Ye(et);break;case 19:Ye(et);break;case 10:yy(i.type._context);break;case 22:case 23:Ny()}n=n.return}if(Lt=t,vt=t=Gr(t.current,null),Dt=vn=e,Et=0,Nu=null,by=rf=io=0,hn=iu=null,Ws!==null){for(e=0;e<Ws.length;e++)if(n=Ws[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Ws=null}return t}function xE(t,e){do{var n=vt;try{if(gy(),Ah.current=cd,ud){for(var i=nt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ud=!1}if(no=0,Rt=Tt=nt=null,tu=!1,bu=0,ky.current=null,n===null||n.return===null){Et=1,Nu=e,vt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Dt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=f0(a);if(T!==null){T.flags&=-257,p0(T,a,u,o,e),T.mode&1&&d0(o,f,e),e=T,h=f;var k=e.updateQueue;if(k===null){var b=new Set;b.add(h),e.updateQueue=b}else k.add(h);break e}else{if(!(e&1)){d0(o,f,e),My();break e}h=Error(ee(426))}}else if(Je&&u.mode&1){var F=f0(a);if(F!==null){!(F.flags&65536)&&(F.flags|=256),p0(F,a,u,o,e),py(Oa(h,u));break e}}o=h=Oa(h,u),Et!==4&&(Et=2),iu===null?iu=[o]:iu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=sE(o,h,e);o0(o,C);break e;case 1:u=h;var E=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($r===null||!$r.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=oE(o,u,e);o0(o,B);break e}}o=o.return}while(o!==null)}SE(n)}catch(q){e=q,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function EE(){var t=hd.current;return hd.current=cd,t===null?cd:t}function My(){(Et===0||Et===3||Et===2)&&(Et=4),Lt===null||!(io&268435455)&&!(rf&268435455)||br(Lt,Dt)}function pd(t,e){var n=De;De|=2;var i=EE();(Lt!==t||Dt!==e)&&(zi=null,Zs(t,e));do try{Hb();break}catch(r){xE(t,r)}while(!0);if(gy(),De=n,hd.current=i,vt!==null)throw Error(ee(261));return Lt=null,Dt=0,Et}function Hb(){for(;vt!==null;)PE(vt)}function Wb(){for(;vt!==null&&!mk();)PE(vt)}function PE(t){var e=CE(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?SE(t):vt=e,ky.current=null}function SE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vb(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,vt=null;return}}else if(n=Db(n,e,vn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Et===0&&(Et=5)}function Vs(t,e,n){var i=He,r=zn.transition;try{zn.transition=null,He=1,$b(t,e,n,i)}finally{zn.transition=r,He=i}return null}function $b(t,e,n,i){do Ea();while(Vr!==null);if(De&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Sk(t,o),t===Lt&&(vt=Lt=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uh||(uh=!0,AE(Kh,function(){return Ea(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=zn.transition,zn.transition=null;var a=He;He=1;var u=De;De|=4,ky.current=null,Fb(t,n),vE(n,t),hb(km),Xh=!!Am,km=Am=null,t.current=n,Bb(n),gk(),De=u,He=a,zn.transition=o}else t.current=n;if(uh&&(uh=!1,Vr=t,fd=r),o=t.pendingLanes,o===0&&($r=null),vk(n.stateNode),mn(t,dt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(dd)throw dd=!1,t=Km,Km=null,t;return fd&1&&t.tag!==0&&Ea(),o=t.pendingLanes,o&1?t===Qm?ru++:(ru=0,Qm=t):ru=0,gs(),null}function Ea(){if(Vr!==null){var t=sx(fd),e=zn.transition,n=He;try{if(zn.transition=null,He=16>t?16:t,Vr===null)var i=!1;else{if(t=Vr,Vr=null,fd=0,De&6)throw Error(ee(331));var r=De;for(De|=4,se=t.current;se!==null;){var o=se,a=o.child;if(se.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(se=f;se!==null;){var m=se;switch(m.tag){case 0:case 11:case 15:nu(8,m,o)}var g=m.child;if(g!==null)g.return=m,se=g;else for(;se!==null;){m=se;var v=m.sibling,T=m.return;if(gE(m),m===f){se=null;break}if(v!==null){v.return=T,se=v;break}se=T}}}var k=o.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var F=b.sibling;b.sibling=null,b=F}while(b!==null)}}se=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,se=a;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,se=C;break e}se=o.return}}var E=t.current;for(se=E;se!==null;){a=se;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,se=S;else e:for(a=E;se!==null;){if(u=se,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:nf(9,u)}}catch(q){ut(u,u.return,q)}if(u===a){se=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,se=B;break e}se=u.return}}if(De=r,gs(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Zd,t)}catch{}i=!0}return i}finally{He=n,zn.transition=e}}return!1}function C0(t,e,n){e=Oa(n,e),e=sE(t,e,1),t=Wr(t,e,1),e=nn(),t!==null&&(Ku(t,1,e),mn(t,e))}function ut(t,e,n){if(t.tag===3)C0(t,t,n);else for(;e!==null;){if(e.tag===3){C0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($r===null||!$r.has(i))){t=Oa(n,t),t=oE(e,t,1),e=Wr(e,t,1),t=nn(),e!==null&&(Ku(e,1,t),mn(e,t));break}}e=e.return}}function qb(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Dt&n)===n&&(Et===4||Et===3&&(Dt&130023424)===Dt&&500>dt()-Ry?Zs(t,0):by|=n),mn(t,e)}function IE(t,e){e===0&&(t.mode&1?(e=Jc,Jc<<=1,!(Jc&130023424)&&(Jc=4194304)):e=1);var n=nn();t=er(t,e),t!==null&&(Ku(t,e,n),mn(t,n))}function Gb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IE(t,n)}function Zb(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),IE(t,n)}var CE;CE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,Ob(t,e,n);dn=!!(t.flags&131072)}else dn=!1,Je&&e.flags&1048576&&Rx(e,rd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;bh(t,e),t=e.pendingProps;var r=Ra(e,Kt.current);xa(e,n),r=Py(null,e,i,t,r,n);var o=Sy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(i)?(o=!0,nd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vy(e),r.updater=tf,e.stateNode=r,r._reactInternals=e,jm(e,i,t,n),e=zm(null,e,i,!0,o,n)):(e.tag=0,Je&&o&&dy(e),tn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(bh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Qb(i),t=Xn(i,t),r){case 0:e=Bm(null,e,i,t,n);break e;case 1:e=y0(null,e,i,t,n);break e;case 11:e=m0(null,e,i,t,n);break e;case 14:e=g0(null,e,i,Xn(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xn(i,r),Bm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xn(i,r),y0(t,e,i,r,n);case 3:e:{if(cE(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,Vx(t,e),ad(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Oa(Error(ee(423)),e),e=_0(t,e,i,n,r);break e}else if(i!==r){r=Oa(Error(ee(424)),e),e=_0(t,e,i,n,r);break e}else for(wn=Hr(e.stateNode.containerInfo.firstChild),Tn=e,Je=!0,Jn=null,n=Ox(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(La(),i===r){e=tr(t,e,n);break e}tn(t,e,i,n)}e=e.child}return e;case 5:return jx(e),t===null&&Om(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,bm(i,r)?a=null:o!==null&&bm(i,o)&&(e.flags|=32),uE(t,e),tn(t,e,a,n),e.child;case 6:return t===null&&Om(e),null;case 13:return hE(t,e,n);case 4:return wy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Na(e,null,i,n):tn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xn(i,r),m0(t,e,i,r,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,qe(sd,i._currentValue),i._currentValue=a,o!==null)if(si(o.value,a)){if(o.children===r.children&&!fn.current){e=tr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=Zi(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Dm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Dm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}tn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,xa(e,n),r=Un(r),i=i(r),e.flags|=1,tn(t,e,i,n),e.child;case 14:return i=e.type,r=Xn(i,e.pendingProps),r=Xn(i.type,r),g0(t,e,i,r,n);case 15:return aE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xn(i,r),bh(t,e),e.tag=1,pn(i)?(t=!0,nd(e)):t=!1,xa(e,n),rE(e,i,r),jm(e,i,r,n),zm(null,e,i,!0,t,n);case 19:return dE(t,e,n);case 22:return lE(t,e,n)}throw Error(ee(156,e.tag))};function AE(t,e){return tx(t,e)}function Kb(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,i){return new Kb(t,e,n,i)}function Oy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qb(t){if(typeof t=="function")return Oy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ey)return 11;if(t===ty)return 14}return 2}function Gr(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Oy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case na:return Ks(n.children,r,o,e);case Jg:a=8,r|=8;break;case lm:return t=Bn(12,n,e,r|2),t.elementType=lm,t.lanes=o,t;case um:return t=Bn(13,n,e,r),t.elementType=um,t.lanes=o,t;case cm:return t=Bn(19,n,e,r),t.elementType=cm,t.lanes=o,t;case j1:return sf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D1:a=10;break e;case V1:a=9;break e;case ey:a=11;break e;case ty:a=14;break e;case Ir:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Bn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Ks(t,e,n,i){return t=Bn(7,t,i,e),t.lanes=n,t}function sf(t,e,n,i){return t=Bn(22,t,i,e),t.elementType=j1,t.lanes=n,t.stateNode={isHidden:!1},t}function Ip(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function Cp(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xb(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ap(0),this.expirationTimes=ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ap(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Dy(t,e,n,i,r,o,a,u,h){return t=new Xb(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Bn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vy(o),t}function Yb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function kE(t){if(!t)return rs;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(pn(n))return kx(t,n,e)}return e}function bE(t,e,n,i,r,o,a,u,h){return t=Dy(n,i,!0,t,r,o,a,u,h),t.context=kE(null),n=t.current,i=nn(),r=qr(n),o=Zi(i,r),o.callback=e??null,Wr(n,o,r),t.current.lanes=r,Ku(t,r,i),mn(t,i),t}function of(t,e,n,i){var r=e.current,o=nn(),a=qr(r);return n=kE(n),e.context===null?e.context=n:e.pendingContext=n,e=Zi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Wr(r,e,a),t!==null&&(ri(t,r,a,o),Ch(t,r,a)),a}function md(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function A0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vy(t,e){A0(t,e),(t=t.alternate)&&A0(t,e)}function Jb(){return null}var RE=typeof reportError=="function"?reportError:function(t){console.error(t)};function jy(t){this._internalRoot=t}af.prototype.render=jy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));of(t,e,null,null)};af.prototype.unmount=jy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){of(null,t,null,null)}),e[Ji]=null}};function af(t){this._internalRoot=t}af.prototype.unstable_scheduleHydration=function(t){if(t){var e=lx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kr.length&&e!==0&&e<kr[n].priority;n++);kr.splice(n,0,t),n===0&&cx(t)}};function Fy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k0(){}function eR(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=md(a);o.call(f)}}var a=bE(e,i,t,0,null,!1,!1,"",k0);return t._reactRootContainer=a,t[Ji]=a.current,Su(t.nodeType===8?t.parentNode:t),ro(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=md(h);u.call(f)}}var h=Dy(t,0,!1,null,null,!1,!1,"",k0);return t._reactRootContainer=h,t[Ji]=h.current,Su(t.nodeType===8?t.parentNode:t),ro(function(){of(e,h,n,i)}),h}function uf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=md(a);u.call(h)}}of(e,a,t,r)}else a=eR(n,e,t,r,i);return md(a)}ox=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ul(e.pendingLanes);n!==0&&(ry(e,n|1),mn(e,dt()),!(De&6)&&(Da=dt()+500,gs()))}break;case 13:ro(function(){var i=er(t,1);if(i!==null){var r=nn();ri(i,t,1,r)}}),Vy(t,1)}};sy=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=nn();ri(e,t,134217728,n)}Vy(t,134217728)}};ax=function(t){if(t.tag===13){var e=qr(t),n=er(t,e);if(n!==null){var i=nn();ri(n,t,e,i)}Vy(t,e)}};lx=function(){return He};ux=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};wm=function(t,e,n){switch(e){case"input":if(fm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Yd(i);if(!r)throw Error(ee(90));B1(i),fm(i,r)}}}break;case"textarea":U1(t,n);break;case"select":e=n.value,e!=null&&_a(t,!!n.multiple,e,!1)}};K1=Ly;Q1=ro;var tR={usingClientEntryPoint:!1,Events:[Xu,oa,Yd,G1,Z1,Ly]},Vl={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nR={bundleType:Vl.bundleType,version:Vl.version,rendererPackageName:Vl.rendererPackageName,rendererConfig:Vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=J1(t),t===null?null:t.stateNode},findFiberByHostInstance:Vl.findFiberByHostInstance||Jb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{Zd=ch.inject(nR),_i=ch}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tR;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fy(e))throw Error(ee(200));return Yb(t,e,null,n)};Sn.createRoot=function(t,e){if(!Fy(t))throw Error(ee(299));var n=!1,i="",r=RE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Dy(t,1,!1,null,null,n,!1,i,r),t[Ji]=e.current,Su(t.nodeType===8?t.parentNode:t),new jy(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=J1(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return ro(t)};Sn.hydrate=function(t,e,n){if(!lf(e))throw Error(ee(200));return uf(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!Fy(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=RE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=bE(e,null,t,1,n??null,r,!1,o,a),t[Ji]=e.current,Su(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new af(e)};Sn.render=function(t,e,n){if(!lf(e))throw Error(ee(200));return uf(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!lf(t))throw Error(ee(40));return t._reactRootContainer?(ro(function(){uf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ji]=null})}),!0):!1};Sn.unstable_batchedUpdates=Ly;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!lf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return uf(t,e,n,!1,i)};Sn.version="18.3.1-next-f1338f8080-20240426";function LE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LE)}catch(t){console.error(t)}}LE(),L1.exports=Sn;var iR=L1.exports,b0=iR;om.createRoot=b0.createRoot,om.hydrateRoot=b0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mu.apply(this,arguments)}var jr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jr||(jr={}));const R0="popstate";function rR(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=fo(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Jm("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:gd(o))}function i(r,o){cf(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return oR(e,n,i,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sR(){return Math.random().toString(36).substr(2,8)}function L0(t,e){return{usr:t.state,key:t.key,idx:e}}function Jm(t,e,n,i){return n===void 0&&(n=null),Mu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fo(e):e,{state:n,key:e&&e.key||i||sR()})}function gd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function oR(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=jr.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Mu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=jr.Pop;let F=m(),C=F==null?null:F-f;f=F,h&&h({action:u,location:b.location,delta:C})}function v(F,C){u=jr.Push;let E=Jm(b.location,F,C);n&&n(E,F),f=m()+1;let S=L0(E,f),B=b.createHref(E);try{a.pushState(S,"",B)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;r.location.assign(B)}o&&h&&h({action:u,location:b.location,delta:1})}function T(F,C){u=jr.Replace;let E=Jm(b.location,F,C);n&&n(E,F),f=m();let S=L0(E,f),B=b.createHref(E);a.replaceState(S,"",B),o&&h&&h({action:u,location:b.location,delta:0})}function k(F){let C=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof F=="string"?F:gd(F);return E=E.replace(/ $/,"%20"),it(C,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,C)}let b={get action(){return u},get location(){return t(r,a)},listen(F){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(R0,g),h=F,()=>{r.removeEventListener(R0,g),h=null}},createHref(F){return e(r,F)},createURL:k,encodeLocation(F){let C=k(F);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:T,go(F){return a.go(F)}};return b}var N0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(N0||(N0={}));function aR(t,e,n){return n===void 0&&(n="/"),lR(t,e,n)}function lR(t,e,n,i){let r=typeof e=="string"?fo(e):e,o=Va(r.pathname||"/",n);if(o==null)return null;let a=NE(t);uR(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=wR(o);u=_R(a[h],f)}return u}function NE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(it(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=Zr([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(it(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),NE(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:gR(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of ME(o.path))r(o,a,h)}),e}function ME(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=ME(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function uR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const cR=/^:[\w-]+$/,hR=3,dR=2,fR=1,pR=10,mR=-2,M0=t=>t==="*";function gR(t,e){let n=t.split("/"),i=n.length;return n.some(M0)&&(i+=mR),e&&(i+=dR),n.filter(r=>!M0(r)).reduce((r,o)=>r+(cR.test(o)?hR:o===""?fR:pR),i)}function yR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function _R(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=eg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),v=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:Zr([o,g.pathname]),pathnameBase:SR(Zr([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=Zr([o,g.pathnameBase]))}return a}function eg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=vR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:v,isOptional:T}=m;if(v==="*"){let b=u[g]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const k=u[g];return T&&!k?f[v]=void 0:f[v]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function vR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function wR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Va(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const TR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xR=t=>TR.test(t);function ER(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?fo(t):t,o;if(n)if(xR(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),cf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=O0(n.substring(1),"/"):o=O0(n,e)}else o=e;return{pathname:o,search:IR(i),hash:CR(r)}}function O0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Ap(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function By(t,e){let n=PR(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=fo(t):(r=Mu({},t),it(!r.pathname||!r.pathname.includes("?"),Ap("?","pathname","search",r)),it(!r.pathname||!r.pathname.includes("#"),Ap("#","pathname","hash",r)),it(!r.search||!r.search.includes("#"),Ap("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}u=g>=0?e[g]:"/"}let h=ER(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Zr=t=>t.join("/").replace(/\/\/+/g,"/"),SR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OE=["post","put","patch","delete"];new Set(OE);const kR=["get",...OE];new Set(kR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ou.apply(this,arguments)}const hf=j.createContext(null),DE=j.createContext(null),ur=j.createContext(null),df=j.createContext(null),ys=j.createContext({outlet:null,matches:[],isDataRoute:!1}),VE=j.createContext(null);function bR(t,e){let{relative:n}=e===void 0?{}:e;Qa()||it(!1);let{basename:i,navigator:r}=j.useContext(ur),{hash:o,pathname:a,search:u}=ff(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:Zr([i,a])),r.createHref({pathname:h,search:u,hash:o})}function Qa(){return j.useContext(df)!=null}function po(){return Qa()||it(!1),j.useContext(df).location}function jE(t){j.useContext(ur).static||j.useLayoutEffect(t)}function Uy(){let{isDataRoute:t}=j.useContext(ys);return t?HR():RR()}function RR(){Qa()||it(!1);let t=j.useContext(hf),{basename:e,future:n,navigator:i}=j.useContext(ur),{matches:r}=j.useContext(ys),{pathname:o}=po(),a=JSON.stringify(By(r,n.v7_relativeSplatPath)),u=j.useRef(!1);return jE(()=>{u.current=!0}),j.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=zy(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Zr([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function ff(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=j.useContext(ur),{matches:r}=j.useContext(ys),{pathname:o}=po(),a=JSON.stringify(By(r,i.v7_relativeSplatPath));return j.useMemo(()=>zy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function LR(t,e){return NR(t,e)}function NR(t,e,n,i){Qa()||it(!1);let{navigator:r}=j.useContext(ur),{matches:o}=j.useContext(ys),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=po(),m;if(e){var g;let F=typeof e=="string"?fo(e):e;h==="/"||(g=F.pathname)!=null&&g.startsWith(h)||it(!1),m=F}else m=f;let v=m.pathname||"/",T=v;if(h!=="/"){let F=h.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(F.length).join("/")}let k=aR(t,{pathname:T}),b=jR(k&&k.map(F=>Object.assign({},F,{params:Object.assign({},u,F.params),pathname:Zr([h,r.encodeLocation?r.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?h:Zr([h,r.encodeLocation?r.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),o,n,i);return e&&b?j.createElement(df.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:jr.Pop}},b):b}function MR(){let t=UR(),e=AR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:r},n):null,null)}const OR=j.createElement(MR,null);class DR extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(ys.Provider,{value:this.props.routeContext},j.createElement(VE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VR(t){let{routeContext:e,match:n,children:i}=t,r=j.useContext(hf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(ys.Provider,{value:e},i)}function jR(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||it(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:v,errors:T}=n,k=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||k){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let T,k=!1,b=null,F=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,b=g.route.errorElement||OR,h&&(f<0&&v===0?(WR("route-fallback"),k=!0,F=null):f===v&&(k=!0,F=g.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,v+1)),E=()=>{let S;return T?S=b:k?S=F:g.route.Component?S=j.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=m,j.createElement(VR,{match:g,routeContext:{outlet:m,matches:C,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?j.createElement(DR,{location:n.location,revalidation:n.revalidation,component:b,error:T,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):E()},null)}var FE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FE||{}),BE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(BE||{});function FR(t){let e=j.useContext(hf);return e||it(!1),e}function BR(t){let e=j.useContext(DE);return e||it(!1),e}function zR(t){let e=j.useContext(ys);return e||it(!1),e}function zE(t){let e=zR(),n=e.matches[e.matches.length-1];return n.route.id||it(!1),n.route.id}function UR(){var t;let e=j.useContext(VE),n=BR(),i=zE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function HR(){let{router:t}=FR(FE.UseNavigateStable),e=zE(BE.UseNavigateStable),n=j.useRef(!1);return jE(()=>{n.current=!0}),j.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ou({fromRouteId:e},o)))},[t,e])}const D0={};function WR(t,e,n){D0[t]||(D0[t]=!0)}function $R(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function UE(t){let{to:e,replace:n,state:i,relative:r}=t;Qa()||it(!1);let{future:o,static:a}=j.useContext(ur),{matches:u}=j.useContext(ys),{pathname:h}=po(),f=Uy(),m=zy(e,By(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return j.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function js(t){it(!1)}function qR(t){let{basename:e="/",children:n=null,location:i,navigationType:r=jr.Pop,navigator:o,static:a=!1,future:u}=t;Qa()&&it(!1);let h=e.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:h,navigator:o,static:a,future:Ou({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=fo(i));let{pathname:m="/",search:g="",hash:v="",state:T=null,key:k="default"}=i,b=j.useMemo(()=>{let F=Va(m,h);return F==null?null:{location:{pathname:F,search:g,hash:v,state:T,key:k},navigationType:r}},[h,m,g,v,T,k,r]);return b==null?null:j.createElement(ur.Provider,{value:f},j.createElement(df.Provider,{children:n,value:b}))}function GR(t){let{children:e,location:n}=t;return LR(tg(e),n)}new Promise(()=>{});function tg(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(i,r)=>{if(!j.isValidElement(i))return;let o=[...e,r];if(i.type===j.Fragment){n.push.apply(n,tg(i.props.children,o));return}i.type!==js&&it(!1),!i.props.index||!i.props.children||it(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=tg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yd.apply(this,arguments)}function HE(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ZR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KR(t,e){return t.button===0&&(!e||e==="_self")&&!ZR(t)}const QR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],YR="6";try{window.__reactRouterVersion=YR}catch{}const JR=j.createContext({isTransitioning:!1}),e2="startTransition",V0=qA[e2];function t2(t){let{basename:e,children:n,future:i,window:r}=t,o=j.useRef();o.current==null&&(o.current=rR({window:r,v5Compat:!0}));let a=o.current,[u,h]=j.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=j.useCallback(g=>{f&&V0?V0(()=>h(g)):h(g)},[h,f]);return j.useLayoutEffect(()=>a.listen(m),[a,m]),j.useEffect(()=>$R(i),[i]),j.createElement(qR,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const n2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,r2=j.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,v=HE(e,QR),{basename:T}=j.useContext(ur),k,b=!1;if(typeof f=="string"&&i2.test(f)&&(k=f,n2))try{let S=new URL(window.location.href),B=f.startsWith("//")?new URL(S.protocol+f):new URL(f),q=Va(B.pathname,T);B.origin===S.origin&&q!=null?f=q+B.search+B.hash:b=!0}catch{}let F=bR(f,{relative:r}),C=a2(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function E(S){i&&i(S),S.defaultPrevented||C(S)}return j.createElement("a",yd({},v,{href:k||F,onClick:b||o?i:E,ref:n,target:h}))}),s2=j.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=HE(e,XR),v=ff(h,{relative:g.relative}),T=po(),k=j.useContext(DE),{navigator:b,basename:F}=j.useContext(ur),C=k!=null&&l2(v)&&f===!0,E=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,S=T.pathname,B=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;r||(S=S.toLowerCase(),B=B?B.toLowerCase():null,E=E.toLowerCase()),B&&F&&(B=Va(B,F)||B);const q=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let K=S===E||!a&&S.startsWith(E)&&S.charAt(q)==="/",R=B!=null&&(B===E||!a&&B.startsWith(E)&&B.charAt(E.length)==="/"),I={isActive:K,isPending:R,isTransitioning:C},N=K?i:void 0,O;typeof o=="function"?O=o(I):O=[o,K?"active":null,R?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(I):u;return j.createElement(r2,yd({},g,{"aria-current":N,className:O,ref:n,style:D,to:h,viewTransition:f}),typeof m=="function"?m(I):m)});var ng;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ng||(ng={}));var j0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(j0||(j0={}));function o2(t){let e=j.useContext(hf);return e||it(!1),e}function a2(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=Uy(),f=po(),m=ff(t,{relative:a});return j.useCallback(g=>{if(KR(g,n)){g.preventDefault();let v=i!==void 0?i:gd(f)===gd(m);h(t,{replace:v,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function l2(t,e){e===void 0&&(e={});let n=j.useContext(JR);n==null&&it(!1);let{basename:i}=o2(ng.useViewTransitionState),r=ff(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Va(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Va(n.nextLocation.pathname,i)||n.nextLocation.pathname;return eg(r.pathname,a)!=null||eg(r.pathname,o)!=null}const WE=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),pf=j.createContext({}),mf=j.createContext(null),gf=typeof document<"u",Hy=gf?j.useLayoutEffect:j.useEffect,$E=j.createContext({strict:!1}),Wy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),u2="framerAppearId",qE="data-"+Wy(u2);function c2(t,e,n,i){const{visualElement:r}=j.useContext(pf),o=j.useContext($E),a=j.useContext(mf),u=j.useContext(WE).reducedMotion,h=j.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;j.useInsertionEffect(()=>{f&&f.update(n,a)});const m=j.useRef(!!(n[qE]&&!window.HandoffComplete));return Hy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function fa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function h2(t,e,n){return j.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):fa(n)&&(n.current=i))},[e])}function Du(t){return typeof t=="string"||Array.isArray(t)}function yf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const $y=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qy=["initial",...$y];function _f(t){return yf(t.animate)||qy.some(e=>Du(t[e]))}function GE(t){return!!(_f(t)||t.variants)}function d2(t,e){if(_f(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Du(n)?n:void 0,animate:Du(i)?i:void 0}}return t.inherit!==!1?e:{}}function f2(t){const{initial:e,animate:n}=d2(t,j.useContext(pf));return j.useMemo(()=>({initial:e,animate:n}),[F0(e),F0(n)])}function F0(t){return Array.isArray(t)?t.join(" "):t}const B0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vu={};for(const t in B0)Vu[t]={isEnabled:e=>B0[t].some(n=>!!e[n])};function p2(t){for(const e in t)Vu[e]={...Vu[e],...t[e]}}const Gy=j.createContext({}),ZE=j.createContext({}),m2=Symbol.for("motionComponentSymbol");function g2({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&p2(t);function o(u,h){let f;const m={...j.useContext(WE),...u,layoutId:y2(u)},{isStatic:g}=m,v=f2(u),T=i(u,g);if(!g&&gf){v.visualElement=c2(r,T,m,e);const k=j.useContext(ZE),b=j.useContext($E).strict;v.visualElement&&(f=v.visualElement.loadFeatures(m,b,t,k))}return j.createElement(pf.Provider,{value:v},f&&v.visualElement?j.createElement(f,{visualElement:v.visualElement,...m}):null,n(r,u,h2(T,v.visualElement,h),T,g,v.visualElement))}const a=j.forwardRef(o);return a[m2]=r,a}function y2({layoutId:t}){const e=j.useContext(Gy).id;return e&&t!==void 0?e+"-"+t:t}function _2(t){function e(i,r={}){return g2(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const v2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zy(t){return typeof t!="string"||t.includes("-")?!1:!!(v2.indexOf(t)>-1||/[A-Z]/.test(t))}const _d={};function w2(t){Object.assign(_d,t)}const Ju=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mo=new Set(Ju);function KE(t,{layout:e,layoutId:n}){return mo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_d[t]||t==="opacity")}const gn=t=>!!(t&&t.getVelocity),T2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},x2=Ju.length;function E2(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<x2;a++){const u=Ju[a];if(t[u]!==void 0){const h=T2[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const QE=t=>e=>typeof e=="string"&&e.startsWith(t),XE=QE("--"),ig=QE("var(--"),P2=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,S2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ss=(t,e,n)=>Math.min(Math.max(n,t),e),go={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},su={...go,transform:t=>ss(0,1,t)},hh={...go,default:1},ou=t=>Math.round(t*1e5)/1e5,vf=/(-)?([\d]*\.?[\d])+/g,YE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,I2=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ec(t){return typeof t=="string"}const tc=t=>({test:e=>ec(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Sr=tc("deg"),wi=tc("%"),ge=tc("px"),C2=tc("vh"),A2=tc("vw"),z0={...wi,parse:t=>wi.parse(t)/100,transform:t=>wi.transform(t*100)},U0={...go,transform:Math.round},JE={borderWidth:ge,borderTopWidth:ge,borderRightWidth:ge,borderBottomWidth:ge,borderLeftWidth:ge,borderRadius:ge,radius:ge,borderTopLeftRadius:ge,borderTopRightRadius:ge,borderBottomRightRadius:ge,borderBottomLeftRadius:ge,width:ge,maxWidth:ge,height:ge,maxHeight:ge,size:ge,top:ge,right:ge,bottom:ge,left:ge,padding:ge,paddingTop:ge,paddingRight:ge,paddingBottom:ge,paddingLeft:ge,margin:ge,marginTop:ge,marginRight:ge,marginBottom:ge,marginLeft:ge,rotate:Sr,rotateX:Sr,rotateY:Sr,rotateZ:Sr,scale:hh,scaleX:hh,scaleY:hh,scaleZ:hh,skew:Sr,skewX:Sr,skewY:Sr,distance:ge,translateX:ge,translateY:ge,translateZ:ge,x:ge,y:ge,z:ge,perspective:ge,transformPerspective:ge,opacity:su,originX:z0,originY:z0,originZ:ge,zIndex:U0,fillOpacity:su,strokeOpacity:su,numOctaves:U0};function Ky(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const v=e[g];if(XE(g)){o[g]=v;continue}const T=JE[g],k=S2(v,T);if(mo.has(g)){if(h=!0,a[g]=k,!m)continue;v!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=k):r[g]=k}if(e.transform||(h||i?r.transform=E2(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${v} ${T}`}}const Qy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eP(t,e,n){for(const i in e)!gn(e[i])&&!KE(i,n)&&(t[i]=e[i])}function k2({transformTemplate:t},e,n){return j.useMemo(()=>{const i=Qy();return Ky(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function b2(t,e,n){const i=t.style||{},r={};return eP(r,i,t),Object.assign(r,k2(t,e,n)),t.transformValues?t.transformValues(r):r}function R2(t,e,n){const i={},r=b2(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const L2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||L2.has(t)}let tP=t=>!vd(t);function N2(t){t&&(tP=e=>e.startsWith("on")?!vd(e):t(e))}try{N2(require("@emotion/is-prop-valid").default)}catch{}function M2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(tP(r)||n===!0&&vd(r)||!e&&!vd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function H0(t,e,n){return typeof t=="string"?t:ge.transform(e+n*t)}function O2(t,e,n){const i=H0(e,t.x,t.width),r=H0(n,t.y,t.height);return`${i} ${r}`}const D2={offset:"stroke-dashoffset",array:"stroke-dasharray"},V2={offset:"strokeDashoffset",array:"strokeDasharray"};function j2(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?D2:V2;t[o.offset]=ge.transform(-i);const a=ge.transform(e),u=ge.transform(n);t[o.array]=`${a} ${u}`}function Xy(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,v){if(Ky(t,f,m,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:k,dimensions:b}=t;T.transform&&(b&&(k.transform=T.transform),delete T.transform),b&&(r!==void 0||o!==void 0||k.transform)&&(k.transformOrigin=O2(b,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&j2(T,a,u,h,!1)}const nP=()=>({...Qy(),attrs:{}}),Yy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function F2(t,e,n,i){const r=j.useMemo(()=>{const o=nP();return Xy(o,e,{enableHardwareAcceleration:!1},Yy(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};eP(o,t.style,t),r.style={...o,...r.style}}return r}function B2(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Zy(n)?F2:R2)(i,o,a,n),m={...M2(i,typeof n=="string",t),...h,ref:r},{children:g}=i,v=j.useMemo(()=>gn(g)?g.get():g,[g]);return j.createElement(n,{...m,children:v})}}function iP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const rP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sP(t,e,n,i){iP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(rP.has(r)?r:Wy(r),e.attrs[r])}function Jy(t,e){const{style:n}=t,i={};for(const r in n)(gn(n[r])||e.style&&gn(e.style[r])||KE(r,t))&&(i[r]=n[r]);return i}function oP(t,e){const n=Jy(t,e);for(const i in t)if(gn(t[i])||gn(e[i])){const r=Ju.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function e_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function aP(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const wd=t=>Array.isArray(t),z2=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),U2=t=>wd(t)?t[t.length-1]||0:t;function Mh(t){const e=gn(t)?t.get():t;return z2(e)?e.toValue():e}function H2({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:W2(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const lP=t=>(e,n)=>{const i=j.useContext(pf),r=j.useContext(mf),o=()=>H2(t,e,i,r);return n?o():aP(o)};function W2(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=Mh(o[v]);let{initial:a,animate:u}=t;const h=_f(t),f=GE(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!yf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const k=e_(t,T);if(!k)return;const{transitionEnd:b,transition:F,...C}=k;for(const E in C){let S=C[E];if(Array.isArray(S)){const B=m?S.length-1:0;S=S[B]}S!==null&&(r[E]=S)}for(const E in b)r[E]=b[E]}),r}const ft=t=>t;class W0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function $2(t){let e=new W0,n=new W0,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,v=g?e:n;return f&&a.add(h),v.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const dh=["prepare","read","update","preRender","render","postRender"],q2=40;function G2(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=dh.reduce((g,v)=>(g[v]=$2(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,q2),1),r.timestamp=g,r.isProcessing=!0,dh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:dh.reduce((g,v)=>{const T=o[v];return g[v]=(k,b=!1,F=!1)=>(n||h(),T.schedule(k,b,F)),g},{}),cancel:g=>dh.forEach(v=>o[v].cancel(g)),state:r,steps:o}}const{schedule:Ge,cancel:nr,state:$t,steps:kp}=G2(typeof requestAnimationFrame<"u"?requestAnimationFrame:ft,!0),Z2={useVisualState:lP({scrapeMotionValuesFromProps:oP,createRenderState:nP,onMount:(t,e,{renderState:n,latestValues:i})=>{Ge.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ge.render(()=>{Xy(n,i,{enableHardwareAcceleration:!1},Yy(e.tagName),t.transformTemplate),sP(e,n)})}})},K2={useVisualState:lP({scrapeMotionValuesFromProps:Jy,createRenderState:Qy})};function Q2(t,{forwardMotionProps:e=!1},n,i){return{...Zy(t)?Z2:K2,preloadedFeatures:n,useRender:B2(e),createVisualElement:i,Component:t}}function $i(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const uP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function wf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const X2=t=>e=>uP(e)&&t(e,wf(e));function Ki(t,e,n,i){return $i(t,e,X2(n),i)}const Y2=(t,e)=>n=>e(t(n)),Kr=(...t)=>t.reduce(Y2);function cP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const $0=cP("dragHorizontal"),q0=cP("dragVertical");function hP(t){let e=!1;if(t==="y")e=q0();else if(t==="x")e=$0();else{const n=$0(),i=q0();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function dP(){const t=hP(!0);return t?(t(),!1):!0}class _s{constructor(e){this.isMounted=!1,this.node=e}update(){}}function G0(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||dP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&Ge.update(()=>u[i](o,a))};return Ki(t.current,n,r,{passive:!t.getProps()[i]})}class J2 extends _s{mount(){this.unmount=Kr(G0(this.node,!0),G0(this.node,!1))}unmount(){}}class eL extends _s{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kr($i(this.node.current,"focus",()=>this.onFocus()),$i(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const fP=(t,e)=>e?t===e?!0:fP(t,e.parentElement):!1;function bp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,wf(n))}class tL extends _s{constructor(){super(...arguments),this.removeStartListeners=ft,this.removeEndListeners=ft,this.removeAccessibleListeners=ft,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=Ki(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Ge.update(()=>{!g&&!fP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=Ki(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Kr(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||bp("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&Ge.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=$i(this.node.current,"keyup",a),bp("down",(u,h)=>{this.startPress(u,h)})},n=$i(this.node.current,"keydown",e),i=()=>{this.isPressing&&bp("cancel",(o,a)=>this.cancelPress(o,a))},r=$i(this.node.current,"blur",i);this.removeAccessibleListeners=Kr(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ge.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!dP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ge.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Ki(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=$i(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Kr(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const rg=new WeakMap,Rp=new WeakMap,nL=t=>{const e=rg.get(t.target);e&&e(t)},iL=t=>{t.forEach(nL)};function rL({root:t,...e}){const n=t||document;Rp.has(n)||Rp.set(n,{});const i=Rp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(iL,{root:t,...e})),i[r]}function sL(t,e,n){const i=rL(e);return rg.set(t,n),i.observe(t),()=>{rg.delete(t),i.unobserve(t)}}const oL={some:0,all:1};class aL extends _s{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:oL[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=f?m:g;v&&v(h)};return sL(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(lL(e,n))&&this.startObserver()}unmount(){}}function lL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const uL={inView:{Feature:aL},tap:{Feature:tL},focus:{Feature:eL},hover:{Feature:J2}};function pP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function cL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function hL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Tf(t,e,n){const i=t.getProps();return e_(i,e,n!==void 0?n:i.custom,cL(t),hL(t))}let t_=ft;const Qs=t=>t*1e3,Qi=t=>t/1e3,dL={current:!1},mP=t=>Array.isArray(t)&&typeof t[0]=="number";function gP(t){return!!(!t||typeof t=="string"&&yP[t]||mP(t)||Array.isArray(t)&&t.every(gP))}const Wl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,yP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wl([0,.65,.55,1]),circOut:Wl([.55,0,1,.45]),backIn:Wl([.31,.01,.66,-.59]),backOut:Wl([.33,1.53,.69,.99])};function _P(t){if(t)return mP(t)?Wl(t):Array.isArray(t)?t.map(_P):yP[t]}function fL(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=_P(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function pL(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const vP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,mL=1e-7,gL=12;function yL(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=vP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>mL&&++u<gL);return a}function nc(t,e,n,i){if(t===e&&n===i)return ft;const r=o=>yL(o,0,1,t,n);return o=>o===0||o===1?o:vP(r(o),e,i)}const _L=nc(.42,0,1,1),vL=nc(0,0,.58,1),wP=nc(.42,0,.58,1),wL=t=>Array.isArray(t)&&typeof t[0]!="number",TP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xP=t=>e=>1-t(1-e),n_=t=>1-Math.sin(Math.acos(t)),EP=xP(n_),TL=TP(n_),PP=nc(.33,1.53,.69,.99),i_=xP(PP),xL=TP(i_),EL=t=>(t*=2)<1?.5*i_(t):.5*(2-Math.pow(2,-10*(t-1))),PL={linear:ft,easeIn:_L,easeInOut:wP,easeOut:vL,circIn:n_,circInOut:TL,circOut:EP,backIn:i_,backInOut:xL,backOut:PP,anticipate:EL},Z0=t=>{if(Array.isArray(t)){t_(t.length===4);const[e,n,i,r]=t;return nc(e,n,i,r)}else if(typeof t=="string")return PL[t];return t},r_=(t,e)=>n=>!!(ec(n)&&I2.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),SP=(t,e,n)=>i=>{if(!ec(i))return i;const[r,o,a,u]=i.match(vf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},SL=t=>ss(0,255,t),Lp={...go,transform:t=>Math.round(SL(t))},qs={test:r_("rgb","red"),parse:SP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Lp.transform(t)+", "+Lp.transform(e)+", "+Lp.transform(n)+", "+ou(su.transform(i))+")"};function IL(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const sg={test:r_("#"),parse:IL,transform:qs.transform},pa={test:r_("hsl","hue"),parse:SP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+wi.transform(ou(e))+", "+wi.transform(ou(n))+", "+ou(su.transform(i))+")"},en={test:t=>qs.test(t)||sg.test(t)||pa.test(t),parse:t=>qs.test(t)?qs.parse(t):pa.test(t)?pa.parse(t):sg.parse(t),transform:t=>ec(t)?t:t.hasOwnProperty("red")?qs.transform(t):pa.transform(t)},tt=(t,e,n)=>-n*t+n*e+t;function Np(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function CL({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Np(h,u,t+1/3),o=Np(h,u,t),a=Np(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Mp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},AL=[sg,qs,pa],kL=t=>AL.find(e=>e.test(t));function K0(t){const e=kL(t);let n=e.parse(t);return e===pa&&(n=CL(n)),n}const IP=(t,e)=>{const n=K0(t),i=K0(e),r={...n};return o=>(r.red=Mp(n.red,i.red,o),r.green=Mp(n.green,i.green,o),r.blue=Mp(n.blue,i.blue,o),r.alpha=tt(n.alpha,i.alpha,o),qs.transform(r))};function bL(t){var e,n;return isNaN(t)&&ec(t)&&(((e=t.match(vf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(YE))===null||n===void 0?void 0:n.length)||0)>0}const CP={regex:P2,countKey:"Vars",token:"${v}",parse:ft},AP={regex:YE,countKey:"Colors",token:"${c}",parse:en.parse},kP={regex:vf,countKey:"Numbers",token:"${n}",parse:go.parse};function Op(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Td(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Op(n,CP),Op(n,AP),Op(n,kP),n}function bP(t){return Td(t).values}function RP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Td(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(CP.token,a[h]):h<i+n?u=u.replace(AP.token,en.transform(a[h])):u=u.replace(kP.token,ou(a[h]));return u}}const RL=t=>typeof t=="number"?0:t;function LL(t){const e=bP(t);return RP(t)(e.map(RL))}const os={test:bL,parse:bP,createTransformer:RP,getAnimatableNone:LL},LP=(t,e)=>n=>`${n>0?e:t}`;function NP(t,e){return typeof t=="number"?n=>tt(t,e,n):en.test(t)?IP(t,e):t.startsWith("var(")?LP(t,e):OP(t,e)}const MP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>NP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},NL=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=NP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},OP=(t,e)=>{const n=os.createTransformer(e),i=Td(t),r=Td(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Kr(MP(i.values,r.values),n):LP(t,e)},ju=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Q0=(t,e)=>n=>tt(t,e,n);function ML(t){return typeof t=="number"?Q0:typeof t=="string"?en.test(t)?IP:OP:Array.isArray(t)?MP:typeof t=="object"?NL:Q0}function OL(t,e,n){const i=[],r=n||ML(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||ft:e;u=Kr(h,u)}i.push(u)}return i}function DP(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(t_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=OL(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=ju(t[m],t[m+1],f);return a[m](g)};return n?f=>h(ss(t[0],t[o-1],f)):h}function DL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=ju(0,e,i);t.push(tt(n,1,r))}}function VL(t){const e=[0];return DL(e,t.length-1),e}function jL(t,e){return t.map(n=>n*e)}function FL(t,e){return t.map(()=>e||wP).splice(0,t.length-1)}function xd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=wL(i)?i.map(Z0):Z0(i),o={done:!1,value:e[0]},a=jL(n&&n.length===e.length?n:VL(e),t),u=DP(a,e,{ease:Array.isArray(r)?r:FL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function VP(t,e){return e?t*(1e3/e):0}const BL=5;function jP(t,e,n){const i=Math.max(e-BL,0);return VP(n-t(i),e-i)}const Dp=.001,zL=.01,UL=10,HL=.05,WL=1;function $L({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=ss(HL,WL,a),t=ss(zL,UL,Qi(t)),a<1?(r=f=>{const m=f*a,g=m*t,v=m-n,T=og(f,a),k=Math.exp(-g);return Dp-v/T*k},o=f=>{const g=f*a*t,v=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-g),b=og(Math.pow(f,2),a);return(-r(f)+Dp>0?-1:1)*((v-T)*k)/b}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Dp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=GL(r,o,u);if(t=Qs(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const qL=12;function GL(t,e,n){let i=n;for(let r=1;r<qL;r++)i=i-t(i)/e(i);return i}function og(t,e){return t*Math.sqrt(1-e*e)}const ZL=["duration","bounce"],KL=["stiffness","damping","mass"];function X0(t,e){return e.some(n=>t[n]!==void 0)}function QL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!X0(t,KL)&&X0(t,ZL)){const n=$L(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function FP({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:v}=QL({...i,velocity:-Qi(i.velocity||0)}),T=g||0,k=h/(2*Math.sqrt(u*f)),b=o-r,F=Qi(Math.sqrt(u/f)),C=Math.abs(b)<5;n||(n=C?.01:2),e||(e=C?.005:.5);let E;if(k<1){const S=og(F,k);E=B=>{const q=Math.exp(-k*F*B);return o-q*((T+k*F*b)/S*Math.sin(S*B)+b*Math.cos(S*B))}}else if(k===1)E=S=>o-Math.exp(-F*S)*(b+(T+F*b)*S);else{const S=F*Math.sqrt(k*k-1);E=B=>{const q=Math.exp(-k*F*B),K=Math.min(S*B,300);return o-q*((T+k*F*b)*Math.sinh(K)+S*b*Math.cosh(K))/S}}return{calculatedDuration:v&&m||null,next:S=>{const B=E(S);if(v)a.done=S>=m;else{let q=T;S!==0&&(k<1?q=jP(E,S,B):q=0);const K=Math.abs(q)<=n,R=Math.abs(o-B)<=e;a.done=K&&R}return a.value=a.done?o:B,a}}}function Y0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},T=I=>u!==void 0&&I<u||h!==void 0&&I>h,k=I=>u===void 0?h:h===void 0||Math.abs(u-I)<Math.abs(h-I)?u:h;let b=n*e;const F=g+b,C=a===void 0?F:a(F);C!==F&&(b=C-g);const E=I=>-b*Math.exp(-I/i),S=I=>C+E(I),B=I=>{const N=E(I),O=S(I);v.done=Math.abs(N)<=f,v.value=v.done?C:O};let q,K;const R=I=>{T(v.value)&&(q=I,K=FP({keyframes:[v.value,k(v.value)],velocity:jP(S,I,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:I=>{let N=!1;return!K&&q===void 0&&(N=!0,B(I),R(I)),q!==void 0&&I>q?K.next(I-q):(!N&&B(I),v)}}}const XL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ge.update(e,!0),stop:()=>nr(e),now:()=>$t.isProcessing?$t.timestamp:performance.now()}},J0=2e4;function ew(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<J0;)e+=n,i=t.next(e);return e>=J0?1/0:e}const YL={decay:Y0,inertia:Y0,tween:xd,keyframes:xd,spring:FP};function Ed({autoplay:t=!0,delay:e=0,driver:n=XL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,...v}){let T=1,k=!1,b,F;const C=()=>{F=new Promise(X=>{b=X})};C();let E;const S=YL[r]||xd;let B;S!==xd&&typeof i[0]!="number"&&(B=DP([0,100],i,{clamp:!1}),i=[0,100]);const q=S({...v,keyframes:i});let K;u==="mirror"&&(K=S({...v,keyframes:[...i].reverse(),velocity:-(v.velocity||0)}));let R="idle",I=null,N=null,O=null;q.calculatedDuration===null&&o&&(q.calculatedDuration=ew(q));const{calculatedDuration:D}=q;let z=1/0,M=1/0;D!==null&&(z=D+a,M=z*(o+1)-a);let _e=0;const pt=X=>{if(N===null)return;T>0&&(N=Math.min(N,X)),T<0&&(N=Math.min(X-M/T,N)),I!==null?_e=I:_e=Math.round(X-N)*T;const ue=_e-e*(T>=0?1:-1),xe=T>=0?ue<0:ue>M;_e=Math.max(ue,0),R==="finished"&&I===null&&(_e=M);let de=_e,oe=q;if(o){const Ft=Math.min(_e,M)/z;let Bt=Math.floor(Ft),at=Ft%1;!at&&Ft>=1&&(at=1),at===1&&Bt--,Bt=Math.min(Bt,o+1),!!(Bt%2)&&(u==="reverse"?(at=1-at,a&&(at-=a/z)):u==="mirror"&&(oe=K)),de=ss(0,1,at)*z}const ae=xe?{done:!1,value:i[0]}:oe.next(de);B&&(ae.value=B(ae.value));let{done:Se}=ae;!xe&&D!==null&&(Se=T>=0?_e>=M:_e<=0);const Ne=I===null&&(R==="finished"||R==="running"&&Se);return g&&g(ae.value),Ne&&Z(),ae},Ie=()=>{E&&E.stop(),E=void 0},ot=()=>{R="idle",Ie(),b(),C(),N=O=null},Z=()=>{R="finished",m&&m(),Ie(),b()},ce=()=>{if(k)return;E||(E=n(pt));const X=E.now();h&&h(),I!==null?N=X-I:(!N||R==="finished")&&(N=X),R==="finished"&&C(),O=N,I=null,R="running",E.start()};t&&ce();const G={then(X,ue){return F.then(X,ue)},get time(){return Qi(_e)},set time(X){X=Qs(X),_e=X,I!==null||!E||T===0?I=X:N=E.now()-X/T},get duration(){const X=q.calculatedDuration===null?ew(q):q.calculatedDuration;return Qi(X)},get speed(){return T},set speed(X){X===T||!E||(T=X,G.time=Qi(_e))},get state(){return R},play:ce,pause:()=>{R="paused",I=_e},stop:()=>{k=!0,R!=="idle"&&(R="idle",f&&f(),ot())},cancel:()=>{O!==null&&pt(O),ot()},complete:()=>{R="finished"},sample:X=>(N=0,pt(X))};return G}function JL(t){let e;return()=>(e===void 0&&(e=t()),e)}const eN=JL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tN=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),fh=10,nN=2e4,iN=(t,e)=>e.type==="spring"||t==="backgroundColor"||!gP(e.ease);function rN(t,e,{onUpdate:n,onComplete:i,...r}){if(!(eN()&&tN.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(S=>{u=S})};m();let{keyframes:g,duration:v=300,ease:T,times:k}=r;if(iN(e,r)){const S=Ed({...r,repeat:0,delay:0});let B={done:!1,value:g[0]};const q=[];let K=0;for(;!B.done&&K<nN;)B=S.sample(K),q.push(B.value),K+=fh;k=void 0,g=q,v=K-fh,T="linear"}const b=fL(t.owner.current,e,g,{...r,duration:v,ease:T,times:k}),F=()=>{f=!1,b.cancel()},C=()=>{f=!0,Ge.update(F),u(),m()};return b.onfinish=()=>{f||(t.set(pL(g,r)),i&&i(),C())},{then(S,B){return h.then(S,B)},attachTimeline(S){return b.timeline=S,b.onfinish=null,ft},get time(){return Qi(b.currentTime||0)},set time(S){b.currentTime=Qs(S)},get speed(){return b.playbackRate},set speed(S){b.playbackRate=S},get duration(){return Qi(v)},play:()=>{a||(b.play(),nr(F))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:S}=b;if(S){const B=Ed({...r,autoplay:!1});t.setWithVelocity(B.sample(S-fh).value,B.sample(S).value,fh)}C()},complete:()=>{f||b.finish()},cancel:C}}function sN({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:ft,pause:ft,stop:ft,then:o=>(o(),Promise.resolve()),cancel:ft,complete:ft});return e?Ed({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const oN={type:"spring",stiffness:500,damping:25,restSpeed:10},aN=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lN={type:"keyframes",duration:.8},uN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cN=(t,{keyframes:e})=>e.length>2?lN:mo.has(t)?t.startsWith("scale")?aN(e[1]):oN:uN,ag=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(os.test(e)||e==="0")&&!e.startsWith("url(")),hN=new Set(["brightness","contrast","saturate","opacity"]);function dN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(vf)||[];if(!i)return t;const r=n.replace(i,"");let o=hN.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const fN=/([a-z-]*)\(.*?\)/g,lg={...os,getAnimatableNone:t=>{const e=t.match(fN);return e?e.map(dN).join(" "):t}},pN={...JE,color:en,backgroundColor:en,outlineColor:en,fill:en,stroke:en,borderColor:en,borderTopColor:en,borderRightColor:en,borderBottomColor:en,borderLeftColor:en,filter:lg,WebkitFilter:lg},s_=t=>pN[t];function BP(t,e){let n=s_(t);return n!==lg&&(n=os),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const zP=t=>/^0[^.\s]+$/.test(t);function mN(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||zP(t)}function gN(t,e,n,i){const r=ag(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),mN(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=BP(e,u)}return o}function yN({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function o_(t,e){return t[e]||t.default||t}const _N={skipAnimations:!1},a_=(t,e,n,i={})=>r=>{const o=o_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Qs(a);const h=gN(e,t,n,o),f=h[0],m=h[h.length-1],g=ag(t,f),v=ag(t,m);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:k=>{e.set(k),o.onUpdate&&o.onUpdate(k)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(yN(o)||(T={...T,...cN(t,T)}),T.duration&&(T.duration=Qs(T.duration)),T.repeatDelay&&(T.repeatDelay=Qs(T.repeatDelay)),!g||!v||dL.current||o.type===!1||_N.skipAnimations)return sN(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const k=rN(e,t,T);if(k)return k}return Ed(T)};function Pd(t){return!!(gn(t)&&t.add)}const UP=t=>/^\-?\d*\.?\d+$/.test(t);function l_(t,e){t.indexOf(e)===-1&&t.push(e)}function u_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class c_{constructor(){this.subscriptions=[]}add(e){return l_(this.subscriptions,e),()=>u_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vN=t=>!isNaN(parseFloat(t));class wN{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=$t;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Ge.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ge.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=vN(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new c_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?VP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ja(t,e){return new wN(t,e)}const HP=t=>e=>e.test(t),TN={test:t=>t==="auto",parse:t=>t},WP=[go,ge,wi,Sr,A2,C2,TN],jl=t=>WP.find(HP(t)),xN=[...WP,en,os],EN=t=>xN.find(HP(t));function PN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ja(n))}function SN(t,e){const n=Tf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=U2(o[a]);PN(t,a,u)}}function IN(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(UP(m)||zP(m))?m=parseFloat(m):!EN(m)&&os.test(f)&&(m=BP(h,f)),t.addValue(h,ja(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function CN(t,e){return e?(e[t]||e.default||e).from:void 0}function AN(t,e,n){const i={};for(const r in t){const o=CN(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function kN({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function bN(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function $P(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const v=t.getValue(g),T=u[g];if(!v||T===void 0||m&&kN(m,g))continue;const k={delay:n,elapsed:0,...o_(o||{},g)};if(window.HandoffAppearAnimations){const C=t.getProps()[qE];if(C){const E=window.HandoffAppearAnimations(C,g,v,Ge);E!==null&&(k.elapsed=E,k.isHandoff=!0)}}let b=!k.isHandoff&&!bN(v,T);if(k.type==="spring"&&(v.getVelocity()||k.velocity)&&(b=!1),v.animation&&(b=!1),b)continue;v.start(a_(g,v,T,t.shouldReduceMotion&&mo.has(g)?{type:!1}:k));const F=v.animation;Pd(h)&&(h.add(g),F.then(()=>h.remove(g))),f.push(F)}return a&&Promise.all(f).then(()=>{a&&SN(t,a)}),f}function ug(t,e,n={}){const i=Tf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all($P(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return RN(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function RN(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(LN).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(ug(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function LN(t,e){return t.sortNodePosition(e)}function NN(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>ug(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=ug(t,e,n);else{const r=typeof e=="function"?Tf(t,e,n.custom):e;i=Promise.all($P(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const MN=[...$y].reverse(),ON=$y.length;function DN(t){return e=>Promise.all(e.map(({animation:n,options:i})=>NN(t,n,i)))}function VN(t){let e=DN(t);const n=FN();let i=!0;const r=(h,f)=>{const m=Tf(t,f);if(m){const{transition:g,transitionEnd:v,...T}=m;h={...h,...T,...v}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},v=[],T=new Set;let k={},b=1/0;for(let C=0;C<ON;C++){const E=MN[C],S=n[E],B=m[E]!==void 0?m[E]:g[E],q=Du(B),K=E===f?S.isActive:null;K===!1&&(b=C);let R=B===g[E]&&B!==m[E]&&q;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),S.protectedKeys={...k},!S.isActive&&K===null||!B&&!S.prevProp||yf(B)||typeof B=="boolean")continue;let N=jN(S.prevProp,B)||E===f&&S.isActive&&!R&&q||C>b&&q,O=!1;const D=Array.isArray(B)?B:[B];let z=D.reduce(r,{});K===!1&&(z={});const{prevResolvedValues:M={}}=S,_e={...M,...z},pt=Ie=>{N=!0,T.has(Ie)&&(O=!0,T.delete(Ie)),S.needsAnimating[Ie]=!0};for(const Ie in _e){const ot=z[Ie],Z=M[Ie];if(k.hasOwnProperty(Ie))continue;let ce=!1;wd(ot)&&wd(Z)?ce=!pP(ot,Z):ce=ot!==Z,ce?ot!==void 0?pt(Ie):T.add(Ie):ot!==void 0&&T.has(Ie)?pt(Ie):S.protectedKeys[Ie]=!0}S.prevProp=B,S.prevResolvedValues=z,S.isActive&&(k={...k,...z}),i&&t.blockInitialAnimation&&(N=!1),N&&(!R||O)&&v.push(...D.map(Ie=>({animation:Ie,options:{type:E,...h}})))}if(T.size){const C={};T.forEach(E=>{const S=t.getBaseTarget(E);S!==void 0&&(C[E]=S)}),v.push({animation:C})}let F=!!v.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(F=!1),i=!1,F?e(v):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var k;return(k=T.animationState)===null||k===void 0?void 0:k.setActive(h,f)}),n[h].isActive=f;const v=a(m,h);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function jN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!pP(e,t):!1}function Os(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function FN(){return{animate:Os(!0),whileInView:Os(),whileHover:Os(),whileTap:Os(),whileDrag:Os(),whileFocus:Os(),exit:Os()}}class BN extends _s{constructor(e){super(e),e.animationState||(e.animationState=VN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),yf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let zN=0;class UN extends _s{constructor(){super(...arguments),this.id=zN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const HN={animation:{Feature:BN},exit:{Feature:UN}},tw=(t,e)=>Math.abs(t-e);function WN(t,e){const n=tw(t.x,e.x),i=tw(t.y,e.y);return Math.sqrt(n**2+i**2)}class qP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=jp(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=WN(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:k}=g,{timestamp:b}=$t;this.history.push({...k,timestamp:b});const{onStart:F,onMove:C}=this.handlers;v||(F&&F(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Vp(v,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:k,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=jp(g.type==="pointercancel"?this.lastMoveEventInfo:Vp(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,F),k&&k(g,F)},!uP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=wf(e),u=Vp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=$t;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,jp(u,this.history)),this.removeListeners=Kr(Ki(this.contextWindow,"pointermove",this.handlePointerMove),Ki(this.contextWindow,"pointerup",this.handlePointerUp),Ki(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nr(this.updatePoint)}}function Vp(t,e){return e?{point:e(t.point)}:t}function nw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jp({point:t},e){return{point:t,delta:nw(t,GP(e)),offset:nw(t,$N(e)),velocity:qN(e,.1)}}function $N(t){return t[0]}function GP(t){return t[t.length-1]}function qN(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=GP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Qs(e)));)n--;if(!i)return{x:0,y:0};const o=Qi(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function En(t){return t.max-t.min}function cg(t,e=0,n=.01){return Math.abs(t-e)<=n}function iw(t,e,n,i=.5){t.origin=i,t.originPoint=tt(e.min,e.max,t.origin),t.scale=En(n)/En(e),(cg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(cg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function au(t,e,n,i){iw(t.x,e.x,n.x,i?i.originX:void 0),iw(t.y,e.y,n.y,i?i.originY:void 0)}function rw(t,e,n){t.min=n.min+e.min,t.max=t.min+En(e)}function GN(t,e,n){rw(t.x,e.x,n.x),rw(t.y,e.y,n.y)}function sw(t,e,n){t.min=e.min-n.min,t.max=t.min+En(e)}function lu(t,e,n){sw(t.x,e.x,n.x),sw(t.y,e.y,n.y)}function ZN(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?tt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?tt(n,t,i.max):Math.min(t,n)),t}function ow(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function KN(t,{top:e,left:n,bottom:i,right:r}){return{x:ow(t.x,n,r),y:ow(t.y,e,i)}}function aw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function QN(t,e){return{x:aw(t.x,e.x),y:aw(t.y,e.y)}}function XN(t,e){let n=.5;const i=En(t),r=En(e);return r>i?n=ju(e.min,e.max-i,t.min):i>r&&(n=ju(t.min,t.max-r,e.min)),ss(0,1,n)}function YN(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hg=.35;function JN(t=hg){return t===!1?t=0:t===!0&&(t=hg),{x:lw(t,"left","right"),y:lw(t,"top","bottom")}}function lw(t,e,n){return{min:uw(t,e),max:uw(t,n)}}function uw(t,e){return typeof t=="number"?t:t[e]||0}const cw=()=>({translate:0,scale:1,origin:0,originPoint:0}),ma=()=>({x:cw(),y:cw()}),hw=()=>({min:0,max:0}),_t=()=>({x:hw(),y:hw()});function On(t){return[t("x"),t("y")]}function ZP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function eM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Fp(t){return t===void 0||t===1}function dg({scale:t,scaleX:e,scaleY:n}){return!Fp(t)||!Fp(e)||!Fp(n)}function Fs(t){return dg(t)||KP(t)||t.z||t.rotate||t.rotateX||t.rotateY}function KP(t){return dw(t.x)||dw(t.y)}function dw(t){return t&&t!=="0%"}function Sd(t,e,n){const i=t-n,r=e*i;return n+r}function fw(t,e,n,i,r){return r!==void 0&&(t=Sd(t,r,i)),Sd(t,n,i)+e}function fg(t,e=0,n=1,i,r){t.min=fw(t.min,e,n,i,r),t.max=fw(t.max,e,n,i,r)}function QP(t,{x:e,y:n}){fg(t.x,e.translate,e.scale,e.originPoint),fg(t.y,n.translate,n.scale,n.originPoint)}function nM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ga(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,QP(t,a)),i&&Fs(o.latestValues)&&ga(t,o.latestValues))}e.x=pw(e.x),e.y=pw(e.y)}function pw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ar(t,e){t.min=t.min+e,t.max=t.max+e}function mw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=tt(t.min,t.max,o);fg(t,e[n],e[i],a,e.scale)}const iM=["x","scaleX","originX"],rM=["y","scaleY","originY"];function ga(t,e){mw(t.x,e,iM),mw(t.y,e,rM)}function XP(t,e){return ZP(tM(t.getBoundingClientRect(),e))}function sM(t,e,n){const i=XP(t,n),{scroll:r}=e;return r&&(Ar(i.x,r.offset.x),Ar(i.y,r.offset.y)),i}const YP=({current:t})=>t?t.ownerDocument.defaultView:null,oM=new WeakMap;class aM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_t(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wf(m,"page").point)},o=(m,g)=>{const{drag:v,dragPropagation:T,onDragStart:k}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hP(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),On(F=>{let C=this.getAxisMotionValue(F).get()||0;if(wi.test(C)){const{projection:E}=this.visualElement;if(E&&E.layout){const S=E.layout.layoutBox[F];S&&(C=En(S)*(parseFloat(C)/100))}}this.originPoint[F]=C}),k&&Ge.update(()=>k(m,g),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:k,onDrag:b}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:F}=g;if(T&&this.currentDirection===null){this.currentDirection=lM(F),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",g.point,F),this.updateAxis("y",g.point,F),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),h=()=>On(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new qP(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:YP(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Ge.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!ph(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=ZN(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&fa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=KN(r.layoutBox,n):this.constraints=!1,this.elastic=JN(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&On(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=YN(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!fa(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=sM(i,r.root,this.visualElement.getTransformPagePoint());let a=QN(r.layout.layoutBox,o);if(n){const u=n(eM(a));this.hasMutatedConstraints=!!u,u&&(a=ZP(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=On(m=>{if(!ph(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const v=r?200:1e6,T=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(a_(e,i,0,n))}stopAnimation(){On(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){On(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){On(n=>{const{drag:i}=this.getProps();if(!ph(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-tt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!fa(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};On(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=XN({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),On(a=>{if(!ph(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(tt(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;oM.set(this.visualElement,this);const e=this.visualElement.current,n=Ki(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();fa(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=$i(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(On(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=hg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function ph(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uM extends _s{constructor(e){super(e),this.removeGroupControls=ft,this.removeListeners=ft,this.controls=new aM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ft}unmount(){this.removeGroupControls(),this.removeListeners()}}const gw=t=>(e,n)=>{t&&Ge.update(()=>t(e,n))};class cM extends _s{constructor(){super(...arguments),this.removePointerDownListener=ft}onPointerDown(e){this.session=new qP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:gw(e),onStart:gw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Ge.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=Ki(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function hM(){const t=j.useContext(mf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=j.useId();return j.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Oh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ge.test(t))t=parseFloat(t);else return t;const n=yw(t,e.target.x),i=yw(t,e.target.y);return`${n}% ${i}%`}},dM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=os.parse(t);if(r.length>5)return i;const o=os.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=tt(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class fM extends Js.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;w2(pM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Oh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Ge.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JP(t){const[e,n]=hM(),i=j.useContext(Gy);return Js.createElement(fM,{...t,layoutGroup:i,switchLayoutGroup:j.useContext(ZE),isPresent:e,safeToRemove:n})}const pM={borderRadius:{...Fl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fl,borderTopRightRadius:Fl,borderBottomLeftRadius:Fl,borderBottomRightRadius:Fl,boxShadow:dM},eS=["TopLeft","TopRight","BottomLeft","BottomRight"],mM=eS.length,_w=t=>typeof t=="string"?parseFloat(t):t,vw=t=>typeof t=="number"||ge.test(t);function gM(t,e,n,i,r,o){r?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,yM(i)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,_M(i))):o&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<mM;a++){const u=`border${eS[a]}Radius`;let h=ww(e,u),f=ww(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||vw(h)===vw(f)?(t[u]=Math.max(tt(_w(h),_w(f),i),0),(wi.test(f)||wi.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,i))}function ww(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const yM=tS(0,.5,EP),_M=tS(.5,.95,ft);function tS(t,e,n){return i=>i<t?0:i>e?1:n(ju(t,e,i))}function Tw(t,e){t.min=e.min,t.max=e.max}function Mn(t,e){Tw(t.x,e.x),Tw(t.y,e.y)}function xw(t,e,n,i,r){return t-=e,t=Sd(t,1/n,i),r!==void 0&&(t=Sd(t,1/r,i)),t}function vM(t,e=0,n=1,i=.5,r,o=t,a=t){if(wi.test(e)&&(e=parseFloat(e),e=tt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=tt(o.min,o.max,i);t===o&&(u-=e),t.min=xw(t.min,e,n,u,r),t.max=xw(t.max,e,n,u,r)}function Ew(t,e,[n,i,r],o,a){vM(t,e[n],e[i],e[r],e.scale,o,a)}const wM=["x","scaleX","originX"],TM=["y","scaleY","originY"];function Pw(t,e,n,i){Ew(t.x,e,wM,n?n.x:void 0,i?i.x:void 0),Ew(t.y,e,TM,n?n.y:void 0,i?i.y:void 0)}function Sw(t){return t.translate===0&&t.scale===1}function nS(t){return Sw(t.x)&&Sw(t.y)}function xM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function iS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Iw(t){return En(t.x)/En(t.y)}class EM{constructor(){this.members=[]}add(e){l_(this.members,e),e.scheduleRender()}remove(e){if(u_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Cw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const PM=(t,e)=>t.depth-e.depth;class SM{constructor(){this.children=[],this.isDirty=!1}add(e){l_(this.children,e),this.isDirty=!0}remove(e){u_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PM),this.isDirty=!1,this.children.forEach(e)}}function IM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(nr(i),t(o-e))};return Ge.read(i,!0),()=>nr(i)}function CM(t){window.MotionDebug&&window.MotionDebug.record(t)}function AM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function kM(t,e,n){const i=gn(t)?t:ja(t);return i.start(a_("",i,e,n)),i.animation}const Aw=["","X","Y","Z"],bM={visibility:"hidden"},kw=1e3;let RM=0;const Bs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function rS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=RM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bs.totalNodes=Bs.resolvedTargetDeltas=Bs.recalculatedProjection=0,this.nodes.forEach(MM),this.nodes.forEach(FM),this.nodes.forEach(BM),this.nodes.forEach(OM),CM(Bs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new SM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new c_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=AM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=IM(v,250),Oh.hasAnimatedSinceResize&&(Oh.hasAnimatedSinceResize=!1,this.nodes.forEach(Rw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||$M,{onLayoutAnimationStart:F,onLayoutAnimationComplete:C}=m.getProps(),E=!this.targetLayout||!iS(this.targetLayout,k)||T,S=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||v&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,S);const B={...o_(b,"layout"),onPlay:F,onComplete:C};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||Rw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zM),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bw);return}this.isUpdating||this.nodes.forEach(VM),this.isUpdating=!1,this.nodes.forEach(jM),this.nodes.forEach(LM),this.nodes.forEach(NM),this.clearAllSnapshots();const u=performance.now();$t.delta=ss(0,1e3/60,u-$t.timestamp),$t.timestamp=u,$t.isProcessing=!0,kp.update.process($t),kp.preRender.process($t),kp.render.process($t),$t.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(DM),this.sharedNodes.forEach(UM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!nS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Fs(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),qM(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return _t();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Ar(u.x,h.offset.x),Ar(u.y,h.offset.y)),u}removeElementScroll(a){const u=_t();Mn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Mn(u,a);const{scroll:v}=this.root;v&&(Ar(u.x,-v.offset.x),Ar(u.y,-v.offset.y))}Ar(u.x,m.offset.x),Ar(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=_t();Mn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ga(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Fs(m.latestValues)&&ga(h,m.latestValues)}return Fs(this.latestValues)&&ga(h,this.latestValues),h}removeTransform(a){const u=_t();Mn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Fs(f.latestValues))continue;dg(f.latestValues)&&f.updateSnapshot();const m=_t(),g=f.measurePageBox();Mn(m,g),Pw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Fs(this.latestValues)&&Pw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$t.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=$t.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),lu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_t(),this.targetWithTransforms=_t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mn(this.target,this.layout.layoutBox),QP(this.target,this.targetDelta)):Mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),lu(this.relativeTargetOrigin,this.target,T.target),Mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||dg(this.parent.latestValues)||KP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===$t.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Mn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;nM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:k}=u;if(!k){this.projectionTransform&&(this.projectionDelta=ma(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ma(),this.projectionDeltaWithTransform=ma());const b=this.projectionTransform;au(this.projectionDelta,this.layoutCorrected,k,this.latestValues),this.projectionTransform=Cw(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),Bs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=ma();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=_t(),T=h?h.source:void 0,k=this.layout?this.layout.source:void 0,b=T!==k,F=this.getStack(),C=!F||F.members.length<=1,E=!!(b&&!C&&this.options.crossfade===!0&&!this.path.some(WM));this.animationProgress=0;let S;this.mixTargetDelta=B=>{const q=B/1e3;Lw(g.x,a.x,q),Lw(g.y,a.y,q),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HM(this.relativeTarget,this.relativeTargetOrigin,v,q),S&&xM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=_t()),Mn(S,this.relativeTarget)),b&&(this.animationValues=m,gM(m,f,this.latestValues,q,E,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{Oh.hasAnimatedSinceResize=!0,this.currentAnimation=kM(0,kw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&sS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||_t();const g=En(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const v=En(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}Mn(u,h),ga(u,m),au(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new EM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<Aw.length;m++){const g="rotate"+Aw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Mh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Mh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Fs(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Cw(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:T,y:k}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${k.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in _d){if(v[b]===void 0)continue;const{correct:F,applyTo:C}=_d[b],E=f.transform==="none"?v[b]:F(v[b],g);if(C){const S=C.length;for(let B=0;B<S;B++)f[C[B]]=E}else f[b]=E}return this.options.layoutId&&(f.pointerEvents=g===this?Mh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(bw),this.root.sharedNodes.clear()}}}function LM(t){t.updateLayout()}function NM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?On(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=En(v);v.min=i[g].min,v.max=v.min+T}):sS(o,n.layoutBox,i)&&On(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=En(i[g]);v.max=v.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=ma();au(u,i,n.layoutBox);const h=ma();a?au(h,t.applyTransform(r,!0),n.measuredBox):au(h,i,n.layoutBox);const f=!nS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const k=_t();lu(k,n.layoutBox,v.layoutBox);const b=_t();lu(b,i,T.layoutBox),iS(k,b)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=k,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function MM(t){Bs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function OM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function DM(t){t.clearSnapshot()}function bw(t){t.clearMeasurements()}function VM(t){t.isLayoutDirty=!1}function jM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Rw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FM(t){t.resolveTargetDelta()}function BM(t){t.calcProjection()}function zM(t){t.resetRotation()}function UM(t){t.removeLeadSnapshot()}function Lw(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Nw(t,e,n,i){t.min=tt(e.min,n.min,i),t.max=tt(e.max,n.max,i)}function HM(t,e,n,i){Nw(t.x,e.x,n.x,i),Nw(t.y,e.y,n.y,i)}function WM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const $M={duration:.45,ease:[.4,0,.1,1]},Mw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Ow=Mw("applewebkit/")&&!Mw("chrome/")?Math.round:ft;function Dw(t){t.min=Ow(t.min),t.max=Ow(t.max)}function qM(t){Dw(t.x),Dw(t.y)}function sS(t,e,n){return t==="position"||t==="preserve-aspect"&&!cg(Iw(e),Iw(n),.2)}const GM=rS({attachResizeListener:(t,e)=>$i(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bp={current:void 0},oS=rS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Bp.current){const t=new GM({});t.mount(window),t.setOptions({layoutScroll:!0}),Bp.current=t}return Bp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ZM={pan:{Feature:cM},drag:{Feature:uM,ProjectionNode:oS,MeasureLayout:JP}},KM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function QM(t){const e=KM.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function pg(t,e,n=1){const[i,r]=QM(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return UP(a)?parseFloat(a):a}else return ig(r)?pg(r,e,n+1):r}function XM(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!ig(o))return;const a=pg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!ig(o))continue;const a=pg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const YM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),aS=t=>YM.has(t),JM=t=>Object.keys(t).some(aS),Vw=t=>t===go||t===ge,jw=(t,e)=>parseFloat(t.split(", ")[e]),Fw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return jw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?jw(o[1],t):0}},eO=new Set(["x","y","z"]),tO=Ju.filter(t=>!eO.has(t));function nO(t){const e=[];return tO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Fa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Fw(4,13),y:Fw(5,14)};Fa.translateX=Fa.x;Fa.translateY=Fa.y;const iO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Fa[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Fa[f](h,o)}),t},rO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(aS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=jl(m);const v=e[h];let T;if(wd(v)){const k=v.length,b=v[0]===null?1:0;m=v[b],g=jl(m);for(let F=b;F<k&&v[F]!==null;F++)T?t_(jl(v[F])===T):T=jl(v[F])}else T=jl(v);if(g!==T)if(Vw(g)&&Vw(T)){const k=f.get();typeof k=="string"&&f.set(parseFloat(k)),typeof v=="string"?e[h]=parseFloat(v):Array.isArray(v)&&T===ge&&(e[h]=v.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||v===0)?m===0?f.set(T.transform(m)):e[h]=g.transform(v):(a||(o=nO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(v))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=iO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),gf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function sO(t,e,n,i){return JM(e)?rO(t,e,n,i):{target:e,transitionEnd:i}}const oO=(t,e,n,i)=>{const r=XM(t,e,i);return e=r.target,i=r.transitionEnd,sO(t,e,n,i)},mg={current:null},lS={current:!1};function aO(){if(lS.current=!0,!!gf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>mg.current=t.matches;t.addListener(e),e()}else mg.current=!1}function lO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(gn(o))t.addValue(r,o),Pd(i)&&i.add(r);else if(gn(a))t.addValue(r,ja(o,{owner:t})),Pd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,ja(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Bw=new WeakMap,uS=Object.keys(Vu),uO=uS.length,zw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cO=qy.length;class hO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ge.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=_f(n),this.isVariantNode=GE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const v=m[g];u[g]!==void 0&&gn(v)&&(v.set(u[g],!1),Pd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Bw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),lS.current||aO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Bw.delete(this.current),this.projection&&this.projection.unmount(),nr(this.notifyUpdate),nr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=mo.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ge.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<uO;h++){const f=uS[h],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:T}=Vu[f];v&&(a=v),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&fa(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<zw.length;i++){const r=zw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=lO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<cO;i++){const r=qy[i],o=this.props[r];(Du(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=ja(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=e_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!gn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new c_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class cS extends hO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=AN(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){IN(this,i,a);const u=oO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function dO(t){return window.getComputedStyle(t)}class fO extends cS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(mo.has(n)){const i=s_(n);return i&&i.default||0}else{const i=dO(e),r=(XE(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return XP(e,n)}build(e,n,i,r){Ky(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Jy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){iP(e,n,i,r)}}class pO extends cS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(mo.has(n)){const i=s_(n);return i&&i.default||0}return n=rP.has(n)?n:Wy(n),e.getAttribute(n)}measureInstanceViewportBox(){return _t()}scrapeMotionValuesFromProps(e,n){return oP(e,n)}build(e,n,i,r){Xy(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){sP(e,n,i,r)}mount(e){this.isSVGTag=Yy(e.tagName),super.mount(e)}}const mO=(t,e)=>Zy(t)?new pO(e,{enableHardwareAcceleration:!1}):new fO(e,{enableHardwareAcceleration:!0}),gO={layout:{ProjectionNode:oS,MeasureLayout:JP}},yO={...HN,...uL,...ZM,...gO},fe=_2((t,e)=>Q2(t,e,yO,mO));function hS(){const t=j.useRef(!1);return Hy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function _O(){const t=hS(),[e,n]=j.useState(0),i=j.useCallback(()=>{t.current&&n(e+1)},[e]);return[j.useCallback(()=>Ge.postRender(i),[i]),e]}class vO extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function wO({children:t,isPresent:e}){const n=j.useId(),i=j.useRef(null),r=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),j.createElement(vO,{isPresent:e,childRef:i,sizeRef:r},j.cloneElement(t,{ref:i}))}const zp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=aP(TO),h=j.useId(),f=j.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return j.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),j.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=j.createElement(wO,{isPresent:n},t)),j.createElement(mf.Provider,{value:f},t)};function TO(){return new Map}function xO(t){return j.useEffect(()=>()=>t(),[])}const zs=t=>t.key||"";function EO(t,e){t.forEach(n=>{const i=zs(n);e.set(i,n)})}function PO(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const Fu=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=j.useContext(Gy).forceRender||_O()[0],h=hS(),f=PO(t);let m=f;const g=j.useRef(new Map).current,v=j.useRef(m),T=j.useRef(new Map).current,k=j.useRef(!0);if(Hy(()=>{k.current=!1,EO(f,T),v.current=m}),xO(()=>{k.current=!0,T.clear(),g.clear()}),k.current)return j.createElement(j.Fragment,null,m.map(E=>j.createElement(zp,{key:zs(E),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},E)));m=[...m];const b=v.current.map(zs),F=f.map(zs),C=b.length;for(let E=0;E<C;E++){const S=b[E];F.indexOf(S)===-1&&!g.has(S)&&g.set(S,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((E,S)=>{if(F.indexOf(S)!==-1)return;const B=T.get(S);if(!B)return;const q=b.indexOf(S);let K=E;if(!K){const R=()=>{g.delete(S);const I=Array.from(T.keys()).filter(N=>!F.includes(N));if(I.forEach(N=>T.delete(N)),v.current=f.filter(N=>{const O=zs(N);return O===S||I.includes(O)}),!g.size){if(h.current===!1)return;u(),i&&i()}};K=j.createElement(zp,{key:zs(B),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:o,mode:a},B),g.set(S,K)}m.splice(q,0,K)}),m=m.map(E=>{const S=E.key;return g.has(S)?E:j.createElement(zp,{key:zs(E),isPresent:!0,presenceAffectsLayout:o,mode:a},E)}),j.createElement(j.Fragment,null,g.size?m:m.map(E=>j.cloneElement(E)))},SO=()=>{};var Uw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},IO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},fS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(v=64)),i.push(n[m],n[g],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new CO;const v=o<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const k=f<<6&192|g;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AO=function(t){const e=dS(t);return fS.encodeByteArray(e,!0)},Id=function(t){return AO(t).replace(/\./g,"")},pS=function(t){try{return fS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=()=>kO().__FIREBASE_DEFAULTS__,RO=()=>{if(typeof process>"u"||typeof Uw>"u")return;const t=Uw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pS(t[1]);return e&&JSON.parse(e)},xf=()=>{try{return SO()||bO()||RO()||LO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mS=t=>{var e,n;return(n=(e=xf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},NO=t=>{const e=mS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},gS=()=>{var t;return(t=xf())==null?void 0:t.config},yS=t=>{var e;return(e=xf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _S(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Id(JSON.stringify(n)),Id(JSON.stringify(a)),""].join(".")}const uu={};function DO(){const t={prod:[],emulator:[]};for(const e of Object.keys(uu))uu[e]?t.emulator.push(e):t.prod.push(e);return t}function VO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Hw=!1;function vS(t,e){if(typeof window>"u"||typeof document>"u"||!Xa(window.location.host)||uu[t]===e||uu[t]||Hw)return;uu[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=DO().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Hw=!0,a()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=VO(i),T=n("text"),k=document.getElementById(T)||document.createElement("span"),b=n("learnmore"),F=document.getElementById(b)||document.createElement("a"),C=n("preprendIcon"),E=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const S=v.element;u(S),m(F,b);const B=f();h(E,C),S.append(E,k,F,B),document.body.appendChild(S)}o?(k.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function FO(){var e;const t=(e=xf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HO(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WO(){return!FO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $O(){try{return typeof indexedDB=="object"}catch{return!1}}function qO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="FirebaseError";class cr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=GO,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ic.prototype.create)}}class ic{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?ZO(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new cr(r,u,i)}}function ZO(t,e){return t.replace(KO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const KO=/\{\$([^}]+)}/g;function QO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function so(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Ww(o)&&Ww(a)){if(!so(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ww(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function XO(t,e){const n=new YO(t,e);return n.subscribe.bind(n)}class YO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");JO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Up),r.error===void 0&&(r.error=Up),r.complete===void 0&&(r.complete=Up);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Up(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t){return t&&t._delegate?t._delegate:t}class oo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new MO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nD(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tD(t){return t===Us?void 0:t}function nD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const rD={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},sD=be.INFO,oD={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},aD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=oD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class h_{constructor(e){this.name=e,this._logLevel=sD,this._logHandler=aD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const lD=(t,e)=>e.some(n=>t instanceof n);let $w,qw;function uD(){return $w||($w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cD(){return qw||(qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wS=new WeakMap,gg=new WeakMap,TS=new WeakMap,Hp=new WeakMap,d_=new WeakMap;function hD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Qr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&wS.set(n,t)}).catch(()=>{}),d_.set(e,t),e}function dD(t){if(gg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});gg.set(t,e)}let yg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fD(t){yg=t(yg)}function pD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Wp(this),e,...n);return TS.set(i,e.sort?e.sort():[e]),Qr(i)}:cD().includes(t)?function(...e){return t.apply(Wp(this),e),Qr(wS.get(this))}:function(...e){return Qr(t.apply(Wp(this),e))}}function mD(t){return typeof t=="function"?pD(t):(t instanceof IDBTransaction&&dD(t),lD(t,uD())?new Proxy(t,yg):t)}function Qr(t){if(t instanceof IDBRequest)return hD(t);if(Hp.has(t))return Hp.get(t);const e=mD(t);return e!==t&&(Hp.set(t,e),d_.set(e,t)),e}const Wp=t=>d_.get(t);function gD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Qr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Qr(a.result),h.oldVersion,h.newVersion,Qr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const yD=["get","getKey","getAll","getAllKeys","count"],_D=["put","add","delete","clear"],$p=new Map;function Gw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($p.get(e))return $p.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=_D.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||yD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return $p.set(e,o),o}fD(t=>({...t,get:(e,n,i)=>Gw(e,n)||t.get(e,n,i),has:(e,n)=>!!Gw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _g="@firebase/app",Zw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new h_("@firebase/app"),TD="@firebase/app-compat",xD="@firebase/analytics-compat",ED="@firebase/analytics",PD="@firebase/app-check-compat",SD="@firebase/app-check",ID="@firebase/auth",CD="@firebase/auth-compat",AD="@firebase/database",kD="@firebase/data-connect",bD="@firebase/database-compat",RD="@firebase/functions",LD="@firebase/functions-compat",ND="@firebase/installations",MD="@firebase/installations-compat",OD="@firebase/messaging",DD="@firebase/messaging-compat",VD="@firebase/performance",jD="@firebase/performance-compat",FD="@firebase/remote-config",BD="@firebase/remote-config-compat",zD="@firebase/storage",UD="@firebase/storage-compat",HD="@firebase/firestore",WD="@firebase/ai",$D="@firebase/firestore-compat",qD="firebase",GD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="[DEFAULT]",ZD={[_g]:"fire-core",[TD]:"fire-core-compat",[ED]:"fire-analytics",[xD]:"fire-analytics-compat",[SD]:"fire-app-check",[PD]:"fire-app-check-compat",[ID]:"fire-auth",[CD]:"fire-auth-compat",[AD]:"fire-rtdb",[kD]:"fire-data-connect",[bD]:"fire-rtdb-compat",[RD]:"fire-fn",[LD]:"fire-fn-compat",[ND]:"fire-iid",[MD]:"fire-iid-compat",[OD]:"fire-fcm",[DD]:"fire-fcm-compat",[VD]:"fire-perf",[jD]:"fire-perf-compat",[FD]:"fire-rc",[BD]:"fire-rc-compat",[zD]:"fire-gcs",[UD]:"fire-gcs-compat",[HD]:"fire-fst",[$D]:"fire-fst-compat",[WD]:"fire-vertex","fire-js":"fire-js",[qD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map,KD=new Map,wg=new Map;function Kw(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ba(t){const e=t.name;if(wg.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;wg.set(e,t);for(const n of Cd.values())Kw(n,t);for(const n of KD.values())Kw(n,t);return!0}function f_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ei(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new ic("app","Firebase",QD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=GD;function xS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:vg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Xr.create("bad-app-name",{appName:String(r)});if(n||(n=gS()),!n)throw Xr.create("no-options");const o=Cd.get(r);if(o){if(so(n,o.options)&&so(i,o.config))return o;throw Xr.create("duplicate-app",{appName:r})}const a=new iD(r);for(const h of wg.values())a.addComponent(h);const u=new XD(n,i,a);return Cd.set(r,u),u}function ES(t=vg){const e=Cd.get(t);if(!e&&t===vg&&gS())return xS();if(!e)throw Xr.create("no-app",{appName:t});return e}function Yr(t,e,n){let i=ZD[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}Ba(new oo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="firebase-heartbeat-database",JD=1,Bu="firebase-heartbeat-store";let qp=null;function PS(){return qp||(qp=gD(YD,JD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xr.create("idb-open",{originalErrorMessage:t.message})})),qp}async function eV(t){try{const n=(await PS()).transaction(Bu),i=await n.objectStore(Bu).get(SS(t));return await n.done,i}catch(e){if(e instanceof cr)ir.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function Qw(t,e){try{const i=(await PS()).transaction(Bu,"readwrite");await i.objectStore(Bu).put(e,SS(t)),await i.done}catch(n){if(n instanceof cr)ir.warn(n.message);else{const i=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(i.message)}}}function SS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=1024,nV=30;class iV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Xw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>nV){const a=oV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ir.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xw(),{heartbeatsToSend:i,unsentEntries:r}=rV(this._heartbeatsCache.heartbeats),o=Id(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ir.warn(n),""}}}function Xw(){return new Date().toISOString().substring(0,10)}function rV(t,e=tV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Yw(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Yw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class sV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $O()?qO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yw(t){return Id(JSON.stringify({version:2,heartbeats:t})).length}function oV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){Ba(new oo("platform-logger",e=>new vD(e),"PRIVATE")),Ba(new oo("heartbeat",e=>new iV(e),"PRIVATE")),Yr(_g,Zw,t),Yr(_g,Zw,"esm2020"),Yr("fire-js","")}aV("");var Jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,IS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.F=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(O,D,z){for(var M=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)M[_e-2]=arguments[_e];return I.prototype[D].apply(O,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,N){N||(N=0);const O=Array(16);if(typeof I=="string")for(var D=0;D<16;++D)O[D]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(D=0;D<16;++D)O[D]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],D=R.g[2];let z=R.g[3],M;M=I+(z^N&(D^z))+O[0]+3614090360&4294967295,I=N+(M<<7&4294967295|M>>>25),M=z+(D^I&(N^D))+O[1]+3905402710&4294967295,z=I+(M<<12&4294967295|M>>>20),M=D+(N^z&(I^N))+O[2]+606105819&4294967295,D=z+(M<<17&4294967295|M>>>15),M=N+(I^D&(z^I))+O[3]+3250441966&4294967295,N=D+(M<<22&4294967295|M>>>10),M=I+(z^N&(D^z))+O[4]+4118548399&4294967295,I=N+(M<<7&4294967295|M>>>25),M=z+(D^I&(N^D))+O[5]+1200080426&4294967295,z=I+(M<<12&4294967295|M>>>20),M=D+(N^z&(I^N))+O[6]+2821735955&4294967295,D=z+(M<<17&4294967295|M>>>15),M=N+(I^D&(z^I))+O[7]+4249261313&4294967295,N=D+(M<<22&4294967295|M>>>10),M=I+(z^N&(D^z))+O[8]+1770035416&4294967295,I=N+(M<<7&4294967295|M>>>25),M=z+(D^I&(N^D))+O[9]+2336552879&4294967295,z=I+(M<<12&4294967295|M>>>20),M=D+(N^z&(I^N))+O[10]+4294925233&4294967295,D=z+(M<<17&4294967295|M>>>15),M=N+(I^D&(z^I))+O[11]+2304563134&4294967295,N=D+(M<<22&4294967295|M>>>10),M=I+(z^N&(D^z))+O[12]+1804603682&4294967295,I=N+(M<<7&4294967295|M>>>25),M=z+(D^I&(N^D))+O[13]+4254626195&4294967295,z=I+(M<<12&4294967295|M>>>20),M=D+(N^z&(I^N))+O[14]+2792965006&4294967295,D=z+(M<<17&4294967295|M>>>15),M=N+(I^D&(z^I))+O[15]+1236535329&4294967295,N=D+(M<<22&4294967295|M>>>10),M=I+(D^z&(N^D))+O[1]+4129170786&4294967295,I=N+(M<<5&4294967295|M>>>27),M=z+(N^D&(I^N))+O[6]+3225465664&4294967295,z=I+(M<<9&4294967295|M>>>23),M=D+(I^N&(z^I))+O[11]+643717713&4294967295,D=z+(M<<14&4294967295|M>>>18),M=N+(z^I&(D^z))+O[0]+3921069994&4294967295,N=D+(M<<20&4294967295|M>>>12),M=I+(D^z&(N^D))+O[5]+3593408605&4294967295,I=N+(M<<5&4294967295|M>>>27),M=z+(N^D&(I^N))+O[10]+38016083&4294967295,z=I+(M<<9&4294967295|M>>>23),M=D+(I^N&(z^I))+O[15]+3634488961&4294967295,D=z+(M<<14&4294967295|M>>>18),M=N+(z^I&(D^z))+O[4]+3889429448&4294967295,N=D+(M<<20&4294967295|M>>>12),M=I+(D^z&(N^D))+O[9]+568446438&4294967295,I=N+(M<<5&4294967295|M>>>27),M=z+(N^D&(I^N))+O[14]+3275163606&4294967295,z=I+(M<<9&4294967295|M>>>23),M=D+(I^N&(z^I))+O[3]+4107603335&4294967295,D=z+(M<<14&4294967295|M>>>18),M=N+(z^I&(D^z))+O[8]+1163531501&4294967295,N=D+(M<<20&4294967295|M>>>12),M=I+(D^z&(N^D))+O[13]+2850285829&4294967295,I=N+(M<<5&4294967295|M>>>27),M=z+(N^D&(I^N))+O[2]+4243563512&4294967295,z=I+(M<<9&4294967295|M>>>23),M=D+(I^N&(z^I))+O[7]+1735328473&4294967295,D=z+(M<<14&4294967295|M>>>18),M=N+(z^I&(D^z))+O[12]+2368359562&4294967295,N=D+(M<<20&4294967295|M>>>12),M=I+(N^D^z)+O[5]+4294588738&4294967295,I=N+(M<<4&4294967295|M>>>28),M=z+(I^N^D)+O[8]+2272392833&4294967295,z=I+(M<<11&4294967295|M>>>21),M=D+(z^I^N)+O[11]+1839030562&4294967295,D=z+(M<<16&4294967295|M>>>16),M=N+(D^z^I)+O[14]+4259657740&4294967295,N=D+(M<<23&4294967295|M>>>9),M=I+(N^D^z)+O[1]+2763975236&4294967295,I=N+(M<<4&4294967295|M>>>28),M=z+(I^N^D)+O[4]+1272893353&4294967295,z=I+(M<<11&4294967295|M>>>21),M=D+(z^I^N)+O[7]+4139469664&4294967295,D=z+(M<<16&4294967295|M>>>16),M=N+(D^z^I)+O[10]+3200236656&4294967295,N=D+(M<<23&4294967295|M>>>9),M=I+(N^D^z)+O[13]+681279174&4294967295,I=N+(M<<4&4294967295|M>>>28),M=z+(I^N^D)+O[0]+3936430074&4294967295,z=I+(M<<11&4294967295|M>>>21),M=D+(z^I^N)+O[3]+3572445317&4294967295,D=z+(M<<16&4294967295|M>>>16),M=N+(D^z^I)+O[6]+76029189&4294967295,N=D+(M<<23&4294967295|M>>>9),M=I+(N^D^z)+O[9]+3654602809&4294967295,I=N+(M<<4&4294967295|M>>>28),M=z+(I^N^D)+O[12]+3873151461&4294967295,z=I+(M<<11&4294967295|M>>>21),M=D+(z^I^N)+O[15]+530742520&4294967295,D=z+(M<<16&4294967295|M>>>16),M=N+(D^z^I)+O[2]+3299628645&4294967295,N=D+(M<<23&4294967295|M>>>9),M=I+(D^(N|~z))+O[0]+4096336452&4294967295,I=N+(M<<6&4294967295|M>>>26),M=z+(N^(I|~D))+O[7]+1126891415&4294967295,z=I+(M<<10&4294967295|M>>>22),M=D+(I^(z|~N))+O[14]+2878612391&4294967295,D=z+(M<<15&4294967295|M>>>17),M=N+(z^(D|~I))+O[5]+4237533241&4294967295,N=D+(M<<21&4294967295|M>>>11),M=I+(D^(N|~z))+O[12]+1700485571&4294967295,I=N+(M<<6&4294967295|M>>>26),M=z+(N^(I|~D))+O[3]+2399980690&4294967295,z=I+(M<<10&4294967295|M>>>22),M=D+(I^(z|~N))+O[10]+4293915773&4294967295,D=z+(M<<15&4294967295|M>>>17),M=N+(z^(D|~I))+O[1]+2240044497&4294967295,N=D+(M<<21&4294967295|M>>>11),M=I+(D^(N|~z))+O[8]+1873313359&4294967295,I=N+(M<<6&4294967295|M>>>26),M=z+(N^(I|~D))+O[15]+4264355552&4294967295,z=I+(M<<10&4294967295|M>>>22),M=D+(I^(z|~N))+O[6]+2734768916&4294967295,D=z+(M<<15&4294967295|M>>>17),M=N+(z^(D|~I))+O[13]+1309151649&4294967295,N=D+(M<<21&4294967295|M>>>11),M=I+(D^(N|~z))+O[4]+4149444226&4294967295,I=N+(M<<6&4294967295|M>>>26),M=z+(N^(I|~D))+O[11]+3174756917&4294967295,z=I+(M<<10&4294967295|M>>>22),M=D+(I^(z|~N))+O[2]+718787259&4294967295,D=z+(M<<15&4294967295|M>>>17),M=N+(z^(D|~I))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.v=function(R,I){I===void 0&&(I=R.length);const N=I-this.blockSize,O=this.C;let D=this.h,z=0;for(;z<I;){if(D==0)for(;z<=N;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<I;)if(O[D++]=R.charCodeAt(z++),D==this.blockSize){r(this,O),D=0;break}}else for(;z<I;)if(O[D++]=R[z++],D==this.blockSize){r(this,O),D=0;break}}this.h=D,this.o+=I},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)R[I++]=this.g[N]>>>O&255;return R};function o(R,I){var N=u;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function a(R,I){this.h=I;const N=[];let O=!0;for(let D=R.length-1;D>=0;D--){const z=R[D]|0;O&&z==I||(N[D]=z,O=!1)}this.g=N}var u={};function h(R){return-128<=R&&R<128?o(R,function(I){return new a([I|0],I<0?-1:0)}):new a([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return F(f(-R));const I=[];let N=1;for(let O=0;R>=N;O++)I[O]=R/N|0,N*=4294967296;return new a(I,0)}function m(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return F(m(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(I,8));let O=g;for(let z=0;z<R.length;z+=8){var D=Math.min(8,R.length-z);const M=parseInt(R.substring(z,z+D),I);D<8?(D=f(Math.pow(I,D)),O=O.j(D).add(f(M))):(O=O.j(N),O=O.add(f(M)))}return O}var g=h(0),v=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(b(this))return-F(this).m();let R=0,I=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);R+=(O>=0?O:4294967296+O)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(b(this))return"-"+F(this).toString(R);const I=f(Math.pow(R,6));var N=this;let O="";for(;;){const D=B(N,I).g;N=C(N,D.j(I));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=D,k(N))return z+O;for(;z.length<6;)z="0"+z;O=z+O}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=C(this,R),b(R)?-1:k(R)?0:1};function F(R){const I=R.g.length,N=[];for(let O=0;O<I;O++)N[O]=~R.g[O];return new a(N,~R.h).add(v)}t.abs=function(){return b(this)?F(this):this},t.add=function(R){const I=Math.max(this.g.length,R.g.length),N=[];let O=0;for(let D=0;D<=I;D++){let z=O+(this.i(D)&65535)+(R.i(D)&65535),M=(z>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);O=M>>>16,z&=65535,M&=65535,N[D]=M<<16|z}return new a(N,N[N.length-1]&-2147483648?-1:0)};function C(R,I){return R.add(F(I))}t.j=function(R){if(k(this)||k(R))return g;if(b(this))return b(R)?F(this).j(F(R)):F(F(this).j(R));if(b(R))return F(this.j(F(R)));if(this.l(T)<0&&R.l(T)<0)return f(this.m()*R.m());const I=this.g.length+R.g.length,N=[];for(var O=0;O<2*I;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<R.g.length;D++){const z=this.i(O)>>>16,M=this.i(O)&65535,_e=R.i(D)>>>16,pt=R.i(D)&65535;N[2*O+2*D]+=M*pt,E(N,2*O+2*D),N[2*O+2*D+1]+=z*pt,E(N,2*O+2*D+1),N[2*O+2*D+1]+=M*_e,E(N,2*O+2*D+1),N[2*O+2*D+2]+=z*_e,E(N,2*O+2*D+2)}for(R=0;R<I;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=I;R<2*I;R++)N[R]=0;return new a(N,0)};function E(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function S(R,I){this.g=R,this.h=I}function B(R,I){if(k(I))throw Error("division by zero");if(k(R))return new S(g,g);if(b(R))return I=B(F(R),I),new S(F(I.g),F(I.h));if(b(I))return I=B(R,F(I)),new S(F(I.g),I.h);if(R.g.length>30){if(b(R)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var N=v,O=I;O.l(R)<=0;)N=q(N),O=q(O);var D=K(N,1),z=K(O,1);for(O=K(O,2),N=K(N,2);!k(O);){var M=z.add(O);M.l(R)<=0&&(D=D.add(N),z=M),O=K(O,1),N=K(N,1)}return I=C(R,D.j(I)),new S(D,I)}for(D=g;R.l(I)>=0;){for(N=Math.max(1,Math.floor(R.m()/I.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),z=f(N),M=z.j(I);b(M)||M.l(R)>0;)N-=O,z=f(N),M=z.j(I);k(z)&&(z=v),D=D.add(z),R=C(R,M)}return new S(D,R)}t.B=function(R){return B(this,R).h},t.and=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)&R.i(O);return new a(N,this.h&R.h)},t.or=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)|R.i(O);return new a(N,this.h|R.h)},t.xor=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)^R.i(O);return new a(N,this.h^R.h)};function q(R){const I=R.g.length+1,N=[];for(let O=0;O<I;O++)N[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(N,R.h)}function K(R,I){const N=I>>5;I%=32;const O=R.g.length-N,D=[];for(let z=0;z<O;z++)D[z]=I>0?R.i(z+N)>>>I|R.i(z+N+1)<<32-I:R.i(z+N);return new a(D,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,IS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Jr=a}).apply(typeof Jw<"u"?Jw:typeof self<"u"?self:typeof window<"u"?window:{});var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CS,$l,AS,Dh,Tg,kS,bS,RS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof mh=="object"&&mh];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var w=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in w))break e;w=w[U]}c=c[c.length-1],A=w[c],y=y(A),y!=A&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var w=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&w.push([A,y[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,w){return c.call.apply(c.bind,arguments)}function f(c,y,w){return f=h,f.apply(null,arguments)}function m(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function g(c,y){function w(){}w.prototype=y.prototype,c.Z=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(A,U,W){for(var te=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)te[Te-2]=arguments[Te];return y.prototype[U].apply(A,te)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const w=Array(y);for(let A=0;A<y;A++)w[A]=c[A];return w}return[]}function k(c,y){for(let A=1;A<arguments.length;A++){const U=arguments[A];var w=typeof U;if(w=w!="object"?w:U?Array.isArray(U)?"array":w:"null",w=="array"||w=="object"&&typeof U.length=="number"){w=c.length||0;const W=U.length||0;c.length=w+W;for(let te=0;te<W;te++)c[w+te]=U[te]}else c.push(U)}}class b{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(c){a.setTimeout(()=>{throw c},0)}function C(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class E{constructor(){this.h=this.g=null}add(y,w){const A=S.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new b(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,K=!1,R=new E,I=()=>{const c=Promise.resolve(void 0);q=()=>{c.then(N)}};function N(){for(var c;c=C();){try{c.h.call(c.g)}catch(w){F(w)}var y=S;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}K=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return c}();function M(c){return/^[\s\xa0]*$/.test(c)}function _e(c,y){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(_e,D),_e.prototype.init=function(c,y){const w=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),Ie=0;function ot(c,y,w,A,U){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=U,this.key=++Ie,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ce(c,y,w){for(const A in c)y.call(w,c[A],A,c)}function G(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function X(c){const y={};for(const w in c)y[w]=c[w];return y}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(c,y){let w,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(w in A)c[w]=A[w];for(let W=0;W<ue.length;W++)w=ue[W],Object.prototype.hasOwnProperty.call(A,w)&&(c[w]=A[w])}}function de(c){this.src=c,this.g={},this.h=0}de.prototype.add=function(c,y,w,A,U){const W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);const te=ae(c,y,A,U);return te>-1?(y=c[te],w||(y.fa=!1)):(y=new ot(y,this.src,W,!!A,U),y.fa=w,c.push(y)),y};function oe(c,y){const w=y.type;if(w in c.g){var A=c.g[w],U=Array.prototype.indexOf.call(A,y,void 0),W;(W=U>=0)&&Array.prototype.splice.call(A,U,1),W&&(Z(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function ae(c,y,w,A){for(let U=0;U<c.length;++U){const W=c[U];if(!W.da&&W.listener==y&&W.capture==!!w&&W.ha==A)return U}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Ne={};function Ft(c,y,w,A,U){if(Array.isArray(y)){for(let W=0;W<y.length;W++)Ft(c,y[W],w,A,U);return null}return w=Ts(w),c&&c[pt]?c.J(y,w,u(A)?!!A.capture:!1,U):Bt(c,y,w,!1,A,U)}function Bt(c,y,w,A,U,W){if(!y)throw Error("Invalid event type");const te=u(U)?!!U.capture:!!U;let Te=To(c);if(Te||(c[Se]=Te=new de(c)),w=Te.add(y,w,A,te,W),w.proxy)return w;if(A=at(),w.proxy=A,A.src=c,A.listener=w,c.addEventListener)z||(U=te),U===void 0&&(U=!1),c.addEventListener(y.toString(),A,U);else if(c.attachEvent)c.attachEvent(pc(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function at(){function c(w){return y.call(c.src,c.listener,w)}const y=mc;return c}function Wn(c,y,w,A,U){if(Array.isArray(y))for(var W=0;W<y.length;W++)Wn(c,y[W],w,A,U);else A=u(A)?!!A.capture:!!A,w=Ts(w),c&&c[pt]?(c=c.i,W=String(y).toString(),W in c.g&&(y=c.g[W],w=ae(y,w,A,U),w>-1&&(Z(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete c.g[W],c.h--)))):c&&(c=To(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ae(y,w,A,U)),(w=c>-1?y[c]:null)&&vs(w))}function vs(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[pt])oe(y.i,c);else{var w=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(w,A,c.capture):y.detachEvent?y.detachEvent(pc(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=To(y))?(oe(w,c),w.h==0&&(w.src=null,y[Se]=null)):Z(c)}}}function pc(c){return c in Ne?Ne[c]:Ne[c]="on"+c}function mc(c,y){if(c.da)c=!0;else{y=new _e(y,this);const w=c.listener,A=c.ha||c.src;c.fa&&vs(c),c=w.call(A,y)}return c}function To(c){return c=c[Se],c instanceof de?c:null}var ws="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ts(c){return typeof c=="function"?c:(c[ws]||(c[ws]=function(y){return c.handleEvent(y)}),c[ws])}function It(){O.call(this),this.i=new de(this),this.M=this,this.G=null}g(It,O),It.prototype[pt]=!0,It.prototype.removeEventListener=function(c,y,w,A){Wn(this,c,y,w,A)};function Ct(c,y){var w,A=c.G;if(A)for(w=[];A;A=A.G)w.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new D(y,c);else if(y instanceof D)y.target=y.target||c;else{var U=y;y=new D(A,c),xe(y,U)}U=!0;let W,te;if(w)for(te=w.length-1;te>=0;te--)W=y.g=w[te],U=dr(W,A,!0,y)&&U;if(W=y.g=c,U=dr(W,A,!0,y)&&U,U=dr(W,A,!1,y)&&U,w)for(te=0;te<w.length;te++)W=y.g=w[te],U=dr(W,A,!1,y)&&U}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const w=c.g[y];for(let A=0;A<w.length;A++)Z(w[A]);delete c.g[y],c.h--}}this.G=null},It.prototype.J=function(c,y,w,A){return this.i.add(String(c),y,!1,w,A)},It.prototype.K=function(c,y,w,A){return this.i.add(String(c),y,!0,w,A)};function dr(c,y,w,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let W=0;W<y.length;++W){const te=y[W];if(te&&!te.da&&te.capture==w){const Te=te.listener,je=te.ha||te.src;te.fa&&oe(c.i,te),U=Te.call(je,A)!==!1&&U}}return U&&!A.defaultPrevented}function gc(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function rl(c){c.g=gc(()=>{c.g=null,c.i&&(c.i=!1,rl(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Hf extends O{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:rl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(c){O.call(this),this.h=c,this.g={}}g(xs,O);var xo=[];function sl(c){ce(c.g,function(y,w){this.g.hasOwnProperty(w)&&vs(y)},c),c.g={}}xs.prototype.N=function(){xs.Z.N.call(this),sl(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eo=a.JSON.stringify,Wf=a.JSON.parse,yc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ol(){}function _c(){}var fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Es(){D.call(this,"d")}g(Es,D);function Po(){D.call(this,"c")}g(Po,D);var ki={},pr=null;function So(){return pr=pr||new It}ki.Ia="serverreachability";function vc(c){D.call(this,ki.Ia,c)}g(vc,D);function mr(c){const y=So();Ct(y,new vc(y))}ki.STAT_EVENT="statevent";function al(c,y){D.call(this,ki.STAT_EVENT,c),this.stat=y}g(al,D);function At(c){const y=So();Ct(y,new al(y,c))}ki.Ja="timingevent";function wc(c,y){D.call(this,ki.Ja,c),this.size=y}g(wc,D);function Ps(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Ss(){this.g=!0}Ss.prototype.ua=function(){this.g=!1};function $f(c,y,w,A,U,W){c.info(function(){if(c.g)if(W){var te="",Te=W.split("&");for(let Be=0;Be<Te.length;Be++){var je=Te[Be].split("=");if(je.length>1){const ct=je[0];je=je[1];const Rn=ct.split("_");te=Rn.length>=2&&Rn[1]=="type"?te+(ct+"="+je+"&"):te+(ct+"=redacted&")}}}else te=null;else te=W;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+y+`
`+w+`
`+te})}function qf(c,y,w,A,U,W,te){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+y+`
`+w+`
`+W+" "+te})}function gr(c,y,w,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Gf(c,w)+(A?" "+A:"")})}function ll(c,y){c.info(function(){return"TIMEOUT: "+y})}Ss.prototype.info=function(){};function Gf(c,y){if(!c.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(c=0;c<W.length;c++)if(Array.isArray(W[c])){var w=W[c];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let te=1;te<A.length;te++)A[te]=""}}}}return Eo(W)}catch{return y}}var Io={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Tc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function on(){}g(on,ol),on.prototype.g=function(){return new XMLHttpRequest},xc=new on;function le(c){return encodeURIComponent(String(c))}function Ec(c){var y=1;c=c.split(":");const w=[];for(;y>0&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function $n(c,y,w,A){this.j=c,this.i=y,this.l=w,this.S=A||1,this.V=new xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ul}function ul(){this.i=null,this.g="",this.h=!1}var cl={},Is={};function Co(c,y,w){c.M=1,c.A=$e(Xt(y)),c.u=w,c.R=!0,bi(c,null)}function bi(c,y){c.F=Date.now(),Ao(c),c.B=Xt(c.A);var w=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),No(w.i,"t",A),c.C=0,w=c.j.L,c.h=new ul,c.g=Pl(c.j,w?y:null,!c.u),c.P>0&&(c.O=new Hf(f(c.Y,c,c.g),c.P)),y=c.V,w=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(xo[0]=U.toString()),U=xo);for(let W=0;W<U.length;W++){const te=Ft(w,U[W],A||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=c.J?X(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),mr(),$f(c.i,c.v,c.B,c.l,c.S,c.u)}$n.prototype.ba=function(c){c=c.target;const y=this.O;y&&ui(c)==3?y.j():this.Y(c)},$n.prototype.Y=function(c){try{if(c==this.g)e:{const Te=ui(this.g),je=this.g.ya(),Be=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||yl(this.g)))){this.K||Te!=4||je==7||(je==8||Be<=0?mr(3):mr(2)),ko(this);var y=this.g.ca();this.X=y;var w=Pc(this);if(this.o=y==200,qf(this.i,this.v,this.B,this.l,this.S,Te,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(A)){var W=A;break t}}W=null}if(c=W)gr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hl(this,c);else{this.o=!1,this.m=3,At(12),Cn(this),Cs(this);break e}}if(this.R){c=!0;let ct;for(;!this.K&&this.C<w.length;)if(ct=Zf(this,w),ct==Is){Te==4&&(this.m=4,At(14),c=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==cl){this.m=4,At(15),gr(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else gr(this.i,this.l,ct,null),hl(this,ct);if(Sc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||w.length!=0||this.h.h||(this.m=1,At(16),c=!1),this.o=this.o&&c,!c)gr(this.i,this.l,w,"[Invalid Chunked Response]"),Cn(this),Cs(this);else if(w.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),xl(te),te.P=!0,At(11))}}else gr(this.i,this.l,w,null),hl(this,w);Te==4&&Cn(this),this.o&&!this.K&&(Te==4?_n(this.j,this):(this.o=!1,Ao(this)))}else _l(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Cn(this),Cs(this)}}}catch{}finally{}};function Pc(c){if(!Sc(c))return c.g.la();const y=yl(c.g);if(y==="")return"";let w="";const A=y.length,U=ui(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Cn(c),Cs(c),"";c.h.i=new a.TextDecoder}for(let W=0;W<A;W++)c.h.h=!0,w+=c.h.i.decode(y[W],{stream:!(U&&W==A-1)});return y.length=0,c.h.g+=w,c.C=0,c.h.g}function Sc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Zf(c,y){var w=c.C,A=y.indexOf(`
`,w);return A==-1?Is:(w=Number(y.substring(w,A)),isNaN(w)?cl:(A+=1,A+w>y.length?Is:(y=y.slice(A,A+w),c.C=A+w,y)))}$n.prototype.cancel=function(){this.K=!0,Cn(this)};function Ao(c){c.T=Date.now()+c.H,Ic(c,c.H)}function Ic(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ps(f(c.aa,c),y)}function ko(c){c.D&&(a.clearTimeout(c.D),c.D=null)}$n.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ll(this.i,this.B),this.M!=2&&(mr(),At(17)),Cn(this),this.m=2,Cs(this)):Ic(this,this.T-c)};function Cs(c){c.j.I==0||c.K||_n(c.j,c)}function Cn(c){ko(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,sl(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function hl(c,y){try{var w=c.j;if(w.I!=0&&(w.g==c||As(w.h,c))){if(!c.L&&As(w.h,c)&&w.I==3){try{var A=w.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)jo(w),Do(w);else break e;Tl(w),At(18)}}else w.xa=U[1],0<w.xa-w.K&&U[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ps(f(w.Va,w),6e3));kc(w.h)<=1&&w.ta&&(w.ta=void 0)}else hi(w,11)}else if((c.L||w.g==c)&&jo(w),!M(y))for(U=w.Ba.g.parse(y),y=0;y<U.length;y++){let Be=U[y];const ct=Be[0];if(!(ct<=w.K))if(w.K=ct,Be=Be[1],w.I==2)if(Be[0]=="c"){w.M=Be[1],w.ba=Be[2];const Rn=Be[3];Rn!=null&&(w.ka=Rn,w.j.info("VER="+w.ka));const Zn=Be[4];Zn!=null&&(w.za=Zn,w.j.info("SVER="+w.za));const Ln=Be[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(A=1.5*Ln,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const di=c.g;if(di){const zo=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var W=A.h;W.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ri(W,W.h),W.h=null))}if(A.G){const Uo=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(A.wa=Uo,re(A.J,A.G,Uo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var te=c;if(A.na=El(A,A.L?A.ba:null,A.W),te.L){dl(A.h,te);var Te=te,je=A.O;je&&(Te.H=je),Te.D&&(ko(Te),Ao(Te)),A.g=te}else wl(A);w.i.length>0&&ci(w)}else Be[0]!="stop"&&Be[0]!="close"||hi(w,7);else w.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?hi(w,7):Ce(w):Be[0]!="noop"&&w.l&&w.l.qa(Be),w.A=0)}}mr(4)}catch{}}var Kf=class{constructor(c,y){this.g=c,this.map=y}};function Cc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ac(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function kc(c){return c.h?1:c.g?c.g.size:0}function As(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ri(c,y){c.g?c.g.add(y):c.h=y}function dl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Cc.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function fl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.G);return y}return T(c.i)}var yr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Me(c,y){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const A=c[w].indexOf("=");let U,W=null;A>=0?(U=c[w].substring(0,A),W=c[w].substring(A+1)):U=c[w],y(U,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ve(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Ve?(this.l=c.l,An(this,c.j),this.o=c.o,this.g=c.g,kn(this,c.u),this.h=c.h,ks(this,bs(c.i)),this.m=c.m):c&&(y=String(c).match(yr))?(this.l=!1,An(this,y[1]||"",!0),this.o=Li(y[2]||""),this.g=Li(y[3]||"",!0),kn(this,y[4]),this.h=Li(y[5]||"",!0),ks(this,y[6]||"",!0),this.m=Li(y[7]||"")):(this.l=!1,this.i=new qn(null,this.l))}Ve.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(oi(y,bc,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(oi(y,bc,!0),"@"),c.push(le(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(oi(w,w.charAt(0)=="/"?Ni:bo,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",oi(w,Mi)),c.join("")},Ve.prototype.resolve=function(c){const y=Xt(this);let w=!!c.j;w?An(y,c.j):w=!!c.o,w?y.o=c.o:w=!!c.g,w?y.g=c.g:w=c.u!=null;var A=c.h;if(w)kn(y,c.u);else if(w=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=y.h.lastIndexOf("/");U!=-1&&(A=y.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const W=[];for(let te=0;te<U.length;){const Te=U[te++];Te=="."?A&&te==U.length&&W.push(""):Te==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&te==U.length&&W.push("")):(W.push(Te),A=!0)}A=W.join("/")}else A=U}return w?y.h=A:w=c.i.toString()!=="",w?ks(y,bs(c.i)):w=!!c.m,w&&(y.m=c.m),y};function Xt(c){return new Ve(c)}function An(c,y,w){c.j=w?Li(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function kn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function ks(c,y,w){y instanceof qn?(c.i=y,pl(c.i,c.l)):(w||(y=oi(y,lt)),c.i=new qn(y,c.l))}function re(c,y,w){c.i.set(y,w)}function $e(c){return re(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Li(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oi(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,an),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function an(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bc=/[#\/\?@]/g,bo=/[#\?:]/g,Ni=/[#\?]/g,lt=/[#\?@]/g,Mi=/#/g;function qn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function yn(c){c.g||(c.g=new Map,c.h=0,c.i&&Me(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=qn.prototype,t.add=function(c,y){yn(this),this.i=null,c=ai(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function Ro(c,y){yn(c),y=ai(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function _r(c,y){return yn(c),y=ai(c,y),c.g.has(y)}t.forEach=function(c,y){yn(this),this.g.forEach(function(w,A){w.forEach(function(U){c.call(y,U,A,this)},this)},this)};function Lo(c,y){yn(c);let w=[];if(typeof y=="string")_r(c,y)&&(w=w.concat(c.g.get(ai(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)w=w.concat(c[y]);return w}t.set=function(c,y){return yn(this),this.i=null,c=ai(this,c),_r(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=Lo(this,c),c.length>0?String(c[0]):y):y};function No(c,y,w){Ro(c,y),w.length>0&&(c.i=null,c.g.set(ai(c,y),T(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var w=y[A];const U=le(w);w=Lo(this,w);for(let W=0;W<w.length;W++){let te=U;w[W]!==""&&(te+="="+le(w[W])),c.push(te)}}return this.i=c.join("&")};function bs(c){const y=new qn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function ai(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function pl(c,y){y&&!c.j&&(yn(c),c.i=null,c.g.forEach(function(w,A){const U=A.toLowerCase();A!=U&&(Ro(this,A),No(this,U,w))},c)),c.j=y}function Mo(c,y){const w=new Ss;if(a.Image){const A=new Image;A.onload=m(bn,w,"TestLoadImage: loaded",!0,y,A),A.onerror=m(bn,w,"TestLoadImage: error",!1,y,A),A.onabort=m(bn,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=m(bn,w,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Rc(c,y){const w=new Ss,A=new AbortController,U=setTimeout(()=>{A.abort(),bn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(W=>{clearTimeout(U),W.ok?bn(w,"TestPingServer: ok",!0,y):bn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),bn(w,"TestPingServer: error",!1,y)})}function bn(c,y,w,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(w)}catch{}}function Qf(){this.g=new yc}function we(c){this.i=c.Sb||null,this.h=c.ab||!1}g(we,ol),we.prototype.g=function(){return new Yt(this.i,this.h)};function Yt(c,y){It.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Yt,It),t=Yt.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Oi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ue(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ue(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?vr(this):Oi(this),this.readyState==3&&Ue(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,vr(this))},t.Na=function(c){this.g&&(this.response=c,vr(this))},t.ga=function(){this.g&&vr(this)};function vr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Oi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function Oi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Yt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Oo(c){let y="";return ce(c,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function Rs(c,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Oo(w),typeof c=="string"?w!=null&&le(w):re(c,y,w))}function Fe(c){It.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Fe,It);var ml=/^https?$/i,Ls=["POST","PUT"];t=Fe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(W){mt(this,W);return}if(c=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)w.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())w.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Ls,y,void 0)>=0)||A||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,te]of w)this.g.setRequestHeader(W,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(W){mt(this,W)}};function mt(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,li(c),Ns(c)}function li(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ct(this,"complete"),Ct(this,"abort"),Ns(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ns(this,!0)),Fe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?gl(this):this.Xa())},t.Xa=function(){gl(this)};function gl(c){if(c.h&&typeof o<"u"){if(c.v&&ui(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ct(c,"readystatechange"),ui(c)==4){c.h=!1;try{const W=c.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=W===0){let te=String(c.D).match(yr)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),A=!ml.test(te?te.toLowerCase():"")}w=A}if(w)Ct(c,"complete"),Ct(c,"success");else{c.o=6;try{var U=ui(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",li(c)}}finally{Ns(c)}}}}function Ns(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,y||Ct(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ui(c){return c.g?c.g.readyState:0}t.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Wf(y)}};function yl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _l(c){const y={};c=(c.g&&ui(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(M(c[A]))continue;var w=Ec(c[A]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=y[U]||[];y[U]=W,W.push(w)}G(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function vl(c){this.za=0,this.i=[],this.j=new Ss,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ms("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ms("baseRetryDelayMs",5e3,c),this.Za=Ms("retryDelaySeedMs",1e4,c),this.Ta=Ms("forwardChannelMaxRetries",2,c),this.va=Ms("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Cc(c&&c.concurrentRequestLimit),this.Ba=new Qf,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=vl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,w,A){At(0),this.W=c,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=El(this,null,this.W),ci(this)};function Ce(c){if(ln(c),c.I==3){var y=c.V++,w=Xt(c.J);if(re(w,"SID",c.M),re(w,"RID",y),re(w,"TYPE","terminate"),Di(c,w),y=new $n(c,c.j,y),y.M=2,y.A=$e(Xt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.A,w=!0),w||(y.g=Pl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ao(y)}Gn(c)}function Do(c){c.g&&(xl(c),c.g.cancel(),c.g=null)}function ln(c){Do(c),c.v&&(a.clearTimeout(c.v),c.v=null),jo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function ci(c){if(!Ac(c.h)&&!c.m){c.m=!0;var y=c.Ea;q||I(),K||(q(),K=!0),R.add(y,c),c.D=0}}function Lc(c,y){return kc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ps(f(c.Ea,c,y),Oc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new $n(this,this.j,c);let W=this.o;if(this.U&&(W?(W=X(W),xe(W,this.U)):W=this.U),this.u!==null||this.R||(U.J=W,W=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Mc(this,U,y),w=Xt(this.J),re(w,"RID",c),re(w,"CVER",22),this.G&&re(w,"X-HTTP-Session-Id",this.G),Di(this,w),W&&(this.R?y="headers="+le(Oo(W))+"&"+y:this.u&&Rs(w,this.u,W)),Ri(this.h,U),this.Ra&&re(w,"TYPE","init"),this.S?(re(w,"$req",y),re(w,"SID","null"),U.U=!0,Co(U,w,null)):Co(U,w,y),this.I=2}}else this.I==3&&(c?Nc(this,c):this.i.length==0||Ac(this.h)||Nc(this))};function Nc(c,y){var w;y?w=y.l:w=c.V++;const A=Xt(c.J);re(A,"SID",c.M),re(A,"RID",w),re(A,"AID",c.K),Di(c,A),c.u&&c.o&&Rs(A,c.u,c.o),w=new $n(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Mc(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ri(c.h,w),Co(w,A,y)}function Di(c,y){c.H&&ce(c.H,function(w,A){re(y,A,w)}),c.l&&ce({},function(w,A){re(y,A,w)})}function Mc(c,y,w){w=Math.min(c.i.length,w);const A=c.l?f(c.l.Ka,c.l,c):null;e:{var U=c.i;let Te=-1;for(;;){const je=["count="+w];Te==-1?w>0?(Te=U[0].g,je.push("ofs="+Te)):Te=0:je.push("ofs="+Te);let Be=!0;for(let ct=0;ct<w;ct++){var W=U[ct].g;const Rn=U[ct].map;if(W-=Te,W<0)Te=Math.max(0,U[ct].g-100),Be=!1;else try{W="req"+W+"_"||"";try{var te=Rn instanceof Map?Rn:Object.entries(Rn);for(const[Zn,Ln]of te){let di=Ln;u(Ln)&&(di=Eo(Ln)),je.push(W+Zn+"="+encodeURIComponent(di))}}catch(Zn){throw je.push(W+"type="+encodeURIComponent("_badmap")),Zn}}catch{A&&A(Rn)}}if(Be){te=je.join("&");break e}}te=void 0}return c=c.i.splice(0,w),y.G=c,te}function wl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;q||I(),K||(q(),K=!0),R.add(y,c),c.A=0}}function Tl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ps(f(c.Da,c),Oc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Vo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ps(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Do(this),Vo(this))};function xl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Vo(c){c.g=new $n(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Xt(c.na);re(y,"RID","rpc"),re(y,"SID",c.M),re(y,"AID",c.K),re(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&re(y,"TO",c.ia),re(y,"TYPE","xmlhttp"),Di(c,y),c.u&&c.o&&Rs(y,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=$e(Xt(y)),w.u=null,w.R=!0,bi(w,c)}t.Va=function(){this.C!=null&&(this.C=null,Do(this),Tl(this),At(19))};function jo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function _n(c,y){var w=null;if(c.g==y){jo(c),xl(c),c.g=null;var A=2}else if(As(c.h,y))w=y.G,dl(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var U=c.D;A=So(),Ct(A,new wc(A,w)),ci(c)}else wl(c);else if(U=y.m,U==3||U==0&&y.X>0||!(A==1&&Lc(c,y)||A==2&&Tl(c)))switch(w&&w.length>0&&(y=c.h,y.i=y.i.concat(w)),U){case 1:hi(c,5);break;case 4:hi(c,10);break;case 3:hi(c,6);break;default:hi(c,2)}}}function Oc(c,y){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*y}function hi(c,y){if(c.j.info("Error code "+y),y==2){var w=f(c.bb,c),A=c.Ua;const U=!A;A=new Ve(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||An(A,"https"),$e(A),U?Mo(A.toString(),w):Rc(A.toString(),w)}else At(2);c.I=0,c.l&&c.l.pa(y),Gn(c),ln(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Gn(c){if(c.I=0,c.ja=[],c.l){const y=fl(c.h);(y.length!=0||c.i.length!=0)&&(k(c.ja,y),k(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function El(c,y,w){var A=w instanceof Ve?Xt(w):new Ve(w);if(A.g!="")y&&(A.g=y+"."+A.g),kn(A,A.u);else{var U=a.location;A=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const W=new Ve(null);A&&An(W,A),y&&(W.g=y),U&&kn(W,U),w&&(W.h=w),A=W}return w=c.G,y=c.wa,w&&y&&re(A,w,y),re(A,"VER",c.ka),Di(c,A),A}function Pl(c,y,w){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Fe(new we({ab:w})):new Fe(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fo(){}t=Fo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Bo(){}Bo.prototype.g=function(c,y){return new zt(c,y)};function zt(c,y){It.call(this),this.g=new vl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!M(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new wr(this)}g(zt,It),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ce(this.g)},zt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=Eo(c),c=w);y.i.push(new Kf(y.Ya++,c)),y.I==3&&ci(y)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ce(this.g),delete this.g,zt.Z.N.call(this)};function Sl(c){Es.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Sl,Es);function Dc(){Po.call(this),this.status=1}g(Dc,Po);function wr(c){this.g=c}g(wr,Fo),wr.prototype.ra=function(){Ct(this.g,"a")},wr.prototype.qa=function(c){Ct(this.g,new Sl(c))},wr.prototype.pa=function(c){Ct(this.g,new Dc)},wr.prototype.oa=function(){Ct(this.g,"b")},Bo.prototype.createWebChannel=Bo.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,RS=function(){return new Bo},bS=function(){return So()},kS=ki,Tg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Io.NO_ERROR=0,Io.TIMEOUT=8,Io.HTTP_ERROR=6,Dh=Io,Tc.COMPLETE="complete",AS=Tc,_c.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",It.prototype.listen=It.prototype.J,$l=_c,Fe.prototype.listenOnce=Fe.prototype.K,Fe.prototype.getLastError=Fe.prototype.Ha,Fe.prototype.getLastErrorCode=Fe.prototype.ya,Fe.prototype.getStatus=Fe.prototype.ca,Fe.prototype.getResponseJson=Fe.prototype.La,Fe.prototype.getResponseText=Fe.prototype.la,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Fa,CS=Fe}).apply(typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{});const eT="@firebase/firestore",tT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new h_("@firebase/firestore");function Qo(){return ao.logLevel}function ie(t,...e){if(ao.logLevel<=be.DEBUG){const n=e.map(p_);ao.debug(`Firestore (${Ja}): ${t}`,...n)}}function rr(t,...e){if(ao.logLevel<=be.ERROR){const n=e.map(p_);ao.error(`Firestore (${Ja}): ${t}`,...n)}}function za(t,...e){if(ao.logLevel<=be.WARN){const n=e.map(p_);ao.warn(`Firestore (${Ja}): ${t}`,...n)}}function p_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,LS(t,i,n)}function LS(t,e,n){let i=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw rr(i),new Error(i)}function ze(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||LS(e,r,i)}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class uV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cV{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string",31837,{l:i}),new NS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new qt(e)}}class hV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new hV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=pV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Re(t,e){return t<e?-1:t>e?1:0}function xg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Gp(r)===Gp(o)?Re(r,o):Gp(r)?1:-1}return Re(t.length,e.length)}const mV=55296,gV=57343;function Gp(t){const e=t.charCodeAt(0);return e>=mV&&e<=gV}function Ua(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="__name__";class gi{constructor(e,n,i){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ye(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=gi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Re(e.length,n.length)}static compareSegments(e,n){const i=gi.isNumericId(e),r=gi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?gi.extractNumericId(e).compare(gi.extractNumericId(n)):xg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class Qe extends gi{construct(e,n,i){return new Qe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const yV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends gi{construct(e,n,i){return new Ot(e,n,i)}static isValidIdentifier(e){return yV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iT}static keyField(){return new Ot([iT])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Qe.fromString(e))}static fromName(e){return new pe(Qe.fromString(e).popFirst(5))}static empty(){return new pe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e,n){if(!n)throw new he(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _V(t,e,n,i){if(e===!0&&i===!0)throw new he(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rT(t){if(!pe.isDocumentKey(t))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sT(t){if(pe.isDocumentKey(t))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function OS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function g_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye(12329,{type:typeof t})}function Pa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=g_(t);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function sc(t,e){if(!OS(t))throw new he(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new he(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=-62135596800,aT=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*aT);return new Xe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<oT)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aT}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sc(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:wt("string",Xe._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Xe(0,0))}static max(){return new Ee(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=-1;function vV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ee.fromTimestamp(i===1e9?new Xe(n+1,0):new Xe(n,i));return new as(r,pe.empty(),e)}function wV(t){return new as(t.readTime,t.key,zu)}class as{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new as(Ee.min(),pe.empty(),zu)}static max(){return new as(Ee.max(),pe.empty(),zu)}}function TV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==xV)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(r=>r?Q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new Q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function PV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ef.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=-1;function Pf(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function SV(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="";function IV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lT(e)),e=CV(t.get(n),e);return lT(e)}function CV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case DS:n+="";break;default:n+=o}}return n}function lT(t){return t+DS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||Mt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}}class gh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Mt.RED,this.left=r??Mt.EMPTY,this.right=o??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Mt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Mt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cT(this.data.getIterator())}getIteratorFrom(e){return new cT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class cT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new ti([])}unionWith(e){let n=new St(Ot.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jS("Invalid base64 string: "+o):o}}(e);return new jt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const AV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=AV.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function us(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="server_timestamp",BS="__type__",zS="__previous_value__",US="__local_write_time__";function __(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[BS])==null?void 0:i.stringValue)===FS}function Sf(t){const e=t.mapValue.fields[zS];return __(e)?Sf(e):e}function Uu(t){const e=ls(t.mapValue.fields[US].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const kd="(default)";class Hu{constructor(e,n){this.projectId=e,this.database=n||kd}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="__type__",bV="__max__",yh={mapValue:{}},WS="__vector__",bd="value";function cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__(t)?4:LV(t)?9007199254740991:RV(t)?10:11:ye(28295,{value:t})}function Ci(t,e){if(t===e)return!0;const n=cs(t);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uu(t).isEqual(Uu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=ls(r.timestampValue),u=ls(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return us(r.bytesValue).isEqual(us(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ht(r.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(r.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ht(r.integerValue)===ht(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ht(r.doubleValue),u=ht(o.doubleValue);return a===u?Ad(a)===Ad(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ua(t.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(uT(a)!==uT(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Ci(a[h],u[h])))return!1;return!0}(t,e);default:return ye(52216,{left:t})}}function Wu(t,e){return(t.values||[]).find(n=>Ci(n,e))!==void 0}function Ha(t,e){if(t===e)return 0;const n=cs(t),i=cs(e);if(n!==i)return Re(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ht(o.integerValue||o.doubleValue),h=ht(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return hT(t.timestampValue,e.timestampValue);case 4:return hT(Uu(t),Uu(e));case 5:return xg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=us(o),h=us(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Re(u[f],h[f]);if(m!==0)return m}return Re(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Re(ht(o.latitude),ht(a.latitude));return u!==0?u:Re(ht(o.longitude),ht(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dT(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,T,k,b;const u=o.fields||{},h=a.fields||{},f=(v=u[bd])==null?void 0:v.arrayValue,m=(T=h[bd])==null?void 0:T.arrayValue,g=Re(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((b=m==null?void 0:m.values)==null?void 0:b.length)||0);return g!==0?g:dT(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===yh.mapValue&&a===yh.mapValue)return 0;if(o===yh.mapValue)return 1;if(a===yh.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const v=xg(h[g],m[g]);if(v!==0)return v;const T=Ha(u[h[g]],f[m[g]]);if(T!==0)return T}return Re(h.length,m.length)}(t.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function hT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=ls(t),i=ls(e),r=Re(n.seconds,i.seconds);return r!==0?r:Re(n.nanos,i.nanos)}function dT(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ha(n[r],i[r]);if(o)return o}return Re(n.length,i.length)}function Wa(t){return Eg(t)}function Eg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ls(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return us(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Eg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Eg(n.fields[a])}`;return r+"}"}(t.mapValue):ye(61005,{value:t})}function Vh(t){switch(cs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sf(t);return e?16+Vh(e):16;case 5:return 2*t.stringValue.length;case 6:return us(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Vh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return yo(i.fields,(o,a)=>{r+=o.length+Vh(a)}),r}(t.mapValue);default:throw ye(13486,{value:t})}}function Pg(t){return!!t&&"integerValue"in t}function v_(t){return!!t&&"arrayValue"in t}function fT(t){return!!t&&"nullValue"in t}function pT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jh(t){return!!t&&"mapValue"in t}function RV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[HS])==null?void 0:i.stringValue)===WS}function cu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=cu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(t.arrayValue.values[n]);return e}return{...t}}function LV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=Ot.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=cu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());jh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];jh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){yo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new jn(cu(this.value))}}function $S(t){const e=[];return yo(t.fields,(n,i)=>{const r=new Ot([n]);if(jh(i)){const o=$S(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Zt(e,0,Ee.min(),Ee.min(),Ee.min(),jn.empty(),0)}static newFoundDocument(e,n,i,r){return new Zt(e,1,n,Ee.min(),i,r,0)}static newNoDocument(e,n){return new Zt(e,2,n,Ee.min(),Ee.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,Ee.min(),Ee.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.position=e,this.inclusive=n}}function mT(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=pe.comparator(pe.fromName(a.referenceValue),n.key):i=Ha(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function gT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n="asc"){this.field=e,this.dir=n}}function NV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{}class xt extends qS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new OV(e,n,i):n==="array-contains"?new jV(e,i):n==="in"?new FV(e,i):n==="not-in"?new BV(e,i):n==="array-contains-any"?new zV(e,i):new xt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new DV(e,i):new VV(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ha(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(Ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends qS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ai(e,n)}matches(e){return GS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GS(t){return t.op==="and"}function ZS(t){return MV(t)&&GS(t)}function MV(t){for(const e of t.filters)if(e instanceof Ai)return!1;return!0}function Sg(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+Wa(t.value);if(ZS(t))return t.filters.map(e=>Sg(e)).join(",");{const e=t.filters.map(n=>Sg(n)).join(",");return`${t.op}(${e})`}}function KS(t,e){return t instanceof xt?function(i,r){return r instanceof xt&&i.op===r.op&&i.field.isEqual(r.field)&&Ci(i.value,r.value)}(t,e):t instanceof Ai?function(i,r){return r instanceof Ai&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&KS(a,r.filters[u]),!0):!1}(t,e):void ye(19439)}function QS(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`}(t):t instanceof Ai?function(n){return n.op.toString()+" {"+n.getFilters().map(QS).join(" ,")+"}"}(t):"Filter"}class OV extends xt{constructor(e,n,i){super(e,n,i),this.key=pe.fromName(i.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class DV extends xt{constructor(e,n){super(e,"in",n),this.keys=XS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VV extends xt{constructor(e,n){super(e,"not-in",n),this.keys=XS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>pe.fromName(i.referenceValue))}class jV extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return v_(n)&&Wu(n.arrayValue,this.value)}}class FV extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wu(this.value.arrayValue,n)}}class BV extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wu(this.value.arrayValue,n)}}class zV extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!v_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Wu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function yT(t,e=null,n=[],i=[],r=null,o=null,a=null){return new UV(t,e,n,i,r,o,a)}function w_(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Sg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Wa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Wa(i)).join(",")),e.Te=n}return e.Te}function T_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gT(t.startAt,e.startAt)&&gT(t.endAt,e.endAt)}function Ig(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HV(t,e,n,i,r,o,a,u){return new If(t,e,n,i,r,o,a,u)}function x_(t){return new If(t)}function _T(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WV(t){return t.collectionGroup!==null}function hu(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new St(Ot.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ld(o,i))}),n.has(Ot.keyField().canonicalString())||e.Ie.push(new Ld(Ot.keyField(),i))}return e.Ie}function Ti(t){const e=Pe(t);return e.Ee||(e.Ee=$V(e,hu(t))),e.Ee}function $V(t,e){if(t.limitType==="F")return yT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Ld(r.field,o)});const n=t.endAt?new Rd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Rd(t.startAt.position,t.startAt.inclusive):null;return yT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Cg(t,e,n){return new If(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cf(t,e){return T_(Ti(t),Ti(e))&&t.limitType===e.limitType}function YS(t){return`${w_(Ti(t))}|lt:${t.limitType}`}function Xo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>QS(r)).join(", ")}]`),Pf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Wa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Wa(r)).join(",")),`Target(${i})`}(Ti(t))}; limitType=${t.limitType})`}function Af(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):pe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of hu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=mT(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,hu(i),r)||i.endAt&&!function(a,u,h){const f=mT(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,hu(i),r))}(t,e)}function qV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JS(t){return(e,n)=>{let i=!1;for(const r of hu(t)){const o=GV(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function GV(t,e,n){const i=t.field.isKeyField()?pe.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Ha(h,f):ye(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return VS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=new st(pe.comparator);function sr(){return ZV}const eI=new st(pe.comparator);function ql(...t){let e=eI;for(const n of t)e=e.insert(n.key,n);return e}function tI(t){let e=eI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Gs(){return du()}function nI(){return du()}function du(){return new _o(t=>t.toString(),(t,e)=>t.isEqual(e))}const KV=new st(pe.comparator),QV=new St(pe.comparator);function Le(...t){let e=QV;for(const n of t)e=e.add(n);return e}const XV=new St(Re);function YV(){return XV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function iI(t){return{integerValue:""+t}}function JV(t,e){return SV(e)?iI(e):E_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function e4(t,e,n){return t instanceof Nd?function(r,o){const a={fields:{[BS]:{stringValue:FS},[US]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&__(o)&&(o=Sf(o)),o&&(a.fields[zS]=o),{mapValue:a}}(n,e):t instanceof $u?sI(t,e):t instanceof qu?oI(t,e):function(r,o){const a=rI(r,o),u=vT(a)+vT(r.Ae);return Pg(a)&&Pg(r.Ae)?iI(u):E_(r.serializer,u)}(t,e)}function t4(t,e,n){return t instanceof $u?sI(t,e):t instanceof qu?oI(t,e):n}function rI(t,e){return t instanceof Md?function(i){return Pg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Nd extends kf{}class $u extends kf{constructor(e){super(),this.elements=e}}function sI(t,e){const n=aI(e);for(const i of t.elements)n.some(r=>Ci(r,i))||n.push(i);return{arrayValue:{values:n}}}class qu extends kf{constructor(e){super(),this.elements=e}}function oI(t,e){let n=aI(e);for(const i of t.elements)n=n.filter(r=>!Ci(r,i));return{arrayValue:{values:n}}}class Md extends kf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function vT(t){return ht(t.integerValue||t.doubleValue)}function aI(t){return v_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function n4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof $u&&r instanceof $u||i instanceof qu&&r instanceof qu?Ua(i.elements,r.elements,Ci):i instanceof Md&&r instanceof Md?Ci(i.Ae,r.Ae):i instanceof Nd&&r instanceof Nd}(t.transform,e.transform)}class i4{constructor(e,n){this.version=e,this.transformResults=n}}class Xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bf{}function lI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cI(t.key,Xi.none()):new oc(t.key,t.data,Xi.none());{const n=t.data,i=jn.empty();let r=new St(Ot.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new vo(t.key,i,new ti(r.toArray()),Xi.none())}}function r4(t,e,n){t instanceof oc?function(r,o,a){const u=r.value.clone(),h=TT(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof vo?function(r,o,a){if(!Fh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=TT(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(uI(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function fu(t,e,n,i){return t instanceof oc?function(o,a,u,h){if(!Fh(o.precondition,a))return u;const f=o.value.clone(),m=xT(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof vo?function(o,a,u,h){if(!Fh(o.precondition,a))return u;const f=xT(o.fieldTransforms,h,a),m=a.data;return m.setAll(uI(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Fh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function s4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=rI(i.transform,r||null);o!=null&&(n===null&&(n=jn.empty()),n.set(i.field,o))}return n||null}function wT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ua(i,r,(o,a)=>n4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oc extends bf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class vo extends bf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function uI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function TT(t,e,n){const i=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,t4(a,u,n[r]))}return i}function xT(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,e4(o,a,e))}return i}class cI extends bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o4 extends bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&r4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=fu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=fu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=nI();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=lI(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Ee.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(n,i)=>wT(n,i))&&Ua(this.baseMutations,e.baseMutations,(n,i)=>wT(n,i))}}class P_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return KV}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new P_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Oe;function c4(t){switch(t){case J.OK:return ye(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return ye(15467,{code:t})}}function hI(t){if(t===void 0)return rr("GRPC error has no .code"),J.UNKNOWN;switch(t){case yt.OK:return J.OK;case yt.CANCELLED:return J.CANCELLED;case yt.UNKNOWN:return J.UNKNOWN;case yt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case yt.INTERNAL:return J.INTERNAL;case yt.UNAVAILABLE:return J.UNAVAILABLE;case yt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case yt.NOT_FOUND:return J.NOT_FOUND;case yt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case yt.ABORTED:return J.ABORTED;case yt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case yt.DATA_LOSS:return J.DATA_LOSS;default:return ye(39323,{code:t})}}(Oe=yt||(yt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new Jr([4294967295,4294967295],0);function ET(t){const e=h4().encode(t),n=new IS;return n.update(e),new Uint8Array(n.digest())}function PT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Jr([n,i],0),new Jr([r,o],0)]}class S_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(i<0)throw new Gl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Jr.fromNumber(i)));return r.compare(d4)===1&&(r=new Jr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ET(e),[i,r]=PT(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new S_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=ET(e),[i,r]=PT(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Rf(Ee.min(),r,new st(Re),sr(),Le())}}class ac{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ac(i,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class dI{constructor(e,n){this.targetId=e,this.Ce=n}}class fI{constructor(e,n,i=jt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class ST{constructor(){this.ve=0,this.Fe=IT(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),i=Le();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ye(38017,{changeType:o})}}),new ac(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=IT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class f4{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=_h(),this.He=_h(),this.Ye=new st(Re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Ig(o))if(i===0){const a=new pe(o.path);this.et(n,a,Zt.newNoDocument(a,Ee.min()))}else ze(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=us(i).toUint8Array()}catch(h){if(h instanceof jS)return za("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new S_(a,r,o)}catch(h){return za(h instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Ig(u.target)){const h=new pe(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,Zt.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Le();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Rf(e,n,this.Ye,this.je,i);return this.je=sr(),this.Je=_h(),this.He=_h(),this.Ye=new st(Re),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ST,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(Re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(Re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ST),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _h(){return new st(pe.comparator)}function IT(){return new st(pe.comparator)}const p4={asc:"ASCENDING",desc:"DESCENDING"},m4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g4={and:"AND",or:"OR"};class y4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ag(t,e){return t.useProto3Json||Pf(e)?e:{value:e}}function Od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _4(t,e){return Od(t,e.toTimestamp())}function xi(t){return ze(!!t,49232),Ee.fromTimestamp(function(n){const i=ls(n);return new Xe(i.seconds,i.nanos)}(t))}function I_(t,e){return kg(t,e).canonicalString()}function kg(t,e){const n=function(r){return new Qe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mI(t){const e=Qe.fromString(t);return ze(wI(e),10190,{key:e.toString()}),e}function bg(t,e){return I_(t.databaseId,e.path)}function Zp(t,e){const n=mI(e);if(n.get(1)!==t.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(yI(n))}function gI(t,e){return I_(t.databaseId,e)}function v4(t){const e=mI(t);return e.length===4?Qe.emptyPath():yI(e)}function Rg(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yI(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CT(t,e,n){return{name:bg(t,e),fields:n.value.mapValue.fields}}function w4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ye(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(ze(m===void 0||typeof m=="string",58123),jt.fromBase64String(m||"")):(ze(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),jt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?J.UNKNOWN:hI(f.code);return new he(m,f.message||"")}(a);n=new fI(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Zp(t,i.document.name),o=xi(i.document.updateTime),a=i.document.createTime?xi(i.document.createTime):Ee.min(),u=new jn({mapValue:{fields:i.document.fields}}),h=Zt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Bh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Zp(t,i.document),o=i.readTime?xi(i.readTime):Ee.min(),a=Zt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Bh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Zp(t,i.document),o=i.removedTargetIds||[];n=new Bh([],o,r,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new u4(r,o),u=i.targetId;n=new dI(u,a)}}return n}function T4(t,e){let n;if(e instanceof oc)n={update:CT(t,e.key,e.value)};else if(e instanceof cI)n={delete:bg(t,e.key)};else if(e instanceof vo)n={update:CT(t,e.key,e.data),updateMask:b4(e.fieldMask)};else{if(!(e instanceof o4))return ye(16599,{Vt:e.type});n={verify:bg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Nd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof $u)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof qu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Md)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw ye(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:_4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye(27497)}(t,e.precondition)),n}function x4(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?xi(r.updateTime):xi(o);return a.isEqual(Ee.min())&&(a=xi(o)),new i4(a,r.transformResults||[])}(n,e))):[]}function E4(t,e){return{documents:[gI(t,e.path)]}}function P4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gI(t,r);const o=function(f){if(f.length!==0)return vI(Ai.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(v){return{field:Yo(v.field),direction:C4(v.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Ag(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function S4(t){let e=v4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ze(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const v=_I(g);return v instanceof Ai&&ZS(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(k){return new Ld(Jo(k.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(g){let v;return v=typeof g=="object"?g.value:g,Pf(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(g){const v=!!g.before,T=g.values||[];return new Rd(T,v)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const v=!g.before,T=g.values||[];return new Rd(T,v)}(n.endAt)),HV(e,r,a,o,u,"F",h,f)}function I4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _I(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Jo(n.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Jo(n.unaryFilter.field);return xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Jo(n.unaryFilter.field);return xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Jo(n.unaryFilter.field);return xt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}}(t):t.fieldFilter!==void 0?function(n){return xt.create(Jo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ai.create(n.compositeFilter.filters.map(i=>_I(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ye(1026)}}(n.compositeFilter.op))}(t):ye(30097,{filter:t})}function C4(t){return p4[t]}function A4(t){return m4[t]}function k4(t){return g4[t]}function Yo(t){return{fieldPath:t.canonicalString()}}function Jo(t){return Ot.fromServerFormat(t.fieldPath)}function vI(t){return t instanceof xt?function(n){if(n.op==="=="){if(pT(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NAN"}};if(fT(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pT(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NAN"}};if(fT(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(n.field),op:A4(n.op),value:n.value}}}(t):t instanceof Ai?function(n){const i=n.getFilters().map(r=>vI(r));return i.length===1?i[0]:{compositeFilter:{op:k4(n.op),filters:i}}}(t):ye(54877,{filter:t})}function b4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,i,r,o=Ee.min(),a=Ee.min(),u=jt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.yt=e}}function L4(t){const e=S4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.Cn=new M4}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(as.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(as.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class M4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new St(Qe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new St(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TI=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(TI,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="LruGarbageCollector",O4=1048576;function bT([t,e],[n,i]){const r=Re(t,n);return r===0?Re(e,i):r}class D4{constructor(e){this.Ir=e,this.buffer=new St(bT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();bT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(kT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?ie(kT,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Vr(3e5)})}}class j4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Ef.ce);const i=new D4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(AT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),Qo()<=be.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function F4(t,e){return new j4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.changes=new _o(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&fu(i.mutation,r,ti.empty(),Xe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Le()){const r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=ql();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Le()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=sr();const a=du(),u=function(){return du()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof vo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),fu(m.mutation,f,m.mutation.getFieldMask(),Xe.now())):a.set(f.key,ti.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new z4(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=du();let r=new st((a,u)=>a-u),o=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||ti.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||Le()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=nI();m.forEach(v=>{if(!o.has(v)){const T=lI(n.get(v),i.get(v));T!==null&&g.set(v,T),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Q.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Q.resolve(Gs());let u=zu,h=o;return a.next(f=>Q.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?Q.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Le())).next(m=>({batchId:u,changes:tI(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(i=>{let r=ql();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=ql();return this.indexManager.getCollectionParents(e,o).next(u=>Q.forEach(u,h=>{const f=function(g,v){return new If(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Zt.newInvalidDocument(m)))});let u=ql();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&fu(m.mutation,f,ti.empty(),Xe.now()),Af(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xi(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:L4(r.bundledQuery),readTime:xi(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.overlays=new st(pe.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Gs();return Q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const r=Gs(),o=n.length+1,a=new pe(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new st((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Gs(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Gs(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return Q.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new l4(n,i));let o=this.qr.get(n);o===void 0&&(o=Le(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.Qr=new St(bt.$r),this.Ur=new St(bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new bt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new bt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new pe(new Qe([])),i=new bt(n,e),r=new bt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new Qe([])),i=new bt(n,e),r=new bt(n,e+1);let o=Le();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new bt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Re(e.Yr,n.Yr)}static Kr(e,n){return Re(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(bt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new a4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new bt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?y_:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new bt(n,0),r=new bt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new St(Re);return n.forEach(r=>{const o=new bt(r,0),a=new bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),Q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;pe.isDocumentKey(o)||(o=o.child(""));const a=new bt(new pe(o),0);let u=new St(Re);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),Q.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Q.forEach(n.mutations,r=>{const o=new bt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new bt(n,0),r=this.Zr.firstAfterOrEqual(i);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.ri=e,this.docs=function(){return new st(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let i=sr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Zt.newInvalidDocument(r))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=sr();const a=n.path,u=new pe(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||TV(wV(m),i)<=0||(r.has(m.key)||Af(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ye(9500)}ii(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Z4(this)}getSize(e){return Q.resolve(this.size)}}class Z4 extends B4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.persistence=e,this.si=new _o(n=>w_(n),T_),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new C_,this.targetCount=0,this.ai=$a.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Q.waitFor(o).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ef(0),this.li=!1,this.li=!0,this.hi=new $4,this.referenceDelegate=e(this),this.Pi=new K4(this),this.indexManager=new N4,this.remoteDocumentCache=function(r){return new G4(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new R4(n),this.Ii=new H4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new q4(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new Q4(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return Q.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class Q4 extends EV{constructor(e){super(),this.currentSequenceNumber=e}}class A_{constructor(e){this.persistence=e,this.Ri=new C_,this.Vi=null}static mi(e){return new A_(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,i=>{const r=pe.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Dd{constructor(e,n){this.persistence=e,this.pi=new _o(i=>IV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=F4(this,n)}static mi(e,n){return new Dd(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Q.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?Q.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Ee.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vh(e.data.value)),n}br(e,n,i){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Q.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Le(),r=Le();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new k_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return WO()?8:PV(Qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new X4;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(Qo()<=be.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Qo()<=be.DEBUG&&ie("QueryEngine","Query:",Xo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Qo()<=be.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(n))):Q.resolve())}ys(e,n){if(_T(n))return Q.resolve(null);let i=Ti(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Cg(n,null,"F"),i=Ti(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Le(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Cg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return _T(n)||r.isEqual(Ee.min())?Q.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?Q.resolve(null):(Qo()<=be.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xo(n)),this.vs(e,a,n,vV(r,zu)).next(u=>u))})}Ds(e,n){let i=new St(JS(e));return n.forEach((r,o)=>{Af(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return Qo()<=be.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Xo(n)),this.ps.getDocumentsMatchingQuery(e,n,as.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="LocalStore",J4=3e8;class e3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new st(Re),this.xs=new _o(o=>w_(o),T_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function t3(t,e,n,i){return new e3(t,e,n,i)}async function EI(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Le();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function n3(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,v=g.keys();let T=Q.resolve();return v.forEach(k=>{T=T.next(()=>m.getEntry(h,k)).next(b=>{const F=f.docVersions.get(k);ze(F!==null,48541),b.version.compareTo(F)<0&&(g.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),m.addEntry(b)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Le();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function PI(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function i3(t,e){const n=Pe(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const v=r.get(g);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(jt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(b,F,C){return b.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=J4?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(v,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let h=sr(),f=Le();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(r3(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Ee.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return Q.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function r3(t,e,n){let i=Le(),r=Le();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=sr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Ee.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):ie(b_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function s3(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=y_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function o3(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,Q.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Fr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Lg(t,e,n){const i=Pe(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!tl(a))throw a;ie(b_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function RT(t,e,n){const i=Pe(t);let r=Ee.min(),o=Le();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Pe(h),v=g.xs.get(m);return v!==void 0?Q.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,m)}(i,a,Ti(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Ee.min(),n?o:Le())).next(u=>(a3(i,qV(e),u),{documents:u,Qs:o})))}function a3(t,e,n){let i=t.Os.get(e)||Ee.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class LT{constructor(){this.activeTargetIds=YV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l3{constructor(){this.Mo=new LT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new LT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="ConnectivityMonitor";class MT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(NT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(NT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh=null;function Ng(){return vh===null?vh=function(){return 268435456+Math.round(2147483648*Math.random())}():vh++,"0x"+vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="RestConnection",c3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===kd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Ng(),u=this.zo(e,n.toUriEncodedString());ie(Kp,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=Xa(f);return this.Jo(e,u,h,i,m).then(g=>(ie(Kp,`Received RPC '${e}' ${a}: `,g),g),g=>{throw za(Kp,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=c3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class f3 extends h3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Ng();return new Promise((u,h)=>{const f=new CS;f.setWithCredentials(!0),f.listenOnce(AS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Dh.NO_ERROR:const g=f.getResponseJson();ie(Wt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Dh.TIMEOUT:ie(Wt,`RPC '${e}' ${a} timed out`),h(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const v=f.getStatus();if(ie(Wt,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const b=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(E)>=0?E:J.UNKNOWN}(k.status);h(new he(b,k.message))}else h(new he(J.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(J.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ie(Wt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);ie(Wt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Ng(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=RS(),u=bS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ie(Wt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let v=!1,T=!1;const k=new d3({Yo:F=>{T?ie(Wt,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(v||(ie(Wt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),v=!0),ie(Wt,`RPC '${e}' stream ${r} sending:`,F),g.send(F))},Zo:()=>g.close()}),b=(F,C,E)=>{F.listen(C,S=>{try{E(S)}catch(B){setTimeout(()=>{throw B},0)}})};return b(g,$l.EventType.OPEN,()=>{T||(ie(Wt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),b(g,$l.EventType.CLOSE,()=>{T||(T=!0,ie(Wt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(g))}),b(g,$l.EventType.ERROR,F=>{T||(T=!0,za(Wt,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),k.a_(new he(J.UNAVAILABLE,"The operation could not be completed")))}),b(g,$l.EventType.MESSAGE,F=>{var C;if(!T){const E=F.data[0];ze(!!E,16349);const S=E,B=(S==null?void 0:S.error)||((C=S[0])==null?void 0:C.error);if(B){ie(Wt,`RPC '${e}' stream ${r} received error:`,B);const q=B.status;let K=function(N){const O=yt[N];if(O!==void 0)return hI(O)}(q),R=B.message;K===void 0&&(K=J.INTERNAL,R="Unknown error status: "+q+" with message "+B.message),T=!0,k.a_(new he(K,R)),g.close()}else ie(Wt,`RPC '${e}' stream ${r} received:`,E),k.u_(E)}}),b(u,kS.STAT_EVENT,F=>{F.stat===Tg.PROXY?ie(Wt,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Tg.NOPROXY&&ie(Wt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Qp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){return new y4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="PersistentStream";class II{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new he(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(OT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(OT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p3 extends II{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=w4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ee.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Ee.min():a.readTime?xi(a.readTime):Ee.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Rg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Ig(h)?{documents:E4(o,h)}:{query:P4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=pI(o,a.resumeToken);const f=Ag(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ee.min())>0){u.readTime=Od(o,a.snapshotVersion.toTimestamp());const f=Ag(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=I4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Rg(this.serializer),n.removeTarget=e,this.q_(n)}}class m3 extends II{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=x4(e.writeResults,e.commitTime),i=xi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Rg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>T4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{}class y3 extends g3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,kg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(J.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,kg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(J.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class _3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class v3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{wo(this)&&(ie(lo,"Restarting streams for network reachability change."),await async function(h){const f=Pe(h);f.Ea.add(4),await lc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Nf(f)}(this))})}),this.Ra=new _3(i,r)}}async function Nf(t){if(wo(t))for(const e of t.da)await e(!0)}async function lc(t){for(const e of t.da)await e(!1)}function CI(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),M_(n)?N_(n):nl(n).O_()&&L_(n,e))}function R_(t,e){const n=Pe(t),i=nl(n);n.Ia.delete(e),i.O_()&&AI(n,e),n.Ia.size===0&&(i.O_()?i.L_():wo(n)&&n.Ra.set("Unknown"))}function L_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).Y_(e)}function AI(t,e){t.Va.Ue(e),nl(t).Z_(e)}function N_(t){t.Va=new f4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.Ra.ua()}function M_(t){return wo(t)&&!nl(t).x_()&&t.Ia.size>0}function wo(t){return Pe(t).Ea.size===0}function kI(t){t.Va=void 0}async function w3(t){t.Ra.set("Online")}async function T3(t){t.Ia.forEach((e,n)=>{L_(t,e)})}async function x3(t,e){kI(t),M_(t)?(t.Ra.ha(e),N_(t)):t.Ra.set("Unknown")}async function E3(t,e,n){if(t.Ra.set("Online"),e instanceof fI&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){ie(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vd(t,i)}else if(e instanceof Bh?t.Va.Ze(e):e instanceof dI?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ee.min()))try{const i=await PI(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(jt.EMPTY_BYTE_STRING,m.snapshotVersion)),AI(o,h);const g=new Fr(m.target,h,f,m.sequenceNumber);L_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ie(lo,"Failed to raise snapshot:",i),await Vd(t,i)}}async function Vd(t,e,n){if(!tl(e))throw e;t.Ea.add(1),await lc(t),t.Ra.set("Offline"),n||(n=()=>PI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(lo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nf(t)})}function bI(t,e){return e().catch(n=>Vd(t,n,e))}async function Mf(t){const e=Pe(t),n=hs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:y_;for(;P3(e);)try{const r=await s3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,S3(e,r)}catch(r){await Vd(e,r)}RI(e)&&LI(e)}function P3(t){return wo(t)&&t.Ta.length<10}function S3(t,e){t.Ta.push(e);const n=hs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function RI(t){return wo(t)&&!hs(t).x_()&&t.Ta.length>0}function LI(t){hs(t).start()}async function I3(t){hs(t).ra()}async function C3(t){const e=hs(t);for(const n of t.Ta)e.ea(n.mutations)}async function A3(t,e,n){const i=t.Ta.shift(),r=P_.from(i,e,n);await bI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Mf(t)}async function k3(t,e){e&&hs(t).X_&&await async function(i,r){if(function(a){return c4(a)&&a!==J.ABORTED}(r.code)){const o=i.Ta.shift();hs(i).B_(),await bI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Mf(i)}}(t,e),RI(t)&&LI(t)}async function DT(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),ie(lo,"RemoteStore received new credentials");const i=wo(n);n.Ea.add(3),await lc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nf(n)}async function b3(t,e){const n=Pe(t);e?(n.Ea.delete(2),await Nf(n)):e||(n.Ea.add(2),await lc(n),n.Ra.set("Unknown"))}function nl(t){return t.ma||(t.ma=function(n,i,r){const o=Pe(n);return o.sa(),new p3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:w3.bind(null,t),t_:T3.bind(null,t),r_:x3.bind(null,t),H_:E3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),M_(t)?N_(t):t.Ra.set("Unknown")):(await t.ma.stop(),kI(t))})),t.ma}function hs(t){return t.fa||(t.fa=function(n,i,r){const o=Pe(n);return o.sa(),new m3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:I3.bind(null,t),r_:k3.bind(null,t),ta:C3.bind(null,t),na:A3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Mf(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(lo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new O_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D_(t,e){if(rr("AsyncQueue",`${e}: ${t}`),tl(t))return new he(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{static emptySet(e){return new Sa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||pe.comparator(n.key,i.key):(n,i)=>pe.comparator(n.key,i.key),this.keyedMap=ql(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Sa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.ga=new st(pe.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class qa{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new qa(e,n,Sa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class L3{constructor(){this.queries=jT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Pe(n),o=r.queries;r.queries=jT(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new he(J.ABORTED,"Firestore shutting down"))}}function jT(){return new _o(t=>YS(t),Cf)}async function N3(t,e){const n=Pe(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new R3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=D_(a,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&V_(n)}async function M3(t,e){const n=Pe(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function O3(t,e){const n=Pe(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&V_(n)}function D3(t,e,n){const i=Pe(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function V_(t){t.Ca.forEach(e=>{e.next()})}var Mg,FT;(FT=Mg||(Mg={})).Ma="default",FT.Cache="cache";class V3{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.key=e}}class MI{constructor(e){this.key=e}}class j3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=JS(e),this.tu=new Sa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new VT,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const v=r.get(m),T=Af(this.query,g)?g:null,k=!!v&&this.mutatedKeys.has(v.key),b=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let F=!1;v&&T?v.data.isEqual(T.data)?k!==b&&(i.track({type:3,doc:T}),F=!0):this.su(v,T)||(i.track({type:2,doc:T}),F=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),F=!0):v&&!T&&(i.track({type:1,doc:v}),F=!0,(h||f)&&(u=!0)),F&&(T?(a=a.add(T),o=b?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,k){const b=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:F})}};return b(T)-b(k)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new qa(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new MI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new NI(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const j_="SyncEngine";class F3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class B3{constructor(e){this.key=e,this.hu=!1}}class z3{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new _o(u=>YS(u),Cf),this.Iu=new Map,this.Eu=new Set,this.du=new st(pe.comparator),this.Au=new Map,this.Ru=new C_,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U3(t,e,n=!0){const i=BI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await OI(i,e,n,!0),r}async function H3(t,e){const n=BI(t);await OI(n,e,!0,!1)}async function OI(t,e,n,i){const r=await o3(t.localStore,Ti(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await W3(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&CI(t.remoteStore,r),u}async function W3(t,e,n,i,r){t.pu=(g,v,T)=>async function(b,F,C,E){let S=F.view.ru(C);S.Cs&&(S=await RT(b.localStore,F.query,!1).then(({documents:R})=>F.view.ru(R,S)));const B=E&&E.targetChanges.get(F.targetId),q=E&&E.targetMismatches.get(F.targetId)!=null,K=F.view.applyChanges(S,b.isPrimaryClient,B,q);return zT(b,F.targetId,K.au),K.snapshot}(t,g,v,T);const o=await RT(t.localStore,e,!0),a=new j3(e,o.Qs),u=a.ru(o.documents),h=ac.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);zT(t,n,f.au);const m=new F3(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function $3(t,e,n){const i=Pe(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Cf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Lg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&R_(i.remoteStore,r.targetId),Og(i,r.targetId)}).catch(el)):(Og(i,r.targetId),await Lg(i.localStore,r.targetId,!0))}async function q3(t,e){const n=Pe(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),R_(n.remoteStore,i.targetId))}async function G3(t,e,n){const i=e5(t);try{const r=await function(a,u){const h=Pe(a),f=Xe.now(),m=u.reduce((T,k)=>T.add(k.key),Le());let g,v;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=sr(),b=Le();return h.Ns.getEntries(T,m).next(F=>{k=F,k.forEach((C,E)=>{E.isValidDocument()||(b=b.add(C))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,k)).next(F=>{g=F;const C=[];for(const E of u){const S=s4(E,g.get(E.key).overlayedDocument);S!=null&&C.push(new vo(E.key,S,$S(S.value.mapValue),Xi.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,C,u)}).next(F=>{v=F;const C=F.applyToLocalDocumentSet(g,b);return h.documentOverlayCache.saveOverlays(T,F.batchId,C)})}).then(()=>({batchId:v.batchId,changes:tI(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new st(Re)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await uc(i,r.changes),await Mf(i.remoteStore)}catch(r){const o=D_(r,"Failed to persist write");n.reject(o)}}async function DI(t,e){const n=Pe(t);try{const i=await i3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ze(a.hu,14607):r.removedDocuments.size>0&&(ze(a.hu,42227),a.hu=!1))}),await uc(n,i,e)}catch(i){await el(i)}}function BT(t,e,n){const i=Pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Pe(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const v of g.Sa)v.va(u)&&(f=!0)}),f&&V_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Z3(t,e,n){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new st(pe.comparator);a=a.insert(o,Zt.newNoDocument(o,Ee.min()));const u=Le().add(o),h=new Rf(Ee.min(),new Map,new st(Re),a,u);await DI(i,h),i.du=i.du.remove(o),i.Au.delete(e),F_(i)}else await Lg(i.localStore,e,!1).then(()=>Og(i,e,n)).catch(el)}async function K3(t,e){const n=Pe(t),i=e.batch.batchId;try{const r=await n3(n.localStore,e);jI(n,i,null),VI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await uc(n,r)}catch(r){await el(r)}}async function Q3(t,e,n){const i=Pe(t);try{const r=await function(a,u){const h=Pe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(ze(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);jI(i,e,n),VI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await uc(i,r)}catch(r){await el(r)}}function VI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function jI(t,e,n){const i=Pe(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Og(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||FI(t,i)})}function FI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(R_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),F_(t))}function zT(t,e,n){for(const i of n)i instanceof NI?(t.Ru.addReference(i.key,e),X3(t,i)):i instanceof MI?(ie(j_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||FI(t,i.key)):ye(19791,{wu:i})}function X3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ie(j_,"New document in limbo: "+n),t.Eu.add(i),F_(t))}function F_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new pe(Qe.fromString(e)),i=t.fu.next();t.Au.set(i,new B3(n)),t.du=t.du.insert(n,i),CI(t.remoteStore,new Fr(Ti(x_(n.path)),i,"TargetPurposeLimboResolution",Ef.ce))}}async function uc(t,e,n){const i=Pe(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=k_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Pe(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Q.forEach(f,v=>Q.forEach(v.Es,T=>m.persistence.referenceDelegate.addReference(g,v.targetId,T)).next(()=>Q.forEach(v.ds,T=>m.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))}catch(g){if(!tl(g))throw g;ie(b_,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const T=m.Ms.get(v),k=T.snapshotVersion,b=T.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(v,b)}}}(i.localStore,o))}async function Y3(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){ie(j_,"User change. New user:",e.toKey());const i=await EI(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new he(J.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await uc(n,i.Ls)}}function J3(t,e){const n=Pe(t),i=n.Au.get(e);if(i&&i.hu)return Le().add(i.key);{let r=Le();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function BI(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z3.bind(null,e),e.Pu.H_=O3.bind(null,e.eventManager),e.Pu.yu=D3.bind(null,e.eventManager),e}function e5(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q3.bind(null,e),e}class jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return t3(this.persistence,new Y4,e.initialUser,this.serializer)}Cu(e){return new xI(A_.mi,this.serializer)}Du(e){return new l3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jd.provider={build:()=>new jd};class t5 extends jd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Dd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new V4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new xI(i=>Dd.mi(i,n),this.serializer)}}class Dg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>BT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y3.bind(null,this.syncEngine),await b3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new L3}()}createDatastore(e){const n=Lf(e.databaseInfo.databaseId),i=function(o){return new f3(o)}(e.databaseInfo);return function(o,a,u,h){return new y3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new v3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>BT(this.syncEngine,n,0),function(){return MT.v()?new MT:new u3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new z3(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Pe(r);ie(lo,"RemoteStore shutting down."),o.Ea.add(5),await lc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Dg.provider={build:()=>new Dg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class i5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=qt.UNAUTHENTICATED,this.clientId=m_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ie(ds,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ie(ds,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=D_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Xp(t,e){t.asyncQueue.verifyOperationInProgress(),ie(ds,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await EI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function UT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await r5(t);ie(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>DT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>DT(e.remoteStore,r)),t._onlineComponents=e}async function r5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(ds,"Using user provided OfflineComponentProvider");try{await Xp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===J.FAILED_PRECONDITION||r.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;za("Error using user provided cache. Falling back to memory cache: "+n),await Xp(t,new jd)}}else ie(ds,"Using default OfflineComponentProvider"),await Xp(t,new t5(void 0));return t._offlineComponents}async function zI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(ds,"Using user provided OnlineComponentProvider"),await UT(t,t._uninitializedComponentsProvider._online)):(ie(ds,"Using default OnlineComponentProvider"),await UT(t,new Dg))),t._onlineComponents}function s5(t){return zI(t).then(e=>e.syncEngine)}async function HT(t){const e=await zI(t),n=e.eventManager;return n.onListen=U3.bind(null,e.syncEngine),n.onUnlisten=$3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=H3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=q3.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firestore.googleapis.com",$T=!0;class qT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HI,this.ssl=$T}else this.host=e.host,this.ssl=e.ssl??$T;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O4)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_V("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new lV;switch(i.type){case"firstParty":return new dV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=WT.get(n);i&&(ie("ComponentProvider","Removing Datastore"),WT.delete(n),i.terminate())}(this),Promise.resolve()}}function o5(t,e,n,i={}){var f;t=Pa(t,Of);const r=Xa(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(_S(`https://${u}`),vS("Firestore",!0)),o.host!==HI&&o.host!==u&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!so(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=qt.MOCK_USER;else{m=OO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new qt(v)}t._authCredentials=new uV(new NS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Df(this.firestore,e,this._query)}}class Pt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(sc(n,Pt._jsonSchema))return new Pt(e,i||null,new pe(Qe.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:wt("string",Pt._jsonSchemaVersion),referencePath:wt("string")};class es extends Df{constructor(e,n,i){super(e,n,x_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new pe(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function Yp(t,e,...n){if(t=Pn(t),MS("collection","path",e),t instanceof Of){const i=Qe.fromString(e,...n);return sT(i),new es(t,null,i)}{if(!(t instanceof Pt||t instanceof es))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Qe.fromString(e,...n));return sT(i),new es(t.firestore,null,i)}}function pu(t,e,...n){if(t=Pn(t),arguments.length===1&&(e=m_.newId()),MS("doc","path",e),t instanceof Of){const i=Qe.fromString(e,...n);return rT(i),new Pt(t,null,new pe(i))}{if(!(t instanceof Pt||t instanceof es))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Qe.fromString(e,...n));return rT(i),new Pt(t.firestore,t instanceof es?t.converter:null,new pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="AsyncQueue";class ZT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SI(this,"async_queue_retry"),this._c=()=>{const i=Qp();i&&ie(GT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Qp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;ie(GT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",KT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=O_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&ye(47125,{Pc:KT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function KT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Fd extends Of{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new ZT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ZT(e),this._firestoreClient=void 0,await e}}}function a5(t,e){const n=typeof t=="object"?t:ES(),i=typeof t=="string"?t:kd,r=f_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=NO("firestore");o&&o5(r,...o)}return r}function WI(t){if(t._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||l5(t),t._firestoreClient}function l5(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new kV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,UI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new i5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(jt.fromBase64String(e))}catch(n){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sc(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:wt("string",Fn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ei._jsonSchemaVersion}}static fromJSON(e){if(sc(e,Ei._jsonSchema))return new Ei(e.latitude,e.longitude)}}Ei._jsonSchemaVersion="firestore/geoPoint/1.0",Ei._jsonSchema={type:wt("string",Ei._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sc(e,Pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pi(e.vectorValues);throw new he(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:wt("string",Pi._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=/^__.*__$/;class c5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new vo(e,this.data,this.fieldMask,n,this.fieldTransforms):new oc(e,this.data,n,this.fieldTransforms)}}function qI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:t})}}class z_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new z_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qI(this.Ac)&&u5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class h5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Lf(e)}Cc(e,n,i,r=!1){return new z_({Ac:e,methodName:n,Dc:i,path:Ot.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function d5(t){const e=t._freezeSettings(),n=Lf(t._databaseId);return new h5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function f5(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);QI("Data must be an object, but it was:",a,i);const u=ZI(i,a);let h,f;if(o.merge)h=new ti(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const v=p5(e,g,n);if(!a.contains(v))throw new he(J.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);g5(m,v)||m.push(v)}h=new ti(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new c5(new jn(u),h,f)}function GI(t,e){if(KI(t=Pn(t)))return QI("Unsupported field value:",e,t),ZI(t,e);if(t instanceof $I)return function(i,r){if(!qI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=GI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return JV(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Xe.fromDate(i);return{timestampValue:Od(r.serializer,o)}}if(i instanceof Xe){const o=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Od(r.serializer,o)}}if(i instanceof Ei)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:pI(r.serializer,i._byteString)};if(i instanceof Pt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:I_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Pi)return function(a,u){return{mapValue:{fields:{[HS]:{stringValue:WS},[bd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return E_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${g_(i)}`)}(t,e)}function ZI(t,e){const n={};return VS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(t,(i,r)=>{const o=GI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function KI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Ei||t instanceof Fn||t instanceof Pt||t instanceof $I||t instanceof Pi)}function QI(t,e,n){if(!KI(n)||!OS(n)){const i=g_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function p5(t,e,n){if((e=Pn(e))instanceof B_)return e._internalPath;if(typeof e=="string")return XI(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const m5=new RegExp("[~\\*/\\[\\]]");function XI(t,e,n){if(e.search(m5)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new B_(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new he(J.INVALID_ARGUMENT,u+t+h)}function g5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y5 extends YI{data(){return super.data()}}function JI(t,e){return typeof e=="string"?XI(t,e):e instanceof B_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class v5{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return yo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[bd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>ht(a.doubleValue));return new Pi(n)}convertGeoPoint(e){return new Ei(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Sf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const n=ls(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Qe.fromString(e);ze(wI(i),9688,{name:e});const r=new Hu(i.get(1),i.get(3)),o=new pe(i.popFirst(5));return r.isEqual(n)||rr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ys extends YI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(JI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ys._jsonSchema={type:wt("string",Ys._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class zh extends Ys{data(e={}){return super.data(e)}}class Ia{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Zl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new zh(this._firestore,this._userDataWriter,i.key,i,new Zl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new zh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Zl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new zh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Zl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:T5(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ia._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=m_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function T5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:t})}}Ia._jsonSchemaVersion="firestore/querySnapshot/1.0",Ia._jsonSchema={type:wt("string",Ia._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class eC extends v5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function mu(t,e,n){t=Pa(t,Pt);const i=Pa(t.firestore,Fd),r=w5(t.converter,e,n);return x5(i,[f5(d5(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Xi.none())])}function Jp(t,...e){var h,f,m;t=Pn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||QT(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(QT(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof Pt)a=Pa(t.firestore,Fd),u=x_(t._key.path),o={next:g=>{e[i]&&e[i](E5(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=Pa(t,Df);a=Pa(g.firestore,Fd),u=g._query;const v=new eC(a);o={next:T=>{e[i]&&e[i](new Ia(a,v,g,T))},error:e[i+1],complete:e[i+2]},_5(t._query)}return function(v,T,k,b){const F=new n5(b),C=new V3(T,F,k);return v.asyncQueue.enqueueAndForget(async()=>N3(await HT(v),C)),()=>{F.Nu(),v.asyncQueue.enqueueAndForget(async()=>M3(await HT(v),C))}}(WI(a),u,r,o)}function x5(t,e){return function(i,r){const o=new Xs;return i.asyncQueue.enqueueAndForget(async()=>G3(await s5(i),r,o)),o.promise}(WI(t),e)}function E5(t,e,n){const i=n.docs.get(e._key),r=new eC(t);return new Ys(t,r,e._key,i,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Ja=r})(Ya),Ba(new oo("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Fd(new cV(i.getProvider("auth-internal")),new fV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Yr(eT,tT,e),Yr(eT,tT,"esm2020")})();function tC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P5=tC,nC=new ic("auth","Firebase",tC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new h_("@firebase/auth");function S5(t,...e){zd.logLevel<=be.WARN&&zd.warn(`Auth (${Ya}): ${t}`,...e)}function Uh(t,...e){zd.logLevel<=be.ERROR&&zd.error(`Auth (${Ya}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,...e){throw U_(t,...e)}function Si(t,...e){return U_(t,...e)}function iC(t,e,n){const i={...P5(),[e]:n};return new ic("auth","Firebase",i).create(e,{appName:t.name})}function ts(t){return iC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return nC.create(t,...e)}function ve(t,e,...n){if(!t)throw U_(e,...n)}function qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uh(e),new Error(e)}function ar(t,e){t||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function I5(){return XT()==="http:"||XT()==="https:"}function XT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I5()||zO()||"connection"in navigator)?navigator.onLine:!0}function A5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=jO()||UO()}get(){return C5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R5=new cc(3e4,6e4);function Vf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function il(t,e,n,i,r={}){return sC(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=rc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return BO()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Xa(t.emulatorConfig.host)&&(f.credentials="include"),rC.fetch()(await aC(t,t.config.apiHost,n,u),f)})}async function sC(t,e,n){t._canInitEmulator=!1;const i={...k5,...e};try{const r=new L5(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw wh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw wh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw wh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw wh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw iC(t,m,f);or(t,m)}}catch(r){if(r instanceof cr)throw r;or(t,"network-request-failed",{message:String(r)})}}async function oC(t,e,n,i,r={}){const o=await il(t,e,n,i,r);return"mfaPendingCredential"in o&&or(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function aC(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?H_(t.config,r):`${t.config.apiScheme}://${r}`;return b5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class L5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Si(this.auth,"network-request-failed")),R5.get())})}}function wh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Si(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e){return il(t,"POST","/v1/accounts:delete",e)}async function Ud(t,e){return il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M5(t,e=!1){const n=Pn(t),i=await n.getIdToken(e),r=W_(i);ve(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:gu(em(r.auth_time)),issuedAtTime:gu(em(r.iat)),expirationTime:gu(em(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function em(t){return Number(t)*1e3}function W_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{const r=pS(n);return r?JSON.parse(r):(Uh("Failed to decode base64 JWT payload"),null)}catch(r){return Uh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function YT(t){const e=W_(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof cr&&O5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function O5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gu(this.lastLoginAt),this.creationTime=gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Gu(t,Ud(e,{idToken:n}));ve(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?lC(r.providerUserInfo):[],a=j5(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new jg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function V5(t){const e=Pn(t);await Hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function j5(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function lC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5(t,e){const n=await sC(t,{},async()=>{const i=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await aC(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&Xa(t.emulatorConfig.host)&&(h.credentials="include"),rC.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function B5(t,e){return il(t,"POST","/v2/accounts:revokeToken",Vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=YT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await F5(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Ca;return i&&(ve(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ve(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ve(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ni{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new D5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new jg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Gu(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return M5(this,e)}reload(){return V5(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Hd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(ts(this.auth));const e=await this.getIdToken();return await Gu(this,N5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:T,providerData:k,stsTokenManager:b}=n;ve(g&&b,e,"internal-error");const F=Ca.fromJSON(this.name,b);ve(typeof g=="string",e,"internal-error"),Er(i,e.name),Er(r,e.name),ve(typeof v=="boolean",e,"internal-error"),ve(typeof T=="boolean",e,"internal-error"),Er(o,e.name),Er(a,e.name),Er(u,e.name),Er(h,e.name),Er(f,e.name),Er(m,e.name);const C=new ni({uid:g,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:F,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(C.providerData=k.map(E=>({...E}))),h&&(C._redirectEventId=h),C}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ca;r.updateFromServerResponse(n);const o=new ni({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Hd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ve(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?lC(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Ca;u.updateFromIdToken(i);const h=new ni({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new jg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=new Map;function Gi(t){ar(t instanceof Function,"Expected a class definition");let e=JT.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uC.type="NONE";const e1=uC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t,e,n){return`firebase:${t}:${e}:${n}`}class Aa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Hh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Hh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ud(this.auth,{idToken:e}).catch(()=>{});return n?ni._fromGetAccountInfoResponse(this.auth,n,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Aa(Gi(e1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Gi(e1);const a=Hh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const v=await Ud(e,{idToken:m}).catch(()=>{});if(!v)break;g=await ni._fromGetAccountInfoResponse(e,v,m)}else g=ni._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Aa(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Aa(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mC(e))return"Blackberry";if(gC(e))return"Webos";if(hC(e))return"Safari";if((e.includes("chrome/")||dC(e))&&!e.includes("edge/"))return"Chrome";if(pC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function cC(t=Qt()){return/firefox\//i.test(t)}function hC(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dC(t=Qt()){return/crios\//i.test(t)}function fC(t=Qt()){return/iemobile/i.test(t)}function pC(t=Qt()){return/android/i.test(t)}function mC(t=Qt()){return/blackberry/i.test(t)}function gC(t=Qt()){return/webos/i.test(t)}function $_(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function z5(t=Qt()){var e;return $_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function U5(){return HO()&&document.documentMode===10}function yC(t=Qt()){return $_(t)||pC(t)||gC(t)||mC(t)||/windows phone/i.test(t)||fC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e=[]){let n;switch(t){case"Browser":n=t1(Qt());break;case"Worker":n=`${t1(Qt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ya}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e={}){return il(t,"GET","/v2/passwordPolicy",Vf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=6;class q5{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n1(this),this.idTokenSubscription=new n1(this),this.beforeStateQueue=new H5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Aa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ud(this,{idToken:e}),i=await ni._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ei(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(ts(this));const n=e?Pn(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W5(this),n=new q5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ic("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await B5(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gi(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Aa.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_C(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&S5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function jf(t){return Pn(t)}class n1{constructor(e){this.auth=e,this.observer=null,this.addObserver=XO(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z5(t){q_=t}function K5(t){return q_.loadJS(t)}function Q5(){return q_.gapiScript}function X5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(t,e){const n=f_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(so(o,e??{}))return r;or(r,"already-initialized")}return n.initialize({options:e})}function J5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ej(t,e,n){const i=jf(t);ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=vC(e),{host:a,port:u}=tj(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ve(so(f,i.config.emulator)&&so(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Xa(a)?(_S(`${o}//${a}${h}`),vS("Auth",!0)):nj()}function vC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tj(t){const e=vC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:i1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:i1(a)}}}function i1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t,e){return oC(t,"POST","/v1/accounts:signInWithIdp",Vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="http://localhost";class uo extends wC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new uo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ka(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ka(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ka(e,n)}buildRequest(){const e={requestUri:ij,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends TC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends hc{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uo._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Lr.credential(n,i)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends hc{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends hc{constructor(){super("twitter.com")}static credential(e,n){return uo._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Mr.credential(n,i)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e){return oC(t,"POST","/v1/accounts:signUp",Vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await ni._fromIdTokenResponse(e,i,r),a=r1(i);return new fs({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=r1(i);return new fs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function r1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(t){var r;if(ei(t.app))return Promise.reject(ts(t));const e=jf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new fs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await rj(e,{returnSecureToken:!0}),i=await fs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends cr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Wd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Wd(e,n,i,r)}}function xC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Wd._fromErrorAndOperation(t,o,e,i):o})}async function oj(t,e,n=!1){const i=await Gu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(t,e,n=!1){const{auth:i}=t;if(ei(i.app))return Promise.reject(ts(i));const r="reauthenticate";try{const o=await Gu(t,xC(i,r,e,t),n);ve(o.idToken,i,"internal-error");const a=W_(o.idToken);ve(a,i,"internal-error");const{sub:u}=a;return ve(t.uid===u,i,"user-mismatch"),fs._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&or(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e,n=!1){if(ei(t.app))return Promise.reject(ts(t));const i="signIn",r=await xC(t,i,e),o=await fs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function uj(t,e,n,i){return Pn(t).onIdTokenChanged(e,n,i)}function cj(t,e,n){return Pn(t).beforeAuthStateChanged(e,n)}function hj(t,e,n,i){return Pn(t).onAuthStateChanged(e,n,i)}const $d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($d,"1"),this.storage.removeItem($d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=1e3,fj=10;class PC extends EC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);U5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,fj):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},dj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PC.type="LOCAL";const pj=PC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC extends EC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SC.type="SESSION";const IC=SC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Ff(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await mj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=G_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function yj(t){Ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function _j(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wj(){return CC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="firebaseLocalStorageDb",Tj=1,qd="firebaseLocalStorage",kC="fbase_key";class dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bf(t,e){return t.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function xj(){const t=indexedDB.deleteDatabase(AC);return new dc(t).toPromise()}function Fg(){const t=indexedDB.open(AC,Tj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(qd,{keyPath:kC})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(qd)?e(i):(i.close(),await xj(),e(await Fg()))})})}async function s1(t,e,n){const i=Bf(t,!0).put({[kC]:e,value:n});return new dc(i).toPromise()}async function Ej(t,e){const n=Bf(t,!1).get(e),i=await new dc(n).toPromise();return i===void 0?null:i.value}function o1(t,e){const n=Bf(t,!0).delete(e);return new dc(n).toPromise()}const Pj=800,Sj=3;class bC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Sj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ff._getInstance(wj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await _j(),!this.activeServiceWorker)return;this.sender=new gj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fg();return await s1(e,$d,"1"),await o1(e,$d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>s1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Ej(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Bf(r,!1).getAll();return new dc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bC.type="LOCAL";const Ij=bC;new cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t,e){return e?Gi(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_ extends wC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ka(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ka(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Aj(t){return lj(t.auth,new Z_(t),t.bypassAuthState)}function kj(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),aj(n,new Z_(t),t.bypassAuthState)}async function bj(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),oj(n,new Z_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Aj;case"linkViaPopup":case"linkViaRedirect":return bj;case"reauthViaPopup":case"reauthViaRedirect":return kj;default:or(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=new cc(2e3,1e4);class ya extends RC{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,ya.currentPopupAction&&ya.currentPopupAction.cancel(),ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=G_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Rj.get())};e()}}ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="pendingRedirect",Wh=new Map;class Nj extends RC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const i=await Mj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mj(t,e){const n=Vj(e),i=Dj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Oj(t,e){Wh.set(t._key(),e)}function Dj(t){return Gi(t._redirectPersistence)}function Vj(t){return Hh(Lj,t.config.apiKey,t.name)}async function jj(t,e,n=!1){if(ei(t.app))return Promise.reject(ts(t));const i=jf(t),r=Cj(i,e),a=await new Nj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=10*60*1e3;class Bj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!LC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fj&&this.cachedEventUids.clear(),this.cachedEventUids.has(a1(e))}saveEventToCache(e){this.cachedEventUids.add(a1(e)),this.lastProcessedEventTime=Date.now()}}function a1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e={}){return il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wj=/^https?/;async function $j(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uj(t);for(const n of e)try{if(qj(n))return}catch{}or(t,"unauthorized-domain")}function qj(t){const e=Vg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Wj.test(n))return!1;if(Hj.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new cc(3e4,6e4);function l1(){const t=Ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Zj(t){return new Promise((e,n)=>{var r,o,a;function i(){l1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{l1(),n(Si(t,"network-request-failed"))},timeout:Gj.get()})}if((o=(r=Ii().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Ii().gapi)!=null&&a.load)i();else{const u=X5("iframefcb");return Ii()[u]=()=>{gapi.load?i():n(Si(t,"network-request-failed"))},K5(`${Q5()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw $h=null,e})}let $h=null;function Kj(t){return $h=$h||Zj(t),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new cc(5e3,15e3),Xj="__/auth/iframe",Yj="emulator/auth/iframe",Jj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tF(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?H_(e,Yj):`https://${t.config.authDomain}/${Xj}`,i={apiKey:e.apiKey,appName:t.name,v:Ya},r=eF.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${rc(i).slice(1)}`}async function nF(t){const e=await Kj(t),n=Ii().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:tF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jj,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Si(t,"network-request-failed"),u=Ii().setTimeout(()=>{o(a)},Qj.get());function h(){Ii().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rF=500,sF=600,oF="_blank",aF="http://localhost";class u1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lF(t,e,n,i=rF,r=sF){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...iF,width:i.toString(),height:r.toString(),top:o,left:a},f=Qt().toLowerCase();n&&(u=dC(f)?oF:n),cC(f)&&(e=e||aF,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[T,k])=>`${v}${T}=${k},`,"");if(z5(f)&&u!=="_self")return uF(e||"",u),new u1(null);const g=window.open(e||"",u,m);ve(g,t,"popup-blocked");try{g.focus()}catch{}return new u1(g)}function uF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF="__/auth/handler",hF="emulator/auth/handler",dF=encodeURIComponent("fac");async function c1(t,e,n,i,r,o){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ya,eventId:r};if(e instanceof TC){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",QO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof hc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${dF}=${encodeURIComponent(h)}`:"";return`${fF(t)}?${rc(u).slice(1)}${f}`}function fF({config:t}){return t.emulator?H_(t,hF):`https://${t.authDomain}/${cF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class pF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IC,this._completeRedirectFn=jj,this._overrideRedirectResult=Oj}async _openPopup(e,n,i,r){var a;ar((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await c1(e,n,i,Vg(),r);return lF(e,o,G_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await c1(e,n,i,Vg(),r);return yj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ar(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await nF(e),i=new Bj(e);return n.register("authEvent",r=>(ve(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[tm];o!==void 0&&n(!!o),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$j(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yC()||hC()||$_()}}const mF=pF;var h1="@firebase/auth",d1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _F(t){Ba(new oo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ve(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_C(t)},f=new G5(i,r,o,h);return J5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ba(new oo("auth-internal",e=>{const n=jf(e.getProvider("auth").getImmediate());return(i=>new gF(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(h1,d1,yF(t)),Yr(h1,d1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=5*60,wF=yS("authIdTokenMaxAge")||vF;let f1=null;const TF=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>wF)return;const r=n==null?void 0:n.token;f1!==r&&(f1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function xF(t=ES()){const e=f_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Y5(t,{popupRedirectResolver:mF,persistence:[Ij,pj,IC]}),i=yS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=TF(o.toString());cj(n,a,()=>a(n.currentUser)),uj(n,u=>a(u))}}const r=mS("auth");return r&&ej(n,`http://${r}`),n}function EF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Z5({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Si("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",EF().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_F("Browser");var PF="firebase",SF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(PF,SF,"app");const IF={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},NC=xS(IF),Or=a5(NC),p1=xF(NC),Bg={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},CF="vysocany",MC=Bg[CF].center,OC=15,AF=13,kF=18,m1={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},ns=["red","blue"],bF={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},g1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],ea=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function zf(t){var e;return((e=bF[t.size])==null?void 0:e.points)||100}function RF(t,e=.008){const n={};ns.forEach(r=>n[r]=[]);const i={};return ns.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),ns.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],m=o[h],g=`${f.id}-${m.id}`,v=f.location[0]-m.location[0],T=(f.location[1]-m.location[1])*1.6,k=Math.sqrt(v*v+T*T);k<=e&&!a.has(g)&&(a.add(g),n[r].push({from:f.location,to:m.location,distance:k}))}}),n}function Kl(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function DC(t){const e={};return ns.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=zf(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const VC=j.createContext(null),Pr={player:"streetart-ctf-player",captures:"streetart-ctf-captures"},nm="streetart-captures",LF="streetart-players",NF="streetart-teams",Ke={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function im(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function rm(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function MF({children:t}){const[e,n]=j.useState(null),[i,r]=j.useState(!0),[o,a]=j.useState(()=>im(Pr.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]})),[u,h]=j.useState(()=>{const G=im(Pr.captures,{});return ea.map(X=>({...X,capturedBy:G[X.id]||null}))}),[f,m]=j.useState(null),[g,v]=j.useState(!1),[T,k]=j.useState(null);j.useEffect(()=>{const G=hj(p1,X=>{X?(n(X),a(ue=>({...ue,id:X.uid}))):sj(p1).catch(ue=>{console.log("Auth not available, using local mode")})});return()=>G()},[]);const[b,F]=j.useState(null),[C,E]=j.useState([]),S=j.useRef({});j.useEffect(()=>{let G=!0;const X=Yp(Or,nm),ue=Jp(X,xe=>{const de={},oe=[];xe.forEach(Se=>{var Ft,Bt;const Ne=Se.data();if(Ne.capturedBy){de[Se.id]=Ne.capturedBy;const at=ea.find(Wn=>Wn.id===Se.id);oe.push({id:Se.id,artName:(at==null?void 0:at.name)||Se.id,area:(at==null?void 0:at.area)||"Unknown",team:Ne.capturedBy,playerName:Ne.playerName||"Unknown",capturedAt:((Bt=(Ft=Ne.capturedAt)==null?void 0:Ft.toDate)==null?void 0:Bt.call(Ft))||new Date,points:Ne.points||100,isRecapture:Ne.isRecapture||!1})}});const ae=oe.sort((Se,Ne)=>Ne.capturedAt-Se.capturedAt).slice(0,10);E(ae),G||xe.docChanges().forEach(Se=>{if(Se.type==="added"||Se.type==="modified"){const Ne=Se.doc.data(),Ft=S.current[Se.doc.id];if(Ne.capturedBy&&Ft!==Ne.capturedBy){const Bt=ea.find(at=>at.id===Se.doc.id);Bt&&(F({artName:Bt.name,team:Ne.capturedBy,playerName:Ne.playerName||"Someone",isRecapture:Ne.isRecapture||!1,timestamp:Date.now()}),setTimeout(()=>F(null),4e3))}}}),G=!1,S.current=de,h(ea.map(Se=>({...Se,capturedBy:de[Se.id]||null}))),rm(Pr.captures,de),r(!0),console.log("Firebase: Synced",Object.keys(de).length,"captures")},xe=>{console.warn("Firestore sync error:",xe),r(!1)});return()=>ue()},[]);const[B,q]=j.useState({red:0,blue:0});j.useEffect(()=>{const G=Yp(Or,NF),X=Jp(G,ue=>{const xe={red:0,blue:0};ue.forEach(de=>{const oe=de.data();(de.id==="red"||de.id==="blue")&&(xe[de.id]=oe.score||0)}),q(xe),console.log("Team scores:",xe)});return()=>X()},[]);const[K,R]=j.useState([]);j.useEffect(()=>{const G=Yp(Or,LF),X=Jp(G,ue=>{const xe=[];ue.forEach(de=>{const oe=de.data();oe.name&&oe.team&&xe.push({id:de.id,name:oe.name,team:oe.team,score:oe.score||0,captures:oe.captures||0})}),R(xe.sort((de,oe)=>oe.score-de.score)),console.log("Players loaded:",xe.length)});return()=>X()},[]),j.useEffect(()=>{rm(Pr.player,o)},[o]);const I=j.useCallback(async G=>{if(!(!e||!i))try{await mu(pu(Or,nm,"global"),G,{merge:!0})}catch(X){console.warn("Failed to sync to Firebase:",X)}},[e,i]),N=DC(u),O={red:Math.max(B.red,N.red),blue:Math.max(B.blue,N.blue)},D=j.useCallback(G=>{ns.includes(G)&&a(X=>({...X,team:G}))},[]),z=j.useCallback(G=>{a(X=>({...X,name:G}))},[]),M=j.useCallback((G,X,ue=50)=>{let xe=null,de=1/0;return u.forEach(oe=>{const ae=(oe.location[0]-G)*111e3,Se=(oe.location[1]-X)*111e3*Math.cos(G*Math.PI/180),Ne=Math.sqrt(ae*ae+Se*Se);Ne<de&&Ne<=ue&&(de=Ne,xe={...oe,distance:Math.round(Ne)})}),xe},[u]),_e=j.useCallback(G=>{if(!o.team)return{success:!1,message:"Join a team first!"};const X=u.find(oe=>oe.id===G);if(!X)return{success:!1,message:"Art not found"};if(X.capturedBy===o.team)return{success:!1,message:"Already yours!"};if(X.status==="ghost")return{success:!1,message:"This art no longer exists"};const ue=zf(X),xe=X.capturedBy;h(oe=>oe.map(ae=>ae.id===G?{...ae,capturedBy:o.team}:ae)),a(oe=>({...oe,score:oe.score+ue,capturedArt:[...oe.capturedArt.filter(ae=>ae!==G),G]})),I({[G]:o.team});const de=im(Pr.captures,{});return rm(Pr.captures,{...de,[G]:o.team}),{success:!0,art:X,points:ue,previousTeam:xe,message:xe?`Stolen from ${xe}!`:"Captured!"}},[o.team,u,I]),pt=j.useCallback(async(G,X)=>{v(!0);const ue=M(X.lat,X.lng,100);if(!ue){v(!1),m({success:!1,message:"No street art nearby. Get closer!"});return}k({art:ue,photo:G,location:X}),v(!1)},[M]),Ie=j.useCallback(()=>{if(!T)return;const G=_e(T.art.id);m(G),k(null)},[T,_e]),ot=j.useCallback(()=>{k(null),m(null)},[]),Z=j.useCallback(async()=>{if(localStorage.removeItem(Pr.player),localStorage.removeItem(Pr.captures),e&&i)try{await mu(pu(Or,nm,"global"),{})}catch(G){console.warn("Failed to reset Firebase:",G)}a({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),h(ea.map(G=>({...G,capturedBy:null}))),m(null),k(null)},[e,i]),ce={player:o,artPoints:u,teamScores:O,globalTeamScores:B,allPlayers:K,recentCaptures:C,captureNotification:b,scanResult:f,isScanning:g,pendingCapture:T,isOnline:i,teams:ns,joinTeam:D,setPlayerName:z,captureArt:_e,startCapture:pt,confirmCapture:Ie,cancelCapture:ot,findNearestArt:M,setScanResult:m,resetAll:Z,TEAM_COLORS:Ke};return P.jsx(VC.Provider,{value:ce,children:t})}function hr(){const t=j.useContext(VC);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),We=(t,e)=>{const n=j.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>j.createElement("svg",{ref:m,...OF,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${DF(t)}`,u].join(" "),...f},[...e.map(([g,v])=>j.createElement(g,v)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=We("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=We("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=We("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=We("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=We("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=We("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=We("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=We("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=We("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=We("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=We("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=We("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=We("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=We("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=We("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=We("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=We("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=We("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=We("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=We("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=We("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=We("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=We("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=We("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=We("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),tB=51,nB=24;function Ug({size:t=120,className:e=""}){const[n,i]=j.useState(0);j.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%tB)},1e3/nB);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return P.jsx("img",{src:`/street-art-ctf/animation/frame_${r}.png`,alt:"Loading",width:t,height:t,className:e,style:{imageRendering:"pixelated",objectFit:"contain"}})}const y1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],_1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function iB(){const t=y1[Math.floor(Math.random()*y1.length)],e=_1[Math.floor(Math.random()*_1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function rB(){const t=Uy(),{player:e,joinTeam:n,setPlayerName:i}=hr(),[r,o]=j.useState(0),[a,u]=j.useState(e.name||""),[h,f]=j.useState(null);j.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]);const m=()=>{u(iB())},g=()=>{if(r===1&&a.trim()&&i(a.trim()),r===2&&h&&n(h),r===3){t("/map");return}o(r+1)},v=()=>r===1?a.trim().length>=2:r===2?h!==null:!0;return P.jsxs("div",{className:"h-screen bg-[#0a0a0f] flex flex-col overflow-hidden",children:[P.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:[0,1,2,3].map(T=>P.jsx("div",{className:`h-1.5 rounded-sm transition-all duration-300 ${T===r?"bg-white w-8":T<r?"bg-white/60 w-1.5":"bg-white/20 w-1.5"}`},T))}),P.jsxs(Fu,{mode:"wait",children:[r===0&&P.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[P.jsx(fe.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:P.jsx(Ug,{size:140})}),P.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Street Art CTF"}),P.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),P.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[P.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[P.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:P.jsx(jF,{size:20,className:"text-white/70"})}),P.jsxs("div",{className:"text-left",children:[P.jsx("div",{className:"font-medium text-sm",children:"Scan Art"}),P.jsx("div",{className:"text-xs text-white/40",children:"Find and capture street art"})]})]}),P.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[P.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:P.jsx(zg,{size:20,className:"text-white/70"})}),P.jsxs("div",{className:"text-left",children:[P.jsx("div",{className:"font-medium text-sm",children:"Control Territory"}),P.jsx("div",{className:"text-xs text-white/40",children:"Expand your team's area"})]})]}),P.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[P.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:P.jsx(HC,{size:20,className:"text-white/70"})}),P.jsxs("div",{className:"text-left",children:[P.jsx("div",{className:"font-medium text-sm",children:"Win Together"}),P.jsx("div",{className:"text-xs text-white/40",children:"Lead your team to victory"})]})]})]})]},"intro"),r===1&&P.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[P.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),P.jsx("p",{className:"text-white/40 mb-8",children:"This is how others will see you"}),P.jsx("div",{className:"w-full max-w-xs mb-4",children:P.jsx("input",{type:"text",value:a,onChange:T=>u(T.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-lg bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-white/30"})}),P.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/50 hover:bg-white/10 transition-colors",children:[P.jsx(zC,{size:16}),"Generate random name"]})]},"name"),r===2&&P.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[P.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Choose your team"}),P.jsx("p",{className:"text-white/40 mb-8",children:"Fight for territory together"}),P.jsxs("div",{className:"flex gap-4 w-full max-w-sm",children:[P.jsxs(fe.button,{whileTap:{scale:.95},onClick:()=>f("red"),className:`flex-1 p-5 rounded-lg border-2 transition-all ${h==="red"?"bg-red-500/20 border-red-500":"bg-white/5 border-white/10 hover:border-red-500/50"}`,children:[P.jsx("div",{className:`w-14 h-14 mx-auto rounded-lg flex items-center justify-center mb-3 ${h==="red"?"bg-red-500":"bg-red-500/30"}`,children:P.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90"})}),P.jsx("div",{className:"font-bold text-lg mb-1",style:{color:"#ff6b6b"},children:"Red Team"}),P.jsx("div",{className:"text-xs text-white/40",children:"The Flames"})]}),P.jsxs(fe.button,{whileTap:{scale:.95},onClick:()=>f("blue"),className:`flex-1 p-5 rounded-lg border-2 transition-all ${h==="blue"?"bg-blue-500/20 border-blue-500":"bg-white/5 border-white/10 hover:border-blue-500/50"}`,children:[P.jsx("div",{className:`w-14 h-14 mx-auto rounded-lg flex items-center justify-center mb-3 ${h==="blue"?"bg-blue-500":"bg-blue-500/30"}`,children:P.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90"})}),P.jsx("div",{className:"font-bold text-lg mb-1",style:{color:"#4dabf7"},children:"Blue Team"}),P.jsx("div",{className:"text-xs text-white/40",children:"The Waves"})]})]})]},"team"),r===3&&P.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[P.jsx("div",{className:"mb-4",children:P.jsx(Ug,{size:100})}),P.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",a,"!"]}),P.jsxs("p",{className:"text-white/40 mb-8",children:["You're on Team ",P.jsx("span",{style:{color:h==="red"?"#ff6b6b":"#4dabf7"},className:"font-bold",children:h==="red"?"Red":"Blue"})]}),P.jsxs("div",{className:"w-full max-w-xs space-y-3 mb-8",children:[P.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[P.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[P.jsx(K_,{size:14,className:"text-white/50"}),"How to Play"]}),P.jsx("div",{className:"text-xs text-white/40",children:"Find street art around you. Point your camera at it to scan and capture it for your team."})]}),P.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[P.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[P.jsx(zg,{size:14,className:"text-white/50"}),"Check the Map"]}),P.jsx("div",{className:"text-xs text-white/40",children:"See which art is nearby and which territories each team controls."})]}),P.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[P.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[P.jsx(WC,{size:14,className:"text-white/50"}),"Score Points"]}),P.jsx("div",{className:"text-xs text-white/40",children:"Each capture earns points. Big murals = more points. Steal from enemies for bonus!"})]})]})]},"tutorial")]}),P.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:P.jsxs(fe.button,{whileTap:{scale:.98},onClick:g,disabled:!v(),className:`w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all ${v()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[r===3?"Let's Go":"Continue",P.jsx(FF,{size:20})]})})]})}const sB=[{color:"red",name:"Red Team"},{color:"blue",name:"Blue Team"}];function oB(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"just now";const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function aB(){const{player:t,joinTeam:e,teamScores:n,recentCaptures:i,isOnline:r}=hr(),o=f=>{e(f)},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},u={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},h=Object.values(n).reduce((f,m)=>f+m,0);return P.jsxs(fe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:a,children:[P.jsxs(fe.div,{className:"text-center mb-6",variants:u,children:[P.jsx(fe.div,{className:"relative inline-block mb-3",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:P.jsx(Ug,{size:70})}),P.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Street Art CTF"}),P.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] ${r?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[r?P.jsx(zF,{size:10}):P.jsx(JF,{size:10}),r?"Live":"Offline"]})]}),P.jsxs(fe.div,{variants:u,className:"mb-6",children:[P.jsxs("div",{className:"flex items-center justify-between mb-2",children:[P.jsx("span",{className:"text-xs text-white/40",children:"Red Team"}),P.jsx("span",{className:"text-xs text-white/40",children:"Blue Team"})]}),P.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-white/10",children:[P.jsx(fe.div,{className:"h-full",style:{backgroundColor:Ke.red.hex},initial:{width:"50%"},animate:{width:h>0?`${n.red/h*100}%`:"50%"},transition:{duration:.8}}),P.jsx(fe.div,{className:"h-full",style:{backgroundColor:Ke.blue.hex},initial:{width:"50%"},animate:{width:h>0?`${n.blue/h*100}%`:"50%"},transition:{duration:.8}})]}),P.jsxs("div",{className:"flex items-center justify-between mt-2",children:[P.jsxs("span",{className:"text-sm font-bold",style:{color:Ke.red.hex},children:[n.red," pts"]}),P.jsxs("span",{className:"text-sm font-bold",style:{color:Ke.blue.hex},children:[n.blue," pts"]})]})]}),t.team?P.jsx(fe.div,{className:"mb-6 p-4 rounded-xl border-2",variants:u,style:{borderColor:Ke[t.team].hex+"50",backgroundColor:Ke[t.team].hex+"10"},children:P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:Ke[t.team].hex+"30"},children:P.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Ke[t.team].hex}})}),P.jsxs("div",{children:[P.jsx("p",{className:"font-bold text-white",children:t.name}),P.jsx("p",{className:"text-xs",style:{color:Ke[t.team].hex},children:t.team==="red"?"Red Team":"Blue Team"})]})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),P.jsx("p",{className:"text-[10px] text-white/40",children:"points"})]})]})}):P.jsxs(fe.div,{variants:u,className:"mb-6",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[P.jsx(HC,{size:14,className:"text-white/40"}),P.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),P.jsx("div",{className:"grid grid-cols-2 gap-3",children:sB.map(({color:f,name:m})=>P.jsxs(fe.button,{onClick:()=>o(f),className:"p-4 rounded-xl text-center border-2 transition-all",style:{borderColor:Ke[f].hex+"50",backgroundColor:Ke[f].hex+"10"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[P.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:Ke[f].hex+"30"},children:P.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:Ke[f].hex}})}),P.jsx("p",{className:"font-semibold text-white",children:m})]},f))})]}),P.jsxs(fe.div,{variants:u,children:[P.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[P.jsx(BF,{size:14,className:"text-white/40"}),P.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Live Activity"})]}),i.length===0?P.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:"No captures yet. Be the first!"}):P.jsx("div",{className:"space-y-2",children:i.map((f,m)=>{var v;const g=((v=Ke[f.team])==null?void 0:v.hex)||"#888";return P.jsxs(fe.div,{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.05},children:[P.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${g}20`},children:f.isRecapture?P.jsx(UC,{size:14,style:{color:g}}):P.jsx(jC,{size:14,style:{color:g}})}),P.jsxs("div",{className:"flex-1 min-w-0",children:[P.jsx("p",{className:"text-sm font-medium text-white truncate",children:f.artName}),P.jsxs("p",{className:"text-[10px] text-white/40",children:[P.jsx("span",{style:{color:g},children:f.playerName}),"  ",f.area]})]}),P.jsxs("div",{className:"text-right flex-shrink-0",children:[P.jsxs("p",{className:"text-xs font-semibold",style:{color:g},children:["+",f.points]}),P.jsx("p",{className:"text-[10px] text-white/30",children:oB(f.capturedAt)})]})]},f.id)})})]})]})}function lB(t,e){const n=j.useRef(e);j.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function uB(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const cB=1;function hB(t){return Object.freeze({__version:cB,map:t})}function $C(t,e){return Object.freeze({...t,...e})}const qC=j.createContext(null),GC=qC.Provider;function X_(){const t=j.useContext(qC);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function dB(t){function e(n,i){const{instance:r,context:o}=t(n).current;return j.useImperativeHandle(i,()=>r),n.children==null?null:Js.createElement(GC,{value:o},n.children)}return j.forwardRef(e)}function fB(t){function e(n,i){const{instance:r}=t(n).current;return j.useImperativeHandle(i,()=>r),null}return j.forwardRef(e)}function ZC(t,e){const n=j.useRef();j.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Y_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Hg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(bA,function(n){var i="1.9.4";function r(s){var l,d,p,_;for(d=1,p=arguments.length;d<p;d++){_=arguments[d];for(l in _)s[l]=_[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,_,x,V;return V=function(){p=!1,_&&(x.apply(d,_),_=!1)},x=function(){p?_=arguments:(s.apply(d,arguments),setTimeout(V,l),p=!0)},x}function m(s,l,d){var p=l[1],_=l[0],x=p-_;return s===p&&d?s:((s-_)%x+x)%x+_}function g(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return T(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function F(s,l,d){var p=[];for(var _ in s)p.push(encodeURIComponent(d?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function E(s,l){return s.replace(C,function(d,p){var _=l[p];if(_===void 0)throw new Error("No value provided for variable "+d);return typeof _=="function"&&(_=_(l)),_})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function I(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||K("RequestAnimationFrame")||I,O=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,l,d){if(d&&N===I)s.call(l);else return N.call(window,a(s,l))}function z(s){s&&O.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:v,trim:T,splitWords:k,setOptions:b,getParamString:F,template:E,isArray:S,indexOf:B,emptyImageUrl:q,requestFn:N,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:z};function _e(){}_e.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(l[_]=this[_]);return s.statics&&r(l,s.statics),s.includes&&(pt(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,V=p._initHooks.length;x<V;x++)p._initHooks[x].call(this)}},l},_e.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},_e.mergeOptions=function(s){return r(this.prototype.options,s),this},_e.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function pt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ie={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var _=0,x=s.length;_<x;_++)this._on(s[_],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var _=arguments.length===1,x=0,V=s.length;x<V;x++)_?this._off(s[x]):this._off(s[x],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var _={fn:l,ctx:d};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,l,d){var p,_,x;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,x=p.length;_<x;_++)p[_].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(s,l,d);if(V!==!1){var H=p[V];this._firingCount&&(H.fn=g,this._events[s]=p=p.slice()),p.splice(V,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var x=0,V=_.length;x<V;x++){var H=_[x],$=H.fn;H.once&&this.off(s,$,H.ctx),$.call(H.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=l;typeof l!="function"&&(p=!!l,_=void 0,d=void 0);var x=this._events&&this._events[s];if(x&&x.length&&this._listens(s,_,d)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var _=0,x=p.length;_<x;_++)if(p[_].fn===l&&p[_].ctx===d)return _;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var _=0,x=s.length;_<x;_++)this._on(s[_],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ie.addEventListener=Ie.on,Ie.removeEventListener=Ie.clearAllEventListeners=Ie.off,Ie.addOneTimeEventListener=Ie.once,Ie.fireEvent=Ie.fire,Ie.hasEventListeners=Ie.listens;var ot=_e.extend(Ie);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(G(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(G(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=G(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=G(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=G(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function G(s,l,d){return s instanceof Z?s:S(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function X(s,l){if(s)for(var d=l?[s,l]:s,p=0,_=d.length;p<_;p++)this.extend(d[p])}X.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=G(s);else if(s=ue(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=G(s):s=ue(s),s instanceof X?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=ue(s);var l=this.min,d=this.max,p=s.min,_=s.max,x=_.x>=l.x&&p.x<=d.x,V=_.y>=l.y&&p.y<=d.y;return x&&V},overlaps:function(s){s=ue(s);var l=this.min,d=this.max,p=s.min,_=s.max,x=_.x>l.x&&p.x<d.x,V=_.y>l.y&&p.y<d.y;return x&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,_=Math.abs(l.y-d.y)*s;return ue(G(l.x-p,l.y-_),G(d.x+p,d.y+_))},equals:function(s){return s?(s=ue(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ue(s,l){return!s||s instanceof X?s:new X(s,l)}function xe(s,l){if(s)for(var d=l?[s,l]:s,p=0,_=d.length;p<_;p++)this.extend(d[p])}xe.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,_;if(s instanceof oe)p=s,_=s;else if(s instanceof xe){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(ae(s)||de(s)):this;return!l&&!d?(this._southWest=new oe(p.lat,p.lng),this._northEast=new oe(_.lat,_.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(_.lat,d.lat),d.lng=Math.max(_.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,_=Math.abs(l.lng-d.lng)*s;return new xe(new oe(l.lat-p,l.lng-_),new oe(d.lat+p,d.lng+_))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof oe||"lat"in s?s=ae(s):s=de(s);var l=this._southWest,d=this._northEast,p,_;return s instanceof xe?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=l.lat&&_.lat<=d.lat&&p.lng>=l.lng&&_.lng<=d.lng},intersects:function(s){s=de(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),x=_.lat>=l.lat&&p.lat<=d.lat,V=_.lng>=l.lng&&p.lng<=d.lng;return x&&V},overlaps:function(s){s=de(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),x=_.lat>l.lat&&p.lat<d.lat,V=_.lng>l.lng&&p.lng<d.lng;return x&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=de(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function de(s,l){return s instanceof xe?s:new xe(s,l)}function oe(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}oe.prototype={equals:function(s,l){if(!s)return!1;s=ae(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Ne.distance(this,ae(s))},wrap:function(){return Ne.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return de([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function ae(s,l,d){return s instanceof oe?s:S(s)&&typeof s[0]!="object"?s.length===3?new oe(s[0],s[1],s[2]):s.length===2?new oe(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new oe(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new oe(s,l,d)}var Se={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),_=this.transformation.transform(l.max,d);return new X(p,_)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new oe(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,_=l.lng-d.lng;if(p===0&&_===0)return s;var x=s.getSouthWest(),V=s.getNorthEast(),H=new oe(x.lat-p,x.lng-_),$=new oe(V.lat-p,V.lng-_);return new xe(H,$)}},Ne=r({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,_=l.lat*d,x=Math.sin((l.lat-s.lat)*d/2),V=Math.sin((l.lng-s.lng)*d/2),H=x*x+Math.cos(p)*Math.cos(_)*V*V,$=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*$}}),Ft=6378137,Bt={R:Ft,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),_=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var l=180/Math.PI;return new oe((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Ft*Math.PI;return new X([-s,-s],[s,s])}()};function at(s,l,d,p){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}at.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Wn(s,l,d,p){return new at(s,l,d,p)}var vs=r({},Ne,{code:"EPSG:3857",projection:Bt,transformation:function(){var s=.5/(Math.PI*Bt.R);return Wn(s,.5,-s,.5)}()}),pc=r({},vs,{code:"EPSG:900913"});function mc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function To(s,l){var d="",p,_,x,V,H,$;for(p=0,x=s.length;p<x;p++){for(H=s[p],_=0,V=H.length;_<V;_++)$=H[_],d+=(_?"L":"M")+$.x+" "+$.y;d+=l?le.svg?"z":"x":""}return d||"M0 0"}var ws=document.documentElement.style,Ts="ActiveXObject"in window,It=Ts&&!document.addEventListener,Ct="msLaunchUri"in navigator&&!("documentMode"in document),dr=on("webkit"),gc=on("android"),rl=on("android 2")||on("android 3"),Hf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xs=gc&&on("Google")&&Hf<537&&!("AudioNode"in window),xo=!!window.opera,sl=!Ct&&on("chrome"),Eo=on("gecko")&&!dr&&!xo&&!Ts,Wf=!sl&&on("safari"),yc=on("phantom"),ol="OTransition"in ws,_c=navigator.platform.indexOf("Win")===0,fr=Ts&&"transition"in ws,Es="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rl,Po="MozPerspective"in ws,ki=!window.L_DISABLE_3D&&(fr||Es||Po)&&!ol&&!yc,pr=typeof orientation<"u"||on("mobile"),So=pr&&dr,vc=pr&&Es,mr=!window.PointerEvent&&window.MSPointerEvent,al=!!(window.PointerEvent||mr),At="ontouchstart"in window||!!window.TouchEvent,wc=!window.L_NO_TOUCH&&(At||al),Ps=pr&&xo,Ss=pr&&Eo,$f=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,qf=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),gr=function(){return!!document.createElement("canvas").getContext}(),ll=!!(document.createElementNS&&mc("svg").createSVGRect),Gf=!!ll&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Io=!ll&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Tc=navigator.platform.indexOf("Mac")===0,xc=navigator.platform.indexOf("Linux")===0;function on(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:Ts,ielt9:It,edge:Ct,webkit:dr,android:gc,android23:rl,androidStock:xs,opera:xo,chrome:sl,gecko:Eo,safari:Wf,phantom:yc,opera12:ol,win:_c,ie3d:fr,webkit3d:Es,gecko3d:Po,any3d:ki,mobile:pr,mobileWebkit:So,mobileWebkit3d:vc,msPointer:mr,pointer:al,touch:wc,touchNative:At,mobileOpera:Ps,mobileGecko:Ss,retina:$f,passiveEvents:qf,canvas:gr,svg:ll,vml:Io,inlineSvg:Gf,mac:Tc,linux:xc},Ec=le.msPointer?"MSPointerDown":"pointerdown",$n=le.msPointer?"MSPointerMove":"pointermove",ul=le.msPointer?"MSPointerUp":"pointerup",cl=le.msPointer?"MSPointerCancel":"pointercancel",Is={touchstart:Ec,touchmove:$n,touchend:ul,touchcancel:cl},Co={touchstart:hl,touchmove:Cn,touchend:Cn,touchcancel:Cn},bi={},Pc=!1;function Sc(s,l,d){return l==="touchstart"&&Cs(),Co[l]?(d=Co[l].bind(this,d),s.addEventListener(Is[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function Zf(s,l,d){if(!Is[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Is[l],d,!1)}function Ao(s){bi[s.pointerId]=s}function Ic(s){bi[s.pointerId]&&(bi[s.pointerId]=s)}function ko(s){delete bi[s.pointerId]}function Cs(){Pc||(document.addEventListener(Ec,Ao,!0),document.addEventListener($n,Ic,!0),document.addEventListener(ul,ko,!0),document.addEventListener(cl,ko,!0),Pc=!0)}function Cn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in bi)l.touches.push(bi[d]);l.changedTouches=[l],s(l)}}function hl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&mt(l),Cn(s,l)}function Kf(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Cc=200;function Ac(s,l){s.addEventListener("dblclick",l);var d=0,p;function _(x){if(x.detail!==1){p=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var V=gl(x);if(!(V.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!V.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var H=Date.now();H-d<=Cc?(p++,p===2&&l(Kf(x))):p=1,d=H}}}return s.addEventListener("click",_),{dblclick:l,simDblclick:_}}function kc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var As=bo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ri=bo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),dl=Ri==="webkitTransition"||Ri==="OTransition"?Ri+"End":"transitionend";function fl(s){return typeof s=="string"?document.getElementById(s):s}function yr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Me(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Ve(s){var l=s.parentNode;l&&l.removeChild(s)}function Xt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function An(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function kn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function ks(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=oi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function re(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,_=d.length;p<_;p++)s.classList.add(d[p]);else if(!ks(s,l)){var x=oi(s);Li(s,(x?x+" ":"")+l)}}function $e(s,l){s.classList!==void 0?s.classList.remove(l):Li(s,T((" "+oi(s)+" ").replace(" "+l+" "," ")))}function Li(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function oi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function an(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&bc(s,l)}function bc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function bo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Ni(s,l,d){var p=l||new Z(0,0);s.style[As]=(le.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function lt(s,l){s._leaflet_pos=l,le.any3d?Ni(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Mi(s){return s._leaflet_pos||new Z(0,0)}var qn,yn,Ro;if("onselectstart"in document)qn=function(){we(window,"selectstart",mt)},yn=function(){Ue(window,"selectstart",mt)};else{var _r=bo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qn=function(){if(_r){var s=document.documentElement.style;Ro=s[_r],s[_r]="none"}},yn=function(){_r&&(document.documentElement.style[_r]=Ro,Ro=void 0)}}function Lo(){we(window,"dragstart",mt)}function No(){Ue(window,"dragstart",mt)}var bs,ai;function pl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Mo(),bs=s,ai=s.style.outlineStyle,s.style.outlineStyle="none",we(window,"keydown",Mo))}function Mo(){bs&&(bs.style.outlineStyle=ai,bs=void 0,ai=void 0,Ue(window,"keydown",Mo))}function Rc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function bn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Qf={__proto__:null,TRANSFORM:As,TRANSITION:Ri,TRANSITION_END:dl,get:fl,getStyle:yr,create:Me,remove:Ve,empty:Xt,toFront:An,toBack:kn,hasClass:ks,addClass:re,removeClass:$e,setClass:Li,getClass:oi,setOpacity:an,testProp:bo,setTransform:Ni,setPosition:lt,getPosition:Mi,get disableTextSelection(){return qn},get enableTextSelection(){return yn},disableImageDrag:Lo,enableImageDrag:No,preventOutline:pl,restoreOutline:Mo,getSizedParentNode:Rc,getScale:bn};function we(s,l,d,p){if(l&&typeof l=="object")for(var _ in l)Oo(s,_,l[_],d);else{l=k(l);for(var x=0,V=l.length;x<V;x++)Oo(s,l[x],d,p)}return this}var Yt="_leaflet_events";function Ue(s,l,d,p){if(arguments.length===1)vr(s),delete s[Yt];else if(l&&typeof l=="object")for(var _ in l)Rs(s,_,l[_],d);else if(l=k(l),arguments.length===2)vr(s,function(H){return B(l,H)!==-1});else for(var x=0,V=l.length;x<V;x++)Rs(s,l[x],d,p);return this}function vr(s,l){for(var d in s[Yt]){var p=d.split(/\d/)[0];(!l||l(p))&&Rs(s,p,null,null,d)}}var Oi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Oo(s,l,d,p){var _=l+h(d)+(p?"_"+h(p):"");if(s[Yt]&&s[Yt][_])return this;var x=function(H){return d.call(p||s,H||window.event)},V=x;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?x=Sc(s,l,x):le.touch&&l==="dblclick"?x=Ac(s,x):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Oi[l]||l,x,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(x=function(H){H=H||window.event,_l(s,H)&&V(H)},s.addEventListener(Oi[l],x,!1)):s.addEventListener(l,V,!1):s.attachEvent("on"+l,x),s[Yt]=s[Yt]||{},s[Yt][_]=x}function Rs(s,l,d,p,_){_=_||l+h(d)+(p?"_"+h(p):"");var x=s[Yt]&&s[Yt][_];if(!x)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?Zf(s,l,x):le.touch&&l==="dblclick"?kc(s,x):"removeEventListener"in s?s.removeEventListener(Oi[l]||l,x,!1):s.detachEvent("on"+l,x),s[Yt][_]=null}function Fe(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function ml(s){return Oo(s,"wheel",Fe),this}function Ls(s){return we(s,"mousedown touchstart dblclick contextmenu",Fe),s._leaflet_disable_click=!0,this}function mt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function li(s){return mt(s),Fe(s),this}function gl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Ns(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=bn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var ui=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yl(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ui:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function _l(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Ms={__proto__:null,on:we,off:Ue,stopPropagation:Fe,disableScrollPropagation:ml,disableClickPropagation:Ls,preventDefault:mt,stop:li,getPropagationPath:gl,getMousePosition:Ns,getWheelDelta:yl,isExternalTarget:_l,addListener:we,removeListener:Ue},vl=ot.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Mi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),lt(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ce=ot.extend({options:{crs:vs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ae(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ri&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),we(this._proxy,dl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ae(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),_=this.getSize().divideBy(2),x=s instanceof Z?s:this.latLngToContainerPoint(s),V=x.subtract(_).multiplyBy(1-1/p),H=this.containerPointToLatLng(_.add(V));return this.setView(H,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():de(s);var d=G(l.paddingTopLeft||l.padding||[0,0]),p=G(l.paddingBottomRight||l.padding||[0,0]),_=this.getBoundsZoom(s,!1,d.add(p));if(_=typeof l.maxZoom=="number"?Math.min(l.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var x=p.subtract(d).divideBy(2),V=this.project(s.getSouthWest(),_),H=this.project(s.getNorthEast(),_),$=this.unproject(V.add(H).divideBy(2).add(x),_);return{center:$,zoom:_}},fitBounds:function(s,l){if(s=de(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=G(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!le.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),_=this.project(s),x=this.getSize(),V=this._zoom;s=ae(s),l=l===void 0?V:l;var H=Math.max(x.x,x.y),$=H*this.getZoomScale(V,l),Y=_.distanceTo(p)||1,ne=1.42,me=ne*ne;function Ae(gt){var Gc=gt?-1:1,SA=gt?$:H,IA=$*$-H*H+Gc*me*me*Y*Y,CA=2*SA*me*Y,tp=IA/CA,Tv=Math.sqrt(tp*tp+1)-tp,AA=Tv<1e-9?-18:Math.log(Tv);return AA}function Jt(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function kt(gt){return(Math.exp(gt)+Math.exp(-gt))/2}function Nn(gt){return Jt(gt)/kt(gt)}var un=Ae(0);function Zo(gt){return H*(kt(un)/kt(un+ne*gt))}function TA(gt){return H*(kt(un)*Nn(un+ne*gt)-Jt(un))/me}function xA(gt){return 1-Math.pow(1-gt,1.5)}var EA=Date.now(),vv=(Ae(1)-un)/ne,PA=d.duration?1e3*d.duration:1e3*vv*.8;function wv(){var gt=(Date.now()-EA)/PA,Gc=xA(gt)*vv;gt<=1?(this._flyToFrame=D(wv,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(TA(Gc)/Y)),V),this.getScaleZoom(H/Zo(Gc),V),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),wv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=de(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,de(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=G(l.paddingTopLeft||l.padding||[0,0]),p=G(l.paddingBottomRight||l.padding||[0,0]),_=this.project(this.getCenter()),x=this.project(s),V=this.getPixelBounds(),H=ue([V.min.add(d),V.max.subtract(p)]),$=H.getSize();if(!H.contains(x)){this._enforcingBounds=!0;var Y=x.subtract(H.getCenter()),ne=H.extend(x).getSize().subtract($);_.x+=Y.x<0?-ne.x:ne.x,_.y+=Y.y<0?-ne.y:ne.y,this.panTo(this.unproject(_),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),_=d.divideBy(2).round(),x=p.subtract(_);return!x.x&&!x.y?this:(s.animate&&s.pan?this.panBy(x):(s.pan&&this._rawPanBy(x),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new oe(l,d),_=p.toBounds(s.coords.accuracy*2),x=this._locateOptions;if(x.setView){var V=this.getBoundsZoom(_);this.setView(p,x.maxZoom?Math.min(V,x.maxZoom):V)}var H={latlng:p,bounds:_,timestamp:s.timestamp};for(var $ in s.coords)typeof s.coords[$]=="number"&&(H[$]=s.coords[$]);this.fire("locationfound",H)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ve(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Me("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new xe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=de(s),d=G(d||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),x=this.getMaxZoom(),V=s.getNorthWest(),H=s.getSouthEast(),$=this.getSize().subtract(d),Y=ue(this.project(H,p),this.project(V,p)).getSize(),ne=le.any3d?this.options.zoomSnap:1,me=$.x/Y.x,Ae=$.y/Y.y,Jt=l?Math.max(me,Ae):Math.min(me,Ae);return p=this.getScaleZoom(Jt,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(_,Math.min(x,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new X(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ae(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(G(s),l)},layerPointToLatLng:function(s){var l=G(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ae(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ae(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(de(s))},distance:function(s,l){return this.options.crs.distance(ae(s),ae(l))},containerPointToLayerPoint:function(s){return G(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return G(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(G(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(s)))},mouseEventToContainerPoint:function(s){return Ns(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=fl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");we(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,re(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=yr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),lt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(s.markerPane,"leaflet-zoom-hide"),re(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){lt(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var _=this._zoom!==l;this._moveStart(_,d)._move(s,l)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var _=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((_||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){lt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Ue:we;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,_=l==="mouseout"||l==="mouseover",x=s.target||s.srcElement,V=!1;x;){if(p=this._targets[h(x)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(l,!0)&&(_&&!_l(x,s)||(d.push(p),_))||x===this._container)break;x=x.parentNode}return!d.length&&!V&&!_&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&pl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var _=this._findEventTargets(s,l);if(d){for(var x=[],V=0;V<d.length;V++)d[V].listens(l,!0)&&x.push(d[V]);_=x.concat(_)}if(_.length){l==="contextmenu"&&mt(s);var H=_[0],$={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=H.getLatLng&&(!H._radius||H._radius<=10);$.containerPoint=Y?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Y?H.getLatLng():this.layerPointToLatLng($.layerPoint)}for(V=0;V<_.length;V++)if(_[V].fire(l,$,!0),$.originalEvent._stopped||_[V].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Mi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return ue([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),_=this.getSize().divideBy(2),x=new X(p.subtract(_),p.add(_)),V=this._getBoundsOffset(x,d,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?s:this.unproject(p.add(V),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new X(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=ue(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),_=p.min.subtract(s.min),x=p.max.subtract(s.max),V=this._rebound(_.x,-x.x),H=this._rebound(_.y,-x.y);return new Z(V,H)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=le.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Me("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=As,p=this._proxy.style[d];Ni(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Ni(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),_=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Do(s,l){return new Ce(s,l)}var ln=_e.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return re(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ci=function(s){return new ln(s)};Ce.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Me("div",l+"control-container",this._container);function p(_,x){var V=l+_+" "+l+x;s[_+x]=Me("div",V,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ve(this._controlCorners[s]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Lc=ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){b(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return ln.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Me("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ls(l),ml(l);var p=this._section=Me("section",s+"-list");d&&(this._map.on("click",this.collapse,this),we(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Me("a",s+"-toggle",l);_.href="#",_.title="Layers",_.setAttribute("role","button"),we(_,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){mt(x),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Me("div",s+"-base",p),this._separator=Me("div",s+"-separator",p),this._overlaysList=Me("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xt(this._baseLayersList),Xt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,_=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),we(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var x=document.createElement("span");l.appendChild(x),x.appendChild(p),x.appendChild(_);var V=s.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],_=[];this._handlingClick=!0;for(var x=s.length-1;x>=0;x--)l=s[x],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||_.push(d);for(x=0;x<_.length;x++)this._map.hasLayer(_[x])&&this._map.removeLayer(_[x]);for(x=0;x<p.length;x++)this._map.hasLayer(p[x])||this._map.addLayer(p[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),_=s.length-1;_>=0;_--)l=s[_],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,we(s,"click",mt),this.expand();var l=this;setTimeout(function(){Ue(s,"click",mt),l._preventClick=!1})}}),Nc=function(s,l,d){return new Lc(s,l,d)},Di=ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Me("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,_){var x=Me("a",d,p);return x.innerHTML=s,x.href="#",x.title=l,x.setAttribute("role","button"),x.setAttribute("aria-label",l),Ls(x),we(x,"click",li),we(x,"click",_,this),we(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";$e(this._zoomInButton,l),$e(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(re(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(re(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Di,this.addControl(this.zoomControl))});var Mc=function(s){return new Di(s)},wl=ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Me("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Me("div",l,d)),s.imperial&&(this._iScale=Me("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,_;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(_=this._getRoundNum(l),this._updateScale(this._iScale,_+" ft",_/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Tl=function(s){return new wl(s)},xl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Vo=ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?xl+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Me("div","leaflet-control-attribution"),Ls(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new Vo().addTo(this)});var jo=function(s){return new Vo(s)};ln.Layers=Lc,ln.Zoom=Di,ln.Scale=wl,ln.Attribution=Vo,ci.layers=Nc,ci.zoom=Mc,ci.scale=Tl,ci.attribution=jo;var _n=_e.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_n.addTo=function(s,l){return s.addHandler(l,this),this};var Oc={Events:Ie},hi=le.touch?"touchstart mousedown":"mousedown",Gn=ot.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){b(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(we(this._dragStartTarget,hi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gn._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,hi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ks(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Gn._dragging===this&&this.finishDrag();return}if(!(Gn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Gn._dragging=this,this._preventOutline&&pl(this._element),Lo(),qn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Rc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Mi(this._element),this._parentScale=bn(d);var p=s.type==="mousedown";we(document,p?"mousemove":"touchmove",this._onMove,this),we(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,mt(s),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),lt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),No(),yn();var l=this._moved&&this._moving;this._moving=!1,Gn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function El(s,l,d){var p,_=[1,4,2,8],x,V,H,$,Y,ne,me,Ae;for(x=0,ne=s.length;x<ne;x++)s[x]._code=W(s[x],l);for(H=0;H<4;H++){for(me=_[H],p=[],x=0,ne=s.length,V=ne-1;x<ne;V=x++)$=s[x],Y=s[V],$._code&me?Y._code&me||(Ae=U(Y,$,me,l,d),Ae._code=W(Ae,l),p.push(Ae)):(Y._code&me&&(Ae=U(Y,$,me,l,d),Ae._code=W(Ae,l),p.push(Ae)),p.push($));s=p}return s}function Pl(s,l){var d,p,_,x,V,H,$,Y,ne;if(!s||s.length===0)throw new Error("latlngs not passed");je(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var me=ae([0,0]),Ae=de(s),Jt=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());Jt<1700&&(me=Fo(s));var kt=s.length,Nn=[];for(d=0;d<kt;d++){var un=ae(s[d]);Nn.push(l.project(ae([un.lat-me.lat,un.lng-me.lng])))}for(H=$=Y=0,d=0,p=kt-1;d<kt;p=d++)_=Nn[d],x=Nn[p],V=_.y*x.x-x.y*_.x,$+=(_.x+x.x)*V,Y+=(_.y+x.y)*V,H+=V*3;H===0?ne=Nn[0]:ne=[$/H,Y/H];var Zo=l.unproject(G(ne));return ae([Zo.lat+me.lat,Zo.lng+me.lng])}function Fo(s){for(var l=0,d=0,p=0,_=0;_<s.length;_++){var x=ae(s[_]);l+=x.lat,d+=x.lng,p++}return ae([l/p,d/p])}var Bo={__proto__:null,clipPolygon:El,polygonCenter:Pl,centroid:Fo};function zt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=wr(s,d),s}function Sl(s,l,d){return Math.sqrt(Te(s,l,d,!0))}function Dc(s,l,d){return Te(s,l,d)}function wr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(d);_[0]=_[d-1]=1,c(s,_,l,0,d-1);var x,V=[];for(x=0;x<d;x++)_[x]&&V.push(s[x]);return V}function c(s,l,d,p,_){var x=0,V,H,$;for(H=p+1;H<=_-1;H++)$=Te(s[H],s[p],s[_],!0),$>x&&(V=H,x=$);x>d&&(l[V]=1,c(s,l,d,p,V),c(s,l,d,V,_))}function y(s,l){for(var d=[s[0]],p=1,_=0,x=s.length;p<x;p++)te(s[p],s[_])>l&&(d.push(s[p]),_=p);return _<x-1&&d.push(s[x-1]),d}var w;function A(s,l,d,p,_){var x=p?w:W(s,d),V=W(l,d),H,$,Y;for(w=V;;){if(!(x|V))return[s,l];if(x&V)return!1;H=x||V,$=U(s,l,H,d,_),Y=W($,d),H===x?(s=$,x=Y):(l=$,V=Y)}}function U(s,l,d,p,_){var x=l.x-s.x,V=l.y-s.y,H=p.min,$=p.max,Y,ne;return d&8?(Y=s.x+x*($.y-s.y)/V,ne=$.y):d&4?(Y=s.x+x*(H.y-s.y)/V,ne=H.y):d&2?(Y=$.x,ne=s.y+V*($.x-s.x)/x):d&1&&(Y=H.x,ne=s.y+V*(H.x-s.x)/x),new Z(Y,ne,_)}function W(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function te(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Te(s,l,d,p){var _=l.x,x=l.y,V=d.x-_,H=d.y-x,$=V*V+H*H,Y;return $>0&&(Y=((s.x-_)*V+(s.y-x)*H)/$,Y>1?(_=d.x,x=d.y):Y>0&&(_+=V*Y,x+=H*Y)),V=s.x-_,H=s.y-x,p?V*V+H*H:new Z(_,x)}function je(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Be(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),je(s)}function ct(s,l){var d,p,_,x,V,H,$,Y;if(!s||s.length===0)throw new Error("latlngs not passed");je(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=ae([0,0]),me=de(s),Ae=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());Ae<1700&&(ne=Fo(s));var Jt=s.length,kt=[];for(d=0;d<Jt;d++){var Nn=ae(s[d]);kt.push(l.project(ae([Nn.lat-ne.lat,Nn.lng-ne.lng])))}for(d=0,p=0;d<Jt-1;d++)p+=kt[d].distanceTo(kt[d+1])/2;if(p===0)Y=kt[0];else for(d=0,x=0;d<Jt-1;d++)if(V=kt[d],H=kt[d+1],_=V.distanceTo(H),x+=_,x>p){$=(x-p)/_,Y=[H.x-$*(H.x-V.x),H.y-$*(H.y-V.y)];break}var un=l.unproject(G(Y));return ae([un.lat+ne.lat,un.lng+ne.lng])}var Rn={__proto__:null,simplify:zt,pointToSegmentDistance:Sl,closestPointOnSegment:Dc,clipSegment:A,_getEdgeIntersection:U,_getBitCode:W,_sqClosestPointOnSegment:Te,isFlat:je,_flat:Be,polylineCenter:ct},Zn={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new oe(s.y,s.x)},bounds:new X([-180,-90],[180,90])},Ln={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,_=this.R_MINOR/d,x=Math.sqrt(1-_*_),V=x*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),x/2);return p=-d*Math.log(Math.max(H,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,_=Math.sqrt(1-p*p),x=Math.exp(-s.y/d),V=Math.PI/2-2*Math.atan(x),H=0,$=.1,Y;H<15&&Math.abs($)>1e-7;H++)Y=_*Math.sin(V),Y=Math.pow((1-Y)/(1+Y),_/2),$=Math.PI/2-2*Math.atan(x*Y)-V,V+=$;return new oe(V*l,s.x*l/d)}},di={__proto__:null,LonLat:Zn,Mercator:Ln,SphericalMercator:Bt},zo=r({},Ne,{code:"EPSG:3395",projection:Ln,transformation:function(){var s=.5/(Math.PI*Ln.R);return Wn(s,.5,-s,.5)}()}),Uo=r({},Ne,{code:"EPSG:4326",projection:Zn,transformation:Wn(1/180,1,-1/180,.5)}),JC=r({},Se,{projection:Zn,transformation:Wn(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Se.Earth=Ne,Se.EPSG3395=zo,Se.EPSG3857=vs,Se.EPSG900913=pc,Se.EPSG4326=Uo,Se.Simple=JC;var Kn=ot.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),l=_.maxZoom===void 0?l:Math.max(l,_.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ho=Kn.extend({initialize:function(s,l){b(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),eA=function(s,l){return new Ho(s,l)},Vi=Ho.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ho.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ho.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new xe;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),tA=function(s,l){return new Vi(s,l)},Wo=_e.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var _=G(p),x=G(l==="shadow"&&d.shadowAnchor||d.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),x&&(s.style.marginLeft=-x.x+"px",s.style.marginTop=-x.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function nA(s){return new Wo(s)}var Il=Wo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Il.imagePath!="string"&&(Il.imagePath=this._detectIconPath()),(this.options.imagePath||Il.imagePath)+Wo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,_){var x=p.exec(d);return x&&x[_]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Me("div","leaflet-default-icon-path",document.body),l=yr(s,"background-image")||yr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),ev=_n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Gn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,x=Mi(l._icon),V=d.getPixelBounds(),H=d.getPixelOrigin(),$=ue(V.min._subtract(H).add(_),V.max._subtract(H).subtract(_));if(!$.contains(x)){var Y=G((Math.max($.max.x,x.x)-$.max.x)/(V.max.x-$.max.x)-(Math.min($.min.x,x.x)-$.min.x)/(V.min.x-$.min.x),(Math.max($.max.y,x.y)-$.max.y)/(V.max.y-$.max.y)-(Math.min($.min.y,x.y)-$.min.y)/(V.min.y-$.min.y)).multiplyBy(p);d.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),lt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Mi(l._icon),_=l._map.layerPointToLatLng(p);d&&lt(d,p),l._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Vc=Kn.extend({options:{icon:new Il,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=ae(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ae(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),re(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(d,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),x=!1;_!==this._shadow&&(this._removeShadow(),x=!0),_&&(re(_,l),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&x&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&lt(this._icon,s),this._shadow&&lt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ev)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ev(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&an(this._icon,s),this._shadow&&an(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?G(l.iconSize):G(0,0),p=l.iconAnchor?G(l.iconAnchor):G(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function iA(s,l){return new Vc(s,l)}var Tr=Kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jc=Tr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=ae(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ae(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Tr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new X(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function rA(s,l){return new jc(s,l)}var Xf=jc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),b(this,l),this._latlng=ae(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new xe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Tr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Ne.distance){var _=Math.PI/180,x=this._mRadius/Ne.R/_,V=d.project([l+x,s]),H=d.project([l-x,s]),$=V.add(H).divideBy(2),Y=d.unproject($).lat,ne=Math.acos((Math.cos(x*_)-Math.sin(l*_)*Math.sin(Y*_))/(Math.cos(l*_)*Math.cos(Y*_)))/_;(isNaN(ne)||ne===0)&&(ne=x/Math.cos(Math.PI/180*l)),this._point=$.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:$.x-d.project([Y,s-ne]).x,this._radiusY=$.y-V.y}else{var me=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(me).x}this._updateBounds()}});function sA(s,l,d){return new Xf(s,l,d)}var ji=Tr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Te,_,x,V=0,H=this._parts.length;V<H;V++)for(var $=this._parts[V],Y=1,ne=$.length;Y<ne;Y++){_=$[Y-1],x=$[Y];var me=p(s,_,x,!0);me<l&&(l=me,d=p(s,_,x))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ct(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ae(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new xe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return je(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=je(s),p=0,_=s.length;p<_;p++)d?(l[p]=ae(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof oe,_=s.length,x,V;if(p){for(V=[],x=0;x<_;x++)V[x]=this._map.latLngToLayerPoint(s[x]),d.extend(V[x]);l.push(V)}else for(x=0;x<_;x++)this._projectLatlngs(s[x],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,_,x,V,H,$;for(d=0,_=0,x=this._rings.length;d<x;d++)for($=this._rings[d],p=0,V=$.length;p<V-1;p++)H=A($[p],$[p+1],s,p,!0),H&&(l[_]=l[_]||[],l[_].push(H[0]),(H[1]!==$[p+1]||p===V-2)&&(l[_].push(H[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=zt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,_,x,V,H,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,x=this._parts.length;d<x;d++)for(H=this._parts[d],p=0,V=H.length,_=V-1;p<V;_=p++)if(!(!l&&p===0)&&Sl(s,H[_],H[p])<=$)return!0;return!1}});function oA(s,l){return new ji(s,l)}ji._flat=Be;var $o=ji.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=ji.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof oe&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){ji.prototype._setLatLngs.call(this,s),je(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return je(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new X(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,x;p<_;p++)x=El(this._rings[p],s,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,_,x,V,H,$,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(x=0,$=this._parts.length;x<$;x++)for(d=this._parts[x],V=0,Y=d.length,H=Y-1;V<Y;H=V++)p=d[V],_=d[H],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(l=!l);return l||ji.prototype._containsPoint.call(this,s,!0)}});function aA(s,l){return new $o(s,l)}var Fi=Vi.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,d,p,_;if(l){for(d=0,p=l.length;d<p;d++)_=l[d],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var x=this.options;if(x.filter&&!x.filter(s))return this;var V=Fc(s,x);return V?(V.feature=Uc(s),V.defaultOptions=V.options,this.resetStyle(V),x.onEachFeature&&x.onEachFeature(s,V),this.addLayer(V)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Fc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,_=[],x=l&&l.pointToLayer,V=l&&l.coordsToLatLng||Yf,H,$,Y,ne;if(!p&&!d)return null;switch(d.type){case"Point":return H=V(p),tv(x,s,H,l);case"MultiPoint":for(Y=0,ne=p.length;Y<ne;Y++)H=V(p[Y]),_.push(tv(x,s,H,l));return new Vi(_);case"LineString":case"MultiLineString":return $=Bc(p,d.type==="LineString"?0:1,V),new ji($,l);case"Polygon":case"MultiPolygon":return $=Bc(p,d.type==="Polygon"?1:2,V),new $o($,l);case"GeometryCollection":for(Y=0,ne=d.geometries.length;Y<ne;Y++){var me=Fc({geometry:d.geometries[Y],type:"Feature",properties:s.properties},l);me&&_.push(me)}return new Vi(_);case"FeatureCollection":for(Y=0,ne=d.features.length;Y<ne;Y++){var Ae=Fc(d.features[Y],l);Ae&&_.push(Ae)}return new Vi(_);default:throw new Error("Invalid GeoJSON object.")}}function tv(s,l,d,p){return s?s(l,d):new Vc(d,p&&p.markersInheritOptions&&p)}function Yf(s){return new oe(s[1],s[0],s[2])}function Bc(s,l,d){for(var p=[],_=0,x=s.length,V;_<x;_++)V=l?Bc(s[_],l-1,d):(d||Yf)(s[_]),p.push(V);return p}function Jf(s,l){return s=ae(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function zc(s,l,d,p){for(var _=[],x=0,V=s.length;x<V;x++)_.push(l?zc(s[x],je(s[x])?0:l-1,d,p):Jf(s[x],p));return!l&&d&&_.length>0&&_.push(_[0].slice()),_}function qo(s,l){return s.feature?r({},s.feature,{geometry:l}):Uc(l)}function Uc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var ep={toGeoJSON:function(s){return qo(this,{type:"Point",coordinates:Jf(this.getLatLng(),s)})}};Vc.include(ep),Xf.include(ep),jc.include(ep),ji.include({toGeoJSON:function(s){var l=!je(this._latlngs),d=zc(this._latlngs,l?1:0,!1,s);return qo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),$o.include({toGeoJSON:function(s){var l=!je(this._latlngs),d=l&&!je(this._latlngs[0]),p=zc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),qo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Ho.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),qo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var x=_.toGeoJSON(s);if(d)p.push(x.geometry);else{var V=Uc(x);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),d?qo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function nv(s,l){return new Fi(s,l)}var lA=nv,Hc=Kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=de(l),b(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&An(this._image),this},bringToBack:function(){return this._map&&kn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=de(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Me("img");if(re(l,"leaflet-image-layer"),this._zoomAnimated&&re(l,"leaflet-zoom-animated"),this.options.className&&re(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ni(this._image,d,l)},_reset:function(){var s=this._image,l=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();lt(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){an(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),uA=function(s,l,d){return new Hc(s,l,d)},iv=Hc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Me("video");if(re(l,"leaflet-image-layer"),this._zoomAnimated&&re(l,"leaflet-zoom-animated"),this.options.className&&re(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],_=0;_<d.length;_++)p.push(d[_].src);this._url=d.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var V=Me("source");V.src=this._url[x],l.appendChild(V)}}});function cA(s,l,d){return new iv(s,l,d)}var rv=Hc.extend({_initImage:function(){var s=this._image=this._url;re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function hA(s,l,d){return new rv(s,l,d)}var fi=Kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof oe||S(s))?(this._latlng=ae(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&an(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&an(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(an(this._container,0),this._removeTimeout=setTimeout(a(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ae(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&An(this._container),this},bringToBack:function(){return this._map&&kn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Vi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=G(this.options.offset),d=this._getAnchor();this._zoomAnimated?lt(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(s,l,d,p){var _=l;return _ instanceof s||(_=new s(p).setContent(l)),d&&_.setLatLng(d),_}}),Kn.include({_initOverlay:function(s,l,d,p){var _=d;return _ instanceof s?(b(_,p),_._source=this):(_=l&&!p?l:new s(p,this),_.setContent(d)),_}});var Wc=fi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,fi.prototype.openOn.call(this,s)},onAdd:function(s){fi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Tr||this._source.on("preclick",Fe))},onRemove:function(s){fi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Tr||this._source.off("preclick",Fe))},getEvents:function(){var s=fi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Me("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Me("div",s+"-content-wrapper",l);if(this._contentNode=Me("div",s+"-content",d),Ls(l),ml(this._contentNode),we(l,"contextmenu",Fe),this._tipContainer=Me("div",s+"-tip-container",l),this._tip=Me("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Me("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',we(p,"click",function(_){mt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,_=this.options.maxHeight,x="leaflet-popup-scrolled";_&&p>_?(l.height=_+"px",re(s,x)):$e(s,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();lt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(yr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,_=new Z(this._containerLeft,-d-this._containerBottom);_._add(Mi(this._container));var x=s.layerPointToContainerPoint(_),V=G(this.options.autoPanPadding),H=G(this.options.autoPanPaddingTopLeft||V),$=G(this.options.autoPanPaddingBottomRight||V),Y=s.getSize(),ne=0,me=0;x.x+p+$.x>Y.x&&(ne=x.x+p-Y.x+$.x),x.x-ne-H.x<0&&(ne=x.x-H.x),x.y+d+$.y>Y.y&&(me=x.y+d-Y.y+$.y),x.y-me-H.y<0&&(me=x.y-H.y),(ne||me)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,me]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),dA=function(s,l){return new Wc(s,l)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(s,l,d){return this._initOverlay(Wc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Kn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Wc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Vi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){li(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Tr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var $c=fi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){fi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){fi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=fi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Me("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,_=this._container,x=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(s),H=this.options.direction,$=_.offsetWidth,Y=_.offsetHeight,ne=G(this.options.offset),me=this._getAnchor();H==="top"?(l=$/2,d=Y):H==="bottom"?(l=$/2,d=0):H==="center"?(l=$/2,d=Y/2):H==="right"?(l=0,d=Y/2):H==="left"?(l=$,d=Y/2):V.x<x.x?(H="right",l=0,d=Y/2):(H="left",l=$+(ne.x+me.x)*2,d=Y/2),s=s.subtract(G(l,d,!0)).add(ne).add(me),$e(_,"leaflet-tooltip-right"),$e(_,"leaflet-tooltip-left"),$e(_,"leaflet-tooltip-top"),$e(_,"leaflet-tooltip-bottom"),re(_,"leaflet-tooltip-"+H),lt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&an(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fA=function(s,l){return new $c(s,l)};Ce.include({openTooltip:function(s,l,d){return this._initOverlay($c,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Kn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay($c,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Vi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(we(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),we(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var sv=Wo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Xt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=G(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function pA(s){return new sv(s)}Wo.Default=Il;var Cl=Kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ve(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(An(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(kn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,_=l.length,x;p<_;p++)x=l[p].style.zIndex,l[p]!==this._container&&x&&(d=s(d,+x));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){an(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var x=Math.min(1,(s-_.loaded)/200);an(_.el,x),x<1?l=!0:(_.active?d=!0:this._onOpaqueTile(_),_.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Me("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Ve(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Me("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ve(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var _=Math.floor(s/2),x=Math.floor(l/2),V=d-1,H=new Z(+_,+x);H.z=+V;var $=this._tileCoordsToKey(H),Y=this._tiles[$];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),V>p?this._retainParent(_,x,V,p):!1)},_retainChildren:function(s,l,d,p){for(var _=2*s;_<2*s+2;_++)for(var x=2*l;x<2*l+2;x++){var V=new Z(_,x);V.z=d+1;var H=this._tileCoordsToKey(V),$=this._tiles[H];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);d+1<p&&this._retainChildren(_,x,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var _=Math.round(l);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var x=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||x)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();le.any3d?Ni(s.el,_,p):lt(s.el,_)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),_=l.project(s,this._tileZoom).floor(),x=l.getSize().divideBy(p*2);return new X(_.subtract(x),_.add(x))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),x=_.getCenter(),V=[],H=this.options.keepBuffer,$=new X(_.getBottomLeft().subtract([H,-H]),_.getTopRight().add([H,-H]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var ne=this._tiles[Y].coords;(ne.z!==this._tileZoom||!$.contains(new Z(ne.x,ne.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var me=_.min.y;me<=_.max.y;me++)for(var Ae=_.min.x;Ae<=_.max.x;Ae++){var Jt=new Z(Ae,me);if(Jt.z=this._tileZoom,!!this._isValidTile(Jt)){var kt=this._tiles[this._tileCoordsToKey(Jt)];kt?kt.current=!0:V.push(Jt)}}if(V.sort(function(un,Zo){return un.distanceTo(x)-Zo.distanceTo(x)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Nn=document.createDocumentFragment();for(Ae=0;Ae<V.length;Ae++)this._addTile(V[Ae],Nn);this._level.el.appendChild(Nn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return de(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),_=p.add(d),x=l.unproject(p,s.z),V=l.unproject(_,s.z);return[x,V]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new xe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Ve(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){re(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,le.ielt9&&this.options.opacity<1&&an(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(a(this._tileReady,this,s,null,_)),lt(_,d),this._tiles[p]={el:_,coords:s,current:!0},l.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(an(d.el,0),z(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(re(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new X(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function mA(s){return new Cl(s)}var Go=Cl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return we(d,"load",a(this._tileOnLoad,this,l,d)),we(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return E(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=q;var d=this._tiles[s].coords;Ve(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),Cl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return Cl.prototype._tileReady.call(this,s,l,d)}});function ov(s,l){return new Go(s,l)}var av=Go.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=b(this,l);var _=l.detectRetina&&le.retina?2:1,x=this.getTileSize();d.width=x.x*_,d.height=x.y*_,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Go.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=ue(d.project(l[0]),d.project(l[1])),_=p.min,x=p.max,V=(this._wmsVersion>=1.3&&this._crs===Uo?[_.y,_.x,x.y,x.x]:[_.x,_.y,x.x,x.y]).join(","),H=Go.prototype.getTileUrl.call(this,s);return H+F(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function gA(s,l){return new av(s,l)}Go.WMS=av,ov.wms=gA;var Bi=Kn.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,l),x=p.multiplyBy(-d).add(_).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?Ni(this._container,x,d):lt(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new X(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),lv=Bi.extend({options:{tolerance:0},getEvents:function(){var s=Bi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");we(s,"mousemove",this._onMouseMove,this),we(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),we(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,Ve(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=le.retina?2:1;lt(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,_;for(_=0;_<l.length;_++){if(p=Number(l[_]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,_,x,V=s._parts,H=V.length,$=this._ctx;if(H){for($.beginPath(),d=0;d<H;d++){for(p=0,_=V[d].length;p<_;p++)x=V[d][p],$[p?"lineTo":"moveTo"](x.x,x.y);l&&$.closePath()}this._fillStroke($,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(d.save(),d.scale(1,_)),d.beginPath(),d.arc(l.x,l.y/_,p,0,Math.PI*2,!1),_!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&($e(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(re(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function uv(s){return le.canvas?new lv(s):null}var Al=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),yA={_initContainer:function(){this._container=Me("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Al("shape");re(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Al("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Ve(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Al("stroke")),_.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(_.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Al("fill")),_.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(_.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){An(s._container)},_bringToBack:function(s){kn(s._container)}},qc=le.vml?Al:mc,kl=Bi.extend({_initContainer:function(){this._container=qc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),lt(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=qc("path");s.options.className&&re(l,s.options.className),s.options.interactive&&re(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ve(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,To(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,_="a"+d+","+p+" 0 1,0 ",x=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+_+d*2+",0 "+_+-d*2+",0 ";this._setPath(s,x)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){An(s._path)},_bringToBack:function(s){kn(s._path)}});le.vml&&kl.include(yA);function cv(s){return le.svg||le.vml?new kl(s):null}Ce.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&uv(s)||cv(s)}});var hv=$o.extend({initialize:function(s,l){$o.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=de(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function _A(s,l){return new hv(s,l)}kl.create=qc,kl.pointsToPath=To,Fi.geometryToLayer=Fc,Fi.coordsToLatLng=Yf,Fi.coordsToLatLngs=Bc,Fi.latLngToCoords=Jf,Fi.latLngsToCoords=zc,Fi.getFeature=qo,Fi.asFeature=Uc,Ce.mergeOptions({boxZoom:!0});var dv=_n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qn(),Lo(),this._startPoint=this._map.mouseEventToContainerPoint(s),we(document,{contextmenu:li,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Me("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new X(this._point,this._startPoint),d=l.getSize();lt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Ve(this._box),$e(this._container,"leaflet-crosshair")),yn(),No(),Ue(document,{contextmenu:li,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",dv),Ce.mergeOptions({doubleClickZoom:!0});var fv=_n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,_=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(_):l.setZoomAround(s.containerPoint,_)}});Ce.addInitHook("addHandler","doubleClickZoom",fv),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var pv=_n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Gn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=de(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-l+d)%s+l-d,x=(p+l+d)%s-l-d,V=Math.abs(_+d)<Math.abs(x+d)?_:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,V=d.easeLinearity,H=_.multiplyBy(V/x),$=H.distanceTo([0,0]),Y=Math.min(d.inertiaMaxSpeed,$),ne=H.multiplyBy(Y/$),me=Y/(d.inertiaDeceleration*V),Ae=ne.multiplyBy(-me/2).round();!Ae.x&&!Ae.y?l.fire("moveend"):(Ae=l._limitOffset(Ae,l.options.maxBounds),D(function(){l.panBy(Ae,{duration:me,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",pv),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mv=_n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),we(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,_;for(p=0,_=d.left.length;p<_;p++)l[d.left[p]]=[-1*s,0];for(p=0,_=d.right.length;p<_;p++)l[d.right[p]]=[s,0];for(p=0,_=d.down.length;p<_;p++)l[d.down[p]]=[0,s];for(p=0,_=d.up.length;p<_;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,_;for(p=0,_=d.zoomIn.length;p<_;p++)l[d.zoomIn[p]]=s;for(p=0,_=d.zoomOut.length;p<_;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){we(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=G(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(G(p),d.options.maxBounds)),d.options.worldCopyJump){var _=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(_)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;li(s)}}});Ce.addInitHook("addHandler","keyboard",mv),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var gv=_n.extend({addHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=yl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),li(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,x=d?Math.ceil(_/d)*d:_,V=s._limitZoom(l+(this._delta>0?x:-x))-l;this._delta=0,this._startTime=null,V&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+V):s.setZoomAround(this._lastMousePos,l+V))}});Ce.addInitHook("addHandler","scrollWheelZoom",gv);var vA=600;Ce.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var yv=_n.extend({addHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(we(document,"touchend",mt),we(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),vA),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ue(document,"touchend",mt),Ue(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Ce.addInitHook("addHandler","tapHold",yv),Ce.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var _v=_n.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),mt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),_=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(_,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&_<1||this._zoom>l.getMaxZoom()&&_>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var x=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&x.x===0&&x.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var V=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(V,this,!0),mt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",_v),Ce.BoxZoom=dv,Ce.DoubleClickZoom=fv,Ce.Drag=pv,Ce.Keyboard=mv,Ce.ScrollWheelZoom=gv,Ce.TapHold=yv,Ce.TouchZoom=_v,n.Bounds=X,n.Browser=le,n.CRS=Se,n.Canvas=lv,n.Circle=Xf,n.CircleMarker=jc,n.Class=_e,n.Control=ln,n.DivIcon=sv,n.DivOverlay=fi,n.DomEvent=Ms,n.DomUtil=Qf,n.Draggable=Gn,n.Evented=ot,n.FeatureGroup=Vi,n.GeoJSON=Fi,n.GridLayer=Cl,n.Handler=_n,n.Icon=Wo,n.ImageOverlay=Hc,n.LatLng=oe,n.LatLngBounds=xe,n.Layer=Kn,n.LayerGroup=Ho,n.LineUtil=Rn,n.Map=Ce,n.Marker=Vc,n.Mixin=Oc,n.Path=Tr,n.Point=Z,n.PolyUtil=Bo,n.Polygon=$o,n.Polyline=ji,n.Popup=Wc,n.PosAnimation=vl,n.Projection=di,n.Rectangle=hv,n.Renderer=Bi,n.SVG=kl,n.SVGOverlay=rv,n.TileLayer=Go,n.Tooltip=$c,n.Transformation=at,n.Util=M,n.VideoOverlay=iv,n.bind=a,n.bounds=ue,n.canvas=uv,n.circle=sA,n.circleMarker=rA,n.control=ci,n.divIcon=pA,n.extend=r,n.featureGroup=tA,n.geoJSON=nv,n.geoJson=lA,n.gridLayer=mA,n.icon=nA,n.imageOverlay=uA,n.latLng=ae,n.latLngBounds=de,n.layerGroup=eA,n.map=Do,n.marker=iA,n.point=G,n.polygon=aA,n.polyline=oA,n.popup=dA,n.rectangle=_A,n.setOptions=b,n.stamp=h,n.svg=cv,n.svgOverlay=hA,n.tileLayer=ov,n.tooltip=fA,n.transformation=Wn,n.version=i,n.videoOverlay=cA;var wA=window.L;n.noConflict=function(){return window.L=wA,this},window.L=n})})(Hg,Hg.exports);var fc=Hg.exports;const KC=w1(fc);function J_(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function QC(t,e){return e==null?function(i,r){const o=j.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=j.useRef();o.current||(o.current=t(i,r));const a=j.useRef(i),{instance:u}=o.current;return j.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function XC(t,e){j.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function pB(t){return function(n){const i=X_(),r=t(Y_(n,i),i);return lB(i.map,n.attribution),ZC(r.current,n.eventHandlers),XC(r.current,i),r}}function mB(t,e){const n=j.useRef();j.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function gB(t){return function(n){const i=X_(),r=t(Y_(n,i),i);return ZC(r.current,n.eventHandlers),XC(r.current,i),mB(r.current,n),r}}function YC(t,e){const n=QC(t,e),i=gB(n);return dB(i)}function yB(t,e){const n=QC(t,e),i=pB(n);return fB(i)}function _B(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Uf(){return X_().map}function vB(t){const e=Uf();return j.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const Wg=YC(function({center:e,children:n,...i},r){const o=new fc.CircleMarker(e,i);return J_(o,$C(r,{overlayContainer:o}))},uB);function $g(){return $g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$g.apply(this,arguments)}function wB({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[v]=j.useState({className:r,id:o,style:u}),[T,k]=j.useState(null);j.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const b=j.useCallback(C=>{if(C!==null&&T===null){const E=new fc.Map(C,m);n!=null&&f!=null?E.setView(n,f):t!=null&&E.fitBounds(t,e),h!=null&&E.whenReady(h),k(hB(E))}},[]);j.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const F=T?Js.createElement(GC,{value:T},i):a??null;return Js.createElement("div",$g({},v,{ref:b}),F)}const TB=j.forwardRef(wB),v1=YC(function({positions:e,...n},i){const r=new fc.Polyline(e,n);return J_(r,$C(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),xB=yB(function({url:e,...n},i){const r=new fc.TileLayer(e,Y_(n,i));return J_(r,i)},function(e,n,i){_B(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete KC.Icon.Default.prototype._getIconUrl;KC.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function EB({devMode:t}){const[e,n]=j.useState(OC),[i,r]=j.useState(MC);return vB({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?P.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:P.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[P.jsxs("div",{children:["zoom: ",e]}),P.jsxs("div",{children:["lat: ",i[0]]}),P.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function PB({hood:t}){const e=Uf();return j.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function SB({onShow:t}){const e=Uf(),[n,i]=j.useState(null);if(j.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return P.jsx(Wg,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function IB(){const t=Uf(),[e,n]=j.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return P.jsx(fe.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:P.jsx(fe.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:P.jsx(HF,{size:20,className:"text-white"})})})}function CB({point:t,onClose:e}){const n=t.capturedBy?Kl(t.capturedBy):"#495057",i=zf(t),r=t.status==="ghost";return P.jsx(fe.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:P.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${n}40`},children:[P.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:P.jsx(eB,{size:16,className:"text-white/50"})}),P.jsxs("div",{className:"flex items-start gap-3",children:[P.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${n}20`,border:`1px solid ${n}40`},children:r?P.jsx($F,{size:20,className:"text-white/30"}):t.capturedBy?P.jsx(QF,{size:20,style:{color:n}}):P.jsx(ZF,{size:20,style:{color:n}})}),P.jsxs("div",{className:"flex-1",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),r&&P.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),P.jsx("p",{className:"text-sm text-white/40",children:t.area}),P.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[P.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&P.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),P.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[P.jsxs("span",{className:"text-lg font-bold",style:{color:n},children:[i," pts"]}),t.capturedBy?P.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:["Captured by ",t.capturedBy]}):P.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:r?"Gone":"Unclaimed"})]})]})]})]})})}const sm=[null,...ns];function AB(){const{player:t,artPoints:e,captureArt:n}=hr(),[i,r]=j.useState(null),[o,a]=j.useState(!1),[u,h]=j.useState(e),[f,m]=j.useState(Bg.vysocany);j.useEffect(()=>{h(e)},[e]);const g=C=>{o?h(E=>E.map(S=>{if(S.id===C.id){const q=(sm.indexOf(S.capturedBy)+1)%sm.length;return{...S,capturedBy:sm[q]}}return S})):r(C)},v=()=>{h(e.map(C=>({...C,capturedBy:null})))},T=o?u:e,k=j.useMemo(()=>RF(T),[T]),b=j.useMemo(()=>DC(T),[T]),F=Object.values(b).reduce((C,E)=>C+E,0)||1;return P.jsxs("div",{className:"relative w-full h-full",children:[P.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(b).map(([C,E])=>{const S=E/F*100;return P.jsx(fe.div,{className:"h-full",style:{backgroundColor:Kl(C)},initial:{width:0},animate:{width:`${S}%`},transition:{duration:.8}},C)})}),P.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[P.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),P.jsx("div",{className:"space-y-1.5",children:ns.map(C=>P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:Kl(C)}}),P.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:C}),P.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[b[C]||0," pts"]})]},C))}),P.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[P.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),P.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),P.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[P.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),P.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),P.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[P.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),P.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),P.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(Bg).map(C=>P.jsx(fe.button,{onClick:()=>m(C),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f.id===C.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:C.name},C.id))}),P.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[P.jsx(fe.button,{onClick:()=>a(!o),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${o?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:P.jsx(UF,{size:18})}),o&&P.jsx(fe.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:v,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:P.jsx(BC,{size:18})})]}),P.jsx(Fu,{children:o&&P.jsx(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:P.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),P.jsxs(TB,{center:MC,zoom:OC,minZoom:AF,maxZoom:kF,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[P.jsx(xB,{url:m1.tileUrl,attribution:m1.attribution}),P.jsx(IB,{}),P.jsx(EB,{devMode:o}),P.jsx(PB,{hood:f}),P.jsx(SB,{}),P.jsx(v1,{positions:g1.map(C=>C.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),g1.map(C=>P.jsx(Wg,{center:C.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},C.name)),Object.entries(k).map(([C,E])=>E.map((S,B)=>P.jsx(v1,{positions:[S.from,S.to],pathOptions:{color:Kl(C),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${C}-line-${B}`))),T.map(C=>{const E=C.capturedBy?Kl(C.capturedBy):"#ffffff",S=!!C.capturedBy,B=C.status==="ghost";return P.jsx(Wg,{center:C.location,radius:8,pathOptions:{color:o?"#a855f7":B?"#6b7280":E,fillColor:S?E:B?"#374151":"#0a0a0f",fillOpacity:B?.4:S?.8:1,weight:o?3:2,opacity:B?.5:1,dashArray:B?"3, 3":void 0},eventHandlers:{click:q=>{q.originalEvent.stopPropagation(),g(C)}}},C.id)})]}),P.jsx(Fu,{children:i&&P.jsx(CB,{point:i,onClose:()=>r(null)})})]})}function kB(){return P.jsx(fe.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:P.jsx(AB,{})})}function bB(){const{player:t}=hr(),[e,n]=j.useState(!1);return j.useEffect(()=>{t.team&&!e&&(n(!0),setTimeout(()=>{const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"},500))},[t.team,e]),t.team?P.jsx(fe.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:P.jsxs("div",{className:"text-center",children:[P.jsx(fe.div,{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:P.jsx(K_,{size:48,className:"text-white"})}),P.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Opening AR Scanner"}),P.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Point your camera at street art to capture it"}),P.jsx(GF,{className:"w-6 h-6 animate-spin mx-auto text-purple-400"})]})}):P.jsx(fe.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:P.jsx(VF,{size:36,className:"text-amber-500"})}),P.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),P.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const RB={red:"Red Team",blue:"Blue Team"};function LB({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return P.jsxs(fe.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[P.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${Ke[t].hex}15 0%, transparent 60%)`}}),P.jsx(fe.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:Ke[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),P.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${Ke[t].hex}30`},children:P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?P.jsx(WF,{size:20,className:"text-white"}):P.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),P.jsxs("div",{className:"flex-1",children:[P.jsx("p",{className:"font-semibold text-white",children:RB[t]}),P.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[P.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Ke[t].hex}}),P.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("p",{className:"text-2xl font-bold",style:{color:Ke[t].hex},children:e.toLocaleString()}),P.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function NB({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return P.jsxs(fe.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[P.jsx("div",{className:"w-8 flex justify-center",children:i?P.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:P.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):P.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),P.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${Ke[t.team].hex}20`,color:Ke[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),P.jsxs("div",{className:"flex-1 min-w-0",children:[P.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&P.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),P.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),P.jsx("div",{className:"text-right",children:P.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function MB(){var m;const{teamScores:t,player:e,allPlayers:n}=hr(),r=Object.entries(t).filter(([g])=>Ke[g]).sort((g,v)=>v[1]-g[1]),o=Object.values(t).reduce((g,v)=>g+v,0)||1,a=[...n];!a.find(g=>g.name===e.name)&&e.team&&e.name&&a.push({id:"current",name:e.name,team:e.team,score:e.score||0,captures:((m=e.capturedArt)==null?void 0:m.length)||0});const h=a.sort((g,v)=>v.score-g.score),f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return P.jsxs(fe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:f,children:[P.jsx(fe.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:P.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[P.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:P.jsx(Q_,{size:20,className:"text-white"})}),P.jsxs("div",{children:[P.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),P.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),P.jsxs("div",{className:"mb-8",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(XF,{size:16,className:"text-white/40"}),P.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),P.jsx("div",{className:"space-y-3",children:r.map(([g,v],T)=>P.jsx(LB,{team:g,score:v,rank:T,totalScore:o},g))})]}),P.jsxs("div",{children:[P.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[P.jsx(FC,{size:16,className:"text-white/40"}),P.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),P.jsx("div",{className:"space-y-2",children:h.map((g,v)=>P.jsx(NB,{player:g,rank:v,isCurrentPlayer:g.id==="current"},g.id))})]})]})}function OB(){var f,m;const{player:t,artPoints:e,resetAll:n}=hr(),[i,r]=j.useState(!1),o=(e==null?void 0:e.filter(g=>t.capturedArt.includes(g.id)))||[],a=t.team?Ke[t.team].hex:"#64748b",u=t.team==="red"?"Red Team":"Blue Team",h=async()=>{if(!i){r(!0);try{const g=["red","blue"];let v=0,T=0;for(const k of ea){const b=g[Math.floor(Math.random()*g.length)],F=zf(k);b==="red"?v+=F:T+=F,await mu(pu(Or,"streetart-captures",k.id),{artId:k.id,capturedBy:b,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:F,isFirstCapture:!0,isRecapture:!1})}await mu(pu(Or,"streetart-teams","red"),{score:v},{merge:!0}),await mu(pu(Or,"streetart-teams","blue"),{score:T},{merge:!0})}catch(g){console.error("Failed to randomize:",g)}r(!1)}};return P.jsxs(fe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsx(fe.div,{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${a}, ${a}50)`},whileHover:{scale:1.05},children:P.jsx("span",{className:"text-3xl font-black text-white",children:((m=(f=t.name)==null?void 0:f.charAt(0))==null?void 0:m.toUpperCase())||"?"})}),P.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:t.name}),P.jsx("p",{className:"text-sm",style:{color:a},children:u})]}),P.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-8",children:[P.jsxs(fe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#eab30815",border:"1px solid #eab30830"},whileHover:{scale:1.02},children:[P.jsx(Q_,{size:24,className:"mx-auto mb-2 text-yellow-500"}),P.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),P.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Score"})]}),P.jsxs(fe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#22c55e15",border:"1px solid #22c55e30"},whileHover:{scale:1.02},children:[P.jsx(K_,{size:24,className:"mx-auto mb-2 text-green-500"}),P.jsx("p",{className:"text-2xl font-bold text-white",children:o.length}),P.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Captures"})]}),P.jsxs(fe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#f9731615",border:"1px solid #f9731630"},whileHover:{scale:1.02},children:[P.jsx(FC,{size:24,className:"mx-auto mb-2 text-orange-500"}),P.jsx("p",{className:"text-2xl font-bold text-white",children:"0"}),P.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Streak"})]})]}),o.length>0&&P.jsxs("div",{className:"mb-8",children:[P.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Your Captures"}),P.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.slice(0,8).map((g,v)=>P.jsx(fe.div,{className:"aspect-square rounded-xl flex items-center justify-center",style:{backgroundColor:`${a}20`,border:`1px solid ${a}30`},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:v*.05},children:P.jsx("span",{className:"text-lg",children:""})},g.id)),o.length>8&&P.jsx("div",{className:"aspect-square rounded-xl flex items-center justify-center bg-white/5",children:P.jsxs("span",{className:"text-xs text-white/40",children:["+",o.length-8]})})]})]}),P.jsxs("div",{className:"mb-6",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[P.jsx(WC,{size:14,className:"text-purple-400"}),P.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Game Master"})]}),P.jsxs(fe.button,{onClick:h,disabled:i,className:"w-full p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 flex items-center gap-3 disabled:opacity-50",whileTap:{scale:.98},children:[P.jsx(zC,{size:20,className:"text-purple-400"}),P.jsx("span",{className:"text-sm text-purple-300",children:i?"Randomizing...":"Randomize All Territories"})]})]}),P.jsxs(fe.button,{onClick:n,className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center gap-2 text-white/40 hover:text-white/60 transition-colors",whileTap:{scale:.98},children:[P.jsx(BC,{size:14}),P.jsx("span",{className:"text-xs",children:"Reset Game Data"})]}),P.jsx("p",{className:"text-center text-[10px] text-white/20 mt-6",children:"Street Art CTF v1.2.0"})]})}const DB=[{path:"/",icon:qF,label:"Home"},{path:"/map",icon:zg,label:"Map"},{path:"/scanner",icon:KF,label:"Scan"},{path:"/leaderboard",icon:Q_,label:"Ranks"},{path:"/profile",icon:YF,label:"You"}];function VB(){return P.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[P.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),P.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:DB.map(({path:t,icon:e,label:n})=>P.jsx(s2,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>P.jsxs(fe.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&P.jsx(fe.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),P.jsx(fe.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:P.jsx(e,{size:20,strokeWidth:i?2.5:2})}),P.jsx(fe.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function jB(){var i;const{captureNotification:t}=hr();if(!t)return null;const e=((i=Ke[t.team])==null?void 0:i.hex)||"#888",n=t.team==="red"?"RED TEAM":"BLUE TEAM";return P.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none",style:{backgroundColor:`${e}20`},children:P.jsxs(fe.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:15},className:"text-center p-8",children:[P.jsx(fe.div,{className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:`${e}30`,border:`3px solid ${e}`},initial:{rotate:-10},animate:{rotate:0},children:t.isRecapture?P.jsx(UC,{size:48,style:{color:e}}):P.jsx(jC,{size:48,style:{color:e}})}),P.jsx(fe.h1,{className:"text-3xl font-black mb-2",style:{color:e},initial:{y:20},animate:{y:0},children:t.isRecapture?"RECAPTURED!":"CAPTURED!"}),P.jsx(fe.p,{className:"text-xl font-bold text-white mb-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:t.artName}),P.jsxs(fe.div,{className:"flex items-center justify-center gap-3",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[P.jsx("span",{className:"text-white/60",children:"by"}),P.jsx("span",{className:"font-semibold text-white",children:t.playerName}),P.jsx("span",{className:"px-3 py-1 rounded font-bold text-sm",style:{backgroundColor:e,color:"white"},children:n})]})]})})}function Th({children:t}){const{player:e}=hr();return e.team&&e.name&&e.name!=="Street Artist"?t:P.jsx(UE,{to:"/onboarding",replace:!0})}function FB(){const t=po(),{player:e}=hr(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding";return P.jsxs("div",{className:"h-full w-full flex flex-col",children:[P.jsx(Fu,{children:P.jsx(jB,{})}),P.jsx(Fu,{mode:"wait",children:P.jsxs(GR,{location:t,children:[P.jsx(js,{path:"/onboarding",element:P.jsx(rB,{})}),P.jsx(js,{path:"/",element:n?P.jsx(aB,{}):P.jsx(UE,{to:"/onboarding",replace:!0})}),P.jsx(js,{path:"/map",element:P.jsx(Th,{children:P.jsx(kB,{})})}),P.jsx(js,{path:"/scanner",element:P.jsx(Th,{children:P.jsx(bB,{})})}),P.jsx(js,{path:"/leaderboard",element:P.jsx(Th,{children:P.jsx(MB,{})})}),P.jsx(js,{path:"/profile",element:P.jsx(Th,{children:P.jsx(OB,{})})})]},t.pathname)}),!i&&n&&P.jsx(VB,{})]})}function BB(){return P.jsx(MF,{children:P.jsx(FB,{})})}om.createRoot(document.getElementById("root")).render(P.jsx(Js.StrictMode,{children:P.jsx(t2,{children:P.jsx(BB,{})})}));
