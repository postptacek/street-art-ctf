function XA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var YA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z1={exports:{}},of={},F1={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nc=Symbol.for("react.element"),JA=Symbol.for("react.portal"),eb=Symbol.for("react.fragment"),tb=Symbol.for("react.strict_mode"),nb=Symbol.for("react.profiler"),ib=Symbol.for("react.provider"),rb=Symbol.for("react.context"),sb=Symbol.for("react.forward_ref"),ob=Symbol.for("react.suspense"),ab=Symbol.for("react.memo"),lb=Symbol.for("react.lazy"),Lv=Symbol.iterator;function ub(t){return t===null||typeof t!="object"?null:(t=Lv&&t[Lv]||t["@@iterator"],typeof t=="function"?t:null)}var B1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U1=Object.assign,H1={};function il(t,e,n){this.props=t,this.context=e,this.refs=H1,this.updater=n||B1}il.prototype.isReactComponent={};il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W1(){}W1.prototype=il.prototype;function Yg(t,e,n){this.props=t,this.context=e,this.refs=H1,this.updater=n||B1}var Jg=Yg.prototype=new W1;Jg.constructor=Yg;U1(Jg,il.prototype);Jg.isPureReactComponent=!0;var Mv=Array.isArray,$1=Object.prototype.hasOwnProperty,ey={current:null},q1={key:!0,ref:!0,__self:!0,__source:!0};function G1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)$1.call(e,i)&&!q1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:nc,type:t,key:o,ref:a,props:r,_owner:ey.current}}function cb(t,e){return{$$typeof:nc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ty(t){return typeof t=="object"&&t!==null&&t.$$typeof===nc}function hb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ov=/\/+/g;function pp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hb(""+t.key):e.toString(36)}function Rh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case nc:case JA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+pp(a,0):i,Mv(r)?(n="",t!=null&&(n=t.replace(Ov,"$&/")+"/"),Rh(r,e,n,"",function(f){return f})):r!=null&&(ty(r)&&(r=cb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Ov,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Mv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+pp(o,u);a+=Rh(o,e,n,h,r)}else if(h=ub(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+pp(o,u++),a+=Rh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function eh(t,e,n){if(t==null)return t;var i=[],r=0;return Rh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function db(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dn={current:null},Nh={transition:null},fb={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:Nh,ReactCurrentOwner:ey};function Z1(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:eh,forEach:function(t,e,n){eh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return eh(t,function(){e++}),e},toArray:function(t){return eh(t,function(e){return e})||[]},only:function(t){if(!ty(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=il;Ve.Fragment=eb;Ve.Profiler=nb;Ve.PureComponent=Yg;Ve.StrictMode=tb;Ve.Suspense=ob;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fb;Ve.act=Z1;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=U1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ey.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)$1.call(e,h)&&!q1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:nc,type:t.type,key:r,ref:o,props:i,_owner:a}};Ve.createContext=function(t){return t={$$typeof:rb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ib,_context:t},t.Consumer=t};Ve.createElement=G1;Ve.createFactory=function(t){var e=G1.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:sb,render:t}};Ve.isValidElement=ty;Ve.lazy=function(t){return{$$typeof:lb,_payload:{_status:-1,_result:t},_init:db}};Ve.memo=function(t,e){return{$$typeof:ab,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=Nh.transition;Nh.transition={};try{t()}finally{Nh.transition=e}};Ve.unstable_act=Z1;Ve.useCallback=function(t,e){return dn.current.useCallback(t,e)};Ve.useContext=function(t){return dn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return dn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return dn.current.useEffect(t,e)};Ve.useId=function(){return dn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return dn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return dn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return dn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return dn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return dn.current.useReducer(t,e,n)};Ve.useRef=function(t){return dn.current.useRef(t)};Ve.useState=function(t){return dn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return dn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return dn.current.useTransition()};Ve.version="18.3.1";F1.exports=Ve;var D=F1.exports;const uo=j1(D),pb=XA({__proto__:null,default:uo},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb=D,gb=Symbol.for("react.element"),yb=Symbol.for("react.fragment"),_b=Object.prototype.hasOwnProperty,vb=mb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wb={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)_b.call(e,i)&&!wb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:gb,type:t,key:o,ref:a,props:r,_owner:vb.current}}of.Fragment=yb;of.jsx=K1;of.jsxs=K1;z1.exports=of;var w=z1.exports,mm={},Q1={exports:{}},Mn={},X1={exports:{}},Y1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,he){var J=Z.length;Z.push(he);e:for(;0<J;){var te=J-1>>>1,Se=Z[te];if(0<r(Se,he))Z[te]=he,Z[J]=Se,J=te;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var he=Z[0],J=Z.pop();if(J!==he){Z[0]=J;e:for(var te=0,Se=Z.length,Je=Se>>>1;te<Je;){var Me=2*(te+1)-1,Ne=Z[Me],fe=Me+1,ht=Z[fe];if(0>r(Ne,J))fe<Se&&0>r(ht,Ne)?(Z[te]=ht,Z[fe]=J,te=fe):(Z[te]=Ne,Z[Me]=J,te=Me);else if(fe<Se&&0>r(ht,J))Z[te]=ht,Z[fe]=J,te=fe;else break e}}return he}function r(Z,he){var J=Z.sortIndex-he.sortIndex;return J!==0?J:Z.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,_=3,T=!1,A=!1,k=!1,O=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Z){for(var he=n(f);he!==null;){if(he.callback===null)i(f);else if(he.startTime<=Z)i(f),he.sortIndex=he.expirationTime,e(h,he);else break;he=n(f)}}function B(Z){if(k=!1,C(Z),!A)if(n(h)!==null)A=!0,Ae(G);else{var he=n(f);he!==null&&et(B,he.startTime-Z)}}function G(Z,he){A=!1,k&&(k=!1,b(S),S=-1),T=!0;var J=_;try{for(C(he),g=n(h);g!==null&&(!(g.expirationTime>he)||Z&&!j());){var te=g.callback;if(typeof te=="function"){g.callback=null,_=g.priorityLevel;var Se=te(g.expirationTime<=he);he=t.unstable_now(),typeof Se=="function"?g.callback=Se:g===n(h)&&i(h),C(he)}else i(h);g=n(h)}if(g!==null)var Je=!0;else{var Me=n(f);Me!==null&&et(B,Me.startTime-he),Je=!1}return Je}finally{g=null,_=J,T=!1}}var U=!1,R=null,S=-1,N=5,V=-1;function j(){return!(t.unstable_now()-V<N)}function z(){if(R!==null){var Z=t.unstable_now();V=Z;var he=!0;try{he=R(!0,Z)}finally{he?M():(U=!1,R=null)}}else U=!1}var M;if(typeof P=="function")M=function(){P(z)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Ye=ae.port2;ae.port1.onmessage=z,M=function(){Ye.postMessage(null)}}else M=function(){O(z,0)};function Ae(Z){R=Z,U||(U=!0,M())}function et(Z,he){S=O(function(){Z(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){A||T||(A=!0,Ae(G))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var he=3;break;default:he=_}var J=_;_=he;try{return Z()}finally{_=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var J=_;_=Z;try{return he()}finally{_=J}},t.unstable_scheduleCallback=function(Z,he,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,Z){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=J+Se,Z={id:m++,callback:he,priorityLevel:Z,startTime:J,expirationTime:Se,sortIndex:-1},J>te?(Z.sortIndex=J,e(f,Z),n(h)===null&&Z===n(f)&&(k?(b(S),S=-1):k=!0,et(B,J-te))):(Z.sortIndex=Se,e(h,Z),A||T||(A=!0,Ae(G))),Z},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Z){var he=_;return function(){var J=_;_=he;try{return Z.apply(this,arguments)}finally{_=J}}}})(Y1);X1.exports=Y1;var xb=X1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb=D,Rn=xb;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J1=new Set,Cu={};function xo(t,e){za(t,e),za(t+"Capture",e)}function za(t,e){for(Cu[t]=e,t=0;t<e.length;t++)J1.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gm=Object.prototype.hasOwnProperty,Eb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dv={},Vv={};function Pb(t){return gm.call(Vv,t)?!0:gm.call(Dv,t)?!1:Eb.test(t)?Vv[t]=!0:(Dv[t]=!0,!1)}function Sb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Cb(t,e,n,i){if(e===null||typeof e>"u"||Sb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ny=/[\-:]([a-z])/g;function iy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ny,iy);qt[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ny,iy);qt[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ny,iy);qt[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ry(t,e,n,i){var r=qt.hasOwnProperty(e)?qt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Cb(e,n,r,i)&&(n=null),i||r===null?Pb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Er=Tb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,th=Symbol.for("react.element"),ca=Symbol.for("react.portal"),ha=Symbol.for("react.fragment"),sy=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),eT=Symbol.for("react.provider"),tT=Symbol.for("react.context"),oy=Symbol.for("react.forward_ref"),_m=Symbol.for("react.suspense"),vm=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),nT=Symbol.for("react.offscreen"),jv=Symbol.iterator;function zl(t){return t===null||typeof t!="object"?null:(t=jv&&t[jv]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,mp;function Xl(t){if(mp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mp=e&&e[1]||""}return`
`+mp+t}var gp=!1;function yp(t,e){if(!t||gp)return"";gp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{gp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xl(t):""}function Ib(t){switch(t.tag){case 5:return Xl(t.type);case 16:return Xl("Lazy");case 13:return Xl("Suspense");case 19:return Xl("SuspenseList");case 0:case 2:case 15:return t=yp(t.type,!1),t;case 11:return t=yp(t.type.render,!1),t;case 1:return t=yp(t.type,!0),t;default:return""}}function wm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ha:return"Fragment";case ca:return"Portal";case ym:return"Profiler";case sy:return"StrictMode";case _m:return"Suspense";case vm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tT:return(t.displayName||"Context")+".Consumer";case eT:return(t._context.displayName||"Context")+".Provider";case oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ay:return e=t.displayName||null,e!==null?e:wm(t.type)||"Memo";case zr:e=t._payload,t=t._init;try{return wm(t(e))}catch{}}return null}function Ab(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wm(e);case 8:return e===sy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bb(t){var e=iT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nh(t){t._valueTracker||(t._valueTracker=bb(t))}function rT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=iT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function nd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xm(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ms(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sT(t,e){e=e.checked,e!=null&&ry(t,"checked",e,!1)}function Tm(t,e){sT(t,e);var n=ms(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Em(t,e.type,n):e.hasOwnProperty("defaultValue")&&Em(t,e.type,ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Em(t,e,n){(e!=="number"||nd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yl=Array.isArray;function Ia(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ms(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Pm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Yl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ms(n)}}function oT(t,e){var n=ms(e.value),i=ms(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Uv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ih,lT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ih=ih||document.createElement("div"),ih.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ih.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Iu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kb=["Webkit","ms","Moz","O"];Object.keys(ou).forEach(function(t){kb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ou[e]=ou[t]})});function uT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ou.hasOwnProperty(t)&&ou[t]?(""+e).trim():e+"px"}function cT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=uT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Rb=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cm(t,e){if(e){if(Rb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Im(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Am=null;function ly(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bm=null,Aa=null,ba=null;function Hv(t){if(t=sc(t)){if(typeof bm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=hf(e),bm(t.stateNode,t.type,e))}}function hT(t){Aa?ba?ba.push(t):ba=[t]:Aa=t}function dT(){if(Aa){var t=Aa,e=ba;if(ba=Aa=null,Hv(t),e)for(t=0;t<e.length;t++)Hv(e[t])}}function fT(t,e){return t(e)}function pT(){}var _p=!1;function mT(t,e,n){if(_p)return t(e,n);_p=!0;try{return fT(t,e,n)}finally{_p=!1,(Aa!==null||ba!==null)&&(pT(),dT())}}function Au(t,e){var n=t.stateNode;if(n===null)return null;var i=hf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var km=!1;if(fr)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){km=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{km=!1}function Nb(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var au=!1,id=null,rd=!1,Rm=null,Lb={onError:function(t){au=!0,id=t}};function Mb(t,e,n,i,r,o,a,u,h){au=!1,id=null,Nb.apply(Lb,arguments)}function Ob(t,e,n,i,r,o,a,u,h){if(Mb.apply(this,arguments),au){if(au){var f=id;au=!1,id=null}else throw Error(Y(198));rd||(rd=!0,Rm=f)}}function To(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wv(t){if(To(t)!==t)throw Error(Y(188))}function Db(t){var e=t.alternate;if(!e){if(e=To(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Wv(r),t;if(o===i)return Wv(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function yT(t){return t=Db(t),t!==null?_T(t):null}function _T(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_T(t);if(e!==null)return e;t=t.sibling}return null}var vT=Rn.unstable_scheduleCallback,$v=Rn.unstable_cancelCallback,Vb=Rn.unstable_shouldYield,jb=Rn.unstable_requestPaint,Et=Rn.unstable_now,zb=Rn.unstable_getCurrentPriorityLevel,uy=Rn.unstable_ImmediatePriority,wT=Rn.unstable_UserBlockingPriority,sd=Rn.unstable_NormalPriority,Fb=Rn.unstable_LowPriority,xT=Rn.unstable_IdlePriority,af=null,ki=null;function Bb(t){if(ki&&typeof ki.onCommitFiberRoot=="function")try{ki.onCommitFiberRoot(af,t,void 0,(t.current.flags&128)===128)}catch{}}var fi=Math.clz32?Math.clz32:Wb,Ub=Math.log,Hb=Math.LN2;function Wb(t){return t>>>=0,t===0?32:31-(Ub(t)/Hb|0)|0}var rh=64,sh=4194304;function Jl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function od(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Jl(u):(o&=a,o!==0&&(i=Jl(o)))}else a=n&~r,a!==0?i=Jl(a):o!==0&&(i=Jl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-fi(e),r=1<<n,i|=t[n],e&=~r;return i}function $b(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-fi(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=$b(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Nm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function TT(){var t=rh;return rh<<=1,!(rh&4194240)&&(rh=64),t}function vp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fi(e),t[e]=n}function Gb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-fi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function cy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-fi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Xe=0;function ET(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PT,hy,ST,CT,IT,Lm=!1,oh=[],Yr=null,Jr=null,es=null,bu=new Map,ku=new Map,Ur=[],Zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qv(t,e){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":bu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(e.pointerId)}}function Bl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=sc(e),e!==null&&hy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Kb(t,e,n,i,r){switch(e){case"focusin":return Yr=Bl(Yr,t,e,n,i,r),!0;case"dragenter":return Jr=Bl(Jr,t,e,n,i,r),!0;case"mouseover":return es=Bl(es,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return bu.set(o,Bl(bu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,ku.set(o,Bl(ku.get(o)||null,t,e,n,i,r)),!0}return!1}function AT(t){var e=Ys(t.target);if(e!==null){var n=To(e);if(n!==null){if(e=n.tag,e===13){if(e=gT(n),e!==null){t.blockedOn=e,IT(t.priority,function(){ST(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Am=i,n.target.dispatchEvent(i),Am=null}else return e=sc(n),e!==null&&hy(e),t.blockedOn=n,!1;e.shift()}return!0}function Gv(t,e,n){Lh(t)&&n.delete(e)}function Qb(){Lm=!1,Yr!==null&&Lh(Yr)&&(Yr=null),Jr!==null&&Lh(Jr)&&(Jr=null),es!==null&&Lh(es)&&(es=null),bu.forEach(Gv),ku.forEach(Gv)}function Ul(t,e){t.blockedOn===e&&(t.blockedOn=null,Lm||(Lm=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,Qb)))}function Ru(t){function e(r){return Ul(r,t)}if(0<oh.length){Ul(oh[0],t);for(var n=1;n<oh.length;n++){var i=oh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Yr!==null&&Ul(Yr,t),Jr!==null&&Ul(Jr,t),es!==null&&Ul(es,t),bu.forEach(e),ku.forEach(e),n=0;n<Ur.length;n++)i=Ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ur.length&&(n=Ur[0],n.blockedOn===null);)AT(n),n.blockedOn===null&&Ur.shift()}var ka=Er.ReactCurrentBatchConfig,ad=!0;function Xb(t,e,n,i){var r=Xe,o=ka.transition;ka.transition=null;try{Xe=1,dy(t,e,n,i)}finally{Xe=r,ka.transition=o}}function Yb(t,e,n,i){var r=Xe,o=ka.transition;ka.transition=null;try{Xe=4,dy(t,e,n,i)}finally{Xe=r,ka.transition=o}}function dy(t,e,n,i){if(ad){var r=Mm(t,e,n,i);if(r===null)bp(t,e,i,ld,n),qv(t,i);else if(Kb(r,t,e,n,i))i.stopPropagation();else if(qv(t,i),e&4&&-1<Zb.indexOf(t)){for(;r!==null;){var o=sc(r);if(o!==null&&PT(o),o=Mm(t,e,n,i),o===null&&bp(t,e,i,ld,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else bp(t,e,i,null,n)}}var ld=null;function Mm(t,e,n,i){if(ld=null,t=ly(i),t=Ys(t),t!==null)if(e=To(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ld=t,null}function bT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zb()){case uy:return 1;case wT:return 4;case sd:case Fb:return 16;case xT:return 536870912;default:return 16}default:return 16}}var Zr=null,fy=null,Mh=null;function kT(){if(Mh)return Mh;var t,e=fy,n=e.length,i,r="value"in Zr?Zr.value:Zr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Mh=r.slice(t,1<i?1-i:void 0)}function Oh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ah(){return!0}function Zv(){return!1}function On(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ah:Zv,this.isPropagationStopped=Zv,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ah)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ah)},persist:function(){},isPersistent:ah}),e}var rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},py=On(rl),rc=gt({},rl,{view:0,detail:0}),Jb=On(rc),wp,xp,Hl,lf=gt({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:my,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hl&&(Hl&&t.type==="mousemove"?(wp=t.screenX-Hl.screenX,xp=t.screenY-Hl.screenY):xp=wp=0,Hl=t),wp)},movementY:function(t){return"movementY"in t?t.movementY:xp}}),Kv=On(lf),ek=gt({},lf,{dataTransfer:0}),tk=On(ek),nk=gt({},rc,{relatedTarget:0}),Tp=On(nk),ik=gt({},rl,{animationName:0,elapsedTime:0,pseudoElement:0}),rk=On(ik),sk=gt({},rl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ok=On(sk),ak=gt({},rl,{data:0}),Qv=On(ak),lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ck={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ck[t])?!!e[t]:!1}function my(){return hk}var dk=gt({},rc,{key:function(t){if(t.key){var e=lk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:my,charCode:function(t){return t.type==="keypress"?Oh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fk=On(dk),pk=gt({},lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xv=On(pk),mk=gt({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:my}),gk=On(mk),yk=gt({},rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),_k=On(yk),vk=gt({},lf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wk=On(vk),xk=[9,13,27,32],gy=fr&&"CompositionEvent"in window,lu=null;fr&&"documentMode"in document&&(lu=document.documentMode);var Tk=fr&&"TextEvent"in window&&!lu,RT=fr&&(!gy||lu&&8<lu&&11>=lu),Yv=" ",Jv=!1;function NT(t,e){switch(t){case"keyup":return xk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var da=!1;function Ek(t,e){switch(t){case"compositionend":return LT(e);case"keypress":return e.which!==32?null:(Jv=!0,Yv);case"textInput":return t=e.data,t===Yv&&Jv?null:t;default:return null}}function Pk(t,e){if(da)return t==="compositionend"||!gy&&NT(t,e)?(t=kT(),Mh=fy=Zr=null,da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RT&&e.locale!=="ko"?null:e.data;default:return null}}var Sk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sk[t.type]:e==="textarea"}function MT(t,e,n,i){hT(i),e=ud(e,"onChange"),0<e.length&&(n=new py("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var uu=null,Nu=null;function Ck(t){$T(t,0)}function uf(t){var e=ma(t);if(rT(e))return t}function Ik(t,e){if(t==="change")return e}var OT=!1;if(fr){var Ep;if(fr){var Pp="oninput"in document;if(!Pp){var t0=document.createElement("div");t0.setAttribute("oninput","return;"),Pp=typeof t0.oninput=="function"}Ep=Pp}else Ep=!1;OT=Ep&&(!document.documentMode||9<document.documentMode)}function n0(){uu&&(uu.detachEvent("onpropertychange",DT),Nu=uu=null)}function DT(t){if(t.propertyName==="value"&&uf(Nu)){var e=[];MT(e,Nu,t,ly(t)),mT(Ck,e)}}function Ak(t,e,n){t==="focusin"?(n0(),uu=e,Nu=n,uu.attachEvent("onpropertychange",DT)):t==="focusout"&&n0()}function bk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uf(Nu)}function kk(t,e){if(t==="click")return uf(e)}function Rk(t,e){if(t==="input"||t==="change")return uf(e)}function Nk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mi=typeof Object.is=="function"?Object.is:Nk;function Lu(t,e){if(mi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!gm.call(e,r)||!mi(t[r],e[r]))return!1}return!0}function i0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r0(t,e){var n=i0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i0(n)}}function VT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jT(){for(var t=window,e=nd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nd(t.document)}return e}function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lk(t){var e=jT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&VT(n.ownerDocument.documentElement,n)){if(i!==null&&yy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=r0(n,o);var a=r0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mk=fr&&"documentMode"in document&&11>=document.documentMode,fa=null,Om=null,cu=null,Dm=!1;function s0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dm||fa==null||fa!==nd(i)||(i=fa,"selectionStart"in i&&yy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cu&&Lu(cu,i)||(cu=i,i=ud(Om,"onSelect"),0<i.length&&(e=new py("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=fa)))}function lh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pa={animationend:lh("Animation","AnimationEnd"),animationiteration:lh("Animation","AnimationIteration"),animationstart:lh("Animation","AnimationStart"),transitionend:lh("Transition","TransitionEnd")},Sp={},zT={};fr&&(zT=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function cf(t){if(Sp[t])return Sp[t];if(!pa[t])return t;var e=pa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zT)return Sp[t]=e[n];return t}var FT=cf("animationend"),BT=cf("animationiteration"),UT=cf("animationstart"),HT=cf("transitionend"),WT=new Map,o0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){WT.set(t,e),xo(e,[t])}for(var Cp=0;Cp<o0.length;Cp++){var Ip=o0[Cp],Ok=Ip.toLowerCase(),Dk=Ip[0].toUpperCase()+Ip.slice(1);Cs(Ok,"on"+Dk)}Cs(FT,"onAnimationEnd");Cs(BT,"onAnimationIteration");Cs(UT,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(HT,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vk=new Set("cancel close invalid load scroll toggle".split(" ").concat(eu));function a0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Ob(i,e,void 0,t),t.currentTarget=null}function $T(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;a0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;a0(r,u,f),o=h}}}if(rd)throw t=Rm,rd=!1,Rm=null,t}function rt(t,e){var n=e[Bm];n===void 0&&(n=e[Bm]=new Set);var i=t+"__bubble";n.has(i)||(qT(e,t,2,!1),n.add(i))}function Ap(t,e,n){var i=0;e&&(i|=4),qT(n,t,i,e)}var uh="_reactListening"+Math.random().toString(36).slice(2);function Mu(t){if(!t[uh]){t[uh]=!0,J1.forEach(function(n){n!=="selectionchange"&&(Vk.has(n)||Ap(n,!1,t),Ap(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uh]||(e[uh]=!0,Ap("selectionchange",!1,e))}}function qT(t,e,n,i){switch(bT(e)){case 1:var r=Xb;break;case 4:r=Yb;break;default:r=dy}n=r.bind(null,e,n,t),r=void 0,!km||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function bp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Ys(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}mT(function(){var f=o,m=ly(n),g=[];e:{var _=WT.get(t);if(_!==void 0){var T=py,A=t;switch(t){case"keypress":if(Oh(n)===0)break e;case"keydown":case"keyup":T=fk;break;case"focusin":A="focus",T=Tp;break;case"focusout":A="blur",T=Tp;break;case"beforeblur":case"afterblur":T=Tp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Kv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=tk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=gk;break;case FT:case BT:case UT:T=rk;break;case HT:T=_k;break;case"scroll":T=Jb;break;case"wheel":T=wk;break;case"copy":case"cut":case"paste":T=ok;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Xv}var k=(e&4)!==0,O=!k&&t==="scroll",b=k?_!==null?_+"Capture":null:_;k=[];for(var P=f,C;P!==null;){C=P;var B=C.stateNode;if(C.tag===5&&B!==null&&(C=B,b!==null&&(B=Au(P,b),B!=null&&k.push(Ou(P,B,C)))),O)break;P=P.return}0<k.length&&(_=new T(_,A,null,n,m),g.push({event:_,listeners:k}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&n!==Am&&(A=n.relatedTarget||n.fromElement)&&(Ys(A)||A[pr]))break e;if((T||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,T?(A=n.relatedTarget||n.toElement,T=f,A=A?Ys(A):null,A!==null&&(O=To(A),A!==O||A.tag!==5&&A.tag!==6)&&(A=null)):(T=null,A=f),T!==A)){if(k=Kv,B="onMouseLeave",b="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(k=Xv,B="onPointerLeave",b="onPointerEnter",P="pointer"),O=T==null?_:ma(T),C=A==null?_:ma(A),_=new k(B,P+"leave",T,n,m),_.target=O,_.relatedTarget=C,B=null,Ys(m)===f&&(k=new k(b,P+"enter",A,n,m),k.target=C,k.relatedTarget=O,B=k),O=B,T&&A)t:{for(k=T,b=A,P=0,C=k;C;C=sa(C))P++;for(C=0,B=b;B;B=sa(B))C++;for(;0<P-C;)k=sa(k),P--;for(;0<C-P;)b=sa(b),C--;for(;P--;){if(k===b||b!==null&&k===b.alternate)break t;k=sa(k),b=sa(b)}k=null}else k=null;T!==null&&l0(g,_,T,k,!1),A!==null&&O!==null&&l0(g,O,A,k,!0)}}e:{if(_=f?ma(f):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var G=Ik;else if(e0(_))if(OT)G=Rk;else{G=bk;var U=Ak}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(G=kk);if(G&&(G=G(t,f))){MT(g,G,n,m);break e}U&&U(t,_,f),t==="focusout"&&(U=_._wrapperState)&&U.controlled&&_.type==="number"&&Em(_,"number",_.value)}switch(U=f?ma(f):window,t){case"focusin":(e0(U)||U.contentEditable==="true")&&(fa=U,Om=f,cu=null);break;case"focusout":cu=Om=fa=null;break;case"mousedown":Dm=!0;break;case"contextmenu":case"mouseup":case"dragend":Dm=!1,s0(g,n,m);break;case"selectionchange":if(Mk)break;case"keydown":case"keyup":s0(g,n,m)}var R;if(gy)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else da?NT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(RT&&n.locale!=="ko"&&(da||S!=="onCompositionStart"?S==="onCompositionEnd"&&da&&(R=kT()):(Zr=m,fy="value"in Zr?Zr.value:Zr.textContent,da=!0)),U=ud(f,S),0<U.length&&(S=new Qv(S,t,null,n,m),g.push({event:S,listeners:U}),R?S.data=R:(R=LT(n),R!==null&&(S.data=R)))),(R=Tk?Ek(t,n):Pk(t,n))&&(f=ud(f,"onBeforeInput"),0<f.length&&(m=new Qv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}$T(g,e)})}function Ou(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ud(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Au(t,n),o!=null&&i.unshift(Ou(t,o,r)),o=Au(t,e),o!=null&&i.push(Ou(t,o,r))),t=t.return}return i}function sa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=Au(n,o),h!=null&&a.unshift(Ou(n,h,u))):r||(h=Au(n,o),h!=null&&a.push(Ou(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var jk=/\r\n?/g,zk=/\u0000|\uFFFD/g;function u0(t){return(typeof t=="string"?t:""+t).replace(jk,`
`).replace(zk,"")}function ch(t,e,n){if(e=u0(e),u0(t)!==e&&n)throw Error(Y(425))}function cd(){}var Vm=null,jm=null;function zm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fm=typeof setTimeout=="function"?setTimeout:void 0,Fk=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,Bk=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(t){return c0.resolve(null).then(t).catch(Uk)}:Fm;function Uk(t){setTimeout(function(){throw t})}function kp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ru(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ru(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sl=Math.random().toString(36).slice(2),Ii="__reactFiber$"+sl,Du="__reactProps$"+sl,pr="__reactContainer$"+sl,Bm="__reactEvents$"+sl,Hk="__reactListeners$"+sl,Wk="__reactHandles$"+sl;function Ys(t){var e=t[Ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[Ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h0(t);t!==null;){if(n=t[Ii])return n;t=h0(t)}return e}t=n,n=t.parentNode}return null}function sc(t){return t=t[Ii]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function hf(t){return t[Du]||null}var Um=[],ga=-1;function Is(t){return{current:t}}function lt(t){0>ga||(t.current=Um[ga],Um[ga]=null,ga--)}function nt(t,e){ga++,Um[ga]=t.current,t.current=e}var gs={},nn=Is(gs),xn=Is(!1),co=gs;function Fa(t,e){var n=t.type.contextTypes;if(!n)return gs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Tn(t){return t=t.childContextTypes,t!=null}function hd(){lt(xn),lt(nn)}function d0(t,e,n){if(nn.current!==gs)throw Error(Y(168));nt(nn,e),nt(xn,n)}function GT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,Ab(t)||"Unknown",r));return gt({},n,i)}function dd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gs,co=nn.current,nt(nn,t),nt(xn,xn.current),!0}function f0(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=GT(t,e,co),i.__reactInternalMemoizedMergedChildContext=t,lt(xn),lt(nn),nt(nn,t)):lt(xn),nt(xn,n)}var nr=null,df=!1,Rp=!1;function ZT(t){nr===null?nr=[t]:nr.push(t)}function $k(t){df=!0,ZT(t)}function As(){if(!Rp&&nr!==null){Rp=!0;var t=0,e=Xe;try{var n=nr;for(Xe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}nr=null,df=!1}catch(r){throw nr!==null&&(nr=nr.slice(t+1)),vT(uy,As),r}finally{Xe=e,Rp=!1}}return null}var ya=[],_a=0,fd=null,pd=0,qn=[],Gn=0,ho=null,rr=1,sr="";function qs(t,e){ya[_a++]=pd,ya[_a++]=fd,fd=t,pd=e}function KT(t,e,n){qn[Gn++]=rr,qn[Gn++]=sr,qn[Gn++]=ho,ho=t;var i=rr;t=sr;var r=32-fi(i)-1;i&=~(1<<r),n+=1;var o=32-fi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,rr=1<<32-fi(e)+r|n<<r|i,sr=o+t}else rr=1<<o|n<<r|i,sr=t}function _y(t){t.return!==null&&(qs(t,1),KT(t,1,0))}function vy(t){for(;t===fd;)fd=ya[--_a],ya[_a]=null,pd=ya[--_a],ya[_a]=null;for(;t===ho;)ho=qn[--Gn],qn[Gn]=null,sr=qn[--Gn],qn[Gn]=null,rr=qn[--Gn],qn[Gn]=null}var kn=null,bn=null,ct=!1,ui=null;function QT(t,e){var n=Qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,bn=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ho!==null?{id:rr,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,bn=null,!0):!1;default:return!1}}function Hm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wm(t){if(ct){var e=bn;if(e){var n=e;if(!p0(t,e)){if(Hm(t))throw Error(Y(418));e=ts(n.nextSibling);var i=kn;e&&p0(t,e)?QT(i,n):(t.flags=t.flags&-4097|2,ct=!1,kn=t)}}else{if(Hm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,ct=!1,kn=t}}}function m0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function hh(t){if(t!==kn)return!1;if(!ct)return m0(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zm(t.type,t.memoizedProps)),e&&(e=bn)){if(Hm(t))throw XT(),Error(Y(418));for(;e;)QT(t,e),e=ts(e.nextSibling)}if(m0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=kn?ts(t.stateNode.nextSibling):null;return!0}function XT(){for(var t=bn;t;)t=ts(t.nextSibling)}function Ba(){bn=kn=null,ct=!1}function wy(t){ui===null?ui=[t]:ui.push(t)}var qk=Er.ReactCurrentBatchConfig;function Wl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function dh(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g0(t){var e=t._init;return e(t._payload)}function YT(t){function e(b,P){if(t){var C=b.deletions;C===null?(b.deletions=[P],b.flags|=16):C.push(P)}}function n(b,P){if(!t)return null;for(;P!==null;)e(b,P),P=P.sibling;return null}function i(b,P){for(b=new Map;P!==null;)P.key!==null?b.set(P.key,P):b.set(P.index,P),P=P.sibling;return b}function r(b,P){return b=ss(b,P),b.index=0,b.sibling=null,b}function o(b,P,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<P?(b.flags|=2,P):C):(b.flags|=2,P)):(b.flags|=1048576,P)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function u(b,P,C,B){return P===null||P.tag!==6?(P=jp(C,b.mode,B),P.return=b,P):(P=r(P,C),P.return=b,P)}function h(b,P,C,B){var G=C.type;return G===ha?m(b,P,C.props.children,B,C.key):P!==null&&(P.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===zr&&g0(G)===P.type)?(B=r(P,C.props),B.ref=Wl(b,P,C),B.return=b,B):(B=Uh(C.type,C.key,C.props,null,b.mode,B),B.ref=Wl(b,P,C),B.return=b,B)}function f(b,P,C,B){return P===null||P.tag!==4||P.stateNode.containerInfo!==C.containerInfo||P.stateNode.implementation!==C.implementation?(P=zp(C,b.mode,B),P.return=b,P):(P=r(P,C.children||[]),P.return=b,P)}function m(b,P,C,B,G){return P===null||P.tag!==7?(P=ro(C,b.mode,B,G),P.return=b,P):(P=r(P,C),P.return=b,P)}function g(b,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return P=jp(""+P,b.mode,C),P.return=b,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case th:return C=Uh(P.type,P.key,P.props,null,b.mode,C),C.ref=Wl(b,null,P),C.return=b,C;case ca:return P=zp(P,b.mode,C),P.return=b,P;case zr:var B=P._init;return g(b,B(P._payload),C)}if(Yl(P)||zl(P))return P=ro(P,b.mode,C,null),P.return=b,P;dh(b,P)}return null}function _(b,P,C,B){var G=P!==null?P.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return G!==null?null:u(b,P,""+C,B);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case th:return C.key===G?h(b,P,C,B):null;case ca:return C.key===G?f(b,P,C,B):null;case zr:return G=C._init,_(b,P,G(C._payload),B)}if(Yl(C)||zl(C))return G!==null?null:m(b,P,C,B,null);dh(b,C)}return null}function T(b,P,C,B,G){if(typeof B=="string"&&B!==""||typeof B=="number")return b=b.get(C)||null,u(P,b,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case th:return b=b.get(B.key===null?C:B.key)||null,h(P,b,B,G);case ca:return b=b.get(B.key===null?C:B.key)||null,f(P,b,B,G);case zr:var U=B._init;return T(b,P,C,U(B._payload),G)}if(Yl(B)||zl(B))return b=b.get(C)||null,m(P,b,B,G,null);dh(P,B)}return null}function A(b,P,C,B){for(var G=null,U=null,R=P,S=P=0,N=null;R!==null&&S<C.length;S++){R.index>S?(N=R,R=null):N=R.sibling;var V=_(b,R,C[S],B);if(V===null){R===null&&(R=N);break}t&&R&&V.alternate===null&&e(b,R),P=o(V,P,S),U===null?G=V:U.sibling=V,U=V,R=N}if(S===C.length)return n(b,R),ct&&qs(b,S),G;if(R===null){for(;S<C.length;S++)R=g(b,C[S],B),R!==null&&(P=o(R,P,S),U===null?G=R:U.sibling=R,U=R);return ct&&qs(b,S),G}for(R=i(b,R);S<C.length;S++)N=T(R,b,S,C[S],B),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?S:N.key),P=o(N,P,S),U===null?G=N:U.sibling=N,U=N);return t&&R.forEach(function(j){return e(b,j)}),ct&&qs(b,S),G}function k(b,P,C,B){var G=zl(C);if(typeof G!="function")throw Error(Y(150));if(C=G.call(C),C==null)throw Error(Y(151));for(var U=G=null,R=P,S=P=0,N=null,V=C.next();R!==null&&!V.done;S++,V=C.next()){R.index>S?(N=R,R=null):N=R.sibling;var j=_(b,R,V.value,B);if(j===null){R===null&&(R=N);break}t&&R&&j.alternate===null&&e(b,R),P=o(j,P,S),U===null?G=j:U.sibling=j,U=j,R=N}if(V.done)return n(b,R),ct&&qs(b,S),G;if(R===null){for(;!V.done;S++,V=C.next())V=g(b,V.value,B),V!==null&&(P=o(V,P,S),U===null?G=V:U.sibling=V,U=V);return ct&&qs(b,S),G}for(R=i(b,R);!V.done;S++,V=C.next())V=T(R,b,S,V.value,B),V!==null&&(t&&V.alternate!==null&&R.delete(V.key===null?S:V.key),P=o(V,P,S),U===null?G=V:U.sibling=V,U=V);return t&&R.forEach(function(z){return e(b,z)}),ct&&qs(b,S),G}function O(b,P,C,B){if(typeof C=="object"&&C!==null&&C.type===ha&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case th:e:{for(var G=C.key,U=P;U!==null;){if(U.key===G){if(G=C.type,G===ha){if(U.tag===7){n(b,U.sibling),P=r(U,C.props.children),P.return=b,b=P;break e}}else if(U.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===zr&&g0(G)===U.type){n(b,U.sibling),P=r(U,C.props),P.ref=Wl(b,U,C),P.return=b,b=P;break e}n(b,U);break}else e(b,U);U=U.sibling}C.type===ha?(P=ro(C.props.children,b.mode,B,C.key),P.return=b,b=P):(B=Uh(C.type,C.key,C.props,null,b.mode,B),B.ref=Wl(b,P,C),B.return=b,b=B)}return a(b);case ca:e:{for(U=C.key;P!==null;){if(P.key===U)if(P.tag===4&&P.stateNode.containerInfo===C.containerInfo&&P.stateNode.implementation===C.implementation){n(b,P.sibling),P=r(P,C.children||[]),P.return=b,b=P;break e}else{n(b,P);break}else e(b,P);P=P.sibling}P=zp(C,b.mode,B),P.return=b,b=P}return a(b);case zr:return U=C._init,O(b,P,U(C._payload),B)}if(Yl(C))return A(b,P,C,B);if(zl(C))return k(b,P,C,B);dh(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,P!==null&&P.tag===6?(n(b,P.sibling),P=r(P,C),P.return=b,b=P):(n(b,P),P=jp(C,b.mode,B),P.return=b,b=P),a(b)):n(b,P)}return O}var Ua=YT(!0),JT=YT(!1),md=Is(null),gd=null,va=null,xy=null;function Ty(){xy=va=gd=null}function Ey(t){var e=md.current;lt(md),t._currentValue=e}function $m(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ra(t,e){gd=t,xy=va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Yn(t){var e=t._currentValue;if(xy!==t)if(t={context:t,memoizedValue:e,next:null},va===null){if(gd===null)throw Error(Y(308));va=t,gd.dependencies={lanes:0,firstContext:t}}else va=va.next=t;return e}var Js=null;function Py(t){Js===null?Js=[t]:Js.push(t)}function eE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Py(e)):(n.next=r.next,r.next=n),e.interleaved=n,mr(t,i)}function mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fr=!1;function Sy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,We&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,mr(t,n)}return r=i.interleaved,r===null?(e.next=e,Py(i)):(e.next=r.next,r.next=e),i.interleaved=e,mr(t,n)}function Dh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cy(t,n)}}function y0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yd(t,e,n,i){var r=t.updateQueue;Fr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var _=u.lane,T=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,k=u;switch(_=e,T=n,k.tag){case 1:if(A=k.payload,typeof A=="function"){g=A.call(T,g,_);break e}g=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=k.payload,_=typeof A=="function"?A.call(T,g,_):A,_==null)break e;g=gt({},g,_);break e;case 2:Fr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else T={eventTime:T,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,h=g):m=m.next=T,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);po|=a,t.lanes=a,t.memoizedState=g}}function _0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var oc={},Ri=Is(oc),Vu=Is(oc),ju=Is(oc);function eo(t){if(t===oc)throw Error(Y(174));return t}function Cy(t,e){switch(nt(ju,e),nt(Vu,t),nt(Ri,oc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sm(e,t)}lt(Ri),nt(Ri,e)}function Ha(){lt(Ri),lt(Vu),lt(ju)}function nE(t){eo(ju.current);var e=eo(Ri.current),n=Sm(e,t.type);e!==n&&(nt(Vu,t),nt(Ri,n))}function Iy(t){Vu.current===t&&(lt(Ri),lt(Vu))}var dt=Is(0);function _d(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Np=[];function Ay(){for(var t=0;t<Np.length;t++)Np[t]._workInProgressVersionPrimary=null;Np.length=0}var Vh=Er.ReactCurrentDispatcher,Lp=Er.ReactCurrentBatchConfig,fo=0,pt=null,Nt=null,Ft=null,vd=!1,hu=!1,zu=0,Gk=0;function Kt(){throw Error(Y(321))}function by(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mi(t[n],e[n]))return!1;return!0}function ky(t,e,n,i,r,o){if(fo=o,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vh.current=t===null||t.memoizedState===null?Xk:Yk,t=n(i,r),hu){o=0;do{if(hu=!1,zu=0,25<=o)throw Error(Y(301));o+=1,Ft=Nt=null,e.updateQueue=null,Vh.current=Jk,t=n(i,r)}while(hu)}if(Vh.current=wd,e=Nt!==null&&Nt.next!==null,fo=0,Ft=Nt=pt=null,vd=!1,e)throw Error(Y(300));return t}function Ry(){var t=zu!==0;return zu=0,t}function Si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?pt.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function Jn(){if(Nt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Ft===null?pt.memoizedState:Ft.next;if(e!==null)Ft=e,Nt=t;else{if(t===null)throw Error(Y(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ft===null?pt.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function Fu(t,e){return typeof e=="function"?e(t):e}function Mp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=Nt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((fo&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,pt.lanes|=m,po|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,mi(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,pt.lanes|=o,po|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Op(t){var e=Jn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);mi(o,e.memoizedState)||(wn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function iE(){}function rE(t,e){var n=pt,i=Jn(),r=e(),o=!mi(i.memoizedState,r);if(o&&(i.memoizedState=r,wn=!0),i=i.queue,Ny(aE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,Bu(9,oE.bind(null,n,i,r,e),void 0,null),Bt===null)throw Error(Y(349));fo&30||sE(n,e,r)}return r}function sE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oE(t,e,n,i){e.value=n,e.getSnapshot=i,lE(e)&&uE(t)}function aE(t,e,n){return n(function(){lE(e)&&uE(t)})}function lE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mi(t,n)}catch{return!0}}function uE(t){var e=mr(t,1);e!==null&&pi(e,t,1,-1)}function v0(t){var e=Si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:t},e.queue=t,t=t.dispatch=Qk.bind(null,pt,t),[e.memoizedState,t]}function Bu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function cE(){return Jn().memoizedState}function jh(t,e,n,i){var r=Si();pt.flags|=t,r.memoizedState=Bu(1|e,n,void 0,i===void 0?null:i)}function ff(t,e,n,i){var r=Jn();i=i===void 0?null:i;var o=void 0;if(Nt!==null){var a=Nt.memoizedState;if(o=a.destroy,i!==null&&by(i,a.deps)){r.memoizedState=Bu(e,n,o,i);return}}pt.flags|=t,r.memoizedState=Bu(1|e,n,o,i)}function w0(t,e){return jh(8390656,8,t,e)}function Ny(t,e){return ff(2048,8,t,e)}function hE(t,e){return ff(4,2,t,e)}function dE(t,e){return ff(4,4,t,e)}function fE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pE(t,e,n){return n=n!=null?n.concat([t]):null,ff(4,4,fE.bind(null,e,t),n)}function Ly(){}function mE(t,e){var n=Jn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&by(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function gE(t,e){var n=Jn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&by(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function yE(t,e,n){return fo&21?(mi(n,e)||(n=TT(),pt.lanes|=n,po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function Zk(t,e){var n=Xe;Xe=n!==0&&4>n?n:4,t(!0);var i=Lp.transition;Lp.transition={};try{t(!1),e()}finally{Xe=n,Lp.transition=i}}function _E(){return Jn().memoizedState}function Kk(t,e,n){var i=rs(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},vE(t))wE(e,n);else if(n=eE(t,e,n,i),n!==null){var r=hn();pi(n,t,i,r),xE(n,e,i)}}function Qk(t,e,n){var i=rs(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(vE(t))wE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,mi(u,a)){var h=e.interleaved;h===null?(r.next=r,Py(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=eE(t,e,r,i),n!==null&&(r=hn(),pi(n,t,i,r),xE(n,e,i))}}function vE(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function wE(t,e){hu=vd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cy(t,n)}}var wd={readContext:Yn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},Xk={readContext:Yn,useCallback:function(t,e){return Si().memoizedState=[t,e===void 0?null:e],t},useContext:Yn,useEffect:w0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jh(4194308,4,fE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jh(4194308,4,t,e)},useInsertionEffect:function(t,e){return jh(4,2,t,e)},useMemo:function(t,e){var n=Si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Si();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Kk.bind(null,pt,t),[i.memoizedState,t]},useRef:function(t){var e=Si();return t={current:t},e.memoizedState=t},useState:v0,useDebugValue:Ly,useDeferredValue:function(t){return Si().memoizedState=t},useTransition:function(){var t=v0(!1),e=t[0];return t=Zk.bind(null,t[1]),Si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=pt,r=Si();if(ct){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Bt===null)throw Error(Y(349));fo&30||sE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,w0(aE.bind(null,i,o,t),[t]),i.flags|=2048,Bu(9,oE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Si(),e=Bt.identifierPrefix;if(ct){var n=sr,i=rr;n=(i&~(1<<32-fi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Gk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yk={readContext:Yn,useCallback:mE,useContext:Yn,useEffect:Ny,useImperativeHandle:pE,useInsertionEffect:hE,useLayoutEffect:dE,useMemo:gE,useReducer:Mp,useRef:cE,useState:function(){return Mp(Fu)},useDebugValue:Ly,useDeferredValue:function(t){var e=Jn();return yE(e,Nt.memoizedState,t)},useTransition:function(){var t=Mp(Fu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:iE,useSyncExternalStore:rE,useId:_E,unstable_isNewReconciler:!1},Jk={readContext:Yn,useCallback:mE,useContext:Yn,useEffect:Ny,useImperativeHandle:pE,useInsertionEffect:hE,useLayoutEffect:dE,useMemo:gE,useReducer:Op,useRef:cE,useState:function(){return Op(Fu)},useDebugValue:Ly,useDeferredValue:function(t){var e=Jn();return Nt===null?e.memoizedState=t:yE(e,Nt.memoizedState,t)},useTransition:function(){var t=Op(Fu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:iE,useSyncExternalStore:rE,useId:_E,unstable_isNewReconciler:!1};function ai(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pf={isMounted:function(t){return(t=t._reactInternals)?To(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=hn(),r=rs(t),o=ur(i,r);o.payload=e,n!=null&&(o.callback=n),e=ns(t,o,r),e!==null&&(pi(e,t,r,i),Dh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=hn(),r=rs(t),o=ur(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ns(t,o,r),e!==null&&(pi(e,t,r,i),Dh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),i=rs(t),r=ur(n,i);r.tag=2,e!=null&&(r.callback=e),e=ns(t,r,i),e!==null&&(pi(e,t,i,n),Dh(e,t,i))}};function x0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Lu(n,i)||!Lu(r,o):!0}function TE(t,e,n){var i=!1,r=gs,o=e.contextType;return typeof o=="object"&&o!==null?o=Yn(o):(r=Tn(e)?co:nn.current,i=e.contextTypes,o=(i=i!=null)?Fa(t,r):gs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function T0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&pf.enqueueReplaceState(e,e.state,null)}function Gm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Sy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Yn(o):(o=Tn(e)?co:nn.current,r.context=Fa(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(qm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&pf.enqueueReplaceState(r,r.state,null),yd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Wa(t,e){try{var n="",i=e;do n+=Ib(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Dp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var e2=typeof WeakMap=="function"?WeakMap:Map;function EE(t,e,n){n=ur(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Td||(Td=!0,rg=i),Zm(t,e)},n}function PE(t,e,n){n=ur(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Zm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Zm(t,e),typeof i!="function"&&(is===null?is=new Set([this]):is.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function E0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new e2;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=p2.bind(null,t,e,n),e.then(t,t))}function P0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ur(-1,1),e.tag=2,ns(n,e,1))),n.lanes|=1),t)}var t2=Er.ReactCurrentOwner,wn=!1;function un(t,e,n,i){e.child=t===null?JT(e,null,n,i):Ua(e,t.child,n,i)}function C0(t,e,n,i,r){n=n.render;var o=e.ref;return Ra(e,r),i=ky(t,e,n,i,o,r),n=Ry(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gr(t,e,r)):(ct&&n&&_y(e),e.flags|=1,un(t,e,i,r),e.child)}function I0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!By(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,SE(t,e,o,i,r)):(t=Uh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Lu,n(a,i)&&t.ref===e.ref)return gr(t,e,r)}return e.flags|=1,t=ss(o,i),t.ref=e.ref,t.return=e,e.child=t}function SE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Lu(o,i)&&t.ref===e.ref)if(wn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,gr(t,e,r)}return Km(t,e,n,i,r)}function CE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(xa,An),An|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(xa,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,nt(xa,An),An|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,nt(xa,An),An|=i;return un(t,e,r,n),e.child}function IE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Km(t,e,n,i,r){var o=Tn(n)?co:nn.current;return o=Fa(e,o),Ra(e,r),n=ky(t,e,n,i,o,r),i=Ry(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gr(t,e,r)):(ct&&i&&_y(e),e.flags|=1,un(t,e,n,r),e.child)}function A0(t,e,n,i,r){if(Tn(n)){var o=!0;dd(e)}else o=!1;if(Ra(e,r),e.stateNode===null)zh(t,e),TE(e,n,i),Gm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Yn(f):(f=Tn(n)?co:nn.current,f=Fa(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&T0(e,a,i,f),Fr=!1;var _=e.memoizedState;a.state=_,yd(e,i,a,r),h=e.memoizedState,u!==i||_!==h||xn.current||Fr?(typeof m=="function"&&(qm(e,n,m,i),h=e.memoizedState),(u=Fr||x0(e,n,u,i,_,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,tE(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ai(e.type,u),a.props=f,g=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Yn(h):(h=Tn(n)?co:nn.current,h=Fa(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==h)&&T0(e,a,i,h),Fr=!1,_=e.memoizedState,a.state=_,yd(e,i,a,r);var A=e.memoizedState;u!==g||_!==A||xn.current||Fr?(typeof T=="function"&&(qm(e,n,T,i),A=e.memoizedState),(f=Fr||x0(e,n,f,i,_,A,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,A,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,A,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=A),a.props=i,a.state=A,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Qm(t,e,n,i,o,r)}function Qm(t,e,n,i,r,o){IE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&f0(e,n,!1),gr(t,e,o);i=e.stateNode,t2.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ua(e,t.child,null,o),e.child=Ua(e,null,u,o)):un(t,e,u,o),e.memoizedState=i.state,r&&f0(e,n,!0),e.child}function AE(t){var e=t.stateNode;e.pendingContext?d0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d0(t,e.context,!1),Cy(t,e.containerInfo)}function b0(t,e,n,i,r){return Ba(),wy(r),e.flags|=256,un(t,e,n,i),e.child}var Xm={dehydrated:null,treeContext:null,retryLane:0};function Ym(t){return{baseLanes:t,cachePool:null,transitions:null}}function bE(t,e,n){var i=e.pendingProps,r=dt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),nt(dt,r&1),t===null)return Wm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=yf(a,i,0,null),t=ro(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ym(n),e.memoizedState=Xm,t):My(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return n2(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=ss(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=ss(u,o):(o=ro(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Ym(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Xm,i}return o=t.child,t=o.sibling,i=ss(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function My(t,e){return e=yf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fh(t,e,n,i){return i!==null&&wy(i),Ua(e,t.child,null,n),t=My(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function n2(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Dp(Error(Y(422))),fh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=yf({mode:"visible",children:i.children},r,0,null),o=ro(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ua(e,t.child,null,a),e.child.memoizedState=Ym(a),e.memoizedState=Xm,o);if(!(e.mode&1))return fh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(Y(419)),i=Dp(o,i,void 0),fh(t,e,a,i)}if(u=(a&t.childLanes)!==0,wn||u){if(i=Bt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,mr(t,r),pi(i,t,r,-1))}return Fy(),i=Dp(Error(Y(421))),fh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=m2.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,bn=ts(r.nextSibling),kn=e,ct=!0,ui=null,t!==null&&(qn[Gn++]=rr,qn[Gn++]=sr,qn[Gn++]=ho,rr=t.id,sr=t.overflow,ho=e),e=My(e,i.children),e.flags|=4096,e)}function k0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),$m(t.return,e,n)}function Vp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function kE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(un(t,e,i.children,n),i=dt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k0(t,n,e);else if(t.tag===19)k0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(nt(dt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&_d(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Vp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&_d(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Vp(e,!0,n,null,o);break;case"together":Vp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function i2(t,e,n){switch(e.tag){case 3:AE(e),Ba();break;case 5:nE(e);break;case 1:Tn(e.type)&&dd(e);break;case 4:Cy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;nt(md,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(nt(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?bE(t,e,n):(nt(dt,dt.current&1),t=gr(t,e,n),t!==null?t.sibling:null);nt(dt,dt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return kE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),nt(dt,dt.current),i)break;return null;case 22:case 23:return e.lanes=0,CE(t,e,n)}return gr(t,e,n)}var RE,Jm,NE,LE;RE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jm=function(){};NE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,eo(Ri.current);var o=null;switch(n){case"input":r=xm(t,r),i=xm(t,i),o=[];break;case"select":r=gt({},r,{value:void 0}),i=gt({},i,{value:void 0}),o=[];break;case"textarea":r=Pm(t,r),i=Pm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=cd)}Cm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Cu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Cu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&rt("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};LE=function(t,e,n,i){n!==i&&(e.flags|=4)};function $l(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function r2(t,e,n){var i=e.pendingProps;switch(vy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Tn(e.type)&&hd(),Qt(e),null;case 3:return i=e.stateNode,Ha(),lt(xn),lt(nn),Ay(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(hh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(ag(ui),ui=null))),Jm(t,e),Qt(e),null;case 5:Iy(e);var r=eo(ju.current);if(n=e.type,t!==null&&e.stateNode!=null)NE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Qt(e),null}if(t=eo(Ri.current),hh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Ii]=e,i[Du]=o,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",i),rt("close",i);break;case"iframe":case"object":case"embed":rt("load",i);break;case"video":case"audio":for(r=0;r<eu.length;r++)rt(eu[r],i);break;case"source":rt("error",i);break;case"img":case"image":case"link":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"input":zv(i,o),rt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},rt("invalid",i);break;case"textarea":Bv(i,o),rt("invalid",i)}Cm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&ch(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ch(i.textContent,u,t),r=["children",""+u]):Cu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&rt("scroll",i)}switch(n){case"input":nh(i),Fv(i,o,!0);break;case"textarea":nh(i),Uv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=cd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Ii]=e,t[Du]=i,RE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Im(n,i),n){case"dialog":rt("cancel",t),rt("close",t),r=i;break;case"iframe":case"object":case"embed":rt("load",t),r=i;break;case"video":case"audio":for(r=0;r<eu.length;r++)rt(eu[r],t);r=i;break;case"source":rt("error",t),r=i;break;case"img":case"image":case"link":rt("error",t),rt("load",t),r=i;break;case"details":rt("toggle",t),r=i;break;case"input":zv(t,i),r=xm(t,i),rt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=gt({},i,{value:void 0}),rt("invalid",t);break;case"textarea":Bv(t,i),r=Pm(t,i),rt("invalid",t);break;default:r=i}Cm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?cT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&lT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Iu(t,h):typeof h=="number"&&Iu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&rt("scroll",t):h!=null&&ry(t,o,h,a))}switch(n){case"input":nh(t),Fv(t,i,!1);break;case"textarea":nh(t),Uv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ms(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ia(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ia(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=cd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)LE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=eo(ju.current),eo(Ri.current),hh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ii]=e,(o=i.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:ch(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ch(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ii]=e,e.stateNode=i}return Qt(e),null;case 13:if(lt(dt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&bn!==null&&e.mode&1&&!(e.flags&128))XT(),Ba(),e.flags|=98560,o=!1;else if(o=hh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[Ii]=e}else Ba(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),o=!1}else ui!==null&&(ag(ui),ui=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Mt===0&&(Mt=3):Fy())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return Ha(),Jm(t,e),t===null&&Mu(e.stateNode.containerInfo),Qt(e),null;case 10:return Ey(e.type._context),Qt(e),null;case 17:return Tn(e.type)&&hd(),Qt(e),null;case 19:if(lt(dt),o=e.memoizedState,o===null)return Qt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)$l(o,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=_d(t),a!==null){for(e.flags|=128,$l(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(dt,dt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Et()>$a&&(e.flags|=128,i=!0,$l(o,!1),e.lanes=4194304)}else{if(!i)if(t=_d(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$l(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ct)return Qt(e),null}else 2*Et()-o.renderingStartTime>$a&&n!==1073741824&&(e.flags|=128,i=!0,$l(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Et(),e.sibling=null,n=dt.current,nt(dt,i?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return zy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?An&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function s2(t,e){switch(vy(e),e.tag){case 1:return Tn(e.type)&&hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ha(),lt(xn),lt(nn),Ay(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Iy(e),null;case 13:if(lt(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ba()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(dt),null;case 4:return Ha(),null;case 10:return Ey(e.type._context),null;case 22:case 23:return zy(),null;case 24:return null;default:return null}}var ph=!1,en=!1,o2=typeof WeakSet=="function"?WeakSet:Set,oe=null;function wa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){wt(t,e,i)}else n.current=null}function eg(t,e,n){try{n()}catch(i){wt(t,e,i)}}var R0=!1;function a2(t,e){if(Vm=ad,t=jT(),yy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)_=g,g=T;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(h=a),(T=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(jm={focusedElem:t,selectionRange:n},ad=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var k=A.memoizedProps,O=A.memoizedState,b=e.stateNode,P=b.getSnapshotBeforeUpdate(e.elementType===e.type?k:ai(e.type,k),O);b.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(B){wt(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return A=R0,R0=!1,A}function du(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&eg(e,n,o)}r=r.next}while(r!==i)}}function mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function tg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ME(t){var e=t.alternate;e!==null&&(t.alternate=null,ME(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ii],delete e[Du],delete e[Bm],delete e[Hk],delete e[Wk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OE(t){return t.tag===5||t.tag===3||t.tag===4}function N0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ng(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cd));else if(i!==4&&(t=t.child,t!==null))for(ng(t,e,n),t=t.sibling;t!==null;)ng(t,e,n),t=t.sibling}function ig(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ig(t,e,n),t=t.sibling;t!==null;)ig(t,e,n),t=t.sibling}var Ut=null,li=!1;function Or(t,e,n){for(n=n.child;n!==null;)DE(t,e,n),n=n.sibling}function DE(t,e,n){if(ki&&typeof ki.onCommitFiberUnmount=="function")try{ki.onCommitFiberUnmount(af,n)}catch{}switch(n.tag){case 5:en||wa(n,e);case 6:var i=Ut,r=li;Ut=null,Or(t,e,n),Ut=i,li=r,Ut!==null&&(li?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(li?(t=Ut,n=n.stateNode,t.nodeType===8?kp(t.parentNode,n):t.nodeType===1&&kp(t,n),Ru(t)):kp(Ut,n.stateNode));break;case 4:i=Ut,r=li,Ut=n.stateNode.containerInfo,li=!0,Or(t,e,n),Ut=i,li=r;break;case 0:case 11:case 14:case 15:if(!en&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&eg(n,e,a),r=r.next}while(r!==i)}Or(t,e,n);break;case 1:if(!en&&(wa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){wt(n,e,u)}Or(t,e,n);break;case 21:Or(t,e,n);break;case 22:n.mode&1?(en=(i=en)||n.memoizedState!==null,Or(t,e,n),en=i):Or(t,e,n);break;default:Or(t,e,n)}}function L0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new o2),e.forEach(function(i){var r=g2.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function oi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ut=u.stateNode,li=!1;break e;case 3:Ut=u.stateNode.containerInfo,li=!0;break e;case 4:Ut=u.stateNode.containerInfo,li=!0;break e}u=u.return}if(Ut===null)throw Error(Y(160));DE(o,a,r),Ut=null,li=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){wt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VE(e,t),e=e.sibling}function VE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),Pi(t),i&4){try{du(3,t,t.return),mf(3,t)}catch(k){wt(t,t.return,k)}try{du(5,t,t.return)}catch(k){wt(t,t.return,k)}}break;case 1:oi(e,t),Pi(t),i&512&&n!==null&&wa(n,n.return);break;case 5:if(oi(e,t),Pi(t),i&512&&n!==null&&wa(n,n.return),t.flags&32){var r=t.stateNode;try{Iu(r,"")}catch(k){wt(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&sT(r,o),Im(u,a);var f=Im(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?cT(r,g):m==="dangerouslySetInnerHTML"?lT(r,g):m==="children"?Iu(r,g):ry(r,m,g,f)}switch(u){case"input":Tm(r,o);break;case"textarea":oT(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Ia(r,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Ia(r,!!o.multiple,o.defaultValue,!0):Ia(r,!!o.multiple,o.multiple?[]:"",!1))}r[Du]=o}catch(k){wt(t,t.return,k)}}break;case 6:if(oi(e,t),Pi(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){wt(t,t.return,k)}}break;case 3:if(oi(e,t),Pi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ru(e.containerInfo)}catch(k){wt(t,t.return,k)}break;case 4:oi(e,t),Pi(t);break;case 13:oi(e,t),Pi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Vy=Et())),i&4&&L0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(en=(f=en)||m,oi(e,t),en=f):oi(e,t),Pi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(oe=t,m=t.child;m!==null;){for(g=oe=m;oe!==null;){switch(_=oe,T=_.child,_.tag){case 0:case 11:case 14:case 15:du(4,_,_.return);break;case 1:wa(_,_.return);var A=_.stateNode;if(typeof A.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(k){wt(i,n,k)}}break;case 5:wa(_,_.return);break;case 22:if(_.memoizedState!==null){O0(g);continue}}T!==null?(T.return=_,oe=T):O0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=uT("display",a))}catch(k){wt(t,t.return,k)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){wt(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:oi(e,t),Pi(t),i&4&&L0(t);break;case 21:break;default:oi(e,t),Pi(t)}}function Pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Iu(r,""),i.flags&=-33);var o=N0(t);ig(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=N0(t);ng(t,u,a);break;default:throw Error(Y(161))}}catch(h){wt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function l2(t,e,n){oe=t,jE(t)}function jE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||ph;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||en;u=ph;var f=en;if(ph=a,(en=h)&&!f)for(oe=r;oe!==null;)a=oe,h=a.child,a.tag===22&&a.memoizedState!==null?D0(r):h!==null?(h.return=a,oe=h):D0(r);for(;o!==null;)oe=o,jE(o),o=o.sibling;oe=r,ph=u,en=f}M0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):M0(t)}}function M0(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||mf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!en)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ai(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&_0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Ru(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}en||e.flags&512&&tg(e)}catch(_){wt(e,e.return,_)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function O0(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function D0(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mf(4,e)}catch(h){wt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){wt(e,r,h)}}var o=e.return;try{tg(e)}catch(h){wt(e,o,h)}break;case 5:var a=e.return;try{tg(e)}catch(h){wt(e,a,h)}}}catch(h){wt(e,e.return,h)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var u2=Math.ceil,xd=Er.ReactCurrentDispatcher,Oy=Er.ReactCurrentOwner,Xn=Er.ReactCurrentBatchConfig,We=0,Bt=null,kt=null,$t=0,An=0,xa=Is(0),Mt=0,Uu=null,po=0,gf=0,Dy=0,fu=null,vn=null,Vy=0,$a=1/0,tr=null,Td=!1,rg=null,is=null,mh=!1,Kr=null,Ed=0,pu=0,sg=null,Fh=-1,Bh=0;function hn(){return We&6?Et():Fh!==-1?Fh:Fh=Et()}function rs(t){return t.mode&1?We&2&&$t!==0?$t&-$t:qk.transition!==null?(Bh===0&&(Bh=TT()),Bh):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:bT(t.type)),t):1}function pi(t,e,n,i){if(50<pu)throw pu=0,sg=null,Error(Y(185));ic(t,n,i),(!(We&2)||t!==Bt)&&(t===Bt&&(!(We&2)&&(gf|=n),Mt===4&&Hr(t,$t)),En(t,i),n===1&&We===0&&!(e.mode&1)&&($a=Et()+500,df&&As()))}function En(t,e){var n=t.callbackNode;qb(t,e);var i=od(t,t===Bt?$t:0);if(i===0)n!==null&&$v(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&$v(n),e===1)t.tag===0?$k(V0.bind(null,t)):ZT(V0.bind(null,t)),Bk(function(){!(We&6)&&As()}),n=null;else{switch(ET(i)){case 1:n=uy;break;case 4:n=wT;break;case 16:n=sd;break;case 536870912:n=xT;break;default:n=sd}n=qE(n,zE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zE(t,e){if(Fh=-1,Bh=0,We&6)throw Error(Y(327));var n=t.callbackNode;if(Na()&&t.callbackNode!==n)return null;var i=od(t,t===Bt?$t:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Pd(t,i);else{e=i;var r=We;We|=2;var o=BE();(Bt!==t||$t!==e)&&(tr=null,$a=Et()+500,io(t,e));do try{d2();break}catch(u){FE(t,u)}while(!0);Ty(),xd.current=o,We=r,kt!==null?e=0:(Bt=null,$t=0,e=Mt)}if(e!==0){if(e===2&&(r=Nm(t),r!==0&&(i=r,e=og(t,r))),e===1)throw n=Uu,io(t,0),Hr(t,i),En(t,Et()),n;if(e===6)Hr(t,i);else{if(r=t.current.alternate,!(i&30)&&!c2(r)&&(e=Pd(t,i),e===2&&(o=Nm(t),o!==0&&(i=o,e=og(t,o))),e===1))throw n=Uu,io(t,0),Hr(t,i),En(t,Et()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:Gs(t,vn,tr);break;case 3:if(Hr(t,i),(i&130023424)===i&&(e=Vy+500-Et(),10<e)){if(od(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){hn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Fm(Gs.bind(null,t,vn,tr),e);break}Gs(t,vn,tr);break;case 4:if(Hr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-fi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=Et()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*u2(i/1960))-i,10<i){t.timeoutHandle=Fm(Gs.bind(null,t,vn,tr),i);break}Gs(t,vn,tr);break;case 5:Gs(t,vn,tr);break;default:throw Error(Y(329))}}}return En(t,Et()),t.callbackNode===n?zE.bind(null,t):null}function og(t,e){var n=fu;return t.current.memoizedState.isDehydrated&&(io(t,e).flags|=256),t=Pd(t,e),t!==2&&(e=vn,vn=n,e!==null&&ag(e)),t}function ag(t){vn===null?vn=t:vn.push.apply(vn,t)}function c2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!mi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~Dy,e&=~gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fi(e),i=1<<n;t[n]=-1,e&=~i}}function V0(t){if(We&6)throw Error(Y(327));Na();var e=od(t,0);if(!(e&1))return En(t,Et()),null;var n=Pd(t,e);if(t.tag!==0&&n===2){var i=Nm(t);i!==0&&(e=i,n=og(t,i))}if(n===1)throw n=Uu,io(t,0),Hr(t,e),En(t,Et()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,vn,tr),En(t,Et()),null}function jy(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&($a=Et()+500,df&&As())}}function mo(t){Kr!==null&&Kr.tag===0&&!(We&6)&&Na();var e=We;We|=1;var n=Xn.transition,i=Xe;try{if(Xn.transition=null,Xe=1,t)return t()}finally{Xe=i,Xn.transition=n,We=e,!(We&6)&&As()}}function zy(){An=xa.current,lt(xa)}function io(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Fk(n)),kt!==null)for(n=kt.return;n!==null;){var i=n;switch(vy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hd();break;case 3:Ha(),lt(xn),lt(nn),Ay();break;case 5:Iy(i);break;case 4:Ha();break;case 13:lt(dt);break;case 19:lt(dt);break;case 10:Ey(i.type._context);break;case 22:case 23:zy()}n=n.return}if(Bt=t,kt=t=ss(t.current,null),$t=An=e,Mt=0,Uu=null,Dy=gf=po=0,vn=fu=null,Js!==null){for(e=0;e<Js.length;e++)if(n=Js[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Js=null}return t}function FE(t,e){do{var n=kt;try{if(Ty(),Vh.current=wd,vd){for(var i=pt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}vd=!1}if(fo=0,Ft=Nt=pt=null,hu=!1,zu=0,Oy.current=null,n===null||n.return===null){Mt=1,Uu=e,kt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=$t,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=P0(a);if(T!==null){T.flags&=-257,S0(T,a,u,o,e),T.mode&1&&E0(o,f,e),e=T,h=f;var A=e.updateQueue;if(A===null){var k=new Set;k.add(h),e.updateQueue=k}else A.add(h);break e}else{if(!(e&1)){E0(o,f,e),Fy();break e}h=Error(Y(426))}}else if(ct&&u.mode&1){var O=P0(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),S0(O,a,u,o,e),wy(Wa(h,u));break e}}o=h=Wa(h,u),Mt!==4&&(Mt=2),fu===null?fu=[o]:fu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=EE(o,h,e);y0(o,b);break e;case 1:u=h;var P=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(is===null||!is.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=PE(o,u,e);y0(o,B);break e}}o=o.return}while(o!==null)}HE(n)}catch(G){e=G,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function BE(){var t=xd.current;return xd.current=wd,t===null?wd:t}function Fy(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Bt===null||!(po&268435455)&&!(gf&268435455)||Hr(Bt,$t)}function Pd(t,e){var n=We;We|=2;var i=BE();(Bt!==t||$t!==e)&&(tr=null,io(t,e));do try{h2();break}catch(r){FE(t,r)}while(!0);if(Ty(),We=n,xd.current=i,kt!==null)throw Error(Y(261));return Bt=null,$t=0,Mt}function h2(){for(;kt!==null;)UE(kt)}function d2(){for(;kt!==null&&!Vb();)UE(kt)}function UE(t){var e=$E(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?HE(t):kt=e,Oy.current=null}function HE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=s2(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,kt=null;return}}else if(n=r2(n,e,An),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Mt===0&&(Mt=5)}function Gs(t,e,n){var i=Xe,r=Xn.transition;try{Xn.transition=null,Xe=1,f2(t,e,n,i)}finally{Xn.transition=r,Xe=i}return null}function f2(t,e,n,i){do Na();while(Kr!==null);if(We&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Gb(t,o),t===Bt&&(kt=Bt=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mh||(mh=!0,qE(sd,function(){return Na(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xn.transition,Xn.transition=null;var a=Xe;Xe=1;var u=We;We|=4,Oy.current=null,a2(t,n),VE(n,t),Lk(jm),ad=!!Vm,jm=Vm=null,t.current=n,l2(n),jb(),We=u,Xe=a,Xn.transition=o}else t.current=n;if(mh&&(mh=!1,Kr=t,Ed=r),o=t.pendingLanes,o===0&&(is=null),Bb(n.stateNode),En(t,Et()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Td)throw Td=!1,t=rg,rg=null,t;return Ed&1&&t.tag!==0&&Na(),o=t.pendingLanes,o&1?t===sg?pu++:(pu=0,sg=t):pu=0,As(),null}function Na(){if(Kr!==null){var t=ET(Ed),e=Xn.transition,n=Xe;try{if(Xn.transition=null,Xe=16>t?16:t,Kr===null)var i=!1;else{if(t=Kr,Kr=null,Ed=0,We&6)throw Error(Y(331));var r=We;for(We|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(oe=f;oe!==null;){var m=oe;switch(m.tag){case 0:case 11:case 15:du(8,m,o)}var g=m.child;if(g!==null)g.return=m,oe=g;else for(;oe!==null;){m=oe;var _=m.sibling,T=m.return;if(ME(m),m===f){oe=null;break}if(_!==null){_.return=T,oe=_;break}oe=T}}}var A=o.alternate;if(A!==null){var k=A.child;if(k!==null){A.child=null;do{var O=k.sibling;k.sibling=null,k=O}while(k!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:du(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,oe=b;break e}oe=o.return}}var P=t.current;for(oe=P;oe!==null;){a=oe;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,oe=C;else e:for(a=P;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:mf(9,u)}}catch(G){wt(u,u.return,G)}if(u===a){oe=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,oe=B;break e}oe=u.return}}if(We=r,As(),ki&&typeof ki.onPostCommitFiberRoot=="function")try{ki.onPostCommitFiberRoot(af,t)}catch{}i=!0}return i}finally{Xe=n,Xn.transition=e}}return!1}function j0(t,e,n){e=Wa(n,e),e=EE(t,e,1),t=ns(t,e,1),e=hn(),t!==null&&(ic(t,1,e),En(t,e))}function wt(t,e,n){if(t.tag===3)j0(t,t,n);else for(;e!==null;){if(e.tag===3){j0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(is===null||!is.has(i))){t=Wa(n,t),t=PE(e,t,1),e=ns(e,t,1),t=hn(),e!==null&&(ic(e,1,t),En(e,t));break}}e=e.return}}function p2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&($t&n)===n&&(Mt===4||Mt===3&&($t&130023424)===$t&&500>Et()-Vy?io(t,0):Dy|=n),En(t,e)}function WE(t,e){e===0&&(t.mode&1?(e=sh,sh<<=1,!(sh&130023424)&&(sh=4194304)):e=1);var n=hn();t=mr(t,e),t!==null&&(ic(t,e,n),En(t,n))}function m2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WE(t,n)}function g2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),WE(t,n)}var $E;$E=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,i2(t,e,n);wn=!!(t.flags&131072)}else wn=!1,ct&&e.flags&1048576&&KT(e,pd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;zh(t,e),t=e.pendingProps;var r=Fa(e,nn.current);Ra(e,n),r=ky(null,e,i,t,r,n);var o=Ry();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(i)?(o=!0,dd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Sy(e),r.updater=pf,e.stateNode=r,r._reactInternals=e,Gm(e,i,t,n),e=Qm(null,e,i,!0,o,n)):(e.tag=0,ct&&o&&_y(e),un(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(zh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=_2(i),t=ai(i,t),r){case 0:e=Km(null,e,i,t,n);break e;case 1:e=A0(null,e,i,t,n);break e;case 11:e=C0(null,e,i,t,n);break e;case 14:e=I0(null,e,i,ai(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),Km(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),A0(t,e,i,r,n);case 3:e:{if(AE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,tE(t,e),yd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Wa(Error(Y(423)),e),e=b0(t,e,i,n,r);break e}else if(i!==r){r=Wa(Error(Y(424)),e),e=b0(t,e,i,n,r);break e}else for(bn=ts(e.stateNode.containerInfo.firstChild),kn=e,ct=!0,ui=null,n=JT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ba(),i===r){e=gr(t,e,n);break e}un(t,e,i,n)}e=e.child}return e;case 5:return nE(e),t===null&&Wm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,zm(i,r)?a=null:o!==null&&zm(i,o)&&(e.flags|=32),IE(t,e),un(t,e,a,n),e.child;case 6:return t===null&&Wm(e),null;case 13:return bE(t,e,n);case 4:return Cy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ua(e,null,i,n):un(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),C0(t,e,i,r,n);case 7:return un(t,e,e.pendingProps,n),e.child;case 8:return un(t,e,e.pendingProps.children,n),e.child;case 12:return un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,nt(md,i._currentValue),i._currentValue=a,o!==null)if(mi(o.value,a)){if(o.children===r.children&&!xn.current){e=gr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=ur(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),$m(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),$m(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}un(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ra(e,n),r=Yn(r),i=i(r),e.flags|=1,un(t,e,i,n),e.child;case 14:return i=e.type,r=ai(i,e.pendingProps),r=ai(i.type,r),I0(t,e,i,r,n);case 15:return SE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),zh(t,e),e.tag=1,Tn(i)?(t=!0,dd(e)):t=!1,Ra(e,n),TE(e,i,r),Gm(e,i,r,n),Qm(null,e,i,!0,t,n);case 19:return kE(t,e,n);case 22:return CE(t,e,n)}throw Error(Y(156,e.tag))};function qE(t,e){return vT(t,e)}function y2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,e,n,i){return new y2(t,e,n,i)}function By(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _2(t){if(typeof t=="function")return By(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oy)return 11;if(t===ay)return 14}return 2}function ss(t,e){var n=t.alternate;return n===null?(n=Qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")By(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ha:return ro(n.children,r,o,e);case sy:a=8,r|=8;break;case ym:return t=Qn(12,n,e,r|2),t.elementType=ym,t.lanes=o,t;case _m:return t=Qn(13,n,e,r),t.elementType=_m,t.lanes=o,t;case vm:return t=Qn(19,n,e,r),t.elementType=vm,t.lanes=o,t;case nT:return yf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eT:a=10;break e;case tT:a=9;break e;case oy:a=11;break e;case ay:a=14;break e;case zr:a=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Qn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function ro(t,e,n,i){return t=Qn(7,t,i,e),t.lanes=n,t}function yf(t,e,n,i){return t=Qn(22,t,i,e),t.elementType=nT,t.lanes=n,t.stateNode={isHidden:!1},t}function jp(t,e,n){return t=Qn(6,t,null,e),t.lanes=n,t}function zp(t,e,n){return e=Qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function v2(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vp(0),this.expirationTimes=vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uy(t,e,n,i,r,o,a,u,h){return t=new v2(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Qn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sy(o),t}function w2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ca,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function GE(t){if(!t)return gs;t=t._reactInternals;e:{if(To(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Tn(n))return GT(t,n,e)}return e}function ZE(t,e,n,i,r,o,a,u,h){return t=Uy(n,i,!0,t,r,o,a,u,h),t.context=GE(null),n=t.current,i=hn(),r=rs(n),o=ur(i,r),o.callback=e??null,ns(n,o,r),t.current.lanes=r,ic(t,r,i),En(t,i),t}function _f(t,e,n,i){var r=e.current,o=hn(),a=rs(r);return n=GE(n),e.context===null?e.context=n:e.pendingContext=n,e=ur(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ns(r,e,a),t!==null&&(pi(t,r,a,o),Dh(t,r,a)),a}function Sd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function z0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hy(t,e){z0(t,e),(t=t.alternate)&&z0(t,e)}function x2(){return null}var KE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wy(t){this._internalRoot=t}vf.prototype.render=Wy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));_f(t,e,null,null)};vf.prototype.unmount=Wy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mo(function(){_f(null,t,null,null)}),e[pr]=null}};function vf(t){this._internalRoot=t}vf.prototype.unstable_scheduleHydration=function(t){if(t){var e=CT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ur.length&&e!==0&&e<Ur[n].priority;n++);Ur.splice(n,0,t),n===0&&AT(t)}};function $y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F0(){}function T2(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Sd(a);o.call(f)}}var a=ZE(e,i,t,0,null,!1,!1,"",F0);return t._reactRootContainer=a,t[pr]=a.current,Mu(t.nodeType===8?t.parentNode:t),mo(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Sd(h);u.call(f)}}var h=Uy(t,0,!1,null,null,!1,!1,"",F0);return t._reactRootContainer=h,t[pr]=h.current,Mu(t.nodeType===8?t.parentNode:t),mo(function(){_f(e,h,n,i)}),h}function xf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=Sd(a);u.call(h)}}_f(e,a,t,r)}else a=T2(n,e,t,r,i);return Sd(a)}PT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jl(e.pendingLanes);n!==0&&(cy(e,n|1),En(e,Et()),!(We&6)&&($a=Et()+500,As()))}break;case 13:mo(function(){var i=mr(t,1);if(i!==null){var r=hn();pi(i,t,1,r)}}),Hy(t,1)}};hy=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var n=hn();pi(e,t,134217728,n)}Hy(t,134217728)}};ST=function(t){if(t.tag===13){var e=rs(t),n=mr(t,e);if(n!==null){var i=hn();pi(n,t,e,i)}Hy(t,e)}};CT=function(){return Xe};IT=function(t,e){var n=Xe;try{return Xe=t,e()}finally{Xe=n}};bm=function(t,e,n){switch(e){case"input":if(Tm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=hf(i);if(!r)throw Error(Y(90));rT(i),Tm(i,r)}}}break;case"textarea":oT(t,n);break;case"select":e=n.value,e!=null&&Ia(t,!!n.multiple,e,!1)}};fT=jy;pT=mo;var E2={usingClientEntryPoint:!1,Events:[sc,ma,hf,hT,dT,jy]},ql={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P2={bundleType:ql.bundleType,version:ql.version,rendererPackageName:ql.rendererPackageName,rendererConfig:ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yT(t),t===null?null:t.stateNode},findFiberByHostInstance:ql.findFiberByHostInstance||x2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{af=gh.inject(P2),ki=gh}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E2;Mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(e))throw Error(Y(200));return w2(t,e,null,n)};Mn.createRoot=function(t,e){if(!$y(t))throw Error(Y(299));var n=!1,i="",r=KE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Uy(t,1,!1,null,null,n,!1,i,r),t[pr]=e.current,Mu(t.nodeType===8?t.parentNode:t),new Wy(e)};Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=yT(e),t=t===null?null:t.stateNode,t};Mn.flushSync=function(t){return mo(t)};Mn.hydrate=function(t,e,n){if(!wf(e))throw Error(Y(200));return xf(null,t,e,!0,n)};Mn.hydrateRoot=function(t,e,n){if(!$y(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=KE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=ZE(e,null,t,1,n??null,r,!1,o,a),t[pr]=e.current,Mu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new vf(e)};Mn.render=function(t,e,n){if(!wf(e))throw Error(Y(200));return xf(null,t,e,!1,n)};Mn.unmountComponentAtNode=function(t){if(!wf(t))throw Error(Y(40));return t._reactRootContainer?(mo(function(){xf(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};Mn.unstable_batchedUpdates=jy;Mn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!wf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return xf(t,e,n,!1,i)};Mn.version="18.3.1-next-f1338f8080-20240426";function QE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QE)}catch(t){console.error(t)}}QE(),Q1.exports=Mn;var S2=Q1.exports,B0=S2;mm.createRoot=B0.createRoot,mm.hydrateRoot=B0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hu(){return Hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hu.apply(this,arguments)}var Qr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qr||(Qr={}));const U0="popstate";function C2(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=Eo(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),lg("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:Cd(o))}function i(r,o){Tf(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return A2(e,n,i,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function I2(){return Math.random().toString(36).substr(2,8)}function H0(t,e){return{usr:t.state,key:t.key,idx:e}}function lg(t,e,n,i){return n===void 0&&(n=null),Hu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Eo(e):e,{state:n,key:e&&e.key||i||I2()})}function Cd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function A2(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Qr.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Hu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Qr.Pop;let O=m(),b=O==null?null:O-f;f=O,h&&h({action:u,location:k.location,delta:b})}function _(O,b){u=Qr.Push;let P=lg(k.location,O,b);n&&n(P,O),f=m()+1;let C=H0(P,f),B=k.createHref(P);try{a.pushState(C,"",B)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(B)}o&&h&&h({action:u,location:k.location,delta:1})}function T(O,b){u=Qr.Replace;let P=lg(k.location,O,b);n&&n(P,O),f=m();let C=H0(P,f),B=k.createHref(P);a.replaceState(C,"",B),o&&h&&h({action:u,location:k.location,delta:0})}function A(O){let b=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof O=="string"?O:Cd(O);return P=P.replace(/ $/,"%20"),mt(b,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,b)}let k={get action(){return u},get location(){return t(r,a)},listen(O){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(U0,g),h=O,()=>{r.removeEventListener(U0,g),h=null}},createHref(O){return e(r,O)},createURL:A,encodeLocation(O){let b=A(O);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:_,replace:T,go(O){return a.go(O)}};return k}var W0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(W0||(W0={}));function b2(t,e,n){return n===void 0&&(n="/"),k2(t,e,n)}function k2(t,e,n,i){let r=typeof e=="string"?Eo(e):e,o=qa(r.pathname||"/",n);if(o==null)return null;let a=XE(t);R2(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=U2(o);u=F2(a[h],f)}return u}function XE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(mt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=os([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(mt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),XE(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:j2(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of YE(o.path))r(o,a,h)}),e}function YE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=YE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function R2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:z2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const N2=/^:[\w-]+$/,L2=3,M2=2,O2=1,D2=10,V2=-2,$0=t=>t==="*";function j2(t,e){let n=t.split("/"),i=n.length;return n.some($0)&&(i+=V2),e&&(i+=M2),n.filter(r=>!$0(r)).reduce((r,o)=>r+(N2.test(o)?L2:o===""?O2:D2),i)}function z2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function F2(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=ug({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),_=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:os([o,g.pathname]),pathnameBase:G2(os([o,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(o=os([o,g.pathnameBase]))}return a}function ug(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=B2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:_,isOptional:T}=m;if(_==="*"){let k=u[g]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const A=u[g];return T&&!A?f[_]=void 0:f[_]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function B2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Tf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function U2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const H2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W2=t=>H2.test(t);function $2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Eo(t):t,o;if(n)if(W2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Tf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=q0(n.substring(1),"/"):o=q0(n,e)}else o=e;return{pathname:o,search:Z2(i),hash:K2(r)}}function q0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Fp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function q2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qy(t,e){let n=q2(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Gy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Eo(t):(r=Hu({},t),mt(!r.pathname||!r.pathname.includes("?"),Fp("?","pathname","search",r)),mt(!r.pathname||!r.pathname.includes("#"),Fp("#","pathname","hash",r)),mt(!r.search||!r.search.includes("#"),Fp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let h=$2(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const os=t=>t.join("/").replace(/\/\/+/g,"/"),G2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,K2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Q2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JE=["post","put","patch","delete"];new Set(JE);const X2=["get",...JE];new Set(X2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wu.apply(this,arguments)}const Ef=D.createContext(null),eP=D.createContext(null),Pr=D.createContext(null),Pf=D.createContext(null),bs=D.createContext({outlet:null,matches:[],isDataRoute:!1}),tP=D.createContext(null);function Y2(t,e){let{relative:n}=e===void 0?{}:e;ol()||mt(!1);let{basename:i,navigator:r}=D.useContext(Pr),{hash:o,pathname:a,search:u}=Cf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:os([i,a])),r.createHref({pathname:h,search:u,hash:o})}function ol(){return D.useContext(Pf)!=null}function Po(){return ol()||mt(!1),D.useContext(Pf).location}function nP(t){D.useContext(Pr).static||D.useLayoutEffect(t)}function Sf(){let{isDataRoute:t}=D.useContext(bs);return t?hR():J2()}function J2(){ol()||mt(!1);let t=D.useContext(Ef),{basename:e,future:n,navigator:i}=D.useContext(Pr),{matches:r}=D.useContext(bs),{pathname:o}=Po(),a=JSON.stringify(qy(r,n.v7_relativeSplatPath)),u=D.useRef(!1);return nP(()=>{u.current=!0}),D.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=Gy(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:os([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function Cf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=D.useContext(Pr),{matches:r}=D.useContext(bs),{pathname:o}=Po(),a=JSON.stringify(qy(r,i.v7_relativeSplatPath));return D.useMemo(()=>Gy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function eR(t,e){return tR(t,e)}function tR(t,e,n,i){ol()||mt(!1);let{navigator:r}=D.useContext(Pr),{matches:o}=D.useContext(bs),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=Po(),m;if(e){var g;let O=typeof e=="string"?Eo(e):e;h==="/"||(g=O.pathname)!=null&&g.startsWith(h)||mt(!1),m=O}else m=f;let _=m.pathname||"/",T=_;if(h!=="/"){let O=h.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(O.length).join("/")}let A=b2(t,{pathname:T}),k=oR(A&&A.map(O=>Object.assign({},O,{params:Object.assign({},u,O.params),pathname:os([h,r.encodeLocation?r.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?h:os([h,r.encodeLocation?r.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),o,n,i);return e&&k?D.createElement(Pf.Provider,{value:{location:Wu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Qr.Pop}},k):k}function nR(){let t=cR(),e=Q2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,null)}const iR=D.createElement(nR,null);class rR extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(bs.Provider,{value:this.props.routeContext},D.createElement(tP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sR(t){let{routeContext:e,match:n,children:i}=t,r=D.useContext(Ef);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(bs.Provider,{value:e},i)}function oR(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||mt(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:_,errors:T}=n,A=g.route.loader&&_[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||A){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let T,A=!1,k=null,O=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||iR,h&&(f<0&&_===0?(dR("route-fallback"),A=!0,O=null):f===_&&(A=!0,O=g.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,_+1)),P=()=>{let C;return T?C=k:A?C=O:g.route.Component?C=D.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=m,D.createElement(sR,{match:g,routeContext:{outlet:m,matches:b,isDataRoute:n!=null},children:C})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?D.createElement(rR,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:P(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):P()},null)}var iP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(iP||{}),rP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rP||{});function aR(t){let e=D.useContext(Ef);return e||mt(!1),e}function lR(t){let e=D.useContext(eP);return e||mt(!1),e}function uR(t){let e=D.useContext(bs);return e||mt(!1),e}function sP(t){let e=uR(),n=e.matches[e.matches.length-1];return n.route.id||mt(!1),n.route.id}function cR(){var t;let e=D.useContext(tP),n=lR(),i=sP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function hR(){let{router:t}=aR(iP.UseNavigateStable),e=sP(rP.UseNavigateStable),n=D.useRef(!1);return nP(()=>{n.current=!0}),D.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Wu({fromRouteId:e},o)))},[t,e])}const G0={};function dR(t,e,n){G0[t]||(G0[t]=!0)}function fR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function oP(t){let{to:e,replace:n,state:i,relative:r}=t;ol()||mt(!1);let{future:o,static:a}=D.useContext(Pr),{matches:u}=D.useContext(bs),{pathname:h}=Po(),f=Sf(),m=Gy(e,qy(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return D.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function Vr(t){mt(!1)}function pR(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Qr.Pop,navigator:o,static:a=!1,future:u}=t;ol()&&mt(!1);let h=e.replace(/^\/*/,"/"),f=D.useMemo(()=>({basename:h,navigator:o,static:a,future:Wu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=Eo(i));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:A="default"}=i,k=D.useMemo(()=>{let O=qa(m,h);return O==null?null:{location:{pathname:O,search:g,hash:_,state:T,key:A},navigationType:r}},[h,m,g,_,T,A,r]);return k==null?null:D.createElement(Pr.Provider,{value:f},D.createElement(Pf.Provider,{children:n,value:k}))}function mR(t){let{children:e,location:n}=t;return eR(cg(e),n)}new Promise(()=>{});function cg(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(i,r)=>{if(!D.isValidElement(i))return;let o=[...e,r];if(i.type===D.Fragment){n.push.apply(n,cg(i.props.children,o));return}i.type!==Vr&&mt(!1),!i.props.index||!i.props.children||mt(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=cg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Id(){return Id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Id.apply(this,arguments)}function aP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function gR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yR(t,e){return t.button===0&&(!e||e==="_self")&&!gR(t)}const _R=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],wR="6";try{window.__reactRouterVersion=wR}catch{}const xR=D.createContext({isTransitioning:!1}),TR="startTransition",Z0=pb[TR];function ER(t){let{basename:e,children:n,future:i,window:r}=t,o=D.useRef();o.current==null&&(o.current=C2({window:r,v5Compat:!0}));let a=o.current,[u,h]=D.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=D.useCallback(g=>{f&&Z0?Z0(()=>h(g)):h(g)},[h,f]);return D.useLayoutEffect(()=>a.listen(m),[a,m]),D.useEffect(()=>fR(i),[i]),D.createElement(pR,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const PR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CR=D.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,_=aP(e,_R),{basename:T}=D.useContext(Pr),A,k=!1;if(typeof f=="string"&&SR.test(f)&&(A=f,PR))try{let C=new URL(window.location.href),B=f.startsWith("//")?new URL(C.protocol+f):new URL(f),G=qa(B.pathname,T);B.origin===C.origin&&G!=null?f=G+B.search+B.hash:k=!0}catch{}let O=Y2(f,{relative:r}),b=bR(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function P(C){i&&i(C),C.defaultPrevented||b(C)}return D.createElement("a",Id({},_,{href:A||O,onClick:k||o?i:P,ref:n,target:h}))}),IR=D.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=aP(e,vR),_=Cf(h,{relative:g.relative}),T=Po(),A=D.useContext(eP),{navigator:k,basename:O}=D.useContext(Pr),b=A!=null&&kR(_)&&f===!0,P=k.encodeLocation?k.encodeLocation(_).pathname:_.pathname,C=T.pathname,B=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;r||(C=C.toLowerCase(),B=B?B.toLowerCase():null,P=P.toLowerCase()),B&&O&&(B=qa(B,O)||B);const G=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let U=C===P||!a&&C.startsWith(P)&&C.charAt(G)==="/",R=B!=null&&(B===P||!a&&B.startsWith(P)&&B.charAt(P.length)==="/"),S={isActive:U,isPending:R,isTransitioning:b},N=U?i:void 0,V;typeof o=="function"?V=o(S):V=[o,U?"active":null,R?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(S):u;return D.createElement(CR,Id({},g,{"aria-current":N,className:V,ref:n,style:j,to:h,viewTransition:f}),typeof m=="function"?m(S):m)});var hg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hg||(hg={}));var K0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(K0||(K0={}));function AR(t){let e=D.useContext(Ef);return e||mt(!1),e}function bR(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=Sf(),f=Po(),m=Cf(t,{relative:a});return D.useCallback(g=>{if(yR(g,n)){g.preventDefault();let _=i!==void 0?i:Cd(f)===Cd(m);h(t,{replace:_,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function kR(t,e){e===void 0&&(e={});let n=D.useContext(xR);n==null&&mt(!1);let{basename:i}=AR(hg.useViewTransitionState),r=Cf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=qa(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=qa(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ug(r.pathname,a)!=null||ug(r.pathname,o)!=null}const lP=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),If=D.createContext({}),Af=D.createContext(null),bf=typeof document<"u",Zy=bf?D.useLayoutEffect:D.useEffect,uP=D.createContext({strict:!1}),Ky=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),RR="framerAppearId",cP="data-"+Ky(RR);function NR(t,e,n,i){const{visualElement:r}=D.useContext(If),o=D.useContext(uP),a=D.useContext(Af),u=D.useContext(lP).reducedMotion,h=D.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;D.useInsertionEffect(()=>{f&&f.update(n,a)});const m=D.useRef(!!(n[cP]&&!window.HandoffComplete));return Zy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),D.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function Ta(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function LR(t,e,n){return D.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Ta(n)&&(n.current=i))},[e])}function $u(t){return typeof t=="string"||Array.isArray(t)}function kf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xy=["initial",...Qy];function Rf(t){return kf(t.animate)||Xy.some(e=>$u(t[e]))}function hP(t){return!!(Rf(t)||t.variants)}function MR(t,e){if(Rf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||$u(n)?n:void 0,animate:$u(i)?i:void 0}}return t.inherit!==!1?e:{}}function OR(t){const{initial:e,animate:n}=MR(t,D.useContext(If));return D.useMemo(()=>({initial:e,animate:n}),[Q0(e),Q0(n)])}function Q0(t){return Array.isArray(t)?t.join(" "):t}const X0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qu={};for(const t in X0)qu[t]={isEnabled:e=>X0[t].some(n=>!!e[n])};function DR(t){for(const e in t)qu[e]={...qu[e],...t[e]}}const Yy=D.createContext({}),dP=D.createContext({}),VR=Symbol.for("motionComponentSymbol");function jR({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&DR(t);function o(u,h){let f;const m={...D.useContext(lP),...u,layoutId:zR(u)},{isStatic:g}=m,_=OR(u),T=i(u,g);if(!g&&bf){_.visualElement=NR(r,T,m,e);const A=D.useContext(dP),k=D.useContext(uP).strict;_.visualElement&&(f=_.visualElement.loadFeatures(m,k,t,A))}return D.createElement(If.Provider,{value:_},f&&_.visualElement?D.createElement(f,{visualElement:_.visualElement,...m}):null,n(r,u,LR(T,_.visualElement,h),T,g,_.visualElement))}const a=D.forwardRef(o);return a[VR]=r,a}function zR({layoutId:t}){const e=D.useContext(Yy).id;return e&&t!==void 0?e+"-"+t:t}function FR(t){function e(i,r={}){return jR(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const BR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jy(t){return typeof t!="string"||t.includes("-")?!1:!!(BR.indexOf(t)>-1||/[A-Z]/.test(t))}const Ad={};function UR(t){Object.assign(Ad,t)}const ac=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],So=new Set(ac);function fP(t,{layout:e,layoutId:n}){return So.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ad[t]||t==="opacity")}const Pn=t=>!!(t&&t.getVelocity),HR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WR=ac.length;function $R(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<WR;a++){const u=ac[a];if(t[u]!==void 0){const h=HR[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const pP=t=>e=>typeof e=="string"&&e.startsWith(t),mP=pP("--"),dg=pP("var(--"),qR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,GR=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ys=(t,e,n)=>Math.min(Math.max(n,t),e),Co={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mu={...Co,transform:t=>ys(0,1,t)},yh={...Co,default:1},gu=t=>Math.round(t*1e5)/1e5,Nf=/(-)?([\d]*\.?[\d])+/g,gP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ZR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function lc(t){return typeof t=="string"}const uc=t=>({test:e=>lc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),jr=uc("deg"),Ni=uc("%"),ve=uc("px"),KR=uc("vh"),QR=uc("vw"),Y0={...Ni,parse:t=>Ni.parse(t)/100,transform:t=>Ni.transform(t*100)},J0={...Co,transform:Math.round},yP={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,size:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,rotate:jr,rotateX:jr,rotateY:jr,rotateZ:jr,scale:yh,scaleX:yh,scaleY:yh,scaleZ:yh,skew:jr,skewX:jr,skewY:jr,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:mu,originX:Y0,originY:Y0,originZ:ve,zIndex:J0,fillOpacity:mu,strokeOpacity:mu,numOctaves:J0};function e_(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const _=e[g];if(mP(g)){o[g]=_;continue}const T=yP[g],A=GR(_,T);if(So.has(g)){if(h=!0,a[g]=A,!m)continue;_!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=A):r[g]=A}if(e.transform||(h||i?r.transform=$R(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:_="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${_} ${T}`}}const t_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _P(t,e,n){for(const i in e)!Pn(e[i])&&!fP(i,n)&&(t[i]=e[i])}function XR({transformTemplate:t},e,n){return D.useMemo(()=>{const i=t_();return e_(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function YR(t,e,n){const i=t.style||{},r={};return _P(r,i,t),Object.assign(r,XR(t,e,n)),t.transformValues?t.transformValues(r):r}function JR(t,e,n){const i={},r=YR(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const eN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||eN.has(t)}let vP=t=>!bd(t);function tN(t){t&&(vP=e=>e.startsWith("on")?!bd(e):t(e))}try{tN(require("@emotion/is-prop-valid").default)}catch{}function nN(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(vP(r)||n===!0&&bd(r)||!e&&!bd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function ew(t,e,n){return typeof t=="string"?t:ve.transform(e+n*t)}function iN(t,e,n){const i=ew(e,t.x,t.width),r=ew(n,t.y,t.height);return`${i} ${r}`}const rN={offset:"stroke-dashoffset",array:"stroke-dasharray"},sN={offset:"strokeDashoffset",array:"strokeDasharray"};function oN(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?rN:sN;t[o.offset]=ve.transform(-i);const a=ve.transform(e),u=ve.transform(n);t[o.array]=`${a} ${u}`}function n_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,_){if(e_(t,f,m,_),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:A,dimensions:k}=t;T.transform&&(k&&(A.transform=T.transform),delete T.transform),k&&(r!==void 0||o!==void 0||A.transform)&&(A.transformOrigin=iN(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&oN(T,a,u,h,!1)}const wP=()=>({...t_(),attrs:{}}),i_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function aN(t,e,n,i){const r=D.useMemo(()=>{const o=wP();return n_(o,e,{enableHardwareAcceleration:!1},i_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};_P(o,t.style,t),r.style={...o,...r.style}}return r}function lN(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Jy(n)?aN:JR)(i,o,a,n),m={...nN(i,typeof n=="string",t),...h,ref:r},{children:g}=i,_=D.useMemo(()=>Pn(g)?g.get():g,[g]);return D.createElement(n,{...m,children:_})}}function xP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const TP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EP(t,e,n,i){xP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(TP.has(r)?r:Ky(r),e.attrs[r])}function r_(t,e){const{style:n}=t,i={};for(const r in n)(Pn(n[r])||e.style&&Pn(e.style[r])||fP(r,t))&&(i[r]=n[r]);return i}function PP(t,e){const n=r_(t,e);for(const i in t)if(Pn(t[i])||Pn(e[i])){const r=ac.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function s_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function SP(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const kd=t=>Array.isArray(t),uN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),cN=t=>kd(t)?t[t.length-1]||0:t;function Hh(t){const e=Pn(t)?t.get():t;return uN(e)?e.toValue():e}function hN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:dN(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const CP=t=>(e,n)=>{const i=D.useContext(If),r=D.useContext(Af),o=()=>hN(t,e,i,r);return n?o():SP(o)};function dN(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Hh(o[_]);let{initial:a,animate:u}=t;const h=Rf(t),f=hP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!kf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const A=s_(t,T);if(!A)return;const{transitionEnd:k,transition:O,...b}=A;for(const P in b){let C=b[P];if(Array.isArray(C)){const B=m?C.length-1:0;C=C[B]}C!==null&&(r[P]=C)}for(const P in k)r[P]=k[P]}),r}const Pt=t=>t;class tw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function fN(t){let e=new tw,n=new tw,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,_=g?e:n;return f&&a.add(h),_.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const _h=["prepare","read","update","preRender","render","postRender"],pN=40;function mN(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=_h.reduce((g,_)=>(g[_]=fN(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,pN),1),r.timestamp=g,r.isProcessing=!0,_h.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:_h.reduce((g,_)=>{const T=o[_];return g[_]=(A,k=!1,O=!1)=>(n||h(),T.schedule(A,k,O)),g},{}),cancel:g=>_h.forEach(_=>o[_].cancel(g)),state:r,steps:o}}const{schedule:it,cancel:yr,state:Yt,steps:Bp}=mN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pt,!0),gN={useVisualState:CP({scrapeMotionValuesFromProps:PP,createRenderState:wP,onMount:(t,e,{renderState:n,latestValues:i})=>{it.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),it.render(()=>{n_(n,i,{enableHardwareAcceleration:!1},i_(e.tagName),t.transformTemplate),EP(e,n)})}})},yN={useVisualState:CP({scrapeMotionValuesFromProps:r_,createRenderState:t_})};function _N(t,{forwardMotionProps:e=!1},n,i){return{...Jy(t)?gN:yN,preloadedFeatures:n,useRender:lN(e),createVisualElement:i,Component:t}}function or(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const IP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Lf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const vN=t=>e=>IP(e)&&t(e,Lf(e));function cr(t,e,n,i){return or(t,e,vN(n),i)}const wN=(t,e)=>n=>e(t(n)),as=(...t)=>t.reduce(wN);function AP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const nw=AP("dragHorizontal"),iw=AP("dragVertical");function bP(t){let e=!1;if(t==="y")e=iw();else if(t==="x")e=nw();else{const n=nw(),i=iw();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function kP(){const t=bP(!0);return t?(t(),!1):!0}class ks{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rw(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||kP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&it.update(()=>u[i](o,a))};return cr(t.current,n,r,{passive:!t.getProps()[i]})}class xN extends ks{mount(){this.unmount=as(rw(this.node,!0),rw(this.node,!1))}unmount(){}}class TN extends ks{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=as(or(this.node.current,"focus",()=>this.onFocus()),or(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const RP=(t,e)=>e?t===e?!0:RP(t,e.parentElement):!1;function Up(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Lf(n))}class EN extends ks{constructor(){super(...arguments),this.removeStartListeners=Pt,this.removeEndListeners=Pt,this.removeAccessibleListeners=Pt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=cr(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();it.update(()=>{!g&&!RP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=cr(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=as(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Up("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&it.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=or(this.node.current,"keyup",a),Up("down",(u,h)=>{this.startPress(u,h)})},n=or(this.node.current,"keydown",e),i=()=>{this.isPressing&&Up("cancel",(o,a)=>this.cancelPress(o,a))},r=or(this.node.current,"blur",i);this.removeAccessibleListeners=as(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&it.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!kP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&it.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=cr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=or(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=as(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const fg=new WeakMap,Hp=new WeakMap,PN=t=>{const e=fg.get(t.target);e&&e(t)},SN=t=>{t.forEach(PN)};function CN({root:t,...e}){const n=t||document;Hp.has(n)||Hp.set(n,{});const i=Hp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(SN,{root:t,...e})),i[r]}function IN(t,e,n){const i=CN(e);return fg.set(t,n),i.observe(t),()=>{fg.delete(t),i.unobserve(t)}}const AN={some:0,all:1};class bN extends ks{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:AN[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(h)};return IN(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(kN(e,n))&&this.startObserver()}unmount(){}}function kN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const RN={inView:{Feature:bN},tap:{Feature:EN},focus:{Feature:TN},hover:{Feature:xN}};function NP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function NN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function LN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Mf(t,e,n){const i=t.getProps();return s_(i,e,n!==void 0?n:i.custom,NN(t),LN(t))}let o_=Pt;const so=t=>t*1e3,hr=t=>t/1e3,MN={current:!1},LP=t=>Array.isArray(t)&&typeof t[0]=="number";function MP(t){return!!(!t||typeof t=="string"&&OP[t]||LP(t)||Array.isArray(t)&&t.every(MP))}const tu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,OP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tu([0,.65,.55,1]),circOut:tu([.55,0,1,.45]),backIn:tu([.31,.01,.66,-.59]),backOut:tu([.33,1.53,.69,.99])};function DP(t){if(t)return LP(t)?tu(t):Array.isArray(t)?t.map(DP):OP[t]}function ON(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=DP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function DN(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const VP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,VN=1e-7,jN=12;function zN(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=VP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>VN&&++u<jN);return a}function cc(t,e,n,i){if(t===e&&n===i)return Pt;const r=o=>zN(o,0,1,t,n);return o=>o===0||o===1?o:VP(r(o),e,i)}const FN=cc(.42,0,1,1),BN=cc(0,0,.58,1),jP=cc(.42,0,.58,1),UN=t=>Array.isArray(t)&&typeof t[0]!="number",zP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FP=t=>e=>1-t(1-e),a_=t=>1-Math.sin(Math.acos(t)),BP=FP(a_),HN=zP(a_),UP=cc(.33,1.53,.69,.99),l_=FP(UP),WN=zP(l_),$N=t=>(t*=2)<1?.5*l_(t):.5*(2-Math.pow(2,-10*(t-1))),qN={linear:Pt,easeIn:FN,easeInOut:jP,easeOut:BN,circIn:a_,circInOut:HN,circOut:BP,backIn:l_,backInOut:WN,backOut:UP,anticipate:$N},sw=t=>{if(Array.isArray(t)){o_(t.length===4);const[e,n,i,r]=t;return cc(e,n,i,r)}else if(typeof t=="string")return qN[t];return t},u_=(t,e)=>n=>!!(lc(n)&&ZR.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),HP=(t,e,n)=>i=>{if(!lc(i))return i;const[r,o,a,u]=i.match(Nf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},GN=t=>ys(0,255,t),Wp={...Co,transform:t=>Math.round(GN(t))},to={test:u_("rgb","red"),parse:HP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Wp.transform(t)+", "+Wp.transform(e)+", "+Wp.transform(n)+", "+gu(mu.transform(i))+")"};function ZN(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const pg={test:u_("#"),parse:ZN,transform:to.transform},Ea={test:u_("hsl","hue"),parse:HP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ni.transform(gu(e))+", "+Ni.transform(gu(n))+", "+gu(mu.transform(i))+")"},ln={test:t=>to.test(t)||pg.test(t)||Ea.test(t),parse:t=>to.test(t)?to.parse(t):Ea.test(t)?Ea.parse(t):pg.parse(t),transform:t=>lc(t)?t:t.hasOwnProperty("red")?to.transform(t):Ea.transform(t)},ft=(t,e,n)=>-n*t+n*e+t;function $p(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function KN({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=$p(h,u,t+1/3),o=$p(h,u,t),a=$p(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const qp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},QN=[pg,to,Ea],XN=t=>QN.find(e=>e.test(t));function ow(t){const e=XN(t);let n=e.parse(t);return e===Ea&&(n=KN(n)),n}const WP=(t,e)=>{const n=ow(t),i=ow(e),r={...n};return o=>(r.red=qp(n.red,i.red,o),r.green=qp(n.green,i.green,o),r.blue=qp(n.blue,i.blue,o),r.alpha=ft(n.alpha,i.alpha,o),to.transform(r))};function YN(t){var e,n;return isNaN(t)&&lc(t)&&(((e=t.match(Nf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(gP))===null||n===void 0?void 0:n.length)||0)>0}const $P={regex:qR,countKey:"Vars",token:"${v}",parse:Pt},qP={regex:gP,countKey:"Colors",token:"${c}",parse:ln.parse},GP={regex:Nf,countKey:"Numbers",token:"${n}",parse:Co.parse};function Gp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Rd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Gp(n,$P),Gp(n,qP),Gp(n,GP),n}function ZP(t){return Rd(t).values}function KP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Rd(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace($P.token,a[h]):h<i+n?u=u.replace(qP.token,ln.transform(a[h])):u=u.replace(GP.token,gu(a[h]));return u}}const JN=t=>typeof t=="number"?0:t;function eL(t){const e=ZP(t);return KP(t)(e.map(JN))}const _s={test:YN,parse:ZP,createTransformer:KP,getAnimatableNone:eL},QP=(t,e)=>n=>`${n>0?e:t}`;function XP(t,e){return typeof t=="number"?n=>ft(t,e,n):ln.test(t)?WP(t,e):t.startsWith("var(")?QP(t,e):JP(t,e)}const YP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>XP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},tL=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=XP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},JP=(t,e)=>{const n=_s.createTransformer(e),i=Rd(t),r=Rd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?as(YP(i.values,r.values),n):QP(t,e)},Gu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},aw=(t,e)=>n=>ft(t,e,n);function nL(t){return typeof t=="number"?aw:typeof t=="string"?ln.test(t)?WP:JP:Array.isArray(t)?YP:typeof t=="object"?tL:aw}function iL(t,e,n){const i=[],r=n||nL(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||Pt:e;u=as(h,u)}i.push(u)}return i}function eS(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(o_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=iL(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Gu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(ys(t[0],t[o-1],f)):h}function rL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Gu(0,e,i);t.push(ft(n,1,r))}}function sL(t){const e=[0];return rL(e,t.length-1),e}function oL(t,e){return t.map(n=>n*e)}function aL(t,e){return t.map(()=>e||jP).splice(0,t.length-1)}function Nd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=UN(i)?i.map(sw):sw(i),o={done:!1,value:e[0]},a=oL(n&&n.length===e.length?n:sL(e),t),u=eS(a,e,{ease:Array.isArray(r)?r:aL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function tS(t,e){return e?t*(1e3/e):0}const lL=5;function nS(t,e,n){const i=Math.max(e-lL,0);return tS(n-t(i),e-i)}const Zp=.001,uL=.01,cL=10,hL=.05,dL=1;function fL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=ys(hL,dL,a),t=ys(uL,cL,hr(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,T=mg(f,a),A=Math.exp(-g);return Zp-_/T*A},o=f=>{const g=f*a*t,_=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,A=Math.exp(-g),k=mg(Math.pow(f,2),a);return(-r(f)+Zp>0?-1:1)*((_-T)*A)/k}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Zp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=mL(r,o,u);if(t=so(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const pL=12;function mL(t,e,n){let i=n;for(let r=1;r<pL;r++)i=i-t(i)/e(i);return i}function mg(t,e){return t*Math.sqrt(1-e*e)}const gL=["duration","bounce"],yL=["stiffness","damping","mass"];function lw(t,e){return e.some(n=>t[n]!==void 0)}function _L(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!lw(t,yL)&&lw(t,gL)){const n=fL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function iS({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:_}=_L({...i,velocity:-hr(i.velocity||0)}),T=g||0,A=h/(2*Math.sqrt(u*f)),k=o-r,O=hr(Math.sqrt(u/f)),b=Math.abs(k)<5;n||(n=b?.01:2),e||(e=b?.005:.5);let P;if(A<1){const C=mg(O,A);P=B=>{const G=Math.exp(-A*O*B);return o-G*((T+A*O*k)/C*Math.sin(C*B)+k*Math.cos(C*B))}}else if(A===1)P=C=>o-Math.exp(-O*C)*(k+(T+O*k)*C);else{const C=O*Math.sqrt(A*A-1);P=B=>{const G=Math.exp(-A*O*B),U=Math.min(C*B,300);return o-G*((T+A*O*k)*Math.sinh(U)+C*k*Math.cosh(U))/C}}return{calculatedDuration:_&&m||null,next:C=>{const B=P(C);if(_)a.done=C>=m;else{let G=T;C!==0&&(A<1?G=nS(P,C,B):G=0);const U=Math.abs(G)<=n,R=Math.abs(o-B)<=e;a.done=U&&R}return a.value=a.done?o:B,a}}}function uw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},T=S=>u!==void 0&&S<u||h!==void 0&&S>h,A=S=>u===void 0?h:h===void 0||Math.abs(u-S)<Math.abs(h-S)?u:h;let k=n*e;const O=g+k,b=a===void 0?O:a(O);b!==O&&(k=b-g);const P=S=>-k*Math.exp(-S/i),C=S=>b+P(S),B=S=>{const N=P(S),V=C(S);_.done=Math.abs(N)<=f,_.value=_.done?b:V};let G,U;const R=S=>{T(_.value)&&(G=S,U=iS({keyframes:[_.value,A(_.value)],velocity:nS(C,S,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:S=>{let N=!1;return!U&&G===void 0&&(N=!0,B(S),R(S)),G!==void 0&&S>G?U.next(S-G):(!N&&B(S),_)}}}const vL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>it.update(e,!0),stop:()=>yr(e),now:()=>Yt.isProcessing?Yt.timestamp:performance.now()}},cw=2e4;function hw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<cw;)e+=n,i=t.next(e);return e>=cw?1/0:e}const wL={decay:uw,inertia:uw,tween:Nd,keyframes:Nd,spring:iS};function Ld({autoplay:t=!0,delay:e=0,driver:n=vL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,..._}){let T=1,A=!1,k,O;const b=()=>{O=new Promise(te=>{k=te})};b();let P;const C=wL[r]||Nd;let B;C!==Nd&&typeof i[0]!="number"&&(B=eS([0,100],i,{clamp:!1}),i=[0,100]);const G=C({..._,keyframes:i});let U;u==="mirror"&&(U=C({..._,keyframes:[...i].reverse(),velocity:-(_.velocity||0)}));let R="idle",S=null,N=null,V=null;G.calculatedDuration===null&&o&&(G.calculatedDuration=hw(G));const{calculatedDuration:j}=G;let z=1/0,M=1/0;j!==null&&(z=j+a,M=z*(o+1)-a);let ae=0;const Ye=te=>{if(N===null)return;T>0&&(N=Math.min(N,te)),T<0&&(N=Math.min(te-M/T,N)),S!==null?ae=S:ae=Math.round(te-N)*T;const Se=ae-e*(T>=0?1:-1),Je=T>=0?Se<0:Se>M;ae=Math.max(Se,0),R==="finished"&&S===null&&(ae=M);let Me=ae,Ne=G;if(o){const ue=Math.min(ae,M)/z;let ye=Math.floor(ue),Ce=ue%1;!Ce&&ue>=1&&(Ce=1),Ce===1&&ye--,ye=Math.min(ye,o+1),!!(ye%2)&&(u==="reverse"?(Ce=1-Ce,a&&(Ce-=a/z)):u==="mirror"&&(Ne=U)),Me=ys(0,1,Ce)*z}const fe=Je?{done:!1,value:i[0]}:Ne.next(Me);B&&(fe.value=B(fe.value));let{done:ht}=fe;!Je&&j!==null&&(ht=T>=0?ae>=M:ae<=0);const ne=S===null&&(R==="finished"||R==="running"&&ht);return g&&g(fe.value),ne&&Z(),fe},Ae=()=>{P&&P.stop(),P=void 0},et=()=>{R="idle",Ae(),k(),b(),N=V=null},Z=()=>{R="finished",m&&m(),Ae(),k()},he=()=>{if(A)return;P||(P=n(Ye));const te=P.now();h&&h(),S!==null?N=te-S:(!N||R==="finished")&&(N=te),R==="finished"&&b(),V=N,S=null,R="running",P.start()};t&&he();const J={then(te,Se){return O.then(te,Se)},get time(){return hr(ae)},set time(te){te=so(te),ae=te,S!==null||!P||T===0?S=te:N=P.now()-te/T},get duration(){const te=G.calculatedDuration===null?hw(G):G.calculatedDuration;return hr(te)},get speed(){return T},set speed(te){te===T||!P||(T=te,J.time=hr(ae))},get state(){return R},play:he,pause:()=>{R="paused",S=ae},stop:()=>{A=!0,R!=="idle"&&(R="idle",f&&f(),et())},cancel:()=>{V!==null&&Ye(V),et()},complete:()=>{R="finished"},sample:te=>(N=0,Ye(te))};return J}function xL(t){let e;return()=>(e===void 0&&(e=t()),e)}const TL=xL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),EL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),vh=10,PL=2e4,SL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!MP(e.ease);function CL(t,e,{onUpdate:n,onComplete:i,...r}){if(!(TL()&&EL.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(C=>{u=C})};m();let{keyframes:g,duration:_=300,ease:T,times:A}=r;if(SL(e,r)){const C=Ld({...r,repeat:0,delay:0});let B={done:!1,value:g[0]};const G=[];let U=0;for(;!B.done&&U<PL;)B=C.sample(U),G.push(B.value),U+=vh;A=void 0,g=G,_=U-vh,T="linear"}const k=ON(t.owner.current,e,g,{...r,duration:_,ease:T,times:A}),O=()=>{f=!1,k.cancel()},b=()=>{f=!0,it.update(O),u(),m()};return k.onfinish=()=>{f||(t.set(DN(g,r)),i&&i(),b())},{then(C,B){return h.then(C,B)},attachTimeline(C){return k.timeline=C,k.onfinish=null,Pt},get time(){return hr(k.currentTime||0)},set time(C){k.currentTime=so(C)},get speed(){return k.playbackRate},set speed(C){k.playbackRate=C},get duration(){return hr(_)},play:()=>{a||(k.play(),yr(O))},pause:()=>k.pause(),stop:()=>{if(a=!0,k.playState==="idle")return;const{currentTime:C}=k;if(C){const B=Ld({...r,autoplay:!1});t.setWithVelocity(B.sample(C-vh).value,B.sample(C).value,vh)}b()},complete:()=>{f||k.finish()},cancel:b}}function IL({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Pt,pause:Pt,stop:Pt,then:o=>(o(),Promise.resolve()),cancel:Pt,complete:Pt});return e?Ld({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const AL={type:"spring",stiffness:500,damping:25,restSpeed:10},bL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kL={type:"keyframes",duration:.8},RL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},NL=(t,{keyframes:e})=>e.length>2?kL:So.has(t)?t.startsWith("scale")?bL(e[1]):AL:RL,gg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_s.test(e)||e==="0")&&!e.startsWith("url(")),LL=new Set(["brightness","contrast","saturate","opacity"]);function ML(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Nf)||[];if(!i)return t;const r=n.replace(i,"");let o=LL.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const OL=/([a-z-]*)\(.*?\)/g,yg={..._s,getAnimatableNone:t=>{const e=t.match(OL);return e?e.map(ML).join(" "):t}},DL={...yP,color:ln,backgroundColor:ln,outlineColor:ln,fill:ln,stroke:ln,borderColor:ln,borderTopColor:ln,borderRightColor:ln,borderBottomColor:ln,borderLeftColor:ln,filter:yg,WebkitFilter:yg},c_=t=>DL[t];function rS(t,e){let n=c_(t);return n!==yg&&(n=_s),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sS=t=>/^0[^.\s]+$/.test(t);function VL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||sS(t)}function jL(t,e,n,i){const r=gg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),VL(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=rS(e,u)}return o}function zL({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function h_(t,e){return t[e]||t.default||t}const FL={skipAnimations:!1},d_=(t,e,n,i={})=>r=>{const o=h_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-so(a);const h=jL(e,t,n,o),f=h[0],m=h[h.length-1],g=gg(t,f),_=gg(t,m);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:A=>{e.set(A),o.onUpdate&&o.onUpdate(A)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(zL(o)||(T={...T,...NL(t,T)}),T.duration&&(T.duration=so(T.duration)),T.repeatDelay&&(T.repeatDelay=so(T.repeatDelay)),!g||!_||MN.current||o.type===!1||FL.skipAnimations)return IL(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const A=CL(e,t,T);if(A)return A}return Ld(T)};function Md(t){return!!(Pn(t)&&t.add)}const oS=t=>/^\-?\d*\.?\d+$/.test(t);function f_(t,e){t.indexOf(e)===-1&&t.push(e)}function p_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class m_{constructor(){this.subscriptions=[]}add(e){return f_(this.subscriptions,e),()=>p_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const BL=t=>!isNaN(parseFloat(t));class UL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Yt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,it.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>it.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=BL(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new m_);const i=this.events[e].add(n);return e==="change"?()=>{i(),it.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?tS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ga(t,e){return new UL(t,e)}const aS=t=>e=>e.test(t),HL={test:t=>t==="auto",parse:t=>t},lS=[Co,ve,Ni,jr,QR,KR,HL],Gl=t=>lS.find(aS(t)),WL=[...lS,ln,_s],$L=t=>WL.find(aS(t));function qL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ga(n))}function GL(t,e){const n=Mf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=cN(o[a]);qL(t,a,u)}}function ZL(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(oS(m)||sS(m))?m=parseFloat(m):!$L(m)&&_s.test(f)&&(m=rS(h,f)),t.addValue(h,Ga(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function KL(t,e){return e?(e[t]||e.default||e).from:void 0}function QL(t,e,n){const i={};for(const r in t){const o=KL(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function XL({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function YL(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function uS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const _=t.getValue(g),T=u[g];if(!_||T===void 0||m&&XL(m,g))continue;const A={delay:n,elapsed:0,...h_(o||{},g)};if(window.HandoffAppearAnimations){const b=t.getProps()[cP];if(b){const P=window.HandoffAppearAnimations(b,g,_,it);P!==null&&(A.elapsed=P,A.isHandoff=!0)}}let k=!A.isHandoff&&!YL(_,T);if(A.type==="spring"&&(_.getVelocity()||A.velocity)&&(k=!1),_.animation&&(k=!1),k)continue;_.start(d_(g,_,T,t.shouldReduceMotion&&So.has(g)?{type:!1}:A));const O=_.animation;Md(h)&&(h.add(g),O.then(()=>h.remove(g))),f.push(O)}return a&&Promise.all(f).then(()=>{a&&GL(t,a)}),f}function _g(t,e,n={}){const i=Mf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(uS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return JL(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function JL(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(eM).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(_g(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function eM(t,e){return t.sortNodePosition(e)}function tM(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>_g(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=_g(t,e,n);else{const r=typeof e=="function"?Mf(t,e,n.custom):e;i=Promise.all(uS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const nM=[...Qy].reverse(),iM=Qy.length;function rM(t){return e=>Promise.all(e.map(({animation:n,options:i})=>tM(t,n,i)))}function sM(t){let e=rM(t);const n=aM();let i=!0;const r=(h,f)=>{const m=Mf(t,f);if(m){const{transition:g,transitionEnd:_,...T}=m;h={...h,...T,..._}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},_=[],T=new Set;let A={},k=1/0;for(let b=0;b<iM;b++){const P=nM[b],C=n[P],B=m[P]!==void 0?m[P]:g[P],G=$u(B),U=P===f?C.isActive:null;U===!1&&(k=b);let R=B===g[P]&&B!==m[P]&&G;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),C.protectedKeys={...A},!C.isActive&&U===null||!B&&!C.prevProp||kf(B)||typeof B=="boolean")continue;let N=oM(C.prevProp,B)||P===f&&C.isActive&&!R&&G||b>k&&G,V=!1;const j=Array.isArray(B)?B:[B];let z=j.reduce(r,{});U===!1&&(z={});const{prevResolvedValues:M={}}=C,ae={...M,...z},Ye=Ae=>{N=!0,T.has(Ae)&&(V=!0,T.delete(Ae)),C.needsAnimating[Ae]=!0};for(const Ae in ae){const et=z[Ae],Z=M[Ae];if(A.hasOwnProperty(Ae))continue;let he=!1;kd(et)&&kd(Z)?he=!NP(et,Z):he=et!==Z,he?et!==void 0?Ye(Ae):T.add(Ae):et!==void 0&&T.has(Ae)?Ye(Ae):C.protectedKeys[Ae]=!0}C.prevProp=B,C.prevResolvedValues=z,C.isActive&&(A={...A,...z}),i&&t.blockInitialAnimation&&(N=!1),N&&(!R||V)&&_.push(...j.map(Ae=>({animation:Ae,options:{type:P,...h}})))}if(T.size){const b={};T.forEach(P=>{const C=t.getBaseTarget(P);C!==void 0&&(b[P]=C)}),_.push({animation:b})}let O=!!_.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(O=!1),i=!1,O?e(_):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var A;return(A=T.animationState)===null||A===void 0?void 0:A.setActive(h,f)}),n[h].isActive=f;const _=a(m,h);for(const T in n)n[T].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function oM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!NP(e,t):!1}function $s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aM(){return{animate:$s(!0),whileInView:$s(),whileHover:$s(),whileTap:$s(),whileDrag:$s(),whileFocus:$s(),exit:$s()}}class lM extends ks{constructor(e){super(e),e.animationState||(e.animationState=sM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),kf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let uM=0;class cM extends ks{constructor(){super(...arguments),this.id=uM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const hM={animation:{Feature:lM},exit:{Feature:cM}},dw=(t,e)=>Math.abs(t-e);function dM(t,e){const n=dw(t.x,e.x),i=dw(t.y,e.y);return Math.sqrt(n**2+i**2)}class cS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Qp(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,T=dM(g.offset,{x:0,y:0})>=3;if(!_&&!T)return;const{point:A}=g,{timestamp:k}=Yt;this.history.push({...A,timestamp:k});const{onStart:O,onMove:b}=this.handlers;_||(O&&O(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Kp(_,this.transformPagePoint),it.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:T,onSessionEnd:A,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=Qp(g.type==="pointercancel"?this.lastMoveEventInfo:Kp(_,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,O),A&&A(g,O)},!IP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Lf(e),u=Kp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Yt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,Qp(u,this.history)),this.removeListeners=as(cr(this.contextWindow,"pointermove",this.handlePointerMove),cr(this.contextWindow,"pointerup",this.handlePointerUp),cr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yr(this.updatePoint)}}function Kp(t,e){return e?{point:e(t.point)}:t}function fw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Qp({point:t},e){return{point:t,delta:fw(t,hS(e)),offset:fw(t,fM(e)),velocity:pM(e,.1)}}function fM(t){return t[0]}function hS(t){return t[t.length-1]}function pM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=hS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>so(e)));)n--;if(!i)return{x:0,y:0};const o=hr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Nn(t){return t.max-t.min}function vg(t,e=0,n=.01){return Math.abs(t-e)<=n}function pw(t,e,n,i=.5){t.origin=i,t.originPoint=ft(e.min,e.max,t.origin),t.scale=Nn(n)/Nn(e),(vg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ft(n.min,n.max,t.origin)-t.originPoint,(vg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function yu(t,e,n,i){pw(t.x,e.x,n.x,i?i.originX:void 0),pw(t.y,e.y,n.y,i?i.originY:void 0)}function mw(t,e,n){t.min=n.min+e.min,t.max=t.min+Nn(e)}function mM(t,e,n){mw(t.x,e.x,n.x),mw(t.y,e.y,n.y)}function gw(t,e,n){t.min=e.min-n.min,t.max=t.min+Nn(e)}function _u(t,e,n){gw(t.x,e.x,n.x),gw(t.y,e.y,n.y)}function gM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?ft(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?ft(n,t,i.max):Math.min(t,n)),t}function yw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function yM(t,{top:e,left:n,bottom:i,right:r}){return{x:yw(t.x,n,r),y:yw(t.y,e,i)}}function _w(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function _M(t,e){return{x:_w(t.x,e.x),y:_w(t.y,e.y)}}function vM(t,e){let n=.5;const i=Nn(t),r=Nn(e);return r>i?n=Gu(e.min,e.max-i,t.min):i>r&&(n=Gu(t.min,t.max-r,e.min)),ys(0,1,n)}function wM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const wg=.35;function xM(t=wg){return t===!1?t=0:t===!0&&(t=wg),{x:vw(t,"left","right"),y:vw(t,"top","bottom")}}function vw(t,e,n){return{min:ww(t,e),max:ww(t,n)}}function ww(t,e){return typeof t=="number"?t:t[e]||0}const xw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pa=()=>({x:xw(),y:xw()}),Tw=()=>({min:0,max:0}),bt=()=>({x:Tw(),y:Tw()});function $n(t){return[t("x"),t("y")]}function dS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function TM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function EM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Xp(t){return t===void 0||t===1}function xg({scale:t,scaleX:e,scaleY:n}){return!Xp(t)||!Xp(e)||!Xp(n)}function Zs(t){return xg(t)||fS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function fS(t){return Ew(t.x)||Ew(t.y)}function Ew(t){return t&&t!=="0%"}function Od(t,e,n){const i=t-n,r=e*i;return n+r}function Pw(t,e,n,i,r){return r!==void 0&&(t=Od(t,r,i)),Od(t,n,i)+e}function Tg(t,e=0,n=1,i,r){t.min=Pw(t.min,e,n,i,r),t.max=Pw(t.max,e,n,i,r)}function pS(t,{x:e,y:n}){Tg(t.x,e.translate,e.scale,e.originPoint),Tg(t.y,n.translate,n.scale,n.originPoint)}function PM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Sa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,pS(t,a)),i&&Zs(o.latestValues)&&Sa(t,o.latestValues))}e.x=Sw(e.x),e.y=Sw(e.y)}function Sw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Br(t,e){t.min=t.min+e,t.max=t.max+e}function Cw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=ft(t.min,t.max,o);Tg(t,e[n],e[i],a,e.scale)}const SM=["x","scaleX","originX"],CM=["y","scaleY","originY"];function Sa(t,e){Cw(t.x,e,SM),Cw(t.y,e,CM)}function mS(t,e){return dS(EM(t.getBoundingClientRect(),e))}function IM(t,e,n){const i=mS(t,n),{scroll:r}=e;return r&&(Br(i.x,r.offset.x),Br(i.y,r.offset.y)),i}const gS=({current:t})=>t?t.ownerDocument.defaultView:null,AM=new WeakMap;class bM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Lf(m,"page").point)},o=(m,g)=>{const{drag:_,dragPropagation:T,onDragStart:A}=this.getProps();if(_&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=bP(_),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(O=>{let b=this.getAxisMotionValue(O).get()||0;if(Ni.test(b)){const{projection:P}=this.visualElement;if(P&&P.layout){const C=P.layout.layoutBox[O];C&&(b=Nn(C)*(parseFloat(b)/100))}}this.originPoint[O]=b}),A&&it.update(()=>A(m,g),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:T,onDirectionLock:A,onDrag:k}=this.getProps();if(!_&&!this.openGlobalLock)return;const{offset:O}=g;if(T&&this.currentDirection===null){this.currentDirection=kM(O),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,O),this.updateAxis("y",g.point,O),this.visualElement.render(),k&&k(m,g)},u=(m,g)=>this.stop(m,g),h=()=>$n(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new cS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:gS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&it.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!wh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=gM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Ta(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=yM(r.layoutBox,n):this.constraints=!1,this.elastic=xM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$n(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=wM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ta(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=IM(i,r.root,this.visualElement.getTransformPagePoint());let a=_M(r.layout.layoutBox,o);if(n){const u=n(TM(a));this.hasMutatedConstraints=!!u,u&&(a=dS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=$n(m=>{if(!wh(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,T=r?40:1e7,A={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,A)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(d_(e,i,0,n))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){$n(n=>{const{drag:i}=this.getProps();if(!wh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-ft(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ta(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};$n(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=vM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),$n(a=>{if(!wh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(ft(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;AM.set(this.visualElement,this);const e=this.visualElement.current,n=cr(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Ta(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=or(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&($n(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=wg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function kM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class RM extends ks{constructor(e){super(e),this.removeGroupControls=Pt,this.removeListeners=Pt,this.controls=new bM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Iw=t=>(e,n)=>{t&&it.update(()=>t(e,n))};class NM extends ks{constructor(){super(...arguments),this.removePointerDownListener=Pt}onPointerDown(e){this.session=new cS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Iw(e),onStart:Iw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&it.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=cr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function LM(){const t=D.useContext(Af);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=D.useId();return D.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Wh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Aw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ve.test(t))t=parseFloat(t);else return t;const n=Aw(t,e.target.x),i=Aw(t,e.target.y);return`${n}% ${i}%`}},MM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=_s.parse(t);if(r.length>5)return i;const o=_s.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=ft(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class OM extends uo.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;UR(DM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Wh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||it.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yS(t){const[e,n]=LM(),i=D.useContext(Yy);return uo.createElement(OM,{...t,layoutGroup:i,switchLayoutGroup:D.useContext(dP),isPresent:e,safeToRemove:n})}const DM={borderRadius:{...Zl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zl,borderTopRightRadius:Zl,borderBottomLeftRadius:Zl,borderBottomRightRadius:Zl,boxShadow:MM},_S=["TopLeft","TopRight","BottomLeft","BottomRight"],VM=_S.length,bw=t=>typeof t=="string"?parseFloat(t):t,kw=t=>typeof t=="number"||ve.test(t);function jM(t,e,n,i,r,o){r?(t.opacity=ft(0,n.opacity!==void 0?n.opacity:1,zM(i)),t.opacityExit=ft(e.opacity!==void 0?e.opacity:1,0,FM(i))):o&&(t.opacity=ft(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<VM;a++){const u=`border${_S[a]}Radius`;let h=Rw(e,u),f=Rw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||kw(h)===kw(f)?(t[u]=Math.max(ft(bw(h),bw(f),i),0),(Ni.test(f)||Ni.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=ft(e.rotate||0,n.rotate||0,i))}function Rw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const zM=vS(0,.5,BP),FM=vS(.5,.95,Pt);function vS(t,e,n){return i=>i<t?0:i>e?1:n(Gu(t,e,i))}function Nw(t,e){t.min=e.min,t.max=e.max}function Hn(t,e){Nw(t.x,e.x),Nw(t.y,e.y)}function Lw(t,e,n,i,r){return t-=e,t=Od(t,1/n,i),r!==void 0&&(t=Od(t,1/r,i)),t}function BM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ni.test(e)&&(e=parseFloat(e),e=ft(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=ft(o.min,o.max,i);t===o&&(u-=e),t.min=Lw(t.min,e,n,u,r),t.max=Lw(t.max,e,n,u,r)}function Mw(t,e,[n,i,r],o,a){BM(t,e[n],e[i],e[r],e.scale,o,a)}const UM=["x","scaleX","originX"],HM=["y","scaleY","originY"];function Ow(t,e,n,i){Mw(t.x,e,UM,n?n.x:void 0,i?i.x:void 0),Mw(t.y,e,HM,n?n.y:void 0,i?i.y:void 0)}function Dw(t){return t.translate===0&&t.scale===1}function wS(t){return Dw(t.x)&&Dw(t.y)}function WM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function xS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Vw(t){return Nn(t.x)/Nn(t.y)}class $M{constructor(){this.members=[]}add(e){f_(this.members,e),e.scheduleRender()}remove(e){if(p_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const qM=(t,e)=>t.depth-e.depth;class GM{constructor(){this.children=[],this.isDirty=!1}add(e){f_(this.children,e),this.isDirty=!0}remove(e){p_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(qM),this.isDirty=!1,this.children.forEach(e)}}function ZM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(yr(i),t(o-e))};return it.read(i,!0),()=>yr(i)}function KM(t){window.MotionDebug&&window.MotionDebug.record(t)}function QM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function XM(t,e,n){const i=Pn(t)?t:Ga(t);return i.start(d_("",i,e,n)),i.animation}const zw=["","X","Y","Z"],YM={visibility:"hidden"},Fw=1e3;let JM=0;const Ks={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function TS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=JM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ks.totalNodes=Ks.resolvedTargetDeltas=Ks.recalculatedProjection=0,this.nodes.forEach(nO),this.nodes.forEach(aO),this.nodes.forEach(lO),this.nodes.forEach(iO),KM(Ks)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new GM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new m_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=QM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=ZM(_,250),Wh.hasAnimatedSinceResize&&(Wh.hasAnimatedSinceResize=!1,this.nodes.forEach(Uw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:T,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||fO,{onLayoutAnimationStart:O,onLayoutAnimationComplete:b}=m.getProps(),P=!this.targetLayout||!xS(this.targetLayout,A)||T,C=!_&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||_&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,C);const B={...h_(k,"layout"),onPlay:O,onComplete:b};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else _||Uw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Bw);return}this.isUpdating||this.nodes.forEach(sO),this.isUpdating=!1,this.nodes.forEach(oO),this.nodes.forEach(eO),this.nodes.forEach(tO),this.clearAllSnapshots();const u=performance.now();Yt.delta=ys(0,1e3/60,u-Yt.timestamp),Yt.timestamp=u,Yt.isProcessing=!0,Bp.update.process(Yt),Bp.preRender.process(Yt),Bp.render.process(Yt),Yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(rO),this.sharedNodes.forEach(cO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,it.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){it.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!wS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Zs(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),pO(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return bt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Br(u.x,h.offset.x),Br(u.y,h.offset.y)),u}removeElementScroll(a){const u=bt();Hn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Hn(u,a);const{scroll:_}=this.root;_&&(Br(u.x,-_.offset.x),Br(u.y,-_.offset.y))}Br(u.x,m.offset.x),Br(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=bt();Hn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Sa(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Zs(m.latestValues)&&Sa(h,m.latestValues)}return Zs(this.latestValues)&&Sa(h,this.latestValues),h}removeTransform(a){const u=bt();Hn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Zs(f.latestValues))continue;xg(f.latestValues)&&f.updateSnapshot();const m=bt(),g=f.measurePageBox();Hn(m,g),Ow(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Zs(this.latestValues)&&Ow(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Yt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bt(),this.relativeTargetOrigin=bt(),_u(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=bt(),this.targetWithTransforms=bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hn(this.target,this.layout.layoutBox),pS(this.target,this.targetDelta)):Hn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bt(),this.relativeTargetOrigin=bt(),_u(this.relativeTargetOrigin,this.target,T.target),Hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ks.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||xg(this.parent.latestValues)||fS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Yt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Hn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,T=this.treeScale.y;PM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:A}=u;if(!A){this.projectionTransform&&(this.projectionDelta=Pa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Pa(),this.projectionDeltaWithTransform=Pa());const k=this.projectionTransform;yu(this.projectionDelta,this.layoutCorrected,A,this.latestValues),this.projectionTransform=jw(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==_||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),Ks.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=Pa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=bt(),T=h?h.source:void 0,A=this.layout?this.layout.source:void 0,k=T!==A,O=this.getStack(),b=!O||O.members.length<=1,P=!!(k&&!b&&this.options.crossfade===!0&&!this.path.some(dO));this.animationProgress=0;let C;this.mixTargetDelta=B=>{const G=B/1e3;Hw(g.x,a.x,G),Hw(g.y,a.y,G),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_u(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hO(this.relativeTarget,this.relativeTargetOrigin,_,G),C&&WM(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=bt()),Hn(C,this.relativeTarget)),k&&(this.animationValues=m,jM(m,f,this.latestValues,G,P,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=it.update(()=>{Wh.hasAnimatedSinceResize=!0,this.currentAnimation=XM(0,Fw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Fw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&ES(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||bt();const g=Nn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const _=Nn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}Hn(u,h),Sa(u,m),yu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new $M),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<zw.length;m++){const g="rotate"+zw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return YM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Hh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=Hh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Zs(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=jw(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:T,y:A}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${A.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const k in Ad){if(_[k]===void 0)continue;const{correct:O,applyTo:b}=Ad[k],P=f.transform==="none"?_[k]:O(_[k],g);if(b){const C=b.length;for(let B=0;B<C;B++)f[b[B]]=P}else f[k]=P}return this.options.layoutId&&(f.pointerEvents=g===this?Hh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Bw),this.root.sharedNodes.clear()}}}function eO(t){t.updateLayout()}function tO(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?$n(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],T=Nn(_);_.min=i[g].min,_.max=_.min+T}):ES(o,n.layoutBox,i)&&$n(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],T=Nn(i[g]);_.max=_.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=Pa();yu(u,i,n.layoutBox);const h=Pa();a?yu(h,t.applyTransform(r,!0),n.measuredBox):yu(h,i,n.layoutBox);const f=!wS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:T}=g;if(_&&T){const A=bt();_u(A,n.layoutBox,_.layoutBox);const k=bt();_u(k,i,T.layoutBox),xS(A,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=A,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function nO(t){Ks.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function iO(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rO(t){t.clearSnapshot()}function Bw(t){t.clearMeasurements()}function sO(t){t.isLayoutDirty=!1}function oO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Uw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function aO(t){t.resolveTargetDelta()}function lO(t){t.calcProjection()}function uO(t){t.resetRotation()}function cO(t){t.removeLeadSnapshot()}function Hw(t,e,n){t.translate=ft(e.translate,0,n),t.scale=ft(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ww(t,e,n,i){t.min=ft(e.min,n.min,i),t.max=ft(e.max,n.max,i)}function hO(t,e,n,i){Ww(t.x,e.x,n.x,i),Ww(t.y,e.y,n.y,i)}function dO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const fO={duration:.45,ease:[.4,0,.1,1]},$w=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),qw=$w("applewebkit/")&&!$w("chrome/")?Math.round:Pt;function Gw(t){t.min=qw(t.min),t.max=qw(t.max)}function pO(t){Gw(t.x),Gw(t.y)}function ES(t,e,n){return t==="position"||t==="preserve-aspect"&&!vg(Vw(e),Vw(n),.2)}const mO=TS({attachResizeListener:(t,e)=>or(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yp={current:void 0},PS=TS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yp.current){const t=new mO({});t.mount(window),t.setOptions({layoutScroll:!0}),Yp.current=t}return Yp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),gO={pan:{Feature:NM},drag:{Feature:RM,ProjectionNode:PS,MeasureLayout:yS}},yO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function _O(t){const e=yO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Eg(t,e,n=1){const[i,r]=_O(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return oS(a)?parseFloat(a):a}else return dg(r)?Eg(r,e,n+1):r}function vO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!dg(o))return;const a=Eg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!dg(o))continue;const a=Eg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const wO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),SS=t=>wO.has(t),xO=t=>Object.keys(t).some(SS),Zw=t=>t===Co||t===ve,Kw=(t,e)=>parseFloat(t.split(", ")[e]),Qw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Kw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Kw(o[1],t):0}},TO=new Set(["x","y","z"]),EO=ac.filter(t=>!TO.has(t));function PO(t){const e=[];return EO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Za={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Qw(4,13),y:Qw(5,14)};Za.translateX=Za.x;Za.translateY=Za.y;const SO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Za[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Za[f](h,o)}),t},CO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(SS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=Gl(m);const _=e[h];let T;if(kd(_)){const A=_.length,k=_[0]===null?1:0;m=_[k],g=Gl(m);for(let O=k;O<A&&_[O]!==null;O++)T?o_(Gl(_[O])===T):T=Gl(_[O])}else T=Gl(_);if(g!==T)if(Zw(g)&&Zw(T)){const A=f.get();typeof A=="string"&&f.set(parseFloat(A)),typeof _=="string"?e[h]=parseFloat(_):Array.isArray(_)&&T===ve&&(e[h]=_.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||_===0)?m===0?f.set(T.transform(m)):e[h]=g.transform(_):(a||(o=PO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(_))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=SO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),bf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function IO(t,e,n,i){return xO(e)?CO(t,e,n,i):{target:e,transitionEnd:i}}const AO=(t,e,n,i)=>{const r=vO(t,e,i);return e=r.target,i=r.transitionEnd,IO(t,e,n,i)},Pg={current:null},CS={current:!1};function bO(){if(CS.current=!0,!!bf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pg.current=t.matches;t.addListener(e),e()}else Pg.current=!1}function kO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(Pn(o))t.addValue(r,o),Md(i)&&i.add(r);else if(Pn(a))t.addValue(r,Ga(o,{owner:t})),Md(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Ga(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Xw=new WeakMap,IS=Object.keys(qu),RO=IS.length,Yw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],NO=Xy.length;class LO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>it.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Rf(n),this.isVariantNode=hP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const _=m[g];u[g]!==void 0&&Pn(_)&&(_.set(u[g],!1),Md(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Xw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),CS.current||bO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Pg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xw.delete(this.current),this.projection&&this.projection.unmount(),yr(this.notifyUpdate),yr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=So.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&it.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<RO;h++){const f=IS[h],{isEnabled:m,Feature:g,ProjectionNode:_,MeasureLayout:T}=qu[f];_&&(a=_),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:_,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&Ta(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Yw.length;i++){const r=Yw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=kO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<NO;i++){const r=Xy[i],o=this.props[r];($u(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ga(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=s_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Pn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new m_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class AS extends LO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=QL(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){ZL(this,i,a);const u=AO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function MO(t){return window.getComputedStyle(t)}class OO extends AS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(So.has(n)){const i=c_(n);return i&&i.default||0}else{const i=MO(e),r=(mP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return mS(e,n)}build(e,n,i,r){e_(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return r_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){xP(e,n,i,r)}}class DO extends AS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(So.has(n)){const i=c_(n);return i&&i.default||0}return n=TP.has(n)?n:Ky(n),e.getAttribute(n)}measureInstanceViewportBox(){return bt()}scrapeMotionValuesFromProps(e,n){return PP(e,n)}build(e,n,i,r){n_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){EP(e,n,i,r)}mount(e){this.isSVGTag=i_(e.tagName),super.mount(e)}}const VO=(t,e)=>Jy(t)?new DO(e,{enableHardwareAcceleration:!1}):new OO(e,{enableHardwareAcceleration:!0}),jO={layout:{ProjectionNode:PS,MeasureLayout:yS}},zO={...hM,...RN,...gO,...jO},ce=FR((t,e)=>_N(t,e,zO,VO));function bS(){const t=D.useRef(!1);return Zy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function FO(){const t=bS(),[e,n]=D.useState(0),i=D.useCallback(()=>{t.current&&n(e+1)},[e]);return[D.useCallback(()=>it.postRender(i),[i]),e]}class BO extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function UO({children:t,isPresent:e}){const n=D.useId(),i=D.useRef(null),r=D.useRef({width:0,height:0,top:0,left:0});return D.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),D.createElement(BO,{isPresent:e,childRef:i,sizeRef:r},D.cloneElement(t,{ref:i}))}const Jp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=SP(HO),h=D.useId(),f=D.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return D.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),D.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=D.createElement(UO,{isPresent:n},t)),D.createElement(Af.Provider,{value:f},t)};function HO(){return new Map}function WO(t){return D.useEffect(()=>()=>t(),[])}const Qs=t=>t.key||"";function $O(t,e){t.forEach(n=>{const i=Qs(n);e.set(i,n)})}function qO(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const La=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=D.useContext(Yy).forceRender||FO()[0],h=bS(),f=qO(t);let m=f;const g=D.useRef(new Map).current,_=D.useRef(m),T=D.useRef(new Map).current,A=D.useRef(!0);if(Zy(()=>{A.current=!1,$O(f,T),_.current=m}),WO(()=>{A.current=!0,T.clear(),g.clear()}),A.current)return D.createElement(D.Fragment,null,m.map(P=>D.createElement(Jp,{key:Qs(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},P)));m=[...m];const k=_.current.map(Qs),O=f.map(Qs),b=k.length;for(let P=0;P<b;P++){const C=k[P];O.indexOf(C)===-1&&!g.has(C)&&g.set(C,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((P,C)=>{if(O.indexOf(C)!==-1)return;const B=T.get(C);if(!B)return;const G=k.indexOf(C);let U=P;if(!U){const R=()=>{g.delete(C);const S=Array.from(T.keys()).filter(N=>!O.includes(N));if(S.forEach(N=>T.delete(N)),_.current=f.filter(N=>{const V=Qs(N);return V===C||S.includes(V)}),!g.size){if(h.current===!1)return;u(),i&&i()}};U=D.createElement(Jp,{key:Qs(B),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:o,mode:a},B),g.set(C,U)}m.splice(G,0,U)}),m=m.map(P=>{const C=P.key;return g.has(C)?P:D.createElement(Jp,{key:Qs(P),isPresent:!0,presenceAffectsLayout:o,mode:a},P)}),D.createElement(D.Fragment,null,g.size?m:m.map(P=>D.cloneElement(P)))},GO=()=>{};var Jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ZO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},RS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(_=64)),i.push(n[m],n[g],n[_],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new KO;const _=o<<2|u>>4;if(i.push(_),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const A=f<<6&192|g;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QO=function(t){const e=kS(t);return RS.encodeByteArray(e,!0)},Dd=function(t){return QO(t).replace(/\./g,"")},NS=function(t){try{return RS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=()=>XO().__FIREBASE_DEFAULTS__,JO=()=>{if(typeof process>"u"||typeof Jw>"u")return;const t=Jw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NS(t[1]);return e&&JSON.parse(e)},Of=()=>{try{return GO()||YO()||JO()||eD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LS=t=>{var e,n;return(n=(e=Of())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tD=t=>{const e=LS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},MS=()=>{var t;return(t=Of())==null?void 0:t.config},OS=t=>{var e;return(e=Of())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dd(JSON.stringify(n)),Dd(JSON.stringify(a)),""].join(".")}const vu={};function rD(){const t={prod:[],emulator:[]};for(const e of Object.keys(vu))vu[e]?t.emulator.push(e):t.prod.push(e);return t}function sD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ex=!1;function VS(t,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||vu[t]===e||vu[t]||ex)return;vu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=rD().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{ex=!0,a()},_}function m(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=sD(i),T=n("text"),A=document.getElementById(T)||document.createElement("span"),k=n("learnmore"),O=document.getElementById(k)||document.createElement("a"),b=n("preprendIcon"),P=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;u(C),m(O,k);const B=f();h(P,b),C.append(P,A,O,B),document.body.appendChild(C)}o?(A.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function aD(){var e;const t=(e=Of())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hD(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dD(){return!aD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fD(){try{return typeof indexedDB=="object"}catch{return!1}}function pD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="FirebaseError";class Sr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=mD,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hc.prototype.create)}}class hc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?gD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Sr(r,u,i)}}function gD(t,e){return t.replace(yD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const yD=/\{\$([^}]+)}/g;function _D(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function go(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(tx(o)&&tx(a)){if(!go(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function tx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vD(t,e){const n=new wD(t,e);return n.subscribe.bind(n)}class wD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");xD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=em),r.error===void 0&&(r.error=em),r.complete===void 0&&(r.complete=em);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function em(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new nD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PD(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ED(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ED(t){return t===Xs?void 0:t}function PD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const CD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},ID=je.INFO,AD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},bD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=AD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g_{constructor(e){this.name=e,this._logLevel=ID,this._logHandler=bD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const kD=(t,e)=>e.some(n=>t instanceof n);let nx,ix;function RD(){return nx||(nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ND(){return ix||(ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jS=new WeakMap,Sg=new WeakMap,zS=new WeakMap,tm=new WeakMap,y_=new WeakMap;function LD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ls(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&jS.set(n,t)}).catch(()=>{}),y_.set(e,t),e}function MD(t){if(Sg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Sg.set(t,e)}let Cg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OD(t){Cg=t(Cg)}function DD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(nm(this),e,...n);return zS.set(i,e.sort?e.sort():[e]),ls(i)}:ND().includes(t)?function(...e){return t.apply(nm(this),e),ls(jS.get(this))}:function(...e){return ls(t.apply(nm(this),e))}}function VD(t){return typeof t=="function"?DD(t):(t instanceof IDBTransaction&&MD(t),kD(t,RD())?new Proxy(t,Cg):t)}function ls(t){if(t instanceof IDBRequest)return LD(t);if(tm.has(t))return tm.get(t);const e=VD(t);return e!==t&&(tm.set(t,e),y_.set(e,t)),e}const nm=t=>y_.get(t);function jD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=ls(a);return i&&a.addEventListener("upgradeneeded",h=>{i(ls(a.result),h.oldVersion,h.newVersion,ls(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const zD=["get","getKey","getAll","getAllKeys","count"],FD=["put","add","delete","clear"],im=new Map;function rx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(im.get(e))return im.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=FD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||zD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return im.set(e,o),o}OD(t=>({...t,get:(e,n,i)=>rx(e,n)||t.get(e,n,i),has:(e,n)=>!!rx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function UD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ig="@firebase/app",sx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new g_("@firebase/app"),HD="@firebase/app-compat",WD="@firebase/analytics-compat",$D="@firebase/analytics",qD="@firebase/app-check-compat",GD="@firebase/app-check",ZD="@firebase/auth",KD="@firebase/auth-compat",QD="@firebase/database",XD="@firebase/data-connect",YD="@firebase/database-compat",JD="@firebase/functions",eV="@firebase/functions-compat",tV="@firebase/installations",nV="@firebase/installations-compat",iV="@firebase/messaging",rV="@firebase/messaging-compat",sV="@firebase/performance",oV="@firebase/performance-compat",aV="@firebase/remote-config",lV="@firebase/remote-config-compat",uV="@firebase/storage",cV="@firebase/storage-compat",hV="@firebase/firestore",dV="@firebase/ai",fV="@firebase/firestore-compat",pV="firebase",mV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="[DEFAULT]",gV={[Ig]:"fire-core",[HD]:"fire-core-compat",[$D]:"fire-analytics",[WD]:"fire-analytics-compat",[GD]:"fire-app-check",[qD]:"fire-app-check-compat",[ZD]:"fire-auth",[KD]:"fire-auth-compat",[QD]:"fire-rtdb",[XD]:"fire-data-connect",[YD]:"fire-rtdb-compat",[JD]:"fire-fn",[eV]:"fire-fn-compat",[tV]:"fire-iid",[nV]:"fire-iid-compat",[iV]:"fire-fcm",[rV]:"fire-fcm-compat",[sV]:"fire-perf",[oV]:"fire-perf-compat",[aV]:"fire-rc",[lV]:"fire-rc-compat",[uV]:"fire-gcs",[cV]:"fire-gcs-compat",[hV]:"fire-fst",[fV]:"fire-fst-compat",[dV]:"fire-vertex","fire-js":"fire-js",[pV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new Map,yV=new Map,bg=new Map;function ox(t,e){try{t.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ka(t){const e=t.name;if(bg.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;bg.set(e,t);for(const n of Vd.values())ox(n,t);for(const n of yV.values())ox(n,t);return!0}function __(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ci(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new hc("app","Firebase",_V);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=mV;function FS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Ag,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw us.create("bad-app-name",{appName:String(r)});if(n||(n=MS()),!n)throw us.create("no-options");const o=Vd.get(r);if(o){if(go(n,o.options)&&go(i,o.config))return o;throw us.create("duplicate-app",{appName:r})}const a=new SD(r);for(const h of bg.values())a.addComponent(h);const u=new vV(n,i,a);return Vd.set(r,u),u}function BS(t=Ag){const e=Vd.get(t);if(!e&&t===Ag&&MS())return FS();if(!e)throw us.create("no-app",{appName:t});return e}function cs(t,e,n){let i=gV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(a.join(" "));return}Ka(new yo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="firebase-heartbeat-database",xV=1,Zu="firebase-heartbeat-store";let rm=null;function US(){return rm||(rm=jD(wV,xV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zu)}catch(n){console.warn(n)}}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),rm}async function TV(t){try{const n=(await US()).transaction(Zu),i=await n.objectStore(Zu).get(HS(t));return await n.done,i}catch(e){if(e instanceof Sr)_r.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function ax(t,e){try{const i=(await US()).transaction(Zu,"readwrite");await i.objectStore(Zu).put(e,HS(t)),await i.done}catch(n){if(n instanceof Sr)_r.warn(n.message);else{const i=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(i.message)}}}function HS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=1024,PV=30;class SV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>PV){const a=AV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){_r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lx(),{heartbeatsToSend:i,unsentEntries:r}=CV(this._heartbeatsCache.heartbeats),o=Dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return _r.warn(n),""}}}function lx(){return new Date().toISOString().substring(0,10)}function CV(t,e=EV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),ux(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ux(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class IV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fD()?pD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ax(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ax(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ux(t){return Dd(JSON.stringify({version:2,heartbeats:t})).length}function AV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){Ka(new yo("platform-logger",e=>new BD(e),"PRIVATE")),Ka(new yo("heartbeat",e=>new SV(e),"PRIVATE")),cs(Ig,sx,t),cs(Ig,sx,"esm2020"),cs("fire-js","")}bV("");var cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,WS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function N(){}N.prototype=S.prototype,R.F=S.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(V,j,z){for(var M=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)M[ae-2]=arguments[ae];return S.prototype[j].apply(V,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,S,N){N||(N=0);const V=Array(16);if(typeof S=="string")for(var j=0;j<16;++j)V[j]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(j=0;j<16;++j)V[j]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=R.g[0],N=R.g[1],j=R.g[2];let z=R.g[3],M;M=S+(z^N&(j^z))+V[0]+3614090360&4294967295,S=N+(M<<7&4294967295|M>>>25),M=z+(j^S&(N^j))+V[1]+3905402710&4294967295,z=S+(M<<12&4294967295|M>>>20),M=j+(N^z&(S^N))+V[2]+606105819&4294967295,j=z+(M<<17&4294967295|M>>>15),M=N+(S^j&(z^S))+V[3]+3250441966&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(z^N&(j^z))+V[4]+4118548399&4294967295,S=N+(M<<7&4294967295|M>>>25),M=z+(j^S&(N^j))+V[5]+1200080426&4294967295,z=S+(M<<12&4294967295|M>>>20),M=j+(N^z&(S^N))+V[6]+2821735955&4294967295,j=z+(M<<17&4294967295|M>>>15),M=N+(S^j&(z^S))+V[7]+4249261313&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(z^N&(j^z))+V[8]+1770035416&4294967295,S=N+(M<<7&4294967295|M>>>25),M=z+(j^S&(N^j))+V[9]+2336552879&4294967295,z=S+(M<<12&4294967295|M>>>20),M=j+(N^z&(S^N))+V[10]+4294925233&4294967295,j=z+(M<<17&4294967295|M>>>15),M=N+(S^j&(z^S))+V[11]+2304563134&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(z^N&(j^z))+V[12]+1804603682&4294967295,S=N+(M<<7&4294967295|M>>>25),M=z+(j^S&(N^j))+V[13]+4254626195&4294967295,z=S+(M<<12&4294967295|M>>>20),M=j+(N^z&(S^N))+V[14]+2792965006&4294967295,j=z+(M<<17&4294967295|M>>>15),M=N+(S^j&(z^S))+V[15]+1236535329&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(j^z&(N^j))+V[1]+4129170786&4294967295,S=N+(M<<5&4294967295|M>>>27),M=z+(N^j&(S^N))+V[6]+3225465664&4294967295,z=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(z^S))+V[11]+643717713&4294967295,j=z+(M<<14&4294967295|M>>>18),M=N+(z^S&(j^z))+V[0]+3921069994&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^z&(N^j))+V[5]+3593408605&4294967295,S=N+(M<<5&4294967295|M>>>27),M=z+(N^j&(S^N))+V[10]+38016083&4294967295,z=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(z^S))+V[15]+3634488961&4294967295,j=z+(M<<14&4294967295|M>>>18),M=N+(z^S&(j^z))+V[4]+3889429448&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^z&(N^j))+V[9]+568446438&4294967295,S=N+(M<<5&4294967295|M>>>27),M=z+(N^j&(S^N))+V[14]+3275163606&4294967295,z=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(z^S))+V[3]+4107603335&4294967295,j=z+(M<<14&4294967295|M>>>18),M=N+(z^S&(j^z))+V[8]+1163531501&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^z&(N^j))+V[13]+2850285829&4294967295,S=N+(M<<5&4294967295|M>>>27),M=z+(N^j&(S^N))+V[2]+4243563512&4294967295,z=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(z^S))+V[7]+1735328473&4294967295,j=z+(M<<14&4294967295|M>>>18),M=N+(z^S&(j^z))+V[12]+2368359562&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(N^j^z)+V[5]+4294588738&4294967295,S=N+(M<<4&4294967295|M>>>28),M=z+(S^N^j)+V[8]+2272392833&4294967295,z=S+(M<<11&4294967295|M>>>21),M=j+(z^S^N)+V[11]+1839030562&4294967295,j=z+(M<<16&4294967295|M>>>16),M=N+(j^z^S)+V[14]+4259657740&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^z)+V[1]+2763975236&4294967295,S=N+(M<<4&4294967295|M>>>28),M=z+(S^N^j)+V[4]+1272893353&4294967295,z=S+(M<<11&4294967295|M>>>21),M=j+(z^S^N)+V[7]+4139469664&4294967295,j=z+(M<<16&4294967295|M>>>16),M=N+(j^z^S)+V[10]+3200236656&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^z)+V[13]+681279174&4294967295,S=N+(M<<4&4294967295|M>>>28),M=z+(S^N^j)+V[0]+3936430074&4294967295,z=S+(M<<11&4294967295|M>>>21),M=j+(z^S^N)+V[3]+3572445317&4294967295,j=z+(M<<16&4294967295|M>>>16),M=N+(j^z^S)+V[6]+76029189&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^z)+V[9]+3654602809&4294967295,S=N+(M<<4&4294967295|M>>>28),M=z+(S^N^j)+V[12]+3873151461&4294967295,z=S+(M<<11&4294967295|M>>>21),M=j+(z^S^N)+V[15]+530742520&4294967295,j=z+(M<<16&4294967295|M>>>16),M=N+(j^z^S)+V[2]+3299628645&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(j^(N|~z))+V[0]+4096336452&4294967295,S=N+(M<<6&4294967295|M>>>26),M=z+(N^(S|~j))+V[7]+1126891415&4294967295,z=S+(M<<10&4294967295|M>>>22),M=j+(S^(z|~N))+V[14]+2878612391&4294967295,j=z+(M<<15&4294967295|M>>>17),M=N+(z^(j|~S))+V[5]+4237533241&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~z))+V[12]+1700485571&4294967295,S=N+(M<<6&4294967295|M>>>26),M=z+(N^(S|~j))+V[3]+2399980690&4294967295,z=S+(M<<10&4294967295|M>>>22),M=j+(S^(z|~N))+V[10]+4293915773&4294967295,j=z+(M<<15&4294967295|M>>>17),M=N+(z^(j|~S))+V[1]+2240044497&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~z))+V[8]+1873313359&4294967295,S=N+(M<<6&4294967295|M>>>26),M=z+(N^(S|~j))+V[15]+4264355552&4294967295,z=S+(M<<10&4294967295|M>>>22),M=j+(S^(z|~N))+V[6]+2734768916&4294967295,j=z+(M<<15&4294967295|M>>>17),M=N+(z^(j|~S))+V[13]+1309151649&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~z))+V[4]+4149444226&4294967295,S=N+(M<<6&4294967295|M>>>26),M=z+(N^(S|~j))+V[11]+3174756917&4294967295,z=S+(M<<10&4294967295|M>>>22),M=j+(S^(z|~N))+V[2]+718787259&4294967295,j=z+(M<<15&4294967295|M>>>17),M=N+(z^(j|~S))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+j&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.v=function(R,S){S===void 0&&(S=R.length);const N=S-this.blockSize,V=this.C;let j=this.h,z=0;for(;z<S;){if(j==0)for(;z<=N;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<S;)if(V[j++]=R.charCodeAt(z++),j==this.blockSize){r(this,V),j=0;break}}else for(;z<S;)if(V[j++]=R[z++],j==this.blockSize){r(this,V),j=0;break}}this.h=j,this.o+=S},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)R[S++]=this.g[N]>>>V&255;return R};function o(R,S){var N=u;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=S(R)}function a(R,S){this.h=S;const N=[];let V=!0;for(let j=R.length-1;j>=0;j--){const z=R[j]|0;V&&z==S||(N[j]=z,V=!1)}this.g=N}var u={};function h(R){return-128<=R&&R<128?o(R,function(S){return new a([S|0],S<0?-1:0)}):new a([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return O(f(-R));const S=[];let N=1;for(let V=0;R>=N;V++)S[V]=R/N|0,N*=4294967296;return new a(S,0)}function m(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return O(m(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(S,8));let V=g;for(let z=0;z<R.length;z+=8){var j=Math.min(8,R.length-z);const M=parseInt(R.substring(z,z+j),S);j<8?(j=f(Math.pow(S,j)),V=V.j(j).add(f(M))):(V=V.j(N),V=V.add(f(M)))}return V}var g=h(0),_=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(k(this))return-O(this).m();let R=0,S=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);R+=(V>=0?V:4294967296+V)*S,S*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(k(this))return"-"+O(this).toString(R);const S=f(Math.pow(R,6));var N=this;let V="";for(;;){const j=B(N,S).g;N=b(N,j.j(S));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=j,A(N))return z+V;for(;z.length<6;)z="0"+z;V=z+V}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=b(this,R),k(R)?-1:A(R)?0:1};function O(R){const S=R.g.length,N=[];for(let V=0;V<S;V++)N[V]=~R.g[V];return new a(N,~R.h).add(_)}t.abs=function(){return k(this)?O(this):this},t.add=function(R){const S=Math.max(this.g.length,R.g.length),N=[];let V=0;for(let j=0;j<=S;j++){let z=V+(this.i(j)&65535)+(R.i(j)&65535),M=(z>>>16)+(this.i(j)>>>16)+(R.i(j)>>>16);V=M>>>16,z&=65535,M&=65535,N[j]=M<<16|z}return new a(N,N[N.length-1]&-2147483648?-1:0)};function b(R,S){return R.add(O(S))}t.j=function(R){if(A(this)||A(R))return g;if(k(this))return k(R)?O(this).j(O(R)):O(O(this).j(R));if(k(R))return O(this.j(O(R)));if(this.l(T)<0&&R.l(T)<0)return f(this.m()*R.m());const S=this.g.length+R.g.length,N=[];for(var V=0;V<2*S;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let j=0;j<R.g.length;j++){const z=this.i(V)>>>16,M=this.i(V)&65535,ae=R.i(j)>>>16,Ye=R.i(j)&65535;N[2*V+2*j]+=M*Ye,P(N,2*V+2*j),N[2*V+2*j+1]+=z*Ye,P(N,2*V+2*j+1),N[2*V+2*j+1]+=M*ae,P(N,2*V+2*j+1),N[2*V+2*j+2]+=z*ae,P(N,2*V+2*j+2)}for(R=0;R<S;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=S;R<2*S;R++)N[R]=0;return new a(N,0)};function P(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function C(R,S){this.g=R,this.h=S}function B(R,S){if(A(S))throw Error("division by zero");if(A(R))return new C(g,g);if(k(R))return S=B(O(R),S),new C(O(S.g),O(S.h));if(k(S))return S=B(R,O(S)),new C(O(S.g),S.h);if(R.g.length>30){if(k(R)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var N=_,V=S;V.l(R)<=0;)N=G(N),V=G(V);var j=U(N,1),z=U(V,1);for(V=U(V,2),N=U(N,2);!A(V);){var M=z.add(V);M.l(R)<=0&&(j=j.add(N),z=M),V=U(V,1),N=U(N,1)}return S=b(R,j.j(S)),new C(j,S)}for(j=g;R.l(S)>=0;){for(N=Math.max(1,Math.floor(R.m()/S.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),z=f(N),M=z.j(S);k(M)||M.l(R)>0;)N-=V,z=f(N),M=z.j(S);A(z)&&(z=_),j=j.add(z),R=b(R,M)}return new C(j,R)}t.B=function(R){return B(this,R).h},t.and=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)&R.i(V);return new a(N,this.h&R.h)},t.or=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)|R.i(V);return new a(N,this.h|R.h)},t.xor=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)^R.i(V);return new a(N,this.h^R.h)};function G(R){const S=R.g.length+1,N=[];for(let V=0;V<S;V++)N[V]=R.i(V)<<1|R.i(V-1)>>>31;return new a(N,R.h)}function U(R,S){const N=S>>5;S%=32;const V=R.g.length-N,j=[];for(let z=0;z<V;z++)j[z]=S>0?R.i(z+N)>>>S|R.i(z+N+1)<<32-S:R.i(z+N);return new a(j,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,WS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,hs=a}).apply(typeof cx<"u"?cx:typeof self<"u"?self:typeof window<"u"?window:{});var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $S,nu,qS,$h,kg,GS,ZS,KS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof xh=="object"&&xh];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var x=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var H=c[I];if(!(H in x))break e;x=x[H]}c=c[c.length-1],I=x[c],y=y(I),y!=I&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var x=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&x.push([I,y[I]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,x){return c.call.apply(c.bind,arguments)}function f(c,y,x){return f=h,f.apply(null,arguments)}function m(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function g(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(I,H,$){for(var ee=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)ee[Ee-2]=arguments[Ee];return y.prototype[H].apply(I,ee)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const x=Array(y);for(let I=0;I<y;I++)x[I]=c[I];return x}return[]}function A(c,y){for(let I=1;I<arguments.length;I++){const H=arguments[I];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=c.length||0;const $=H.length||0;c.length=x+$;for(let ee=0;ee<$;ee++)c[x+ee]=H[ee]}else c.push(H)}}class k{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(c){a.setTimeout(()=>{throw c},0)}function b(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class P{constructor(){this.h=this.g=null}add(y,x){const I=C.get();I.set(y,x),this.h?this.h.next=I:this.g=I,this.h=I}}var C=new k(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let G,U=!1,R=new P,S=()=>{const c=Promise.resolve(void 0);G=()=>{c.then(N)}};function N(){for(var c;c=b();){try{c.h.call(c.g)}catch(x){O(x)}var y=C;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}U=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};a.addEventListener("test",x,y),a.removeEventListener("test",x,y)}catch{}return c}();function M(c){return/^[\s\xa0]*$/.test(c)}function ae(c,y){j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(ae,j),ae.prototype.init=function(c,y){const x=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ye="closure_listenable_"+(Math.random()*1e6|0),Ae=0;function et(c,y,x,I,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!I,this.ha=H,this.key=++Ae,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function he(c,y,x){for(const I in c)y.call(x,c[I],I,c)}function J(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function te(c){const y={};for(const x in c)y[x]=c[x];return y}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Je(c,y){let x,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(x in I)c[x]=I[x];for(let $=0;$<Se.length;$++)x=Se[$],Object.prototype.hasOwnProperty.call(I,x)&&(c[x]=I[x])}}function Me(c){this.src=c,this.g={},this.h=0}Me.prototype.add=function(c,y,x,I,H){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const ee=fe(c,y,I,H);return ee>-1?(y=c[ee],x||(y.fa=!1)):(y=new et(y,this.src,$,!!I,H),y.fa=x,c.push(y)),y};function Ne(c,y){const x=y.type;if(x in c.g){var I=c.g[x],H=Array.prototype.indexOf.call(I,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(I,H,1),$&&(Z(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function fe(c,y,x,I){for(let H=0;H<c.length;++H){const $=c[H];if(!$.da&&$.listener==y&&$.capture==!!x&&$.ha==I)return H}return-1}var ht="closure_lm_"+(Math.random()*1e6|0),ne={};function ue(c,y,x,I,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)ue(c,y[$],x,I,H);return null}return x=ut(x),c&&c[Ye]?c.J(y,x,u(I)?!!I.capture:!1,H):ye(c,y,x,!1,I,H)}function ye(c,y,x,I,H,$){if(!y)throw Error("Invalid event type");const ee=u(H)?!!H.capture:!!H;let Ee=ge(c);if(Ee||(c[ht]=Ee=new Me(c)),x=Ee.add(y,x,I,ee,$),x.proxy)return x;if(I=Ce(),x.proxy=I,I.src=c,I.listener=x,c.addEventListener)z||(H=ee),H===void 0&&(H=!1),c.addEventListener(y.toString(),I,H);else if(c.attachEvent)c.attachEvent(St(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ce(){function c(x){return y.call(c.src,c.listener,x)}const y=_t;return c}function pe(c,y,x,I,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)pe(c,y[$],x,I,H);else I=u(I)?!!I.capture:!!I,x=ut(x),c&&c[Ye]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],x=fe(y,x,I,H),x>-1&&(Z(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=ge(c))&&(y=c.g[y.toString()],c=-1,y&&(c=fe(y,x,I,H)),(x=c>-1?y[c]:null)&&ke(x))}function ke(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ye])Ne(y.i,c);else{var x=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(x,I,c.capture):y.detachEvent?y.detachEvent(St(x),I):y.addListener&&y.removeListener&&y.removeListener(I),(x=ge(y))?(Ne(x,c),x.h==0&&(x.src=null,y[ht]=null)):Z(c)}}}function St(c){return c in ne?ne[c]:ne[c]="on"+c}function _t(c,y){if(c.da)c=!0;else{y=new ae(y,this);const x=c.listener,I=c.ha||c.src;c.fa&&ke(c),c=x.call(I,y)}return c}function ge(c){return c=c[ht],c instanceof Me?c:null}var Re="__closure_events_fn_"+(Math.random()*1e9>>>0);function ut(c){return typeof c=="function"?c:(c[Re]||(c[Re]=function(y){return c.handleEvent(y)}),c[Re])}function Le(){V.call(this),this.i=new Me(this),this.M=this,this.G=null}g(Le,V),Le.prototype[Ye]=!0,Le.prototype.removeEventListener=function(c,y,x,I){pe(this,c,y,x,I)};function Be(c,y){var x,I=c.G;if(I)for(x=[];I;I=I.G)x.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new j(y,c);else if(y instanceof j)y.target=y.target||c;else{var H=y;y=new j(I,c),Je(y,H)}H=!0;let $,ee;if(x)for(ee=x.length-1;ee>=0;ee--)$=y.g=x[ee],H=Sn($,I,!0,y)&&H;if($=y.g=c,H=Sn($,I,!0,y)&&H,H=Sn($,I,!1,y)&&H,x)for(ee=0;ee<x.length;ee++)$=y.g=x[ee],H=Sn($,I,!1,y)&&H}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let I=0;I<x.length;I++)Z(x[I]);delete c.g[y],c.h--}}this.G=null},Le.prototype.J=function(c,y,x,I){return this.i.add(String(c),y,!1,x,I)},Le.prototype.K=function(c,y,x,I){return this.i.add(String(c),y,!0,x,I)};function Sn(c,y,x,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const ee=y[$];if(ee&&!ee.da&&ee.capture==x){const Ee=ee.listener,qe=ee.ha||ee.src;ee.fa&&Ne(c.i,ee),H=Ee.call(qe,I)!==!1&&H}}return H&&!I.defaultPrevented}function ei(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function Rs(c){c.g=ei(()=>{c.g=null,c.i&&(c.i=!1,Rs(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class tp extends V{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Rs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(c){V.call(this),this.h=c,this.g={}}g(Ns,V);var No=[];function pl(c){he(c.g,function(y,x){this.g.hasOwnProperty(x)&&ke(y)},c),c.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),pl(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lo=a.JSON.stringify,np=a.JSON.parse,Ec=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ml(){}function Pc(){}var Cr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ls(){j.call(this,"d")}g(Ls,j);function Mo(){j.call(this,"c")}g(Mo,j);var Hi={},Ir=null;function Oo(){return Ir=Ir||new Le}Hi.Ia="serverreachability";function Sc(c){j.call(this,Hi.Ia,c)}g(Sc,j);function Ar(c){const y=Oo();Be(y,new Sc(y))}Hi.STAT_EVENT="statevent";function gl(c,y){j.call(this,Hi.STAT_EVENT,c),this.stat=y}g(gl,j);function Vt(c){const y=Oo();Be(y,new gl(y,c))}Hi.Ja="timingevent";function Cc(c,y){j.call(this,Hi.Ja,c),this.size=y}g(Cc,j);function Ms(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Os(){this.g=!0}Os.prototype.ua=function(){this.g=!1};function ip(c,y,x,I,H,$){c.info(function(){if(c.g)if($){var ee="",Ee=$.split("&");for(let Ze=0;Ze<Ee.length;Ze++){var qe=Ee[Ze].split("=");if(qe.length>1){const xt=qe[0];qe=qe[1];const Fn=xt.split("_");ee=Fn.length>=2&&Fn[1]=="type"?ee+(xt+"="+qe+"&"):ee+(xt+"=redacted&")}}}else ee=null;else ee=$;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+y+`
`+x+`
`+ee})}function rp(c,y,x,I,H,$,ee){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+y+`
`+x+`
`+$+" "+ee})}function br(c,y,x,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+sp(c,x)+(I?" "+I:"")})}function yl(c,y){c.info(function(){return"TIMEOUT: "+y})}Os.prototype.info=function(){};function sp(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var x=$[c];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var H=I[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ee=1;ee<I.length;ee++)I[ee]=""}}}}return Lo($)}catch{return y}}var Do={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ic={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ac;function pn(){}g(pn,ml),pn.prototype.g=function(){return new XMLHttpRequest},Ac=new pn;function le(c){return encodeURIComponent(String(c))}function bc(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function ti(c,y,x,I){this.j=c,this.i=y,this.l=x,this.S=I||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _l}function _l(){this.i=null,this.g="",this.h=!1}var vl={},Ds={};function Vo(c,y,x){c.M=1,c.A=tt(sn(y)),c.u=x,c.R=!0,Wi(c,null)}function Wi(c,y){c.F=Date.now(),jo(c),c.B=sn(c.A);var x=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Ho(x.i,"t",I),c.C=0,x=c.j.L,c.h=new _l,c.g=Ll(c.j,x?y:null,!c.u),c.P>0&&(c.O=new tp(f(c.Y,c,c.g),c.P)),y=c.V,x=c.g,I=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(No[0]=H.toString()),H=No);for(let $=0;$<H.length;$++){const ee=ue(x,H[$],I||y.handleEvent,!1,y.h||y);if(!ee)break;y.g[ee.key]=ee}y=c.J?te(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Ar(),ip(c.i,c.v,c.B,c.l,c.S,c.u)}ti.prototype.ba=function(c){c=c.target;const y=this.O;y&&vi(c)==3?y.j():this.Y(c)},ti.prototype.Y=function(c){try{if(c==this.g)e:{const Ee=vi(this.g),qe=this.g.ya(),Ze=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||Cl(this.g)))){this.K||Ee!=4||qe==7||(qe==8||Ze<=0?Ar(3):Ar(2)),zo(this);var y=this.g.ca();this.X=y;var x=kc(this);if(this.o=y==200,rp(this.i,this.v,this.B,this.l,this.S,Ee,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,H=this.g;if((I=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(I)){var $=I;break t}}$=null}if(c=$)br(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wl(this,c);else{this.o=!1,this.m=3,Vt(12),Dn(this),Vs(this);break e}}if(this.R){c=!0;let xt;for(;!this.K&&this.C<x.length;)if(xt=op(this,x),xt==Ds){Ee==4&&(this.m=4,Vt(14),c=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==vl){this.m=4,Vt(15),br(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else br(this.i,this.l,xt,null),wl(this,xt);if(Rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||x.length!=0||this.h.h||(this.m=1,Vt(16),c=!1),this.o=this.o&&c,!c)br(this.i,this.l,x,"[Invalid Chunked Response]"),Dn(this),Vs(this);else if(x.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Rl(ee),ee.P=!0,Vt(11))}}else br(this.i,this.l,x,null),wl(this,x);Ee==4&&Dn(this),this.o&&!this.K&&(Ee==4?In(this.j,this):(this.o=!1,jo(this)))}else Il(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Dn(this),Vs(this)}}}catch{}finally{}};function kc(c){if(!Rc(c))return c.g.la();const y=Cl(c.g);if(y==="")return"";let x="";const I=y.length,H=vi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Dn(c),Vs(c),"";c.h.i=new a.TextDecoder}for(let $=0;$<I;$++)c.h.h=!0,x+=c.h.i.decode(y[$],{stream:!(H&&$==I-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function Rc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function op(c,y){var x=c.C,I=y.indexOf(`
`,x);return I==-1?Ds:(x=Number(y.substring(x,I)),isNaN(x)?vl:(I+=1,I+x>y.length?Ds:(y=y.slice(I,I+x),c.C=I+x,y)))}ti.prototype.cancel=function(){this.K=!0,Dn(this)};function jo(c){c.T=Date.now()+c.H,Nc(c,c.H)}function Nc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ms(f(c.aa,c),y)}function zo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}ti.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(yl(this.i,this.B),this.M!=2&&(Ar(),Vt(17)),Dn(this),this.m=2,Vs(this)):Nc(this,this.T-c)};function Vs(c){c.j.I==0||c.K||In(c.j,c)}function Dn(c){zo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,pl(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function wl(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||js(x.h,c))){if(!c.L&&js(x.h,c)&&x.I==3){try{var I=x.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)Zo(x),qo(x);else break e;kl(x),Vt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Ms(f(x.Va,x),6e3));Oc(x.h)<=1&&x.ta&&(x.ta=void 0)}else xi(x,11)}else if((c.L||x.g==c)&&Zo(x),!M(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let Ze=H[y];const xt=Ze[0];if(!(xt<=x.K))if(x.K=xt,Ze=Ze[1],x.I==2)if(Ze[0]=="c"){x.M=Ze[1],x.ba=Ze[2];const Fn=Ze[3];Fn!=null&&(x.ka=Fn,x.j.info("VER="+x.ka));const ri=Ze[4];ri!=null&&(x.za=ri,x.j.info("SVER="+x.za));const Bn=Ze[5];Bn!=null&&typeof Bn=="number"&&Bn>0&&(I=1.5*Bn,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Ti=c.g;if(Ti){const Xo=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xo){var $=I.h;$.g||Xo.indexOf("spdy")==-1&&Xo.indexOf("quic")==-1&&Xo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&($i($,$.h),$.h=null))}if(I.G){const Yo=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Yo&&(I.wa=Yo,se(I.J,I.G,Yo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var ee=c;if(I.na=Nl(I,I.L?I.ba:null,I.W),ee.L){xl(I.h,ee);var Ee=ee,qe=I.O;qe&&(Ee.H=qe),Ee.D&&(zo(Ee),jo(Ee)),I.g=ee}else bl(I);x.i.length>0&&wi(x)}else Ze[0]!="stop"&&Ze[0]!="close"||xi(x,7);else x.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?xi(x,7):Oe(x):Ze[0]!="noop"&&x.l&&x.l.qa(Ze),x.A=0)}}Ar(4)}catch{}}var ap=class{constructor(c,y){this.g=c,this.map=y}};function Lc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Oc(c){return c.h?1:c.g?c.g.size:0}function js(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function $i(c,y){c.g?c.g.add(y):c.h=y}function xl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Lc.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Tl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return T(c.i)}var kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ue(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const I=c[x].indexOf("=");let H,$=null;I>=0?(H=c[x].substring(0,I),$=c[x].substring(I+1)):H=c[x],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function $e(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof $e?(this.l=c.l,Vn(this,c.j),this.o=c.o,this.g=c.g,jn(this,c.u),this.h=c.h,zs(this,Fs(c.i)),this.m=c.m):c&&(y=String(c).match(kr))?(this.l=!1,Vn(this,y[1]||"",!0),this.o=qi(y[2]||""),this.g=qi(y[3]||"",!0),jn(this,y[4]),this.h=qi(y[5]||"",!0),zs(this,y[6]||"",!0),this.m=qi(y[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}$e.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(gi(y,Dc,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(gi(y,Dc,!0),"@"),c.push(le(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(gi(x,x.charAt(0)=="/"?Gi:Fo,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",gi(x,Zi)),c.join("")},$e.prototype.resolve=function(c){const y=sn(this);let x=!!c.j;x?Vn(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var I=c.h;if(x)jn(y,c.u);else if(x=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var H=y.h.lastIndexOf("/");H!=-1&&(I=y.h.slice(0,H+1)+I)}if(H=I,H==".."||H==".")I="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){I=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let ee=0;ee<H.length;){const Ee=H[ee++];Ee=="."?I&&ee==H.length&&$.push(""):Ee==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),I&&ee==H.length&&$.push("")):($.push(Ee),I=!0)}I=$.join("/")}else I=H}return x?y.h=I:x=c.i.toString()!=="",x?zs(y,Fs(c.i)):x=!!c.m,x&&(y.m=c.m),y};function sn(c){return new $e(c)}function Vn(c,y,x){c.j=x?qi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function jn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function zs(c,y,x){y instanceof ni?(c.i=y,El(c.i,c.l)):(x||(y=gi(y,vt)),c.i=new ni(y,c.l))}function se(c,y,x){c.i.set(y,x)}function tt(c){return se(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function qi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function gi(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,mn),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function mn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Dc=/[#\/\?@]/g,Fo=/[#\?:]/g,Gi=/[#\?]/g,vt=/[#\?@]/g,Zi=/#/g;function ni(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Cn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ue(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=ni.prototype,t.add=function(c,y){Cn(this),this.i=null,c=yi(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function Bo(c,y){Cn(c),y=yi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Rr(c,y){return Cn(c),y=yi(c,y),c.g.has(y)}t.forEach=function(c,y){Cn(this),this.g.forEach(function(x,I){x.forEach(function(H){c.call(y,H,I,this)},this)},this)};function Uo(c,y){Cn(c);let x=[];if(typeof y=="string")Rr(c,y)&&(x=x.concat(c.g.get(yi(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}t.set=function(c,y){return Cn(this),this.i=null,c=yi(this,c),Rr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=Uo(this,c),c.length>0?String(c[0]):y):y};function Ho(c,y,x){Bo(c,y),x.length>0&&(c.i=null,c.g.set(yi(c,y),T(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var x=y[I];const H=le(x);x=Uo(this,x);for(let $=0;$<x.length;$++){let ee=H;x[$]!==""&&(ee+="="+le(x[$])),c.push(ee)}}return this.i=c.join("&")};function Fs(c){const y=new ni;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function yi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function El(c,y){y&&!c.j&&(Cn(c),c.i=null,c.g.forEach(function(x,I){const H=I.toLowerCase();I!=H&&(Bo(this,I),Ho(this,H,x))},c)),c.j=y}function Wo(c,y){const x=new Os;if(a.Image){const I=new Image;I.onload=m(zn,x,"TestLoadImage: loaded",!0,y,I),I.onerror=m(zn,x,"TestLoadImage: error",!1,y,I),I.onabort=m(zn,x,"TestLoadImage: abort",!1,y,I),I.ontimeout=m(zn,x,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function Vc(c,y){const x=new Os,I=new AbortController,H=setTimeout(()=>{I.abort(),zn(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then($=>{clearTimeout(H),$.ok?zn(x,"TestPingServer: ok",!0,y):zn(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),zn(x,"TestPingServer: error",!1,y)})}function zn(c,y,x,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(x)}catch{}}function lp(){this.g=new Ec}function Te(c){this.i=c.Sb||null,this.h=c.ab||!1}g(Te,ml),Te.prototype.g=function(){return new on(this.i,this.h)};function on(c,y){Le.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(on,Le),t=on.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Ki(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qe(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qe(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Nr(this):Ki(this),this.readyState==3&&Qe(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Nr(this))},t.Na=function(c){this.g&&(this.response=c,Nr(this))},t.ga=function(){this.g&&Nr(this)};function Nr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ki(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Ki(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(on.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $o(c){let y="";return he(c,function(x,I){y+=I,y+=":",y+=x,y+=`\r
`}),y}function Bs(c,y,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=$o(x),typeof c=="string"?x!=null&&le(x):se(c,y,x))}function Ge(c){Le.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ge,Le);var Pl=/^https?$/i,Us=["POST","PUT"];t=Ge.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ac.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){Ct(this,$);return}if(c=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)x.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())x.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find($=>$.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Us,y,void 0)>=0)||I||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of x)this.g.setRequestHeader($,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){Ct(this,$)}};function Ct(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,_i(c),Hs(c)}function _i(c){c.A||(c.A=!0,Be(c,"complete"),Be(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Be(this,"complete"),Be(this,"abort"),Hs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),Ge.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sl(this):this.Xa())},t.Xa=function(){Sl(this)};function Sl(c){if(c.h&&typeof o<"u"){if(c.v&&vi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Be(c,"readystatechange"),vi(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var I;if(I=$===0){let ee=String(c.D).match(kr)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),I=!Pl.test(ee?ee.toLowerCase():"")}x=I}if(x)Be(c,"complete"),Be(c,"success");else{c.o=6;try{var H=vi(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",_i(c)}}finally{Hs(c)}}}}function Hs(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||Be(c,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vi(c){return c.g?c.g.readyState:0}t.ca=function(){try{return vi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),np(y)}};function Cl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Il(c){const y={};c=(c.g&&vi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(M(c[I]))continue;var x=bc(c[I]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const $=y[H]||[];y[H]=$,$.push(x)}J(y,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Al(c){this.za=0,this.i=[],this.j=new Os,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,c),this.Za=Ws("retryDelaySeedMs",1e4,c),this.Ta=Ws("forwardChannelMaxRetries",2,c),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Lc(c&&c.concurrentRequestLimit),this.Ba=new lp,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Al.prototype,t.ka=8,t.I=1,t.connect=function(c,y,x,I){Vt(0),this.W=c,this.H=y||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=Nl(this,null,this.W),wi(this)};function Oe(c){if(gn(c),c.I==3){var y=c.V++,x=sn(c.J);if(se(x,"SID",c.M),se(x,"RID",y),se(x,"TYPE","terminate"),Qi(c,x),y=new ti(c,c.j,y),y.M=2,y.A=tt(sn(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=y.A,x=!0),x||(y.g=Ll(y.j,null),y.g.ea(y.A)),y.F=Date.now(),jo(y)}ii(c)}function qo(c){c.g&&(Rl(c),c.g.cancel(),c.g=null)}function gn(c){qo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Zo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function wi(c){if(!Mc(c.h)&&!c.m){c.m=!0;var y=c.Ea;G||S(),U||(G(),U=!0),R.add(y,c),c.D=0}}function jc(c,y){return Oc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ms(f(c.Ea,c,y),Bc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new ti(this,this.j,c);let $=this.o;if(this.U&&($?($=te($),Je($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Fc(this,H,y),x=sn(this.J),se(x,"RID",c),se(x,"CVER",22),this.G&&se(x,"X-HTTP-Session-Id",this.G),Qi(this,x),$&&(this.R?y="headers="+le($o($))+"&"+y:this.u&&Bs(x,this.u,$)),$i(this.h,H),this.Ra&&se(x,"TYPE","init"),this.S?(se(x,"$req",y),se(x,"SID","null"),H.U=!0,Vo(H,x,null)):Vo(H,x,y),this.I=2}}else this.I==3&&(c?zc(this,c):this.i.length==0||Mc(this.h)||zc(this))};function zc(c,y){var x;y?x=y.l:x=c.V++;const I=sn(c.J);se(I,"SID",c.M),se(I,"RID",x),se(I,"AID",c.K),Qi(c,I),c.u&&c.o&&Bs(I,c.u,c.o),x=new ti(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Fc(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),$i(c.h,x),Vo(x,I,y)}function Qi(c,y){c.H&&he(c.H,function(x,I){se(y,I,x)}),c.l&&he({},function(x,I){se(y,I,x)})}function Fc(c,y,x){x=Math.min(c.i.length,x);const I=c.l?f(c.l.Ka,c.l,c):null;e:{var H=c.i;let Ee=-1;for(;;){const qe=["count="+x];Ee==-1?x>0?(Ee=H[0].g,qe.push("ofs="+Ee)):Ee=0:qe.push("ofs="+Ee);let Ze=!0;for(let xt=0;xt<x;xt++){var $=H[xt].g;const Fn=H[xt].map;if($-=Ee,$<0)Ee=Math.max(0,H[xt].g-100),Ze=!1;else try{$="req"+$+"_"||"";try{var ee=Fn instanceof Map?Fn:Object.entries(Fn);for(const[ri,Bn]of ee){let Ti=Bn;u(Bn)&&(Ti=Lo(Bn)),qe.push($+ri+"="+encodeURIComponent(Ti))}}catch(ri){throw qe.push($+"type="+encodeURIComponent("_badmap")),ri}}catch{I&&I(Fn)}}if(Ze){ee=qe.join("&");break e}}ee=void 0}return c=c.i.splice(0,x),y.G=c,ee}function bl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;G||S(),U||(G(),U=!0),R.add(y,c),c.A=0}}function kl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ms(f(c.Da,c),Bc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Go(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ms(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),qo(this),Go(this))};function Rl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Go(c){c.g=new ti(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=sn(c.na);se(y,"RID","rpc"),se(y,"SID",c.M),se(y,"AID",c.K),se(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&se(y,"TO",c.ia),se(y,"TYPE","xmlhttp"),Qi(c,y),c.u&&c.o&&Bs(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=tt(sn(y)),x.u=null,x.R=!0,Wi(x,c)}t.Va=function(){this.C!=null&&(this.C=null,qo(this),kl(this),Vt(19))};function Zo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function In(c,y){var x=null;if(c.g==y){Zo(c),Rl(c),c.g=null;var I=2}else if(js(c.h,y))x=y.G,xl(c.h,y),I=1;else return;if(c.I!=0){if(y.o)if(I==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;I=Oo(),Be(I,new Cc(I,x)),wi(c)}else bl(c);else if(H=y.m,H==3||H==0&&y.X>0||!(I==1&&jc(c,y)||I==2&&kl(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),H){case 1:xi(c,5);break;case 4:xi(c,10);break;case 3:xi(c,6);break;default:xi(c,2)}}}function Bc(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function xi(c,y){if(c.j.info("Error code "+y),y==2){var x=f(c.bb,c),I=c.Ua;const H=!I;I=new $e(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vn(I,"https"),tt(I),H?Wo(I.toString(),x):Vc(I.toString(),x)}else Vt(2);c.I=0,c.l&&c.l.pa(y),ii(c),gn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function ii(c){if(c.I=0,c.ja=[],c.l){const y=Tl(c.h);(y.length!=0||c.i.length!=0)&&(A(c.ja,y),A(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function Nl(c,y,x){var I=x instanceof $e?sn(x):new $e(x);if(I.g!="")y&&(I.g=y+"."+I.g),jn(I,I.u);else{var H=a.location;I=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new $e(null);I&&Vn($,I),y&&($.g=y),H&&jn($,H),x&&($.h=x),I=$}return x=c.G,y=c.wa,x&&y&&se(I,x,y),se(I,"VER",c.ka),Qi(c,I),I}function Ll(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ge(new Te({ab:x})):new Ge(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ko(){}t=Ko.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qo(){}Qo.prototype.g=function(c,y){return new Zt(c,y)};function Zt(c,y){Le.call(this),this.g=new Al(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!M(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Lr(this)}g(Zt,Le),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Oe(this.g)},Zt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=Lo(c),c=x);y.i.push(new ap(y.Ya++,c)),y.I==3&&wi(y)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Oe(this.g),delete this.g,Zt.Z.N.call(this)};function Ml(c){Ls.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Ml,Ls);function Uc(){Mo.call(this),this.status=1}g(Uc,Mo);function Lr(c){this.g=c}g(Lr,Ko),Lr.prototype.ra=function(){Be(this.g,"a")},Lr.prototype.qa=function(c){Be(this.g,new Ml(c))},Lr.prototype.pa=function(c){Be(this.g,new Uc)},Lr.prototype.oa=function(){Be(this.g,"b")},Qo.prototype.createWebChannel=Qo.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,KS=function(){return new Qo},ZS=function(){return Oo()},GS=Hi,kg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Do.NO_ERROR=0,Do.TIMEOUT=8,Do.HTTP_ERROR=6,$h=Do,Ic.COMPLETE="complete",qS=Ic,Pc.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",Le.prototype.listen=Le.prototype.J,nu=Pc,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,$S=Ge}).apply(typeof xh<"u"?xh:typeof self<"u"?self:typeof window<"u"?window:{});const hx="@firebase/firestore",dx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new g_("@firebase/firestore");function oa(){return _o.logLevel}function re(t,...e){if(_o.logLevel<=je.DEBUG){const n=e.map(v_);_o.debug(`Firestore (${ul}): ${t}`,...n)}}function vr(t,...e){if(_o.logLevel<=je.ERROR){const n=e.map(v_);_o.error(`Firestore (${ul}): ${t}`,...n)}}function Qa(t,...e){if(_o.logLevel<=je.WARN){const n=e.map(v_);_o.warn(`Firestore (${ul}): ${t}`,...n)}}function v_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,QS(t,i,n)}function QS(t,e,n){let i=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw vr(i),new Error(i)}function Ke(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||QS(e,r,i)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class RV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NV{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ds,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ds)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new XS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class LV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new LV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=DV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function ze(t,e){return t<e?-1:t>e?1:0}function Rg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return sm(r)===sm(o)?ze(r,o):sm(r)?1:-1}return ze(t.length,e.length)}const VV=55296,jV=57343;function sm(t){const e=t.charCodeAt(0);return e>=VV&&e<=jV}function Xa(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="__name__";class Ci{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Ci.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return ze(e.length,n.length)}static compareSegments(e,n){const i=Ci.isNumericId(e),r=Ci.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ci.extractNumericId(e).compare(Ci.extractNumericId(n)):Rg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class ot extends Ci{construct(e,n,i){return new ot(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const zV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Ci{construct(e,n,i){return new Wt(e,n,i)}static isValidIdentifier(e){return zV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===px}static keyField(){return new Wt([px])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new de(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new de(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new de(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new de(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(ot.fromString(e))}static fromName(e){return new me(ot.fromString(e).popFirst(5))}static empty(){return new me(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t,e,n){if(!n)throw new de(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FV(t,e,n,i){if(e===!0&&i===!0)throw new de(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mx(t){if(!me.isDocumentKey(t))throw new de(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gx(t){if(me.isDocumentKey(t))throw new de(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function x_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=x_(t);throw new de(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function fc(t,e){if(!JS(t))throw new de(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new de(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=-62135596800,_x=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*_x);return new at(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yx)throw new de(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_x}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fc(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Rt("string",at._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new at(0,0))}static max(){return new Pe(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=-1;function BV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Pe.fromTimestamp(i===1e9?new at(n+1,0):new at(n,i));return new vs(r,me.empty(),e)}function UV(t){return new vs(t.readTime,t.key,Ku)}class vs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vs(Pe.min(),me.empty(),Ku)}static max(){return new vs(Pe.max(),me.empty(),Ku)}}function HV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $V{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==WV)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function qV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=-1;function Vf(t){return t==null}function jd(t){return t===0&&1/t==-1/0}function GV(t){return typeof t=="number"&&Number.isInteger(t)&&!jd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="";function ZV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vx(e)),e=KV(t.get(n),e);return vx(e)}function KV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case eC:n+="";break;default:n+=o}}return n}function vx(t){return t+eC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Io(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Th(this.root,e,this.comparator,!1)}getReverseIterator(){return new Th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Th(this.root,e,this.comparator,!0)}}class Th{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ht.RED,this.left=r??Ht.EMPTY,this.right=o??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ht(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xx(this.data.getIterator())}getIteratorFrom(e){return new xx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class xx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Dt(Wt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nC("Invalid base64 string: "+o):o}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const QV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=QV.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="server_timestamp",rC="__type__",sC="__previous_value__",oC="__local_write_time__";function E_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rC])==null?void 0:i.stringValue)===iC}function jf(t){const e=t.mapValue.fields[sC];return E_(e)?jf(e):e}function Qu(t){const e=ws(t.mapValue.fields[oC].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const zd="(default)";class Xu{constructor(e,n){this.projectId=e,this.database=n||zd}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===zd}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="__type__",YV="__max__",Eh={mapValue:{}},lC="__vector__",Fd="value";function Ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?E_(t)?4:e4(t)?9007199254740991:JV(t)?10:11:we(28295,{value:t})}function Fi(t,e){if(t===e)return!0;const n=Ts(t);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qu(t).isEqual(Qu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=ws(r.timestampValue),u=ws(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return xs(r.bytesValue).isEqual(xs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Tt(r.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Tt(r.integerValue)===Tt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=Tt(r.doubleValue),u=Tt(o.doubleValue);return a===u?jd(a)===jd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Xa(t.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(wx(a)!==wx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Fi(a[h],u[h])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Yu(t,e){return(t.values||[]).find(n=>Fi(n,e))!==void 0}function Ya(t,e){if(t===e)return 0;const n=Ts(t),i=Ts(e);if(n!==i)return ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=Tt(o.integerValue||o.doubleValue),h=Tt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Tx(t.timestampValue,e.timestampValue);case 4:return Tx(Qu(t),Qu(e));case 5:return Rg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=xs(o),h=xs(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=ze(u[f],h[f]);if(m!==0)return m}return ze(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=ze(Tt(o.latitude),Tt(a.latitude));return u!==0?u:ze(Tt(o.longitude),Tt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ex(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,T,A,k;const u=o.fields||{},h=a.fields||{},f=(_=u[Fd])==null?void 0:_.arrayValue,m=(T=h[Fd])==null?void 0:T.arrayValue,g=ze(((A=f==null?void 0:f.values)==null?void 0:A.length)||0,((k=m==null?void 0:m.values)==null?void 0:k.length)||0);return g!==0?g:Ex(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Eh.mapValue&&a===Eh.mapValue)return 0;if(o===Eh.mapValue)return 1;if(a===Eh.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=Rg(h[g],m[g]);if(_!==0)return _;const T=Ya(u[h[g]],f[m[g]]);if(T!==0)return T}return ze(h.length,m.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Tx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=ws(t),i=ws(e),r=ze(n.seconds,i.seconds);return r!==0?r:ze(n.nanos,i.nanos)}function Ex(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ya(n[r],i[r]);if(o)return o}return ze(n.length,i.length)}function Ja(t){return Ng(t)}function Ng(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ws(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Ng(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Ng(n.fields[a])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function qh(t){switch(Ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jf(t);return e?16+qh(e):16;case 5:return 2*t.stringValue.length;case 6:return xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+qh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Io(i.fields,(o,a)=>{r+=o.length+qh(a)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function Lg(t){return!!t&&"integerValue"in t}function P_(t){return!!t&&"arrayValue"in t}function Px(t){return!!t&&"nullValue"in t}function Sx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gh(t){return!!t&&"mapValue"in t}function JV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aC])==null?void 0:i.stringValue)===lC}function wu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Io(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=wu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wu(t.arrayValue.values[n]);return e}return{...t}}function e4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wu(n)}setAll(e){let n=Wt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=wu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Gh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Io(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Zn(wu(this.value))}}function uC(t){const e=[];return Io(t.fields,(n,i)=>{const r=new Wt([n]);if(Gh(i)){const o=uC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new tn(e,0,Pe.min(),Pe.min(),Pe.min(),Zn.empty(),0)}static newFoundDocument(e,n,i,r){return new tn(e,1,n,Pe.min(),i,r,0)}static newNoDocument(e,n){return new tn(e,2,n,Pe.min(),Pe.min(),Zn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Pe.min(),Pe.min(),Zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n){this.position=e,this.inclusive=n}}function Cx(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=me.comparator(me.fromName(a.referenceValue),n.key):i=Ya(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ix(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function t4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{}class Lt extends cC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new i4(e,n,i):n==="array-contains"?new o4(e,i):n==="in"?new a4(e,i):n==="not-in"?new l4(e,i):n==="array-contains-any"?new u4(e,i):new Lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new r4(e,i):new s4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ya(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends cC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Bi(e,n)}matches(e){return hC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hC(t){return t.op==="and"}function dC(t){return n4(t)&&hC(t)}function n4(t){for(const e of t.filters)if(e instanceof Bi)return!1;return!0}function Mg(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+Ja(t.value);if(dC(t))return t.filters.map(e=>Mg(e)).join(",");{const e=t.filters.map(n=>Mg(n)).join(",");return`${t.op}(${e})`}}function fC(t,e){return t instanceof Lt?function(i,r){return r instanceof Lt&&i.op===r.op&&i.field.isEqual(r.field)&&Fi(i.value,r.value)}(t,e):t instanceof Bi?function(i,r){return r instanceof Bi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&fC(a,r.filters[u]),!0):!1}(t,e):void we(19439)}function pC(t){return t instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`}(t):t instanceof Bi?function(n){return n.op.toString()+" {"+n.getFilters().map(pC).join(" ,")+"}"}(t):"Filter"}class i4 extends Lt{constructor(e,n,i){super(e,n,i),this.key=me.fromName(i.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class r4 extends Lt{constructor(e,n){super(e,"in",n),this.keys=mC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class s4 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=mC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>me.fromName(i.referenceValue))}class o4 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return P_(n)&&Yu(n.arrayValue,this.value)}}class a4 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yu(this.value.arrayValue,n)}}class l4 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yu(this.value.arrayValue,n)}}class u4 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!P_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Yu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Ax(t,e=null,n=[],i=[],r=null,o=null,a=null){return new c4(t,e,n,i,r,o,a)}function S_(t){const e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Mg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Vf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ja(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ja(i)).join(",")),e.Te=n}return e.Te}function C_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ix(t.startAt,e.startAt)&&Ix(t.endAt,e.endAt)}function Og(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function h4(t,e,n,i,r,o,a,u){return new zf(t,e,n,i,r,o,a,u)}function I_(t){return new zf(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d4(t){return t.collectionGroup!==null}function xu(t){const e=Ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Dt(Wt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ud(o,i))}),n.has(Wt.keyField().canonicalString())||e.Ie.push(new Ud(Wt.keyField(),i))}return e.Ie}function Li(t){const e=Ie(t);return e.Ee||(e.Ee=f4(e,xu(t))),e.Ee}function f4(t,e){if(t.limitType==="F")return Ax(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Ud(r.field,o)});const n=t.endAt?new Bd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Bd(t.startAt.position,t.startAt.inclusive):null;return Ax(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Dg(t,e,n){return new zf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ff(t,e){return C_(Li(t),Li(e))&&t.limitType===e.limitType}function gC(t){return`${S_(Li(t))}|lt:${t.limitType}`}function aa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>pC(r)).join(", ")}]`),Vf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ja(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ja(r)).join(",")),`Target(${i})`}(Li(t))}; limitType=${t.limitType})`}function Bf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of xu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=Cx(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,xu(i),r)||i.endAt&&!function(a,u,h){const f=Cx(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,xu(i),r))}(t,e)}function p4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yC(t){return(e,n)=>{let i=!1;for(const r of xu(t)){const o=m4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function m4(t,e,n){const i=t.field.isKeyField()?me.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Ya(h,f):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return tC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new yt(me.comparator);function wr(){return g4}const _C=new yt(me.comparator);function iu(...t){let e=_C;for(const n of t)e=e.insert(n.key,n);return e}function vC(t){let e=_C;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function no(){return Tu()}function wC(){return Tu()}function Tu(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const y4=new yt(me.comparator),_4=new Dt(me.comparator);function Fe(...t){let e=_4;for(const n of t)e=e.add(n);return e}const v4=new Dt(ze);function w4(){return v4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function xC(t){return{integerValue:""+t}}function x4(t,e){return GV(e)?xC(e):A_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this._=void 0}}function T4(t,e,n){return t instanceof Hd?function(r,o){const a={fields:{[rC]:{stringValue:iC},[oC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&E_(o)&&(o=jf(o)),o&&(a.fields[sC]=o),{mapValue:a}}(n,e):t instanceof Ju?EC(t,e):t instanceof ec?PC(t,e):function(r,o){const a=TC(r,o),u=kx(a)+kx(r.Ae);return Lg(a)&&Lg(r.Ae)?xC(u):A_(r.serializer,u)}(t,e)}function E4(t,e,n){return t instanceof Ju?EC(t,e):t instanceof ec?PC(t,e):n}function TC(t,e){return t instanceof Wd?function(i){return Lg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Hd extends Uf{}class Ju extends Uf{constructor(e){super(),this.elements=e}}function EC(t,e){const n=SC(e);for(const i of t.elements)n.some(r=>Fi(r,i))||n.push(i);return{arrayValue:{values:n}}}class ec extends Uf{constructor(e){super(),this.elements=e}}function PC(t,e){let n=SC(e);for(const i of t.elements)n=n.filter(r=>!Fi(r,i));return{arrayValue:{values:n}}}class Wd extends Uf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function kx(t){return Tt(t.integerValue||t.doubleValue)}function SC(t){return P_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function P4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Ju&&r instanceof Ju||i instanceof ec&&r instanceof ec?Xa(i.elements,r.elements,Fi):i instanceof Wd&&r instanceof Wd?Fi(i.Ae,r.Ae):i instanceof Hd&&r instanceof Hd}(t.transform,e.transform)}class S4{constructor(e,n){this.version=e,this.transformResults=n}}class Mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hf{}function CC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new b_(t.key,Mi.none()):new pc(t.key,t.data,Mi.none());{const n=t.data,i=Zn.empty();let r=new Dt(Wt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new bo(t.key,i,new hi(r.toArray()),Mi.none())}}function C4(t,e,n){t instanceof pc?function(r,o,a){const u=r.value.clone(),h=Nx(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof bo?function(r,o,a){if(!Zh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Nx(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(IC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Eu(t,e,n,i){return t instanceof pc?function(o,a,u,h){if(!Zh(o.precondition,a))return u;const f=o.value.clone(),m=Lx(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof bo?function(o,a,u,h){if(!Zh(o.precondition,a))return u;const f=Lx(o.fieldTransforms,h,a),m=a.data;return m.setAll(IC(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Zh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function I4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=TC(i.transform,r||null);o!=null&&(n===null&&(n=Zn.empty()),n.set(i.field,o))}return n||null}function Rx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Xa(i,r,(o,a)=>P4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pc extends Hf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bo extends Hf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Nx(t,e,n){const i=new Map;Ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,E4(a,u,n[r]))}return i}function Lx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,T4(o,a,e))}return i}class b_ extends Hf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A4 extends Hf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&C4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Eu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Eu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=wC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=CC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,i)=>Rx(n,i))&&Xa(this.baseMutations,e.baseMutations,(n,i)=>Rx(n,i))}}class k_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return y4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new k_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,He;function N4(t){switch(t){case X.OK:return we(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function AC(t){if(t===void 0)return vr("GRPC error has no .code"),X.UNKNOWN;switch(t){case At.OK:return X.OK;case At.CANCELLED:return X.CANCELLED;case At.UNKNOWN:return X.UNKNOWN;case At.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case At.INTERNAL:return X.INTERNAL;case At.UNAVAILABLE:return X.UNAVAILABLE;case At.UNAUTHENTICATED:return X.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case At.NOT_FOUND:return X.NOT_FOUND;case At.ALREADY_EXISTS:return X.ALREADY_EXISTS;case At.PERMISSION_DENIED:return X.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case At.ABORTED:return X.ABORTED;case At.OUT_OF_RANGE:return X.OUT_OF_RANGE;case At.UNIMPLEMENTED:return X.UNIMPLEMENTED;case At.DATA_LOSS:return X.DATA_LOSS;default:return we(39323,{code:t})}}(He=At||(At={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new hs([4294967295,4294967295],0);function Mx(t){const e=L4().encode(t),n=new WS;return n.update(e),new Uint8Array(n.digest())}function Ox(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hs([n,i],0),new hs([r,o],0)]}class R_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ru(`Invalid padding: ${n}`);if(i<0)throw new ru(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ru(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(hs.fromNumber(i)));return r.compare(M4)===1&&(r=new hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Mx(e),[i,r]=Ox(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new R_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Mx(e),[i,r]=Ox(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Wf(Pe.min(),r,new yt(ze),wr(),Fe())}}class mc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new mc(i,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class bC{constructor(e,n){this.targetId=e,this.Ce=n}}class kC{constructor(e,n,i=Gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Dx{constructor(){this.ve=0,this.Fe=Vx(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),i=Fe();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:we(38017,{changeType:o})}}),new mc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Vx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O4{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=Ph(),this.He=Ph(),this.Ye=new yt(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Og(o))if(i===0){const a=new me(o.path);this.et(n,a,tn.newNoDocument(a,Pe.min()))}else Ke(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=xs(i).toUint8Array()}catch(h){if(h instanceof nC)return Qa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new R_(a,r,o)}catch(h){return Qa(h instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Og(u.target)){const h=new me(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,tn.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Fe();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Wf(e,n,this.Ye,this.je,i);return this.je=wr(),this.Je=Ph(),this.He=Ph(),this.Ye=new yt(ze),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Dt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Dt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ph(){return new yt(me.comparator)}function Vx(){return new yt(me.comparator)}const D4={asc:"ASCENDING",desc:"DESCENDING"},V4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j4={and:"AND",or:"OR"};class z4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vg(t,e){return t.useProto3Json||Vf(e)?e:{value:e}}function $d(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F4(t,e){return $d(t,e.toTimestamp())}function Oi(t){return Ke(!!t,49232),Pe.fromTimestamp(function(n){const i=ws(n);return new at(i.seconds,i.nanos)}(t))}function N_(t,e){return jg(t,e).canonicalString()}function jg(t,e){const n=function(r){return new ot(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NC(t){const e=ot.fromString(t);return Ke(VC(e),10190,{key:e.toString()}),e}function zg(t,e){return N_(t.databaseId,e.path)}function om(t,e){const n=NC(e);if(n.get(1)!==t.databaseId.projectId)throw new de(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(MC(n))}function LC(t,e){return N_(t.databaseId,e)}function B4(t){const e=NC(t);return e.length===4?ot.emptyPath():MC(e)}function Fg(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MC(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jx(t,e,n){return{name:zg(t,e),fields:n.value.mapValue.fields}}function U4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ke(m===void 0||typeof m=="string",58123),Gt.fromBase64String(m||"")):(Ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Gt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:AC(f.code);return new de(m,f.message||"")}(a);n=new kC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=om(t,i.document.name),o=Oi(i.document.updateTime),a=i.document.createTime?Oi(i.document.createTime):Pe.min(),u=new Zn({mapValue:{fields:i.document.fields}}),h=tn.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Kh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=om(t,i.document),o=i.readTime?Oi(i.readTime):Pe.min(),a=tn.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Kh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=om(t,i.document),o=i.removedTargetIds||[];n=new Kh([],o,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new R4(r,o),u=i.targetId;n=new bC(u,a)}}return n}function H4(t,e){let n;if(e instanceof pc)n={update:jx(t,e.key,e.value)};else if(e instanceof b_)n={delete:zg(t,e.key)};else if(e instanceof bo)n={update:jx(t,e.key,e.data),updateMask:Y4(e.fieldMask)};else{if(!(e instanceof A4))return we(16599,{Vt:e.type});n={verify:zg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Hd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ju)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ec)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Wd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:F4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function W4(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Oi(r.updateTime):Oi(o);return a.isEqual(Pe.min())&&(a=Oi(o)),new S4(a,r.transformResults||[])}(n,e))):[]}function $4(t,e){return{documents:[LC(t,e.path)]}}function q4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=LC(t,r);const o=function(f){if(f.length!==0)return DC(Bi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:la(_.field),direction:K4(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Vg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function G4(t){let e=B4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ke(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=OC(g);return _ instanceof Bi&&dC(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(A){return new Ud(ua(A.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Vf(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(g){const _=!!g.before,T=g.values||[];return new Bd(T,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,T=g.values||[];return new Bd(T,_)}(n.endAt)),h4(e,r,a,o,u,"F",h,f)}function Z4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ua(n.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ua(n.unaryFilter.field);return Lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ua(n.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ua(n.unaryFilter.field);return Lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return Lt.create(ua(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bi.create(n.compositeFilter.filters.map(i=>OC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function K4(t){return D4[t]}function Q4(t){return V4[t]}function X4(t){return j4[t]}function la(t){return{fieldPath:t.canonicalString()}}function ua(t){return Wt.fromServerFormat(t.fieldPath)}function DC(t){return t instanceof Lt?function(n){if(n.op==="=="){if(Sx(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NAN"}};if(Px(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sx(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NOT_NAN"}};if(Px(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:la(n.field),op:Q4(n.op),value:n.value}}}(t):t instanceof Bi?function(n){const i=n.getFilters().map(r=>DC(r));return i.length===1?i[0]:{compositeFilter:{op:X4(n.op),filters:i}}}(t):we(54877,{filter:t})}function Y4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,i,r,o=Pe.min(),a=Pe.min(),u=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.yt=e}}function e3(t){const e=G4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.Cn=new n3}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(vs.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class n3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Dt(ot.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Dt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jC=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(jC,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new el(0)}static cr(){return new el(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="LruGarbageCollector",i3=1048576;function Bx([t,e],[n,i]){const r=ze(t,n);return r===0?ze(e,i):r}class r3{constructor(e){this.Ir=e,this.buffer=new Dt(Bx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Bx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class s3{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(Fx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hl(n)?re(Fx,"Ignoring IndexedDB error during garbage collection: ",n):await cl(n)}await this.Vr(3e5)})}}class o3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Df.ce);const i=new r3(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(zx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),oa()<=je.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function a3(t,e){return new o3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Eu(i.mutation,r,hi.empty(),at.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Fe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Fe()){const r=no();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=iu();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=no();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Fe()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=wr();const a=Tu(),u=function(){return Tu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof bo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Eu(m.mutation,f,m.mutation.getFieldMask(),at.now())):a.set(f.key,hi.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new u3(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Tu();let r=new yt((a,u)=>a-u),o=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||hi.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||Fe()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=wC();m.forEach(_=>{if(!o.has(_)){const T=CC(n.get(_),i.get(_));T!==null&&g.set(_,T),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return me.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):d4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(no());let u=Ku,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Fe())).next(m=>({batchId:u,changes:vC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(i=>{let r=iu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=iu();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,_){return new zf(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,tn.newInvalidDocument(m)))});let u=iu();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&Eu(m.mutation,f,hi.empty(),at.now()),Bf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Oi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:e3(r.bundledQuery),readTime:Oi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(){this.overlays=new yt(me.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=no();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=no(),o=n.length+1,a=new me(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new yt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=no(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=no(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new k4(n,i));let o=this.qr.get(n);o===void 0&&(o=Fe(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.Qr=new Dt(zt.$r),this.Ur=new Dt(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new zt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new zt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new me(new ot([])),i=new zt(n,e),r=new zt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new ot([])),i=new zt(n,e),r=new zt(n,e+1);let o=Fe();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new zt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Dt(zt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new b4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new zt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?T_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new zt(n,0),r=new zt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Dt(ze);return n.forEach(r=>{const o=new zt(r,0),a=new zt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;me.isDocumentKey(o)||(o=o.child(""));const a=new zt(new me(o),0);let u=new Dt(ze);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new zt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new zt(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.ri=e,this.docs=function(){return new yt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let i=wr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():tn.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=wr();const a=n.path,u=new me(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||HV(UV(m),i)<=0||(r.has(m.key)||Bf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){we(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new g3(this)}getSize(e){return K.resolve(this.size)}}class g3 extends l3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.persistence=e,this.si=new Ao(n=>S_(n),C_),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new L_,this.targetCount=0,this.ai=el.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new el(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Df(0),this.li=!1,this.li=!0,this.hi=new f3,this.referenceDelegate=e(this),this.Pi=new y3(this),this.indexManager=new t3,this.remoteDocumentCache=function(r){return new m3(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new J4(n),this.Ii=new h3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new p3(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new _3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class _3 extends $V{constructor(e){super(),this.currentSequenceNumber=e}}class M_{constructor(e){this.persistence=e,this.Ri=new L_,this.Vi=null}static mi(e){return new M_(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=me.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Pe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class qd{constructor(e,n){this.persistence=e,this.pi=new Ao(i=>ZV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=a3(this,n)}static mi(e,n){return new qd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Pe.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Fe(),r=Fe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new O_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return dD()?8:qV(rn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new v3;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(oa()<=je.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",aa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(oa()<=je.DEBUG&&re("QueryEngine","Query:",aa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(oa()<=je.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",aa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(n))):K.resolve())}ys(e,n){if(bx(n))return K.resolve(null);let i=Li(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Dg(n,null,"F"),i=Li(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Fe(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Dg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return bx(n)||r.isEqual(Pe.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(oa()<=je.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aa(n)),this.vs(e,a,n,BV(r,Ku)).next(u=>u))})}Ds(e,n){let i=new Dt(yC(e));return n.forEach((r,o)=>{Bf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return oa()<=je.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",aa(n)),this.ps.getDocumentsMatchingQuery(e,n,vs.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="LocalStore",x3=3e8;class T3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new yt(ze),this.xs=new Ao(o=>S_(o),C_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function E3(t,e,n,i){return new T3(t,e,n,i)}async function FC(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Fe();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function P3(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,_=g.keys();let T=K.resolve();return _.forEach(A=>{T=T.next(()=>m.getEntry(h,A)).next(k=>{const O=f.docVersions.get(A);Ke(O!==null,48541),k.version.compareTo(O)<0&&(g.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Fe();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function BC(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function S3(t,e){const n=Ie(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Gt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(k,O,b){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=x3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(_,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let h=wr(),f=Fe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(C3(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Pe.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function C3(t,e,n){let i=Fe(),r=Fe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=wr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Pe.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):re(D_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function I3(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=T_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function A3(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Xr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Bg(t,e,n){const i=Ie(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!hl(a))throw a;re(D_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Ux(t,e,n){const i=Ie(t);let r=Pe.min(),o=Fe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Ie(h),_=g.xs.get(m);return _!==void 0?K.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,Li(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Pe.min(),n?o:Fe())).next(u=>(b3(i,p4(e),u),{documents:u,Qs:o})))}function b3(t,e,n){let i=t.Os.get(e)||Pe.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Hx{constructor(){this.activeTargetIds=w4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k3{constructor(){this.Mo=new Hx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="ConnectivityMonitor";class $x{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(Wx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(Wx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;function Ug(){return Sh===null?Sh=function(){return 268435456+Math.round(2147483648*Math.random())}():Sh++,"0x"+Sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="RestConnection",N3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===zd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Ug(),u=this.zo(e,n.toUriEncodedString());re(am,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=al(f);return this.Jo(e,u,h,i,m).then(g=>(re(am,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Qa(am,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ul}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=N3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class O3 extends L3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Ug();return new Promise((u,h)=>{const f=new $S;f.setWithCredentials(!0),f.listenOnce(qS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case $h.NO_ERROR:const g=f.getResponseJson();re(Xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case $h.TIMEOUT:re(Xt,`RPC '${e}' ${a} timed out`),h(new de(X.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const _=f.getStatus();if(re(Xt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T==null?void 0:T.error;if(A&&A.status&&A.message){const k=function(b){const P=b.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(P)>=0?P:X.UNKNOWN}(A.status);h(new de(k,A.message))}else h(new de(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new de(X.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{re(Xt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);re(Xt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Ug(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=KS(),u=ZS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");re(Xt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let _=!1,T=!1;const A=new M3({Yo:O=>{T?re(Xt,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(_||(re(Xt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),re(Xt,`RPC '${e}' stream ${r} sending:`,O),g.send(O))},Zo:()=>g.close()}),k=(O,b,P)=>{O.listen(b,C=>{try{P(C)}catch(B){setTimeout(()=>{throw B},0)}})};return k(g,nu.EventType.OPEN,()=>{T||(re(Xt,`RPC '${e}' stream ${r} transport opened.`),A.o_())}),k(g,nu.EventType.CLOSE,()=>{T||(T=!0,re(Xt,`RPC '${e}' stream ${r} transport closed`),A.a_(),this.E_(g))}),k(g,nu.EventType.ERROR,O=>{T||(T=!0,Qa(Xt,`RPC '${e}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),A.a_(new de(X.UNAVAILABLE,"The operation could not be completed")))}),k(g,nu.EventType.MESSAGE,O=>{var b;if(!T){const P=O.data[0];Ke(!!P,16349);const C=P,B=(C==null?void 0:C.error)||((b=C[0])==null?void 0:b.error);if(B){re(Xt,`RPC '${e}' stream ${r} received error:`,B);const G=B.status;let U=function(N){const V=At[N];if(V!==void 0)return AC(V)}(G),R=B.message;U===void 0&&(U=X.INTERNAL,R="Unknown error status: "+G+" with message "+B.message),T=!0,A.a_(new de(U,R)),g.close()}else re(Xt,`RPC '${e}' stream ${r} received:`,P),A.u_(P)}}),k(u,GS.STAT_EVENT,O=>{O.stat===kg.PROXY?re(Xt,`RPC '${e}' stream ${r} detected buffering proxy`):O.stat===kg.NOPROXY&&re(Xt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{A.__()},0),A}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t){return new z4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="PersistentStream";class HC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new de(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(qx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(qx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class D3 extends HC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=U4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Pe.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Pe.min():a.readTime?Oi(a.readTime):Pe.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Fg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Og(h)?{documents:$4(o,h)}:{query:q4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=RC(o,a.resumeToken);const f=Vg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Pe.min())>0){u.readTime=$d(o,a.snapshotVersion.toTimestamp());const f=Vg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=Z4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Fg(this.serializer),n.removeTarget=e,this.q_(n)}}class V3 extends HC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=W4(e.writeResults,e.commitTime),i=Oi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Fg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>H4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{}class z3 extends j3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,jg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,jg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class F3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="RemoteStore";class B3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{ko(this)&&(re(vo,"Restarting streams for network reachability change."),await async function(h){const f=Ie(h);f.Ea.add(4),await gc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await qf(f)}(this))})}),this.Ra=new F3(i,r)}}async function qf(t){if(ko(t))for(const e of t.da)await e(!0)}async function gc(t){for(const e of t.da)await e(!1)}function WC(t,e){const n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),F_(n)?z_(n):dl(n).O_()&&j_(n,e))}function V_(t,e){const n=Ie(t),i=dl(n);n.Ia.delete(e),i.O_()&&$C(n,e),n.Ia.size===0&&(i.O_()?i.L_():ko(n)&&n.Ra.set("Unknown"))}function j_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dl(t).Y_(e)}function $C(t,e){t.Va.Ue(e),dl(t).Z_(e)}function z_(t){t.Va=new O4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),dl(t).start(),t.Ra.ua()}function F_(t){return ko(t)&&!dl(t).x_()&&t.Ia.size>0}function ko(t){return Ie(t).Ea.size===0}function qC(t){t.Va=void 0}async function U3(t){t.Ra.set("Online")}async function H3(t){t.Ia.forEach((e,n)=>{j_(t,e)})}async function W3(t,e){qC(t),F_(t)?(t.Ra.ha(e),z_(t)):t.Ra.set("Unknown")}async function $3(t,e,n){if(t.Ra.set("Online"),e instanceof kC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){re(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gd(t,i)}else if(e instanceof Kh?t.Va.Ze(e):e instanceof bC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Pe.min()))try{const i=await BC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Gt.EMPTY_BYTE_STRING,m.snapshotVersion)),$C(o,h);const g=new Xr(m.target,h,f,m.sequenceNumber);j_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){re(vo,"Failed to raise snapshot:",i),await Gd(t,i)}}async function Gd(t,e,n){if(!hl(e))throw e;t.Ea.add(1),await gc(t),t.Ra.set("Offline"),n||(n=()=>BC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(vo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qf(t)})}function GC(t,e){return e().catch(n=>Gd(t,n,e))}async function Gf(t){const e=Ie(t),n=Es(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:T_;for(;q3(e);)try{const r=await I3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,G3(e,r)}catch(r){await Gd(e,r)}ZC(e)&&KC(e)}function q3(t){return ko(t)&&t.Ta.length<10}function G3(t,e){t.Ta.push(e);const n=Es(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ZC(t){return ko(t)&&!Es(t).x_()&&t.Ta.length>0}function KC(t){Es(t).start()}async function Z3(t){Es(t).ra()}async function K3(t){const e=Es(t);for(const n of t.Ta)e.ea(n.mutations)}async function Q3(t,e,n){const i=t.Ta.shift(),r=k_.from(i,e,n);await GC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Gf(t)}async function X3(t,e){e&&Es(t).X_&&await async function(i,r){if(function(a){return N4(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();Es(i).B_(),await GC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Gf(i)}}(t,e),ZC(t)&&KC(t)}async function Gx(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),re(vo,"RemoteStore received new credentials");const i=ko(n);n.Ea.add(3),await gc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qf(n)}async function Y3(t,e){const n=Ie(t);e?(n.Ea.delete(2),await qf(n)):e||(n.Ea.add(2),await gc(n),n.Ra.set("Unknown"))}function dl(t){return t.ma||(t.ma=function(n,i,r){const o=Ie(n);return o.sa(),new D3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:U3.bind(null,t),t_:H3.bind(null,t),r_:W3.bind(null,t),H_:$3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),F_(t)?z_(t):t.Ra.set("Unknown")):(await t.ma.stop(),qC(t))})),t.ma}function Es(t){return t.fa||(t.fa=function(n,i,r){const o=Ie(n);return o.sa(),new V3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Z3.bind(null,t),r_:X3.bind(null,t),ta:K3.bind(null,t),na:Q3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Gf(t)):(await t.fa.stop(),t.Ta.length>0&&(re(vo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new B_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U_(t,e){if(vr("AsyncQueue",`${e}: ${t}`),hl(t))return new de(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||me.comparator(n.key,i.key):(n,i)=>me.comparator(n.key,i.key),this.keyedMap=iu(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ma;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.ga=new yt(me.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class tl{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new tl(e,n,Ma.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class e5{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ie(n),o=r.queries;r.queries=Kx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new de(X.ABORTED,"Firestore shutting down"))}}function Kx(){return new Ao(t=>gC(t),Ff)}async function QC(t,e){const n=Ie(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new J3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=U_(a,`Initialization of query '${aa(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&H_(n)}async function XC(t,e){const n=Ie(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function t5(t,e){const n=Ie(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&H_(n)}function n5(t,e,n){const i=Ie(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function H_(t){t.Ca.forEach(e=>{e.next()})}var Hg,Qx;(Qx=Hg||(Hg={})).Ma="default",Qx.Cache="cache";class YC{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new tl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.key=e}}class eI{constructor(e){this.key=e}}class i5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=yC(e),this.tu=new Ma(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Zx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),T=Bf(this.query,g)?g:null,A=!!_&&this.mutatedKeys.has(_.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let O=!1;_&&T?_.data.isEqual(T.data)?A!==k&&(i.track({type:3,doc:T}),O=!0):this.su(_,T)||(i.track({type:2,doc:T}),O=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!_&&T?(i.track({type:0,doc:T}),O=!0):_&&!T&&(i.track({type:1,doc:_}),O=!0,(h||f)&&(u=!0)),O&&(T?(a=a.add(T),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,A){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:O})}};return k(T)-k(A)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new tl(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new eI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new JC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const W_="SyncEngine";class r5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class s5{constructor(e){this.key=e,this.hu=!1}}class o5{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ao(u=>gC(u),Ff),this.Iu=new Map,this.Eu=new Set,this.du=new yt(me.comparator),this.Au=new Map,this.Ru=new L_,this.Vu={},this.mu=new Map,this.fu=el.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function a5(t,e,n=!0){const i=oI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await tI(i,e,n,!0),r}async function l5(t,e){const n=oI(t);await tI(n,e,!0,!1)}async function tI(t,e,n,i){const r=await A3(t.localStore,Li(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await u5(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&WC(t.remoteStore,r),u}async function u5(t,e,n,i,r){t.pu=(g,_,T)=>async function(k,O,b,P){let C=O.view.ru(b);C.Cs&&(C=await Ux(k.localStore,O.query,!1).then(({documents:R})=>O.view.ru(R,C)));const B=P&&P.targetChanges.get(O.targetId),G=P&&P.targetMismatches.get(O.targetId)!=null,U=O.view.applyChanges(C,k.isPrimaryClient,B,G);return Yx(k,O.targetId,U.au),U.snapshot}(t,g,_,T);const o=await Ux(t.localStore,e,!0),a=new i5(e,o.Qs),u=a.ru(o.documents),h=mc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);Yx(t,n,f.au);const m=new r5(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function c5(t,e,n){const i=Ie(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Ff(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Bg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&V_(i.remoteStore,r.targetId),Wg(i,r.targetId)}).catch(cl)):(Wg(i,r.targetId),await Bg(i.localStore,r.targetId,!0))}async function h5(t,e){const n=Ie(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),V_(n.remoteStore,i.targetId))}async function d5(t,e,n){const i=v5(t);try{const r=await function(a,u){const h=Ie(a),f=at.now(),m=u.reduce((T,A)=>T.add(A.key),Fe());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let A=wr(),k=Fe();return h.Ns.getEntries(T,m).next(O=>{A=O,A.forEach((b,P)=>{P.isValidDocument()||(k=k.add(b))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,A)).next(O=>{g=O;const b=[];for(const P of u){const C=I4(P,g.get(P.key).overlayedDocument);C!=null&&b.push(new bo(P.key,C,uC(C.value.mapValue),Mi.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,b,u)}).next(O=>{_=O;const b=O.applyToLocalDocumentSet(g,k);return h.documentOverlayCache.saveOverlays(T,O.batchId,b)})}).then(()=>({batchId:_.batchId,changes:vC(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new yt(ze)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await yc(i,r.changes),await Gf(i.remoteStore)}catch(r){const o=U_(r,"Failed to persist write");n.reject(o)}}async function nI(t,e){const n=Ie(t);try{const i=await S3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Ke(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Ke(a.hu,14607):r.removedDocuments.size>0&&(Ke(a.hu,42227),a.hu=!1))}),await yc(n,i,e)}catch(i){await cl(i)}}function Xx(t,e,n){const i=Ie(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Ie(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&H_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function f5(t,e,n){const i=Ie(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new yt(me.comparator);a=a.insert(o,tn.newNoDocument(o,Pe.min()));const u=Fe().add(o),h=new Wf(Pe.min(),new Map,new yt(ze),a,u);await nI(i,h),i.du=i.du.remove(o),i.Au.delete(e),$_(i)}else await Bg(i.localStore,e,!1).then(()=>Wg(i,e,n)).catch(cl)}async function p5(t,e){const n=Ie(t),i=e.batch.batchId;try{const r=await P3(n.localStore,e);rI(n,i,null),iI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await yc(n,r)}catch(r){await cl(r)}}async function m5(t,e,n){const i=Ie(t);try{const r=await function(a,u){const h=Ie(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(Ke(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);rI(i,e,n),iI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await yc(i,r)}catch(r){await cl(r)}}function iI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rI(t,e,n){const i=Ie(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Wg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||sI(t,i)})}function sI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(V_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),$_(t))}function Yx(t,e,n){for(const i of n)i instanceof JC?(t.Ru.addReference(i.key,e),g5(t,i)):i instanceof eI?(re(W_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||sI(t,i.key)):we(19791,{wu:i})}function g5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(re(W_,"New document in limbo: "+n),t.Eu.add(i),$_(t))}function $_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(ot.fromString(e)),i=t.fu.next();t.Au.set(i,new s5(n)),t.du=t.du.insert(n,i),WC(t.remoteStore,new Xr(Li(I_(n.path)),i,"TargetPurposeLimboResolution",Df.ce))}}async function yc(t,e,n){const i=Ie(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=O_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Ie(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,_=>K.forEach(_.Es,T=>m.persistence.referenceDelegate.addReference(g,_.targetId,T)).next(()=>K.forEach(_.ds,T=>m.persistence.referenceDelegate.removeReference(g,_.targetId,T)))))}catch(g){if(!hl(g))throw g;re(D_,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const T=m.Ms.get(_),A=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(_,k)}}}(i.localStore,o))}async function y5(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){re(W_,"User change. New user:",e.toKey());const i=await FC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new de(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await yc(n,i.Ls)}}function _5(t,e){const n=Ie(t),i=n.Au.get(e);if(i&&i.hu)return Fe().add(i.key);{let r=Fe();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function oI(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f5.bind(null,e),e.Pu.H_=t5.bind(null,e.eventManager),e.Pu.yu=n5.bind(null,e.eventManager),e}function v5(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m5.bind(null,e),e}class Zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return E3(this.persistence,new w3,e.initialUser,this.serializer)}Cu(e){return new zC(M_.mi,this.serializer)}Du(e){return new k3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zd.provider={build:()=>new Zd};class w5 extends Zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof qd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new s3(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new zC(i=>qd.mi(i,n),this.serializer)}}class $g{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Xx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=y5.bind(null,this.syncEngine),await Y3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new e5}()}createDatastore(e){const n=$f(e.databaseInfo.databaseId),i=function(o){return new O3(o)}(e.databaseInfo);return function(o,a,u,h){return new z3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new B3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Xx(this.syncEngine,n,0),function(){return $x.v()?new $x:new R3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new o5(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ie(r);re(vo,"RemoteStore shutting down."),o.Ea.add(5),await gc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}$g.provider={build:()=>new $g};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class x5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Jt.UNAUTHENTICATED,this.clientId=w_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{re(Ps,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(re(Ps,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=U_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function um(t,e){t.asyncQueue.verifyOperationInProgress(),re(Ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await FC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await T5(t);re(Ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Gx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Gx(e.remoteStore,r)),t._onlineComponents=e}async function T5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Ps,"Using user provided OfflineComponentProvider");try{await um(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Qa("Error using user provided cache. Falling back to memory cache: "+n),await um(t,new Zd)}}else re(Ps,"Using default OfflineComponentProvider"),await um(t,new w5(void 0));return t._offlineComponents}async function lI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Ps,"Using user provided OnlineComponentProvider"),await Jx(t,t._uninitializedComponentsProvider._online)):(re(Ps,"Using default OnlineComponentProvider"),await Jx(t,new $g))),t._onlineComponents}function E5(t){return lI(t).then(e=>e.syncEngine)}async function qg(t){const e=await lI(t),n=e.eventManager;return n.onListen=a5.bind(null,e.syncEngine),n.onUnlisten=c5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=l5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=h5.bind(null,e.syncEngine),n}function P5(t,e,n={}){const i=new ds;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new aI({next:_=>{m.Nu(),a.enqueueAndForget(()=>XC(o,g)),_.fromCache&&h.source==="server"?f.reject(new de(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new YC(u,m,{includeMetadataChanges:!0,qa:!0});return QC(o,g)}(await qg(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firestore.googleapis.com",t1=!0;class n1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cI,this.ssl=t1}else this.host=e.host,this.ssl=e.ssl??t1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i3)throw new de(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new kV;switch(i.type){case"firstParty":return new MV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=e1.get(n);i&&(re("ComponentProvider","Removing Datastore"),e1.delete(n),i.terminate())}(this),Promise.resolve()}}function S5(t,e,n,i={}){var f;t=dr(t,Zf);const r=al(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(DS(`https://${u}`),VS("Firestore",!0)),o.host!==cI&&o.host!==u&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!go(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Jt.MOCK_USER;else{m=iD(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new de(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Jt(_)}t._authCredentials=new RV(new XS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _c(this.firestore,e,this._query)}}class Ot{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(fc(n,Ot._jsonSchema))return new Ot(e,i||null,new me(ot.fromString(n.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Rt("string",Ot._jsonSchemaVersion),referencePath:Rt("string")};class fs extends _c{constructor(e,n,i){super(e,n,I_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new me(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function Pu(t,e,...n){if(t=Ln(t),YS("collection","path",e),t instanceof Zf){const i=ot.fromString(e,...n);return gx(i),new fs(t,null,i)}{if(!(t instanceof Ot||t instanceof fs))throw new de(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ot.fromString(e,...n));return gx(i),new fs(t.firestore,null,i)}}function Ai(t,e,...n){if(t=Ln(t),arguments.length===1&&(e=w_.newId()),YS("doc","path",e),t instanceof Zf){const i=ot.fromString(e,...n);return mx(i),new Ot(t,null,new me(i))}{if(!(t instanceof Ot||t instanceof fs))throw new de(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ot.fromString(e,...n));return mx(i),new Ot(t.firestore,t instanceof fs?t.converter:null,new me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="AsyncQueue";class r1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UC(this,"async_queue_retry"),this._c=()=>{const i=lm();i&&re(i1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ds;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hl(e))throw e;re(i1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",s1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=B_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:s1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function s1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class nl extends Zf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new r1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r1(e),this._firestoreClient=void 0,await e}}}function C5(t,e){const n=typeof t=="object"?t:BS(),i=typeof t=="string"?t:zd,r=__(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=tD("firestore");o&&S5(r,...o)}return r}function q_(t){if(t._terminated)throw new de(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||I5(t),t._firestoreClient}function I5(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new XV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,uI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new x5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Gt.fromBase64String(e))}catch(n){throw new de(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fc(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Rt("string",Kn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(fc(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:Rt("string",Di._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fc(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vi(e.vectorValues);throw new de(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:Rt("string",Vi._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=/^__.*__$/;class b5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,n,this.fieldTransforms):new pc(e,this.data,n,this.fieldTransforms)}}function dI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class Z_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Z_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dI(this.Ac)&&A5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class k5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||$f(e)}Cc(e,n,i,r=!1){return new Z_({Ac:e,methodName:n,Dc:i,path:Wt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function R5(t){const e=t._freezeSettings(),n=$f(t._databaseId);return new k5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N5(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);gI("Data must be an object, but it was:",a,i);const u=pI(i,a);let h,f;if(o.merge)h=new hi(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=L5(e,g,n);if(!a.contains(_))throw new de(X.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);O5(m,_)||m.push(_)}h=new hi(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new b5(new Zn(u),h,f)}function fI(t,e){if(mI(t=Ln(t)))return gI("Unsupported field value:",e,t),pI(t,e);if(t instanceof hI)return function(i,r){if(!dI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=fI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Ln(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return x4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=at.fromDate(i);return{timestampValue:$d(r.serializer,o)}}if(i instanceof at){const o=new at(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$d(r.serializer,o)}}if(i instanceof Di)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:RC(r.serializer,i._byteString)};if(i instanceof Ot){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:N_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Vi)return function(a,u){return{mapValue:{fields:{[aC]:{stringValue:lC},[Fd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return A_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${x_(i)}`)}(t,e)}function pI(t,e){const n={};return tC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(t,(i,r)=>{const o=fI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function mI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof Di||t instanceof Kn||t instanceof Ot||t instanceof hI||t instanceof Vi)}function gI(t,e,n){if(!mI(n)||!JS(n)){const i=x_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function L5(t,e,n){if((e=Ln(e))instanceof G_)return e._internalPath;if(typeof e=="string")return yI(t,e);throw Kd("Field path arguments must be of type string or ",t,!1,void 0,n)}const M5=new RegExp("[~\\*/\\[\\]]");function yI(t,e,n){if(e.search(M5)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new G_(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new de(X.INVALID_ARGUMENT,u+t+h)}function O5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D5 extends _I{data(){return super.data()}}function vI(t,e){return typeof e=="string"?yI(t,e):e instanceof G_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V5{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Io(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Fd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>Tt(a.doubleValue));return new Vi(n)}convertGeoPoint(e){return new Di(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=jf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Qu(e));default:return null}}convertTimestamp(e){const n=ws(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ot.fromString(e);Ke(VC(i),9688,{name:e});const r=new Xu(i.get(1),i.get(3)),o=new me(i.popFirst(5));return r.isEqual(n)||vr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oo extends _I{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(vI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=oo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",oo._jsonSchema={type:Rt("string",oo._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Qh extends oo{data(e={}){return super.data(e)}}class ao{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new su(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Qh(this._firestore,this._userDataWriter,i.key,i,new su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Qh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new su(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Qh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new su(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:z5(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=w_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function z5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}ao._jsonSchemaVersion="firestore/querySnapshot/1.0",ao._jsonSchema={type:Rt("string",ao._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class K_ extends V5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function a1(t){t=dr(t,_c);const e=dr(t.firestore,nl),n=q_(e),i=new K_(e);return wI(t._query),P5(n,t._query).then(r=>new ao(e,i,t,r))}function ir(t,e,n){t=dr(t,Ot);const i=dr(t.firestore,nl),r=j5(t.converter,e,n);return xI(i,[N5(R5(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Mi.none())])}function cm(t){return xI(dr(t.firestore,nl),[new b_(t._key,Mi.none())])}function hm(t,...e){var h,f,m;t=Ln(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||o1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(o1(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof Ot)a=dr(t.firestore,nl),u=I_(t._key.path),o={next:g=>{e[i]&&e[i](F5(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=dr(t,_c);a=dr(g.firestore,nl),u=g._query;const _=new K_(a);o={next:T=>{e[i]&&e[i](new ao(a,_,g,T))},error:e[i+1],complete:e[i+2]},wI(t._query)}return function(_,T,A,k){const O=new aI(k),b=new YC(T,O,A);return _.asyncQueue.enqueueAndForget(async()=>QC(await qg(_),b)),()=>{O.Nu(),_.asyncQueue.enqueueAndForget(async()=>XC(await qg(_),b))}}(q_(a),u,r,o)}function xI(t,e){return function(i,r){const o=new ds;return i.asyncQueue.enqueueAndForget(async()=>d5(await E5(i),r,o)),o.promise}(q_(t),e)}function F5(t,e,n){const i=n.docs.get(e._key),r=new K_(t);return new oo(t,r,e._key,i,new su(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ul=r})(ll),Ka(new yo("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new nl(new NV(i.getProvider("auth-internal")),new OV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),cs(hx,dx,e),cs(hx,dx,"esm2020")})();function TI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B5=TI,EI=new hc("auth","Firebase",TI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new g_("@firebase/auth");function U5(t,...e){Qd.logLevel<=je.WARN&&Qd.warn(`Auth (${ll}): ${t}`,...e)}function Xh(t,...e){Qd.logLevel<=je.ERROR&&Qd.error(`Auth (${ll}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,...e){throw Q_(t,...e)}function ji(t,...e){return Q_(t,...e)}function PI(t,e,n){const i={...B5(),[e]:n};return new hc("auth","Firebase",i).create(e,{appName:t.name})}function ps(t){return PI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return EI.create(t,...e)}function xe(t,e,...n){if(!t)throw Q_(e,...n)}function ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xh(e),new Error(e)}function Tr(t,e){t||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function H5(){return l1()==="http:"||l1()==="https:"}function l1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H5()||uD()||"connection"in navigator)?navigator.onLine:!0}function $5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=oD()||cD()}get(){return W5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e){Tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z5=new vc(3e4,6e4);function Kf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function fl(t,e,n,i,r={}){return CI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=dc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return lD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&al(t.emulatorConfig.host)&&(f.credentials="include"),SI.fetch()(await AI(t,t.config.apiHost,n,u),f)})}async function CI(t,e,n){t._canInitEmulator=!1;const i={...q5,...e};try{const r=new K5(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Ch(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ch(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Ch(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Ch(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw PI(t,m,f);xr(t,m)}}catch(r){if(r instanceof Sr)throw r;xr(t,"network-request-failed",{message:String(r)})}}async function II(t,e,n,i,r={}){const o=await fl(t,e,n,i,r);return"mfaPendingCredential"in o&&xr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function AI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?X_(t.config,r):`${t.config.apiScheme}://${r}`;return G5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class K5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ji(this.auth,"network-request-failed")),Z5.get())})}}function Ch(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ji(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q5(t,e){return fl(t,"POST","/v1/accounts:delete",e)}async function Xd(t,e){return fl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function X5(t,e=!1){const n=Ln(t),i=await n.getIdToken(e),r=Y_(i);xe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Su(dm(r.auth_time)),issuedAtTime:Su(dm(r.iat)),expirationTime:Su(dm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function dm(t){return Number(t)*1e3}function Y_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const r=NS(n);return r?JSON.parse(r):(Xh("Failed to decode base64 JWT payload"),null)}catch(r){return Xh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function u1(t){const e=Y_(t);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sr&&Y5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Y5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yd(t){var g;const e=t.auth,n=await t.getIdToken(),i=await tc(t,Xd(e,{idToken:n}));xe(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?bI(r.providerUserInfo):[],a=tj(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Zg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function ej(t){const e=Ln(t);await Yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tj(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(t,e){const n=await CI(t,{},async()=>{const i=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await AI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&al(t.emulatorConfig.host)&&(h.credentials="include"),SI.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ij(t,e){return fl(t,"POST","/v2/accounts:revokeToken",Kf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=u1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await nj(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Oa;return i&&(xe(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(xe(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(xe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,e){xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class di{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new J5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Zg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await tc(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return X5(this,e)}reload(){return ej(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Yd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await tc(this,Q5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:T,providerData:A,stsTokenManager:k}=n;xe(g&&k,e,"internal-error");const O=Oa.fromJSON(this.name,k);xe(typeof g=="string",e,"internal-error"),Dr(i,e.name),Dr(r,e.name),xe(typeof _=="boolean",e,"internal-error"),xe(typeof T=="boolean",e,"internal-error"),Dr(o,e.name),Dr(a,e.name),Dr(u,e.name),Dr(h,e.name),Dr(f,e.name),Dr(m,e.name);const b=new di({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:O,createdAt:f,lastLoginAt:m});return A&&Array.isArray(A)&&(b.providerData=A.map(P=>({...P}))),h&&(b._redirectEventId=h),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new Oa;r.updateFromServerResponse(n);const o=new di({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Yd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];xe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?bI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Oa;u.updateFromIdToken(i);const h=new di({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Zg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;function lr(t){Tr(t instanceof Function,"Expected a class definition");let e=c1.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,c1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kI.type="NONE";const h1=kI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t,e,n){return`firebase:${t}:${e}:${n}`}class Da{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Yh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Yh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xd(this.auth,{idToken:e}).catch(()=>{});return n?di._fromGetAccountInfoResponse(this.auth,n,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Da(lr(h1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||lr(h1);const a=Yh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await Xd(e,{idToken:m}).catch(()=>{});if(!_)break;g=await di._fromGetAccountInfoResponse(e,_,m)}else g=di._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Da(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Da(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DI(e))return"Blackberry";if(VI(e))return"Webos";if(NI(e))return"Safari";if((e.includes("chrome/")||LI(e))&&!e.includes("edge/"))return"Chrome";if(OI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function RI(t=rn()){return/firefox\//i.test(t)}function NI(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LI(t=rn()){return/crios\//i.test(t)}function MI(t=rn()){return/iemobile/i.test(t)}function OI(t=rn()){return/android/i.test(t)}function DI(t=rn()){return/blackberry/i.test(t)}function VI(t=rn()){return/webos/i.test(t)}function J_(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rj(t=rn()){var e;return J_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function sj(){return hD()&&document.documentMode===10}function jI(t=rn()){return J_(t)||OI(t)||VI(t)||DI(t)||/windows phone/i.test(t)||MI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e=[]){let n;switch(t){case"Browser":n=d1(rn());break;case"Worker":n=`${d1(rn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ll}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(t,e={}){return fl(t,"GET","/v2/passwordPolicy",Kf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=6;class uj{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f1(this),this.idTokenSubscription=new f1(this),this.beforeStateQueue=new oj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xd(this,{idToken:e}),i=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(ps(this));const n=e?Ln(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aj(this),n=new uj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ij(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&U5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qf(t){return Ln(t)}class f1{constructor(e){this.auth=e,this.observer=null,this.addObserver=vD(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ev={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hj(t){ev=t}function dj(t){return ev.loadJS(t)}function fj(){return ev.gapiScript}function pj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t,e){const n=__(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(go(o,e??{}))return r;xr(r,"already-initialized")}return n.initialize({options:e})}function gj(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function yj(t,e,n){const i=Qf(t);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=FI(e),{host:a,port:u}=_j(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(go(f,i.config.emulator)&&go(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,al(a)?(DS(`${o}//${a}${h}`),VS("Auth",!0)):vj()}function FI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _j(t){const e=FI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:p1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:p1(a)}}}function p1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t,e){return II(t,"POST","/v1/accounts:signInWithIdp",Kf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="http://localhost";class wo extends BI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new wo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Va(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Va(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Va(e,n)}buildRequest(){const e={requestUri:wj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends UI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends wc{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wo._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return $r.credential(n,i)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends wc{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends wc{constructor(){super("twitter.com")}static credential(e,n){return wo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Gr.credential(n,i)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e){return II(t,"POST","/v1/accounts:signUp",Kf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await di._fromIdTokenResponse(e,i,r),a=m1(i);return new Ss({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=m1(i);return new Ss({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function m1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t){var r;if(ci(t.app))return Promise.reject(ps(t));const e=Qf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new Ss({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await xj(e,{returnSecureToken:!0}),i=await Ss._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends Sr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Jd(e,n,i,r)}}function HI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(t,o,e,i):o})}async function Ej(t,e,n=!1){const i=await tc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(t,e,n=!1){const{auth:i}=t;if(ci(i.app))return Promise.reject(ps(i));const r="reauthenticate";try{const o=await tc(t,HI(i,r,e,t),n);xe(o.idToken,i,"internal-error");const a=Y_(o.idToken);xe(a,i,"internal-error");const{sub:u}=a;return xe(t.uid===u,i,"user-mismatch"),Ss._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&xr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e,n=!1){if(ci(t.app))return Promise.reject(ps(t));const i="signIn",r=await HI(t,i,e),o=await Ss._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function Cj(t,e,n,i){return Ln(t).onIdTokenChanged(e,n,i)}function Ij(t,e,n){return Ln(t).beforeAuthStateChanged(e,n)}function Aj(t,e,n,i){return Ln(t).onAuthStateChanged(e,n,i)}const ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=1e3,kj=10;class $I extends WI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);sj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,kj):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},bj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$I.type="LOCAL";const Rj=$I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI extends WI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qI.type="SESSION";const GI=qI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Xf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await Nj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=tv("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function Mj(t){zi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function Oj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Vj(){return ZI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firebaseLocalStorageDb",jj=1,tf="firebaseLocalStorage",QI="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yf(t,e){return t.transaction([tf],e?"readwrite":"readonly").objectStore(tf)}function zj(){const t=indexedDB.deleteDatabase(KI);return new xc(t).toPromise()}function Kg(){const t=indexedDB.open(KI,jj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(tf,{keyPath:QI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(tf)?e(i):(i.close(),await zj(),e(await Kg()))})})}async function g1(t,e,n){const i=Yf(t,!0).put({[QI]:e,value:n});return new xc(i).toPromise()}async function Fj(t,e){const n=Yf(t,!1).get(e),i=await new xc(n).toPromise();return i===void 0?null:i.value}function y1(t,e){const n=Yf(t,!0).delete(e);return new xc(n).toPromise()}const Bj=800,Uj=3;class XI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Uj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(Vj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Oj(),!this.activeServiceWorker)return;this.sender=new Lj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kg();return await g1(e,ef,"1"),await y1(e,ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>g1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Fj(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>y1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Yf(r,!1).getAll();return new xc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XI.type="LOCAL";const Hj=XI;new vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t,e){return e?lr(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends BI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Va(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $j(t){return Sj(t.auth,new nv(t),t.bypassAuthState)}function qj(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),Pj(n,new nv(t),t.bypassAuthState)}async function Gj(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),Ej(n,new nv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $j;case"linkViaPopup":case"linkViaRedirect":return Gj;case"reauthViaPopup":case"reauthViaRedirect":return qj;default:xr(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=new vc(2e3,1e4);class Ca extends YI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=tv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zj.get())};e()}}Ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="pendingRedirect",Jh=new Map;class Qj extends YI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const i=await Xj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xj(t,e){const n=e6(e),i=Jj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Yj(t,e){Jh.set(t._key(),e)}function Jj(t){return lr(t._redirectPersistence)}function e6(t){return Yh(Kj,t.config.apiKey,t.name)}async function t6(t,e,n=!1){if(ci(t.app))return Promise.reject(ps(t));const i=Qf(t),r=Wj(i,e),a=await new Qj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=10*60*1e3;class i6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!JI(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(ji(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n6&&this.cachedEventUids.clear(),this.cachedEventUids.has(_1(e))}saveEventToCache(e){this.cachedEventUids.add(_1(e)),this.lastProcessedEventTime=Date.now()}}function _1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s6(t,e={}){return fl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a6=/^https?/;async function l6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await s6(t);for(const n of e)try{if(u6(n))return}catch{}xr(t,"unauthorized-domain")}function u6(t){const e=Gg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!a6.test(n))return!1;if(o6.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new vc(3e4,6e4);function v1(){const t=zi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h6(t){return new Promise((e,n)=>{var r,o,a;function i(){v1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v1(),n(ji(t,"network-request-failed"))},timeout:c6.get()})}if((o=(r=zi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=zi().gapi)!=null&&a.load)i();else{const u=pj("iframefcb");return zi()[u]=()=>{gapi.load?i():n(ji(t,"network-request-failed"))},dj(`${fj()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw ed=null,e})}let ed=null;function d6(t){return ed=ed||h6(t),ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new vc(5e3,15e3),p6="__/auth/iframe",m6="emulator/auth/iframe",g6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _6(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?X_(e,m6):`https://${t.config.authDomain}/${p6}`,i={apiKey:e.apiKey,appName:t.name,v:ll},r=y6.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${dc(i).slice(1)}`}async function v6(t){const e=await d6(t),n=zi().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:_6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g6,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=ji(t,"network-request-failed"),u=zi().setTimeout(()=>{o(a)},f6.get());function h(){zi().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x6=500,T6=600,E6="_blank",P6="http://localhost";class w1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S6(t,e,n,i=x6,r=T6){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...w6,width:i.toString(),height:r.toString(),top:o,left:a},f=rn().toLowerCase();n&&(u=LI(f)?E6:n),RI(f)&&(e=e||P6,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[T,A])=>`${_}${T}=${A},`,"");if(rj(f)&&u!=="_self")return C6(e||"",u),new w1(null);const g=window.open(e||"",u,m);xe(g,t,"popup-blocked");try{g.focus()}catch{}return new w1(g)}function C6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="__/auth/handler",A6="emulator/auth/handler",b6=encodeURIComponent("fac");async function x1(t,e,n,i,r,o){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ll,eventId:r};if(e instanceof UI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",_D(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof wc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${b6}=${encodeURIComponent(h)}`:"";return`${k6(t)}?${dc(u).slice(1)}${f}`}function k6({config:t}){return t.emulator?X_(t,A6):`https://${t.authDomain}/${I6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class R6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GI,this._completeRedirectFn=t6,this._overrideRedirectResult=Yj}async _openPopup(e,n,i,r){var a;Tr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await x1(e,n,i,Gg(),r);return S6(e,o,tv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await x1(e,n,i,Gg(),r);return Mj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Tr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await v6(e),i=new i6(e);return n.register("authEvent",r=>(xe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[fm];o!==void 0&&n(!!o),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jI()||NI()||J_()}}const N6=R6;var T1="@firebase/auth",E1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O6(t){Ka(new yo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;xe(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zI(t)},f=new cj(i,r,o,h);return gj(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ka(new yo("auth-internal",e=>{const n=Qf(e.getProvider("auth").getImmediate());return(i=>new L6(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(T1,E1,M6(t)),cs(T1,E1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=5*60,V6=OS("authIdTokenMaxAge")||D6;let P1=null;const j6=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>V6)return;const r=n==null?void 0:n.token;P1!==r&&(P1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function z6(t=BS()){const e=__(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mj(t,{popupRedirectResolver:N6,persistence:[Hj,Rj,GI]}),i=OS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=j6(o.toString());Ij(n,a,()=>a(n.currentUser)),Cj(n,u=>a(u))}}const r=LS("auth");return r&&yj(n,`http://${r}`),n}function F6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hj({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=ji("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",F6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O6("Browser");var B6="firebase",U6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(B6,U6,"app");const H6={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},eA=FS(H6),cn=C5(eA),S1=z6(eA),nf={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},W6="vysocany",tA=nf[W6].center,nA=15,$6=13,q6=18,C1={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},lo=["red","blue"],iA={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},I1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],bi=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function ja(t){var e;return((e=iA[t.size])==null?void 0:e.points)||100}function G6(t,e=.008){const n={};lo.forEach(r=>n[r]=[]);const i={};return lo.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),lo.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],m=o[h],g=`${f.id}-${m.id}`,_=f.location[0]-m.location[0],T=(f.location[1]-m.location[1])*1.6,A=Math.sqrt(_*_+T*T);A<=e&&!a.has(g)&&(a.add(g),n[r].push({from:f.location,to:m.location,distance:A}))}}),n}function td(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function rA(t){const e={};return lo.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=ja(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const sA=D.createContext(null),Wn={player:"streetart-ctf-player",captures:"streetart-ctf-captures",discoveries:"streetart-discoveries",gameMode:"streetart-game-mode"},Ih={SOLO:"solo",TEAM:"team"},Ah="streetart-captures",A1="streetart-players",Z6="streetart-teams",st={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function Kl(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function Ql(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function K6({children:t}){const[e,n]=D.useState(null),[i,r]=D.useState(!0),[o,a]=D.useState(()=>Kl(Wn.gameMode,Ih.SOLO)),[u,h]=D.useState(()=>Kl(Wn.discoveries,{})),[f,m]=D.useState(()=>Kl(Wn.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0,discoveryCount:0,uniqueAreasVisited:[]})),[g,_]=D.useState(()=>{const ne=Kl(Wn.captures,{});return bi.map(ue=>({...ue,capturedBy:ne[ue.id]||null}))}),[T,A]=D.useState(null),[k,O]=D.useState(!1),[b,P]=D.useState(null);D.useEffect(()=>{const ne=Aj(S1,ue=>{ue?(n(ue),m(ye=>({...ye,id:ue.uid}))):Tj(S1).catch(ye=>{console.log("Auth not available, using local mode")})});return()=>ne()},[]);const[C,B]=D.useState(null),[G,U]=D.useState([]),R=D.useRef({});D.useEffect(()=>{let ne=!0;const ue=Pu(cn,Ah),ye=hm(ue,Ce=>{const pe={},ke={},St=[];Ce.forEach(ge=>{var ut,Le,Be,Sn;const Re=ge.data();if(Re.status&&(ke[ge.id]=Re.status),Re.capturedBy){pe[ge.id]={team:Re.capturedBy,playerName:Re.playerName||"Unknown",capturedAt:((Le=(ut=Re.capturedAt)==null?void 0:ut.toDate)==null?void 0:Le.call(ut))||null};const ei=bi.find(Rs=>Rs.id===ge.id);St.push({id:ge.id,artName:(ei==null?void 0:ei.name)||ge.id,area:(ei==null?void 0:ei.area)||"Unknown",team:Re.capturedBy,playerName:Re.playerName||"Unknown",capturedAt:((Sn=(Be=Re.capturedAt)==null?void 0:Be.toDate)==null?void 0:Sn.call(Be))||new Date,points:Re.points||100,isRecapture:Re.isRecapture||!1})}});const _t=St.sort((ge,Re)=>Re.capturedAt-ge.capturedAt).slice(0,10);U(_t),ne||Ce.docChanges().forEach(ge=>{var Re;if(ge.type==="added"||ge.type==="modified"){const ut=ge.doc.data(),Le=(Re=R.current[ge.doc.id])==null?void 0:Re.team;if(ut.capturedBy&&Le!==ut.capturedBy){const Be=bi.find(Sn=>Sn.id===ge.doc.id);Be&&(B({artName:Be.name,team:ut.capturedBy,playerName:ut.playerName||"Someone",points:ut.points||ja(Be),streak:ut.streak||0,isRecapture:ut.isRecapture||!!Le,timestamp:Date.now()}),setTimeout(()=>B(null),4e3))}}}),ne=!1,R.current=pe,_(bi.map(ge=>{const Re=pe[ge.id];return{...ge,capturedBy:(Re==null?void 0:Re.team)||null,capturedByPlayer:(Re==null?void 0:Re.playerName)||null,capturedAt:(Re==null?void 0:Re.capturedAt)||null,status:ke[ge.id]||ge.status}})),Ql(Wn.captures,pe),r(!0),console.log("Firebase: Synced",Object.keys(pe).length,"captures")},Ce=>{console.warn("Firestore sync error:",Ce),r(!1)});return()=>ye()},[]);const[S,N]=D.useState({red:0,blue:0});D.useEffect(()=>{const ne=Pu(cn,Z6),ue=hm(ne,ye=>{const Ce={red:0,blue:0};ye.forEach(pe=>{const ke=pe.data();(pe.id==="red"||pe.id==="blue")&&(Ce[pe.id]=ke.score||0)}),N(Ce),console.log("Team scores:",Ce)});return()=>ue()},[]);const[V,j]=D.useState([]);D.useEffect(()=>{const ne=Pu(cn,A1),ue=hm(ne,ye=>{const Ce=[];ye.forEach(pe=>{const ke=pe.data();ke.name&&ke.team&&Ce.push({id:pe.id,name:ke.name,team:ke.team,score:ke.score||0,captures:ke.captures||0})}),j(Ce.sort((pe,ke)=>ke.score-pe.score)),console.log("Players loaded:",Ce.length)});return()=>ue()},[]),D.useEffect(()=>{Ql(Wn.player,f)},[f]);const z=D.useCallback(async(ne,ue)=>{if(i)try{await ir(Ai(cn,Ah,ne),{artId:ne,capturedBy:ue.team,capturedAt:new Date,playerId:f.id,playerName:f.name,points:ue.points,streak:ue.streak,isFirstCapture:ue.isFirstCapture,isRecapture:ue.isRecapture})}catch(ye){console.warn("Failed to sync capture to Firebase:",ye)}},[i,f.id,f.name]);D.useCallback(async ne=>{if(i)try{await ir(Ai(cn,Ah,"global"),ne,{merge:!0})}catch(ue){console.warn("Failed to sync to Firebase:",ue)}},[i]);const M=rA(g),ae={red:Math.max(S.red,M.red),blue:Math.max(S.blue,M.blue)},Ye=D.useCallback(async ne=>{if(lo.includes(ne)&&(m(ue=>({...ue,team:ne})),i&&f.id))try{await ir(Ai(cn,A1,f.id),{name:f.name,team:ne,score:f.score||0,captures:f.captureCount||0,joinedAt:new Date},{merge:!0})}catch(ue){console.warn("Failed to sync player to Firebase:",ue)}},[i,f.id,f.name,f.score,f.captureCount]),Ae=D.useCallback(ne=>{m(ue=>({...ue,name:ne}))},[]),et=D.useCallback((ne,ue,ye=50)=>{let Ce=null,pe=1/0;return g.forEach(ke=>{const St=(ke.location[0]-ne)*111e3,_t=(ke.location[1]-ue)*111e3*Math.cos(ne*Math.PI/180),ge=Math.sqrt(St*St+_t*_t);ge<pe&&ge<=ye&&(pe=ge,Ce={...ke,distance:Math.round(ge)})}),Ce},[g]),Z=D.useCallback((ne,ue,ye,Ce)=>{const pe=(ye-ne)*111e3,ke=(Ce-ue)*111e3*Math.cos(ne*Math.PI/180);return Math.sqrt(pe*pe+ke*ke)},[]),he=D.useCallback((ne,ue,ye=null)=>{const Ce=ja(ne),pe=[];let ke=Ce;const St=ne.capturedBy&&ne.capturedBy!==ue.team,_t=!ne.capturedBy,ge=Date.now(),Re=ue.lastCaptureTime?(ge-ue.lastCaptureTime)/1e3/60:1/0,ut=ue.streak||0;if(ut>0){const Le=Math.min(ut*.1,1),Be=Math.round(Ce*Le);Be>0&&(ke+=Be,pe.push({type:"streak",label:` ${ut}x Streak`,points:Be}))}if(St){const Le=Math.round(Ce*.5);ke+=Le,pe.push({type:"recapture",label:" Recapture",points:Le})}if(_t){const Le=Math.round(Ce*.25);ke+=Le,pe.push({type:"first",label:" First Capture",points:Le})}if(Re<5){const Le=Math.round(Ce*.2);ke+=Le,pe.push({type:"speed",label:" Speed Bonus",points:Le})}if(ye&&ue.lastCaptureLocation){const Le=Z(ue.lastCaptureLocation[0],ue.lastCaptureLocation[1],ye[0],ye[1]);if(Le>50){const Be=Math.min(Math.round(Le/100)*5,50);Be>0&&(ke+=Be,pe.push({type:"distance",label:` ${Math.round(Le)}m walked`,points:Be}))}}return{basePoints:Ce,totalPoints:ke,bonuses:pe,isRecapture:St,isFirstCapture:_t}},[Z]),J=D.useCallback((ne,ue=null)=>{if(!f.team)return{success:!1,message:"Join a team first!"};const ye=g.find(ge=>ge.id===ne);if(!ye)return{success:!1,message:"Art not found"};if(ye.capturedBy===f.team)return{success:!1,message:"Already yours!"};if(ye.status==="ghost")return{success:!1,message:"This art no longer exists"};const Ce=ue||ye.location,pe=he(ye,f,Ce),ke=ye.capturedBy;_(ge=>ge.map(Re=>Re.id===ne?{...Re,capturedBy:f.team}:Re));const St=f.streak+1;m(ge=>({...ge,score:ge.score+pe.totalPoints,capturedArt:[...ge.capturedArt.filter(Re=>Re!==ne),ne],streak:St,maxStreak:Math.max(ge.maxStreak,St),lastCaptureTime:Date.now(),lastCaptureLocation:Ce,captureCount:ge.captureCount+1,recaptureCount:pe.isRecapture?ge.recaptureCount+1:ge.recaptureCount,firstCaptureCount:pe.isFirstCapture?ge.firstCaptureCount+1:ge.firstCaptureCount,totalDistance:ge.totalDistance+(ue&&ge.lastCaptureLocation?Z(ge.lastCaptureLocation[0],ge.lastCaptureLocation[1],ue[0],ue[1]):0)})),z(ne,{team:f.team,points:pe.totalPoints,streak:St,isFirstCapture:pe.isFirstCapture,isRecapture:pe.isRecapture});const _t=Kl(Wn.captures,{});return Ql(Wn.captures,{..._t,[ne]:f.team}),{success:!0,art:ye,points:pe.totalPoints,basePoints:pe.basePoints,bonuses:pe.bonuses,streak:St,previousTeam:ke,message:ke?`Stolen from ${ke}!`:"Captured!"}},[f,g,z,he,Z]),te=D.useCallback(async(ne,ue)=>{O(!0);const ye=et(ue.lat,ue.lng,100);if(!ye){O(!1),A({success:!1,message:"No street art nearby. Get closer!"});return}P({art:ye,photo:ne,location:ue}),O(!1)},[et]),Se=D.useCallback(()=>{if(!b)return;const ne=J(b.art.id);A(ne),P(null)},[b,J]),Je=D.useCallback(()=>{P(null),A(null)},[]),Me=D.useCallback(ne=>{(ne===Ih.SOLO||ne===Ih.TEAM)&&(a(ne),Ql(Wn.gameMode,ne))},[]),Ne=D.useCallback(async(ne,ue=null)=>{const ye=g.find(_t=>_t.id===ne);if(!ye)return{success:!1,message:"Art not found"};if(u[ne])return{success:!1,message:"Already discovered!",alreadyDiscovered:!0};const Ce=new Date,pe={artId:ne,artName:ye.name,area:ye.area,size:ye.size,points:ja(ye),discoveredAt:Ce.toISOString(),location:ue||ye.location},ke={...u,[ne]:pe};h(ke),Ql(Wn.discoveries,ke);const St=new Set([...f.uniqueAreasVisited,ye.area]);if(m(_t=>({..._t,score:_t.score+pe.points,discoveryCount:_t.discoveryCount+1,uniqueAreasVisited:[...St],lastCaptureTime:Ce.getTime(),lastCaptureLocation:ue||ye.location})),i&&f.id)try{await ir(Ai(cn,"streetart-discoveries",`${f.id}_${ne}`),{...pe,playerId:f.id,playerName:f.name})}catch(_t){console.warn("Failed to sync discovery to Firebase:",_t)}return{success:!0,message:"Discovered!",discovery:pe}},[g,u,f,i]),fe=D.useCallback(async()=>{if(localStorage.removeItem(Wn.player),localStorage.removeItem(Wn.captures),e&&i)try{await ir(Ai(cn,Ah,"global"),{})}catch(ne){console.warn("Failed to reset Firebase:",ne)}m({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),_(bi.map(ne=>({...ne,capturedBy:null}))),A(null),P(null)},[e,i]),ht={player:f,artPoints:g,teamScores:ae,globalTeamScores:S,allPlayers:V,recentCaptures:G,captureNotification:C,scanResult:T,isScanning:k,pendingCapture:b,isOnline:i,teams:lo,gameMode:o,discoveries:u,discoveryCount:Object.keys(u).length,setGameMode:Me,joinTeam:Ye,setPlayerName:Ae,captureArt:J,discoverArt:Ne,startCapture:te,confirmCapture:Se,cancelCapture:Je,findNearestArt:et,setScanResult:A,resetAll:fe,TEAM_COLORS:st,GAME_MODES:Ih};return w.jsx(sA.Provider,{value:ht,children:t})}function Ui(){const t=D.useContext(sA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),be=(t,e)=>{const n=D.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>D.createElement("svg",{ref:m,...Q6,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${X6(t)}`,u].join(" "),...f},[...e.map(([g,_])=>D.createElement(g,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=be("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=be("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=be("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=be("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=be("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=be("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=be("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=be("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=be("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=be("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=be("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=be("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=be("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=be("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=be("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=be("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=be("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=be("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=be("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=be("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=be("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=be("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=be("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=be("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=be("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=be("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=be("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=be("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Pz=51,Sz=24;function fA({size:t=120,className:e=""}){const[n,i]=D.useState(0);D.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%Pz)},1e3/Sz);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return w.jsx("img",{src:`/street-art-ctf/animation/frame_${r}.png`,alt:"Loading",width:t,height:t,className:e,style:{imageRendering:"pixelated",objectFit:"contain"}})}const L1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],M1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function O1(){const t=L1[Math.floor(Math.random()*L1.length)],e=M1[Math.floor(Math.random()*M1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function Cz(){const t=Sf(),{player:e,joinTeam:n,setPlayerName:i,allPlayers:r}=Ui(),[o,a]=D.useState(0),[u,h]=D.useState(()=>e.name&&e.name!=="Street Artist"?e.name:O1()),[f,m]=D.useState(null);D.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]),D.useEffect(()=>{const O=r.filter(C=>C.team==="red").length,b=r.filter(C=>C.team==="blue").length,P=O<b?"red":b<O?"blue":Math.random()<.5?"red":"blue";m(P)},[r]);const g=()=>{h(O1())},_=()=>{if(o===1&&u.trim()&&(i(u.trim()),f&&n(f)),o===3){t("/map");return}a(o+1)},T=()=>o===1?u.trim().length>=2&&f:!0,A=f==="red"?"#ff6b6b":"#4dabf7",k=f==="red"?"Red":"Blue";return w.jsxs("div",{className:"h-screen bg-[#0a0a0f] flex flex-col overflow-hidden",children:[w.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:[0,1,2,3].map(O=>w.jsx("div",{className:`h-1.5 rounded-sm transition-all duration-300 ${O===o?"bg-white w-8":O<o?"bg-white/60 w-1.5":"bg-white/20 w-1.5"}`},O))}),w.jsxs(La,{mode:"wait",children:[o===0&&w.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx(ce.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:w.jsx(fA,{size:140})}),w.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Street Art CTF"}),w.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),w.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(b1,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Scan Art"}),w.jsx("div",{className:"text-xs text-white/40",children:"Find and capture street art"})]})]}),w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(rv,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Control Territory"}),w.jsx("div",{className:"text-xs text-white/40",children:"Expand your team's area"})]})]}),w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(sf,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Win Together"}),w.jsx("div",{className:"text-xs text-white/40",children:"Lead your team to victory"})]})]})]})]},"intro"),o===1&&w.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),w.jsx("p",{className:"text-white/40 mb-8",children:"This is how others will see you"}),w.jsx("div",{className:"w-full max-w-xs mb-4",children:w.jsx("input",{type:"text",value:u,onChange:O=>h(O.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-lg bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-white/30"})}),w.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/50 hover:bg-white/10 transition-colors",children:[w.jsx(uA,{size:16}),"Generate random name"]})]},"name"),o===2&&w.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative overflow-hidden",children:[w.jsx(ce.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:.15},transition:{delay:.3,duration:.8},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:w.jsx("div",{className:"w-[600px] h-[600px] rounded-full blur-3xl",style:{backgroundColor:A}})}),w.jsxs(ce.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},className:"relative z-10",children:[w.jsxs(ce.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-white/50 text-lg mb-2",children:["Welcome, ",u,"!"]}),w.jsx(ce.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-white/40 text-sm mb-6",children:"You've been assigned to"}),w.jsx(ce.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.8,type:"spring",stiffness:200},children:w.jsxs("h1",{className:"text-6xl font-bold mb-4",style:{color:A},children:["Team ",k]})}),w.jsx(ce.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"text-white/30 text-sm",children:f==="red"?"The Flames ":"The Waves "})]})]},"team-reveal"),o===3&&w.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"How to Play"}),w.jsx("p",{className:"text-white/40 mb-8 text-sm",children:"Explore, discover, and compete!"}),w.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[w.jsxs(ce.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(b1,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Find & Scan"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Explore Prague to find street art. Point your camera at it to capture."})]})]}),w.jsxs(ce.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500/30 to-emerald-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(_z,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Build Your Collection"}),w.jsxs("p",{className:"text-sm text-white/50 leading-relaxed",children:["Every discovery is ",w.jsx("strong",{className:"text-white/70",children:"yours forever"}),". Build a personal portfolio."]})]})]}),w.jsxs(ce.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500/30 to-orange-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(dA,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Compete for Territory"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Capture points for your team. Territory can change hands - keep exploring!"})]})]})]})]},"tutorial")]}),w.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:w.jsxs(ce.button,{whileTap:{scale:.98},onClick:_,disabled:!T(),className:`w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all ${T()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[o===3?"Let's Go!":"Continue",w.jsx(nz,{size:20})]})})]})}const Iz="/street-art-ctf/chumper.png",Az=[{color:"red",name:"Red Team"},{color:"blue",name:"Blue Team"}];function bz(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"just now";const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function kz(){const{player:t,joinTeam:e,teamScores:n,recentCaptures:i,isOnline:r}=Ui(),o=f=>{e(f)},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},u={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},h=Object.values(n).reduce((f,m)=>f+m,0);return w.jsxs(ce.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:a,children:[w.jsxs(ce.div,{className:"text-center mb-6",variants:u,children:[w.jsx(ce.div,{className:"relative inline-block mb-3",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:w.jsx(fA,{size:70})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Street Art CTF"}),w.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] ${r?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[r?w.jsx(sz,{size:10}):w.jsx(xz,{size:10}),r?"Live":"Offline"]})]}),w.jsxs(ce.div,{variants:u,className:"mb-6",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("span",{className:"text-xs text-white/40",children:"Red Team"}),w.jsx("span",{className:"text-xs text-white/40",children:"Blue Team"})]}),w.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-white/10",children:[w.jsx(ce.div,{className:"h-full",style:{backgroundColor:st.red.hex},initial:{width:"50%"},animate:{width:h>0?`${n.red/h*100}%`:"50%"},transition:{duration:.8}}),w.jsx(ce.div,{className:"h-full",style:{backgroundColor:st.blue.hex},initial:{width:"50%"},animate:{width:h>0?`${n.blue/h*100}%`:"50%"},transition:{duration:.8}})]}),w.jsxs("div",{className:"flex items-center justify-between mt-2",children:[w.jsxs("span",{className:"text-sm font-bold",style:{color:st.red.hex},children:[n.red," pts"]}),w.jsxs("span",{className:"text-sm font-bold",style:{color:st.blue.hex},children:[n.blue," pts"]})]})]}),t.team?w.jsx(ce.div,{className:"mb-6 p-4 rounded-xl border-2",variants:u,style:{borderColor:st[t.team].hex+"50",backgroundColor:st[t.team].hex+"10"},children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:st[t.team].hex+"30"},children:w.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:st[t.team].hex}})}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold text-white",children:t.name}),w.jsx("p",{className:"text-xs",style:{color:st[t.team].hex},children:t.team==="red"?"Red Team":"Blue Team"})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),w.jsx("p",{className:"text-[10px] text-white/40",children:"points"})]})]})}):w.jsxs(ce.div,{variants:u,className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(sf,{size:14,className:"text-white/40"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),w.jsx("div",{className:"grid grid-cols-2 gap-3",children:Az.map(({color:f,name:m})=>w.jsxs(ce.button,{onClick:()=>o(f),className:"p-4 rounded-xl text-center border-2 transition-all",style:{borderColor:st[f].hex+"50",backgroundColor:st[f].hex+"10"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[w.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:st[f].hex+"30"},children:w.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:st[f].hex}})}),w.jsx("p",{className:"font-semibold text-white",children:m})]},f))})]}),w.jsxs(ce.div,{variants:u,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(rz,{size:14,className:"text-white/40"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Live Activity"})]}),i.length===0?w.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:"No captures yet. Be the first!"}):w.jsx("div",{className:"space-y-2",children:i.map((f,m)=>{var _;const g=((_=st[f.team])==null?void 0:_.hex)||"#888";return w.jsxs(ce.div,{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.05},children:[w.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${g}20`},children:w.jsx("img",{src:Iz,alt:"",className:"w-5 h-5",style:{filter:f.team==="red"?"hue-rotate(160deg) saturate(1.5)":"none"}})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm font-medium text-white truncate",children:f.artName}),w.jsxs("p",{className:"text-[10px] text-white/40",children:[w.jsx("span",{style:{color:g},children:f.playerName}),"  ",f.area]})]}),w.jsxs("div",{className:"text-right flex-shrink-0",children:[w.jsxs("p",{className:"text-xs font-semibold",style:{color:g},children:["+",f.points]}),w.jsx("p",{className:"text-[10px] text-white/30",children:bz(f.capturedAt)})]})]},f.id)})})]})]})}function Rz(t,e){const n=D.useRef(e);D.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function Nz(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const Lz=1;function Mz(t){return Object.freeze({__version:Lz,map:t})}function Jf(t,e){return Object.freeze({...t,...e})}const pA=D.createContext(null),mA=pA.Provider;function ov(){const t=D.useContext(pA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function gA(t){function e(n,i){const{instance:r,context:o}=t(n).current;return D.useImperativeHandle(i,()=>r),n.children==null?null:uo.createElement(mA,{value:o},n.children)}return D.forwardRef(e)}function Oz(t){function e(n,i){const{instance:r}=t(n).current;return D.useImperativeHandle(i,()=>r),null}return D.forwardRef(e)}function yA(t,e){const n=D.useRef();D.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function av(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Qg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(YA,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,E,F;return F=function(){p=!1,v&&(E.apply(d,v),v=!1)},E=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(F,l),p=!0)},E}function m(s,l,d){var p=l[1],v=l[0],E=p-v;return s===p&&d?s:((s-v)%E+E)%E+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function A(s){return T(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function O(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(b,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function S(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||U("RequestAnimationFrame")||S,V=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function j(s,l,d){if(d&&N===S)s.call(l);else return N.call(window,a(s,l))}function z(s){s&&V.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:T,splitWords:A,setOptions:k,getParamString:O,template:P,isArray:C,indexOf:B,emptyImageUrl:G,requestFn:N,cancelFn:V,requestAnimFrame:j,cancelAnimFrame:z};function ae(){}ae.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(Ye(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,F=p._initHooks.length;E<F;E++)p._initHooks[E].call(this)}},l},ae.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ae.mergeOptions=function(s){return r(this.prototype.options,s),this},ae.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Ye(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ae={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=A(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=A(s);for(var v=arguments.length===1,E=0,F=s.length;E<F;E++)v?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,E=p.length;v<E;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var F=this._listens(s,l,d);if(F!==!1){var W=p[F];this._firingCount&&(W.fn=g,this._events[s]=p=p.slice()),p.splice(F,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var E=0,F=v.length;E<F;E++){var W=v[E],q=W.fn;W.once&&this.off(s,q,W.ctx),q.call(W.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var F in this._eventParents)if(this._eventParents[F].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,E=p.length;v<E;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=A(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ae.addEventListener=Ae.on,Ae.removeEventListener=Ae.clearAllEventListeners=Ae.off,Ae.addOneTimeEventListener=Ae.once,Ae.fireEvent=Ae.fire,Ae.hasEventListeners=Ae.listens;var et=ae.extend(Ae);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var he=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=he(this.x),this.y=he(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function J(s,l,d){return s instanceof Z?s:C(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function te(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}te.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Se(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=J(s):s=Se(s),s instanceof te?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Se(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>=l.x&&p.x<=d.x,F=v.y>=l.y&&p.y<=d.y;return E&&F},overlaps:function(s){s=Se(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>l.x&&p.x<d.x,F=v.y>l.y&&p.y<d.y;return E&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return Se(J(l.x-p,l.y-v),J(d.x+p,d.y+v))},equals:function(s){return s?(s=Se(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Se(s,l){return!s||s instanceof te?s:new te(s,l)}function Je(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}Je.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof Ne)p=s,v=s;else if(s instanceof Je){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(fe(s)||Me(s)):this;return!l&&!d?(this._southWest=new Ne(p.lat,p.lng),this._northEast=new Ne(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new Je(new Ne(l.lat-p,l.lng-v),new Ne(d.lat+p,d.lng+v))},getCenter:function(){return new Ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ne||"lat"in s?s=fe(s):s=Me(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof Je?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=Me(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>=l.lat&&p.lat<=d.lat,F=v.lng>=l.lng&&p.lng<=d.lng;return E&&F},overlaps:function(s){s=Me(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>l.lat&&p.lat<d.lat,F=v.lng>l.lng&&p.lng<d.lng;return E&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Me(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Me(s,l){return s instanceof Je?s:new Je(s,l)}function Ne(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ne.prototype={equals:function(s,l){if(!s)return!1;s=fe(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return ne.distance(this,fe(s))},wrap:function(){return ne.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Me([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ne(this.lat,this.lng,this.alt)}};function fe(s,l,d){return s instanceof Ne?s:C(s)&&typeof s[0]!="object"?s.length===3?new Ne(s[0],s[1],s[2]):s.length===2?new Ne(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ne(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ne(s,l,d)}var ht={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new te(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ne(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var E=s.getSouthWest(),F=s.getNorthEast(),W=new Ne(E.lat-p,E.lng-v),q=new Ne(F.lat-p,F.lng-v);return new Je(W,q)}},ne=r({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),F=Math.sin((l.lng-s.lng)*d/2),W=E*E+Math.cos(p)*Math.cos(v)*F*F,q=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*q}}),ue=6378137,ye={R:ue,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new Ne((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=ue*Math.PI;return new te([-s,-s],[s,s])}()};function Ce(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}Ce.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function pe(s,l,d,p){return new Ce(s,l,d,p)}var ke=r({},ne,{code:"EPSG:3857",projection:ye,transformation:function(){var s=.5/(Math.PI*ye.R);return pe(s,.5,-s,.5)}()}),St=r({},ke,{code:"EPSG:900913"});function _t(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ge(s,l){var d="",p,v,E,F,W,q;for(p=0,E=s.length;p<E;p++){for(W=s[p],v=0,F=W.length;v<F;v++)q=W[v],d+=(v?"L":"M")+q.x+" "+q.y;d+=l?le.svg?"z":"x":""}return d||"M0 0"}var Re=document.documentElement.style,ut="ActiveXObject"in window,Le=ut&&!document.addEventListener,Be="msLaunchUri"in navigator&&!("documentMode"in document),Sn=pn("webkit"),ei=pn("android"),Rs=pn("android 2")||pn("android 3"),tp=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ns=ei&&pn("Google")&&tp<537&&!("AudioNode"in window),No=!!window.opera,pl=!Be&&pn("chrome"),Lo=pn("gecko")&&!Sn&&!No&&!ut,np=!pl&&pn("safari"),Ec=pn("phantom"),ml="OTransition"in Re,Pc=navigator.platform.indexOf("Win")===0,Cr=ut&&"transition"in Re,Ls="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Rs,Mo="MozPerspective"in Re,Hi=!window.L_DISABLE_3D&&(Cr||Ls||Mo)&&!ml&&!Ec,Ir=typeof orientation<"u"||pn("mobile"),Oo=Ir&&Sn,Sc=Ir&&Ls,Ar=!window.PointerEvent&&window.MSPointerEvent,gl=!!(window.PointerEvent||Ar),Vt="ontouchstart"in window||!!window.TouchEvent,Cc=!window.L_NO_TOUCH&&(Vt||gl),Ms=Ir&&No,Os=Ir&&Lo,ip=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,rp=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),br=function(){return!!document.createElement("canvas").getContext}(),yl=!!(document.createElementNS&&_t("svg").createSVGRect),sp=!!yl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Do=!yl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Ic=navigator.platform.indexOf("Mac")===0,Ac=navigator.platform.indexOf("Linux")===0;function pn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:ut,ielt9:Le,edge:Be,webkit:Sn,android:ei,android23:Rs,androidStock:Ns,opera:No,chrome:pl,gecko:Lo,safari:np,phantom:Ec,opera12:ml,win:Pc,ie3d:Cr,webkit3d:Ls,gecko3d:Mo,any3d:Hi,mobile:Ir,mobileWebkit:Oo,mobileWebkit3d:Sc,msPointer:Ar,pointer:gl,touch:Cc,touchNative:Vt,mobileOpera:Ms,mobileGecko:Os,retina:ip,passiveEvents:rp,canvas:br,svg:yl,vml:Do,inlineSvg:sp,mac:Ic,linux:Ac},bc=le.msPointer?"MSPointerDown":"pointerdown",ti=le.msPointer?"MSPointerMove":"pointermove",_l=le.msPointer?"MSPointerUp":"pointerup",vl=le.msPointer?"MSPointerCancel":"pointercancel",Ds={touchstart:bc,touchmove:ti,touchend:_l,touchcancel:vl},Vo={touchstart:wl,touchmove:Dn,touchend:Dn,touchcancel:Dn},Wi={},kc=!1;function Rc(s,l,d){return l==="touchstart"&&Vs(),Vo[l]?(d=Vo[l].bind(this,d),s.addEventListener(Ds[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function op(s,l,d){if(!Ds[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ds[l],d,!1)}function jo(s){Wi[s.pointerId]=s}function Nc(s){Wi[s.pointerId]&&(Wi[s.pointerId]=s)}function zo(s){delete Wi[s.pointerId]}function Vs(){kc||(document.addEventListener(bc,jo,!0),document.addEventListener(ti,Nc,!0),document.addEventListener(_l,zo,!0),document.addEventListener(vl,zo,!0),kc=!0)}function Dn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Wi)l.touches.push(Wi[d]);l.changedTouches=[l],s(l)}}function wl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ct(l),Dn(s,l)}function ap(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Lc=200;function Mc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var F=Sl(E);if(!(F.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!F.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var W=Date.now();W-d<=Lc?(p++,p===2&&l(ap(E))):p=1,d=W}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Oc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var js=Fo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$i=Fo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xl=$i==="webkitTransition"||$i==="OTransition"?$i+"End":"transitionend";function Tl(s){return typeof s=="string"?document.getElementById(s):s}function kr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Ue(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function $e(s){var l=s.parentNode;l&&l.removeChild(s)}function sn(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Vn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function jn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function zs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=gi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function se(s,l){if(s.classList!==void 0)for(var d=A(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!zs(s,l)){var E=gi(s);qi(s,(E?E+" ":"")+l)}}function tt(s,l){s.classList!==void 0?s.classList.remove(l):qi(s,T((" "+gi(s)+" ").replace(" "+l+" "," ")))}function qi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function gi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function mn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Dc(s,l)}function Dc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Fo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Gi(s,l,d){var p=l||new Z(0,0);s.style[js]=(le.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function vt(s,l){s._leaflet_pos=l,le.any3d?Gi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Zi(s){return s._leaflet_pos||new Z(0,0)}var ni,Cn,Bo;if("onselectstart"in document)ni=function(){Te(window,"selectstart",Ct)},Cn=function(){Qe(window,"selectstart",Ct)};else{var Rr=Fo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ni=function(){if(Rr){var s=document.documentElement.style;Bo=s[Rr],s[Rr]="none"}},Cn=function(){Rr&&(document.documentElement.style[Rr]=Bo,Bo=void 0)}}function Uo(){Te(window,"dragstart",Ct)}function Ho(){Qe(window,"dragstart",Ct)}var Fs,yi;function El(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Wo(),Fs=s,yi=s.style.outlineStyle,s.style.outlineStyle="none",Te(window,"keydown",Wo))}function Wo(){Fs&&(Fs.style.outlineStyle=yi,Fs=void 0,yi=void 0,Qe(window,"keydown",Wo))}function Vc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function zn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var lp={__proto__:null,TRANSFORM:js,TRANSITION:$i,TRANSITION_END:xl,get:Tl,getStyle:kr,create:Ue,remove:$e,empty:sn,toFront:Vn,toBack:jn,hasClass:zs,addClass:se,removeClass:tt,setClass:qi,getClass:gi,setOpacity:mn,testProp:Fo,setTransform:Gi,setPosition:vt,getPosition:Zi,get disableTextSelection(){return ni},get enableTextSelection(){return Cn},disableImageDrag:Uo,enableImageDrag:Ho,preventOutline:El,restoreOutline:Wo,getSizedParentNode:Vc,getScale:zn};function Te(s,l,d,p){if(l&&typeof l=="object")for(var v in l)$o(s,v,l[v],d);else{l=A(l);for(var E=0,F=l.length;E<F;E++)$o(s,l[E],d,p)}return this}var on="_leaflet_events";function Qe(s,l,d,p){if(arguments.length===1)Nr(s),delete s[on];else if(l&&typeof l=="object")for(var v in l)Bs(s,v,l[v],d);else if(l=A(l),arguments.length===2)Nr(s,function(W){return B(l,W)!==-1});else for(var E=0,F=l.length;E<F;E++)Bs(s,l[E],d,p);return this}function Nr(s,l){for(var d in s[on]){var p=d.split(/\d/)[0];(!l||l(p))&&Bs(s,p,null,null,d)}}var Ki={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $o(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[on]&&s[on][v])return this;var E=function(W){return d.call(p||s,W||window.event)},F=E;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?E=Rc(s,l,E):le.touch&&l==="dblclick"?E=Mc(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Ki[l]||l,E,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(W){W=W||window.event,Il(s,W)&&F(W)},s.addEventListener(Ki[l],E,!1)):s.addEventListener(l,F,!1):s.attachEvent("on"+l,E),s[on]=s[on]||{},s[on][v]=E}function Bs(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var E=s[on]&&s[on][v];if(!E)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?op(s,l,E):le.touch&&l==="dblclick"?Oc(s,E):"removeEventListener"in s?s.removeEventListener(Ki[l]||l,E,!1):s.detachEvent("on"+l,E),s[on][v]=null}function Ge(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Pl(s){return $o(s,"wheel",Ge),this}function Us(s){return Te(s,"mousedown touchstart dblclick contextmenu",Ge),s._leaflet_disable_click=!0,this}function Ct(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function _i(s){return Ct(s),Ge(s),this}function Sl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Hs(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=zn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var vi=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Cl(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/vi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Il(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Ws={__proto__:null,on:Te,off:Qe,stopPropagation:Ge,disableScrollPropagation:Pl,disableClickPropagation:Us,preventDefault:Ct,stop:_i,getPropagationPath:Sl,getMousePosition:Hs,getWheelDelta:Cl,isExternalTarget:Il,addListener:Te,removeListener:Qe},Al=et.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Zi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),vt(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Oe=et.extend({options:{crs:ke,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(fe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$i&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Te(this._proxy,xl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(fe(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),E=s instanceof Z?s:this.latLngToContainerPoint(s),F=E.subtract(v).multiplyBy(1-1/p),W=this.containerPointToLatLng(v.add(F));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Me(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var E=p.subtract(d).divideBy(2),F=this.project(s.getSouthWest(),v),W=this.project(s.getNorthEast(),v),q=this.unproject(F.add(W).divideBy(2).add(E),v);return{center:q,zoom:v}},fitBounds:function(s,l){if(s=Me(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Al,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!le.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),E=this.getSize(),F=this._zoom;s=fe(s),l=l===void 0?F:l;var W=Math.max(E.x,E.y),q=W*this.getZoomScale(F,l),Q=v.distanceTo(p)||1,ie=1.42,_e=ie*ie;function De(It){var Jc=It?-1:1,GA=It?q:W,ZA=q*q-W*W+Jc*_e*_e*Q*Q,KA=2*GA*_e*Q,fp=ZA/KA,Nv=Math.sqrt(fp*fp+1)-fp,QA=Nv<1e-9?-18:Math.log(Nv);return QA}function an(It){return(Math.exp(It)-Math.exp(-It))/2}function jt(It){return(Math.exp(It)+Math.exp(-It))/2}function Un(It){return an(It)/jt(It)}var yn=De(0);function ra(It){return W*(jt(yn)/jt(yn+ie*It))}function HA(It){return W*(jt(yn)*Un(yn+ie*It)-an(yn))/_e}function WA(It){return 1-Math.pow(1-It,1.5)}var $A=Date.now(),kv=(De(1)-yn)/ie,qA=d.duration?1e3*d.duration:1e3*kv*.8;function Rv(){var It=(Date.now()-$A)/qA,Jc=WA(It)*kv;It<=1?(this._flyToFrame=j(Rv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(HA(Jc)/Q)),F),this.getScaleZoom(W/ra(Jc),F),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Rv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Me(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Me(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),E=this.project(s),F=this.getPixelBounds(),W=Se([F.min.add(d),F.max.subtract(p)]),q=W.getSize();if(!W.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(W.getCenter()),ie=W.extend(E).getSize().subtract(q);v.x+=Q.x<0?-ie.x:ie.x,v.y+=Q.y<0?-ie.y:ie.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),E=p.subtract(v);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Ne(l,d),v=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var F=this.getBoundsZoom(v);this.setView(p,E.maxZoom?Math.min(F,E.maxZoom):F)}var W={latlng:p,bounds:v,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&(W[q]=s.coords[q]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)$e(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ue("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Je(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Me(s),d=J(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),E=this.getMaxZoom(),F=s.getNorthWest(),W=s.getSouthEast(),q=this.getSize().subtract(d),Q=Se(this.project(W,p),this.project(F,p)).getSize(),ie=le.any3d?this.options.zoomSnap:1,_e=q.x/Q.x,De=q.y/Q.y,an=l?Math.max(_e,De):Math.min(_e,De);return p=this.getScaleZoom(an,p),ie&&(p=Math.round(p/(ie/100))*(ie/100),p=l?Math.ceil(p/ie)*ie:Math.floor(p/ie)*ie),Math.max(v,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new te(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(fe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(fe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(fe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Me(s))},distance:function(s,l){return this.options.crs.distance(fe(s),fe(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(s)))},mouseEventToContainerPoint:function(s){return Hs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Tl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Te(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,se(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=kr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),vt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(s.markerPane,"leaflet-zoom-hide"),se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){vt(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){vt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Qe:Te;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,F=!1;E;){if(p=this._targets[h(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){F=!0;break}if(p&&p.listens(l,!0)&&(v&&!Il(E,s)||(d.push(p),v))||E===this._container)break;E=E.parentNode}return!d.length&&!F&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&El(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var E=[],F=0;F<d.length;F++)d[F].listens(l,!0)&&E.push(d[F]);v=E.concat(v)}if(v.length){l==="contextmenu"&&Ct(s);var W=v[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);q.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Q?W.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(F=0;F<v.length;F++)if(v[F].fire(l,q,!0),q.originalEvent._stopped||v[F].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Zi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Se([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),E=new te(p.subtract(v),p.add(v)),F=this._getBoundsOffset(E,d,l);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?s:this.unproject(p.add(F),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new te(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Se(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),E=p.max.subtract(s.max),F=this._rebound(v.x,-E.x),W=this._rebound(v.y,-E.y);return new Z(F,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=le.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=js,p=this._proxy.style[d];Gi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Gi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(j(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qo(s,l){return new Oe(s,l)}var gn=ae.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return se(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),wi=function(s){return new gn(s)};Oe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ue("div",l+"control-container",this._container);function p(v,E){var F=l+v+" "+l+E;s[v+E]=Ue("div",F,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)$e(this._controlCorners[s]);$e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jc=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return gn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ue("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Us(l),Pl(l);var p=this._section=Ue("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Te(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Ue("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Te(v,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Ct(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ue("div",s+"-base",p),this._separator=Ue("div",s+"-separator",p),this._overlaysList=Ue("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sn(this._baseLayersList),sn(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Te(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(v);var F=s.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(E=0;E<v.length;E++)this._map.hasLayer(v[E])&&this._map.removeLayer(v[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Te(s,"click",Ct),this.expand();var l=this;setTimeout(function(){Qe(s,"click",Ct),l._preventClick=!1})}}),zc=function(s,l,d){return new jc(s,l,d)},Qi=gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ue("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var E=Ue("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Us(E),Te(E,"click",_i),Te(E,"click",v,this),Te(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";tt(this._zoomInButton,l),tt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oe.mergeOptions({zoomControl:!0}),Oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qi,this.addControl(this.zoomControl))});var Fc=function(s){return new Qi(s)},bl=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ue("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ue("div",l,d)),s.imperial&&(this._iScale=Ue("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),kl=function(s){return new bl(s)},Rl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Go=gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?Rl+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ue("div","leaflet-control-attribution"),Us(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Oe.mergeOptions({attributionControl:!0}),Oe.addInitHook(function(){this.options.attributionControl&&new Go().addTo(this)});var Zo=function(s){return new Go(s)};gn.Layers=jc,gn.Zoom=Qi,gn.Scale=bl,gn.Attribution=Go,wi.layers=zc,wi.zoom=Fc,wi.scale=kl,wi.attribution=Zo;var In=ae.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(s,l){return s.addHandler(l,this),this};var Bc={Events:Ae},xi=le.touch?"touchstart mousedown":"mousedown",ii=et.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){k(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Te(this._dragStartTarget,xi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ii._dragging===this&&this.finishDrag(!0),Qe(this._dragStartTarget,xi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!zs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ii._dragging===this&&this.finishDrag();return}if(!(ii._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ii._dragging=this,this._preventOutline&&El(this._element),Uo(),ni(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Vc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Zi(this._element),this._parentScale=zn(d);var p=s.type==="mousedown";Te(document,p?"mousemove":"touchmove",this._onMove,this),Te(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Ct(s),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),vt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qe(document,"mousemove touchmove",this._onMove,this),Qe(document,"mouseup touchend touchcancel",this._onUp,this),Ho(),Cn();var l=this._moved&&this._moving;this._moving=!1,ii._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Nl(s,l,d){var p,v=[1,4,2,8],E,F,W,q,Q,ie,_e,De;for(E=0,ie=s.length;E<ie;E++)s[E]._code=$(s[E],l);for(W=0;W<4;W++){for(_e=v[W],p=[],E=0,ie=s.length,F=ie-1;E<ie;F=E++)q=s[E],Q=s[F],q._code&_e?Q._code&_e||(De=H(Q,q,_e,l,d),De._code=$(De,l),p.push(De)):(Q._code&_e&&(De=H(Q,q,_e,l,d),De._code=$(De,l),p.push(De)),p.push(q));s=p}return s}function Ll(s,l){var d,p,v,E,F,W,q,Q,ie;if(!s||s.length===0)throw new Error("latlngs not passed");qe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var _e=fe([0,0]),De=Me(s),an=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());an<1700&&(_e=Ko(s));var jt=s.length,Un=[];for(d=0;d<jt;d++){var yn=fe(s[d]);Un.push(l.project(fe([yn.lat-_e.lat,yn.lng-_e.lng])))}for(W=q=Q=0,d=0,p=jt-1;d<jt;p=d++)v=Un[d],E=Un[p],F=v.y*E.x-E.y*v.x,q+=(v.x+E.x)*F,Q+=(v.y+E.y)*F,W+=F*3;W===0?ie=Un[0]:ie=[q/W,Q/W];var ra=l.unproject(J(ie));return fe([ra.lat+_e.lat,ra.lng+_e.lng])}function Ko(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var E=fe(s[v]);l+=E.lat,d+=E.lng,p++}return fe([l/p,d/p])}var Qo={__proto__:null,clipPolygon:Nl,polygonCenter:Ll,centroid:Ko};function Zt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Lr(s,d),s}function Ml(s,l,d){return Math.sqrt(Ee(s,l,d,!0))}function Uc(s,l,d){return Ee(s,l,d)}function Lr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var E,F=[];for(E=0;E<d;E++)v[E]&&F.push(s[E]);return F}function c(s,l,d,p,v){var E=0,F,W,q;for(W=p+1;W<=v-1;W++)q=Ee(s[W],s[p],s[v],!0),q>E&&(F=W,E=q);E>d&&(l[F]=1,c(s,l,d,p,F),c(s,l,d,F,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,E=s.length;p<E;p++)ee(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<E-1&&d.push(s[E-1]),d}var x;function I(s,l,d,p,v){var E=p?x:$(s,d),F=$(l,d),W,q,Q;for(x=F;;){if(!(E|F))return[s,l];if(E&F)return!1;W=E||F,q=H(s,l,W,d,v),Q=$(q,d),W===E?(s=q,E=Q):(l=q,F=Q)}}function H(s,l,d,p,v){var E=l.x-s.x,F=l.y-s.y,W=p.min,q=p.max,Q,ie;return d&8?(Q=s.x+E*(q.y-s.y)/F,ie=q.y):d&4?(Q=s.x+E*(W.y-s.y)/F,ie=W.y):d&2?(Q=q.x,ie=s.y+F*(q.x-s.x)/E):d&1&&(Q=W.x,ie=s.y+F*(W.x-s.x)/E),new Z(Q,ie,v)}function $(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ee(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Ee(s,l,d,p){var v=l.x,E=l.y,F=d.x-v,W=d.y-E,q=F*F+W*W,Q;return q>0&&(Q=((s.x-v)*F+(s.y-E)*W)/q,Q>1?(v=d.x,E=d.y):Q>0&&(v+=F*Q,E+=W*Q)),F=s.x-v,W=s.y-E,p?F*F+W*W:new Z(v,E)}function qe(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ze(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),qe(s)}function xt(s,l){var d,p,v,E,F,W,q,Q;if(!s||s.length===0)throw new Error("latlngs not passed");qe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=fe([0,0]),_e=Me(s),De=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());De<1700&&(ie=Ko(s));var an=s.length,jt=[];for(d=0;d<an;d++){var Un=fe(s[d]);jt.push(l.project(fe([Un.lat-ie.lat,Un.lng-ie.lng])))}for(d=0,p=0;d<an-1;d++)p+=jt[d].distanceTo(jt[d+1])/2;if(p===0)Q=jt[0];else for(d=0,E=0;d<an-1;d++)if(F=jt[d],W=jt[d+1],v=F.distanceTo(W),E+=v,E>p){q=(E-p)/v,Q=[W.x-q*(W.x-F.x),W.y-q*(W.y-F.y)];break}var yn=l.unproject(J(Q));return fe([yn.lat+ie.lat,yn.lng+ie.lng])}var Fn={__proto__:null,simplify:Zt,pointToSegmentDistance:Ml,closestPointOnSegment:Uc,clipSegment:I,_getEdgeIntersection:H,_getBitCode:$,_sqClosestPointOnSegment:Ee,isFlat:qe,_flat:Ze,polylineCenter:xt},ri={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new Ne(s.y,s.x)},bounds:new te([-180,-90],[180,90])},Bn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,E=Math.sqrt(1-v*v),F=E*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-F)/(1+F),E/2);return p=-d*Math.log(Math.max(W,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),F=Math.PI/2-2*Math.atan(E),W=0,q=.1,Q;W<15&&Math.abs(q)>1e-7;W++)Q=v*Math.sin(F),Q=Math.pow((1-Q)/(1+Q),v/2),q=Math.PI/2-2*Math.atan(E*Q)-F,F+=q;return new Ne(F*l,s.x*l/d)}},Ti={__proto__:null,LonLat:ri,Mercator:Bn,SphericalMercator:ye},Xo=r({},ne,{code:"EPSG:3395",projection:Bn,transformation:function(){var s=.5/(Math.PI*Bn.R);return pe(s,.5,-s,.5)}()}),Yo=r({},ne,{code:"EPSG:4326",projection:ri,transformation:pe(1/180,1,-1/180,.5)}),xA=r({},ht,{projection:ri,transformation:pe(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});ht.Earth=ne,ht.EPSG3395=Xo,ht.EPSG3857=ke,ht.EPSG900913=St,ht.EPSG4326=Yo,ht.Simple=xA;var si=et.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Oe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Jo=si.extend({initialize:function(s,l){k(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),TA=function(s,l){return new Jo(s,l)},Xi=Jo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Jo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Jo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Je;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),EA=function(s,l){return new Xi(s,l)},ea=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=J(p),E=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function PA(s){return new ea(s)}var Ol=ea.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ol.imagePath!="string"&&(Ol.imagePath=this._detectIconPath()),(this.options.imagePath||Ol.imagePath)+ea.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var E=p.exec(d);return E&&E[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ue("div","leaflet-default-icon-path",document.body),l=kr(s,"background-image")||kr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),hv=In.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ii(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,E=Zi(l._icon),F=d.getPixelBounds(),W=d.getPixelOrigin(),q=Se(F.min._subtract(W).add(v),F.max._subtract(W).subtract(v));if(!q.contains(E)){var Q=J((Math.max(q.max.x,E.x)-q.max.x)/(F.max.x-q.max.x)-(Math.min(q.min.x,E.x)-q.min.x)/(F.min.x-q.min.x),(Math.max(q.max.y,E.y)-q.max.y)/(F.max.y-q.max.y)-(Math.min(q.min.y,E.y)-q.min.y)/(F.min.y-q.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),vt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=j(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Zi(l._icon),v=l._map.layerPointToLatLng(p);d&&vt(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Hc=si.extend({options:{icon:new Ol,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=fe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),se(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Te(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),E=!1;v!==this._shadow&&(this._removeShadow(),E=!0),v&&(se(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(this._icon,"focus",this._panOnFocus,this),$e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$e(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&vt(this._icon,s),this._shadow&&vt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&mn(this._icon,s),this._shadow&&mn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function SA(s,l){return new Hc(s,l)}var Mr=si.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Wc=Mr.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=fe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Mr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new te(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function CA(s,l){return new Wc(s,l)}var up=Wc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),k(this,l),this._latlng=fe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Je(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Mr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===ne.distance){var v=Math.PI/180,E=this._mRadius/ne.R/v,F=d.project([l+E,s]),W=d.project([l-E,s]),q=F.add(W).divideBy(2),Q=d.unproject(q).lat,ie=Math.acos((Math.cos(E*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(ie)||ie===0)&&(ie=E/Math.cos(Math.PI/180*l)),this._point=q.subtract(d.getPixelOrigin()),this._radius=isNaN(ie)?0:q.x-d.project([Q,s-ie]).x,this._radiusY=q.y-F.y}else{var _e=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(_e).x}this._updateBounds()}});function IA(s,l,d){return new up(s,l,d)}var Yi=Mr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Ee,v,E,F=0,W=this._parts.length;F<W;F++)for(var q=this._parts[F],Q=1,ie=q.length;Q<ie;Q++){v=q[Q-1],E=q[Q];var _e=p(s,v,E,!0);_e<l&&(l=_e,d=p(s,v,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=fe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Je,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return qe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=qe(s),p=0,v=s.length;p<v;p++)d?(l[p]=fe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Ne,v=s.length,E,F;if(p){for(F=[],E=0;E<v;E++)F[E]=this._map.latLngToLayerPoint(s[E]),d.extend(F[E]);l.push(F)}else for(E=0;E<v;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,E,F,W,q;for(d=0,v=0,E=this._rings.length;d<E;d++)for(q=this._rings[d],p=0,F=q.length;p<F-1;p++)W=I(q[p],q[p+1],s,p,!0),W&&(l[v]=l[v]||[],l[v].push(W[0]),(W[1]!==q[p+1]||p===F-2)&&(l[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Zt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,E,F,W,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(W=this._parts[d],p=0,F=W.length,v=F-1;p<F;v=p++)if(!(!l&&p===0)&&Ml(s,W[v],W[p])<=q)return!0;return!1}});function AA(s,l){return new Yi(s,l)}Yi._flat=Ze;var ta=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ll(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Yi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ne&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Yi.prototype._setLatLngs.call(this,s),qe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return qe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new te(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,E;p<v;p++)E=Nl(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,E,F,W,q,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,q=this._parts.length;E<q;E++)for(d=this._parts[E],F=0,Q=d.length,W=Q-1;F<Q;W=F++)p=d[F],v=d[W],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Yi.prototype._containsPoint.call(this,s,!0)}});function bA(s,l){return new ta(s,l)}var Ji=Xi.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var F=$c(s,E);return F?(F.feature=Zc(s),F.defaultOptions=F.options,this.resetStyle(F),E.onEachFeature&&E.onEachFeature(s,F),this.addLayer(F)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function $c(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],E=l&&l.pointToLayer,F=l&&l.coordsToLatLng||cp,W,q,Q,ie;if(!p&&!d)return null;switch(d.type){case"Point":return W=F(p),dv(E,s,W,l);case"MultiPoint":for(Q=0,ie=p.length;Q<ie;Q++)W=F(p[Q]),v.push(dv(E,s,W,l));return new Xi(v);case"LineString":case"MultiLineString":return q=qc(p,d.type==="LineString"?0:1,F),new Yi(q,l);case"Polygon":case"MultiPolygon":return q=qc(p,d.type==="Polygon"?1:2,F),new ta(q,l);case"GeometryCollection":for(Q=0,ie=d.geometries.length;Q<ie;Q++){var _e=$c({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);_e&&v.push(_e)}return new Xi(v);case"FeatureCollection":for(Q=0,ie=d.features.length;Q<ie;Q++){var De=$c(d.features[Q],l);De&&v.push(De)}return new Xi(v);default:throw new Error("Invalid GeoJSON object.")}}function dv(s,l,d,p){return s?s(l,d):new Hc(d,p&&p.markersInheritOptions&&p)}function cp(s){return new Ne(s[1],s[0],s[2])}function qc(s,l,d){for(var p=[],v=0,E=s.length,F;v<E;v++)F=l?qc(s[v],l-1,d):(d||cp)(s[v]),p.push(F);return p}function hp(s,l){return s=fe(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function Gc(s,l,d,p){for(var v=[],E=0,F=s.length;E<F;E++)v.push(l?Gc(s[E],qe(s[E])?0:l-1,d,p):hp(s[E],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function na(s,l){return s.feature?r({},s.feature,{geometry:l}):Zc(l)}function Zc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var dp={toGeoJSON:function(s){return na(this,{type:"Point",coordinates:hp(this.getLatLng(),s)})}};Hc.include(dp),up.include(dp),Wc.include(dp),Yi.include({toGeoJSON:function(s){var l=!qe(this._latlngs),d=Gc(this._latlngs,l?1:0,!1,s);return na(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ta.include({toGeoJSON:function(s){var l=!qe(this._latlngs),d=l&&!qe(this._latlngs[0]),p=Gc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),na(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Jo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),na(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var E=v.toGeoJSON(s);if(d)p.push(E.geometry);else{var F=Zc(E);F.type==="FeatureCollection"?p.push.apply(p,F.features):p.push(F)}}}),d?na(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function fv(s,l){return new Ji(s,l)}var kA=fv,Kc=si.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Me(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Vn(this._image),this},bringToBack:function(){return this._map&&jn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Me(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ue("img");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Gi(this._image,d,l)},_reset:function(){var s=this._image,l=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();vt(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),RA=function(s,l,d){return new Kc(s,l,d)},pv=Kc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ue("video");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var F=Ue("source");F.src=this._url[E],l.appendChild(F)}}});function NA(s,l,d){return new pv(s,l,d)}var mv=Kc.extend({_initImage:function(){var s=this._image=this._url;se(s,"leaflet-image-layer"),this._zoomAnimated&&se(s,"leaflet-zoom-animated"),this.options.className&&se(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function LA(s,l,d){return new mv(s,l,d)}var Ei=si.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ne||C(s))?(this._latlng=fe(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&mn(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(mn(this._container,0),this._removeTimeout=setTimeout(a($e,void 0,this._container),200)):$e(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=fe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Vn(this._container),this},bringToBack:function(){return this._map&&jn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Xi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?vt(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Oe.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),si.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(k(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var Qc=Ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ei.prototype.openOn.call(this,s)},onAdd:function(s){Ei.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mr||this._source.on("preclick",Ge))},onRemove:function(s){Ei.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mr||this._source.off("preclick",Ge))},getEvents:function(){var s=Ei.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ue("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ue("div",s+"-content-wrapper",l);if(this._contentNode=Ue("div",s+"-content",d),Us(l),Pl(this._contentNode),Te(l,"contextmenu",Ge),this._tipContainer=Ue("div",s+"-tip-container",l),this._tip=Ue("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ue("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Te(p,"click",function(v){Ct(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,E="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",se(s,E)):tt(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();vt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(kr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new Z(this._containerLeft,-d-this._containerBottom);v._add(Zi(this._container));var E=s.layerPointToContainerPoint(v),F=J(this.options.autoPanPadding),W=J(this.options.autoPanPaddingTopLeft||F),q=J(this.options.autoPanPaddingBottomRight||F),Q=s.getSize(),ie=0,_e=0;E.x+p+q.x>Q.x&&(ie=E.x+p-Q.x+q.x),E.x-ie-W.x<0&&(ie=E.x-W.x),E.y+d+q.y>Q.y&&(_e=E.y+d-Q.y+q.y),E.y-_e-W.y<0&&(_e=E.y-W.y),(ie||_e)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ie,_e]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),MA=function(s,l){return new Qc(s,l)};Oe.mergeOptions({closePopupOnClick:!0}),Oe.include({openPopup:function(s,l,d){return this._initOverlay(Qc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),si.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Qc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Xi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){_i(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Mr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Xc=Ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ei.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ei.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ei.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ue("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,E=p.latLngToContainerPoint(p.getCenter()),F=p.layerPointToContainerPoint(s),W=this.options.direction,q=v.offsetWidth,Q=v.offsetHeight,ie=J(this.options.offset),_e=this._getAnchor();W==="top"?(l=q/2,d=Q):W==="bottom"?(l=q/2,d=0):W==="center"?(l=q/2,d=Q/2):W==="right"?(l=0,d=Q/2):W==="left"?(l=q,d=Q/2):F.x<E.x?(W="right",l=0,d=Q/2):(W="left",l=q+(ie.x+_e.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ie).add(_e),tt(v,"leaflet-tooltip-right"),tt(v,"leaflet-tooltip-left"),tt(v,"leaflet-tooltip-top"),tt(v,"leaflet-tooltip-bottom"),se(v,"leaflet-tooltip-"+W),vt(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&mn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),OA=function(s,l){return new Xc(s,l)};Oe.include({openTooltip:function(s,l,d){return this._initOverlay(Xc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),si.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Xi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Te(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Te(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var gv=ea.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(sn(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function DA(s){return new gv(s)}ea.Default=Ol;var Dl=si.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),$e(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Vn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,E;p<v;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){mn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var E=Math.min(1,(s-v.loaded)/200);mn(v.el,E),E<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):($e(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)$e(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),E=Math.floor(l/2),F=d-1,W=new Z(+v,+E);W.z=+F;var q=this._tileCoordsToKey(W),Q=this._tiles[q];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),F>p?this._retainParent(v,E,F,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var E=2*l;E<2*l+2;E++){var F=new Z(v,E);F.z=d+1;var W=this._tileCoordsToKey(F),q=this._tiles[W];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);d+1<p&&this._retainChildren(v,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var E=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||E)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();le.any3d?Gi(s.el,v,p):vt(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new te(v.subtract(E),v.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),E=v.getCenter(),F=[],W=this.options.keepBuffer,q=new te(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ie=this._tiles[Q].coords;(ie.z!==this._tileZoom||!q.contains(new Z(ie.x,ie.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var _e=v.min.y;_e<=v.max.y;_e++)for(var De=v.min.x;De<=v.max.x;De++){var an=new Z(De,_e);if(an.z=this._tileZoom,!!this._isValidTile(an)){var jt=this._tiles[this._tileCoordsToKey(an)];jt?jt.current=!0:F.push(an)}}if(F.sort(function(yn,ra){return yn.distanceTo(E)-ra.distanceTo(E)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Un=document.createDocumentFragment();for(De=0;De<F.length;De++)this._addTile(F[De],Un);this._level.el.appendChild(Un)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Me(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),E=l.unproject(p,s.z),F=l.unproject(v,s.z);return[E,F]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Je(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&($e(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){se(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,le.ielt9&&this.options.opacity<1&&mn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&j(a(this._tileReady,this,s,null,v)),vt(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(mn(d.el,0),z(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(se(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new te(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function VA(s){return new Dl(s)}var ia=Dl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Te(d,"load",a(this._tileOnLoad,this,l,d)),Te(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=G;var d=this._tiles[s].coords;$e(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",G),Dl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return Dl.prototype._tileReady.call(this,s,l,d)}});function yv(s,l){return new ia(s,l)}var _v=ia.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=k(this,l);var v=l.detectRetina&&le.retina?2:1,E=this.getTileSize();d.width=E.x*v,d.height=E.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ia.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Se(d.project(l[0]),d.project(l[1])),v=p.min,E=p.max,F=(this._wmsVersion>=1.3&&this._crs===Yo?[v.y,v.x,E.y,E.x]:[v.x,v.y,E.x,E.y]).join(","),W=ia.prototype.getTileUrl.call(this,s);return W+O(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function jA(s,l){return new _v(s,l)}ia.WMS=_v,yv.wms=jA;var er=si.extend({options:{padding:.1},initialize:function(s){k(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),E=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?Gi(this._container,E,d):vt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new te(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vv=er.extend({options:{tolerance:0},getEvents:function(){var s=er.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){er.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Te(s,"mousemove",this._onMouseMove,this),Te(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Te(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,$e(this._container),Qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=le.retina?2:1;vt(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){er.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,E,F=s._parts,W=F.length,q=this._ctx;if(W){for(q.beginPath(),d=0;d<W;d++){for(p=0,v=F[d].length;p<v;p++)E=F[d][p],q[p?"lineTo":"moveTo"](E.x,E.y);l&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(tt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(se(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function wv(s){return le.canvas?new vv(s):null}var Vl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),zA={_initContainer:function(){this._container=Ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(er.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Vl("shape");se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Vl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;$e(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Vl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Vl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Vn(s._container)},_bringToBack:function(s){jn(s._container)}},Yc=le.vml?Vl:_t,jl=er.extend({_initContainer:function(){this._container=Yc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$e(this._container),Qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),vt(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Yc("path");s.options.className&&se(l,s.options.className),s.options.interactive&&se(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){$e(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,ge(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Vn(s._path)},_bringToBack:function(s){jn(s._path)}});le.vml&&jl.include(zA);function xv(s){return le.svg||le.vml?new jl(s):null}Oe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&wv(s)||xv(s)}});var Tv=ta.extend({initialize:function(s,l){ta.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Me(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function FA(s,l){return new Tv(s,l)}jl.create=Yc,jl.pointsToPath=ge,Ji.geometryToLayer=$c,Ji.coordsToLatLng=cp,Ji.coordsToLatLngs=qc,Ji.latLngToCoords=hp,Ji.latLngsToCoords=Gc,Ji.getFeature=na,Ji.asFeature=Zc,Oe.mergeOptions({boxZoom:!0});var Ev=In.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ni(),Uo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Te(document,{contextmenu:_i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ue("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new te(this._point,this._startPoint),d=l.getSize();vt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&($e(this._box),tt(this._container,"leaflet-crosshair")),Cn(),Ho(),Qe(document,{contextmenu:_i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oe.addInitHook("addHandler","boxZoom",Ev),Oe.mergeOptions({doubleClickZoom:!0});var Pv=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Oe.addInitHook("addHandler","doubleClickZoom",Pv),Oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sv=In.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ii(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Me(this._map.options.maxBounds);this._offsetLimit=Se(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,F=Math.abs(v+d)<Math.abs(E+d)?v:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,F=d.easeLinearity,W=v.multiplyBy(F/E),q=W.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,q),ie=W.multiplyBy(Q/q),_e=Q/(d.inertiaDeceleration*F),De=ie.multiplyBy(-_e/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),j(function(){l.panBy(De,{duration:_e,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Oe.addInitHook("addHandler","dragging",Sv),Oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cv=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Te(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;_i(s)}}});Oe.addInitHook("addHandler","keyboard",Cv),Oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Iv=In.extend({addHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Cl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),_i(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(v/d)*d:v,F=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,F&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+F):s.setZoomAround(this._lastMousePos,l+F))}});Oe.addInitHook("addHandler","scrollWheelZoom",Iv);var BA=600;Oe.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var Av=In.extend({addHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Te(document,"touchend",Ct),Te(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),BA),Te(document,"touchend touchcancel contextmenu",this._cancel,this),Te(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Qe(document,"touchend",Ct),Qe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Oe.addInitHook("addHandler","tapHold",Av),Oe.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var bv=In.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend touchcancel",this._onTouchEnd,this),Ct(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var F=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(F,this,!0),Ct(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oe.addInitHook("addHandler","touchZoom",bv),Oe.BoxZoom=Ev,Oe.DoubleClickZoom=Pv,Oe.Drag=Sv,Oe.Keyboard=Cv,Oe.ScrollWheelZoom=Iv,Oe.TapHold=Av,Oe.TouchZoom=bv,n.Bounds=te,n.Browser=le,n.CRS=ht,n.Canvas=vv,n.Circle=up,n.CircleMarker=Wc,n.Class=ae,n.Control=gn,n.DivIcon=gv,n.DivOverlay=Ei,n.DomEvent=Ws,n.DomUtil=lp,n.Draggable=ii,n.Evented=et,n.FeatureGroup=Xi,n.GeoJSON=Ji,n.GridLayer=Dl,n.Handler=In,n.Icon=ea,n.ImageOverlay=Kc,n.LatLng=Ne,n.LatLngBounds=Je,n.Layer=si,n.LayerGroup=Jo,n.LineUtil=Fn,n.Map=Oe,n.Marker=Hc,n.Mixin=Bc,n.Path=Mr,n.Point=Z,n.PolyUtil=Qo,n.Polygon=ta,n.Polyline=Yi,n.Popup=Qc,n.PosAnimation=Al,n.Projection=Ti,n.Rectangle=Tv,n.Renderer=er,n.SVG=jl,n.SVGOverlay=mv,n.TileLayer=ia,n.Tooltip=Xc,n.Transformation=Ce,n.Util=M,n.VideoOverlay=pv,n.bind=a,n.bounds=Se,n.canvas=wv,n.circle=IA,n.circleMarker=CA,n.control=wi,n.divIcon=DA,n.extend=r,n.featureGroup=EA,n.geoJSON=fv,n.geoJson=kA,n.gridLayer=VA,n.icon=PA,n.imageOverlay=RA,n.latLng=fe,n.latLngBounds=Me,n.layerGroup=TA,n.map=qo,n.marker=SA,n.point=J,n.polygon=bA,n.polyline=AA,n.popup=MA,n.rectangle=FA,n.setOptions=k,n.stamp=h,n.svg=xv,n.svgOverlay=LA,n.tileLayer=yv,n.tooltip=OA,n.transformation=pe,n.version=i,n.videoOverlay=NA;var UA=window.L;n.noConflict=function(){return window.L=UA,this},window.L=n})})(Qg,Qg.exports);var Ro=Qg.exports;const lv=j1(Ro);function Tc(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function uv(t,e){return e==null?function(i,r){const o=D.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=D.useRef();o.current||(o.current=t(i,r));const a=D.useRef(i),{instance:u}=o.current;return D.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function _A(t,e){D.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function vA(t){return function(n){const i=ov(),r=t(av(n,i),i);return Rz(i.map,n.attribution),yA(r.current,n.eventHandlers),_A(r.current,i),r}}function Dz(t,e){const n=D.useRef();D.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function Vz(t){return function(n){const i=ov(),r=t(av(n,i),i);return yA(r.current,n.eventHandlers),_A(r.current,i),Dz(r.current,n),r}}function jz(t,e){const n=uv(t,e),i=vA(n);return gA(i)}function cv(t,e){const n=uv(t,e),i=Vz(n);return gA(i)}function zz(t,e){const n=uv(t,e),i=vA(n);return Oz(i)}function Fz(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function ep(){return ov().map}function Bz(t){const e=ep();return D.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const wA=cv(function({center:e,children:n,...i},r){const o=new Ro.CircleMarker(e,i);return Tc(o,Jf(r,{overlayContainer:o}))},Nz);function Xg(){return Xg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xg.apply(this,arguments)}function Uz({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[_]=D.useState({className:r,id:o,style:u}),[T,A]=D.useState(null);D.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const k=D.useCallback(b=>{if(b!==null&&T===null){const P=new Ro.Map(b,m);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),A(Mz(P))}},[]);D.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const O=T?uo.createElement(mA,{value:T},i):a??null;return uo.createElement("div",Xg({},_,{ref:k}),O)}const Hz=D.forwardRef(Uz),Wz=jz(function({position:e,...n},i){const r=new Ro.Marker(e,n);return Tc(r,Jf(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),$z=cv(function({positions:e,...n},i){const r=new Ro.Polygon(e,n);return Tc(r,Jf(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),D1=cv(function({positions:e,...n},i){const r=new Ro.Polyline(e,n);return Tc(r,Jf(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),qz=zz(function({url:e,...n},i){const r=new Ro.TileLayer(e,av(n,i));return Tc(r,i)},function(e,n,i){Fz(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete lv.Icon.Default.prototype._getIconUrl;lv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const Gz="/street-art-ctf/chumper.png",Zz=(t,e=!1,n=!1)=>{let i="";e?i="grayscale(100%) opacity(0.5)":t?t==="red"&&(i="hue-rotate(160deg) saturate(1.5)"):i="grayscale(100%)";const r=n?'<div style="position:absolute;inset:-4px;border:2px solid #a855f7;border-radius:50%;"></div>':"";return lv.divIcon({html:`<div style="position:relative;">${r}<img src="${Gz}" style="width: 32px; height: 32px; filter: ${i};" /></div>`,className:"chumper-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};function Kz({devMode:t}){const[e,n]=D.useState(nA),[i,r]=D.useState(tA);return Bz({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?w.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:w.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[w.jsxs("div",{children:["zoom: ",e]}),w.jsxs("div",{children:["lat: ",i[0]]}),w.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function Qz({hood:t}){const e=ep();return D.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function Xz({onShow:t}){const e=ep(),[n,i]=D.useState(null);if(D.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return w.jsx(wA,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function Yz(){const t=ep(),[e,n]=D.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return w.jsx(ce.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:w.jsx(ce.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:w.jsx(az,{size:20,className:"text-white"})})})}function Jz({point:t,onClose:e,isDiscovered:n,isSoloView:i}){const r=t.capturedBy?td(t.capturedBy):"#495057",o=i?n?"#a855f7":"#495057":r,a=ja(t),u=t.status==="ghost";return w.jsx(ce.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:w.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${o}40`},children:[w.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:w.jsx(Ez,{size:16,className:"text-white/50"})}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${o}20`,border:`1px solid ${o}40`},children:u?w.jsx(aA,{size:20,className:"text-white/30"}):i?n?w.jsx(N1,{size:20,style:{color:o}}):w.jsx(k1,{size:20,style:{color:o}}):t.capturedBy?w.jsx(N1,{size:20,style:{color:o}}):w.jsx(k1,{size:20,style:{color:o}})}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),u&&w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),w.jsx("p",{className:"text-sm text-white/40",children:t.area}),w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&w.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),w.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[w.jsxs("span",{className:"text-lg font-bold",style:{color:o},children:[a," pts"]}),i?n?w.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/20 text-purple-400",children:" Discovered"}):w.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:u?"Gone":"Not found yet"}):t.capturedBy?w.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${r}20`,color:r},children:["Team ",t.capturedBy]}):w.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:u?"Gone":"Unclaimed"})]}),!i&&t.capturedByPlayer&&w.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[w.jsx("p",{className:"text-xs text-white/40",children:"Last captured by"}),w.jsx("p",{className:"text-sm font-medium text-white mt-0.5",children:t.capturedByPlayer})]})]})]})]})})}const pm=[null,...lo],eF=[{id:"off",label:"Off",icon:pz},{id:"circles",label:"Circles",icon:iz},{id:"squares",label:"Squares",icon:yz},{id:"hexagons",label:"Hexagons",icon:hz}],tF=(t,e)=>{if(e==="off")return[];const n=t.filter(r=>r.capturedBy&&r.status!=="ghost"),i=[];return n.forEach(r=>{const[o,a]=r.location,u=.002,h=r.capturedBy;if(e==="circles"){const m=[];for(let g=0;g<32;g++){const _=g/32*2*Math.PI;m.push([o+u*Math.cos(_),a+u*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id})}else if(e==="squares"){const f=u*.8;i.push({team:h,coords:[[o-f,a-f*1.5],[o-f,a+f*1.5],[o+f,a+f*1.5],[o+f,a-f*1.5]],pointId:r.id})}else if(e==="hexagons"){const f=u*.9,m=[];for(let g=0;g<6;g++){const _=g/6*2*Math.PI+Math.PI/6;m.push([o+f*Math.cos(_),a+f*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id})}}),i};function nF(){const{player:t,artPoints:e,captureArt:n,discoveries:i}=Ui(),[r,o]=D.useState(null),[a,u]=D.useState(!1),[h,f]=D.useState(e),[m,g]=D.useState(nf.vysocany),[_,T]=D.useState("solo"),[A,k]=D.useState(!1),[O,b]=D.useState(!0),[P,C]=D.useState("off");D.useEffect(()=>{f(e)},[e]);const B=z=>{a?f(M=>M.map(ae=>{if(ae.id===z.id){const Ae=(pm.indexOf(ae.capturedBy)+1)%pm.length;return{...ae,capturedBy:pm[Ae]}}return ae})):o(z)},G=()=>{f(e.map(z=>({...z,capturedBy:null})))},U=a?h:e,R=D.useMemo(()=>G6(U),[U]),S=D.useMemo(()=>tF(U,P),[U,P]),N=D.useMemo(()=>rA(U),[U]);Object.values(N).reduce((z,M)=>z+M,0),Object.keys(i).length,bi.length;const V=D.useMemo(()=>{const z=bi.filter(ae=>{const Ye={palmovka:"Palmovka",vysocany:"Vysocany",podebrady:"Podebrady"};return ae.area===Ye[m.id]||ae.area===m.name});return{found:z.filter(ae=>i[ae.id]).length,total:z.length}},[i,m]),j=_==="solo";return w.jsxs("div",{className:"relative w-full h-full",children:[w.jsxs("div",{className:"absolute top-2 left-2 right-2 z-[1000] flex items-center gap-2",children:[w.jsxs("div",{className:"flex bg-black/70 backdrop-blur-sm rounded-lg p-0.5 border border-white/10",children:[w.jsx("button",{onClick:()=>T("solo"),className:`px-2 py-1 rounded text-[10px] font-medium transition-all ${j?t.team==="red"?"bg-red-500 text-white":"bg-blue-500 text-white":"text-white/50"}`,children:"Collection"}),w.jsx("button",{onClick:()=>T("multi"),className:`px-2 py-1 rounded text-[10px] font-medium transition-all ${j?"text-white/50":"bg-gradient-to-r from-red-500 to-blue-500 text-white"}`,children:"Battle"})]}),w.jsx("div",{className:"flex gap-0.5 bg-black/70 backdrop-blur-sm rounded-lg p-0.5 border border-white/10",children:Object.values(nf).map(z=>w.jsx("button",{onClick:()=>g(z),className:`px-2 py-1 rounded text-[10px] font-medium transition-all ${m.id===z.id?"bg-white/20 text-white":"text-white/50"}`,children:z.name},z.id))}),w.jsx("div",{className:"ml-auto flex items-center gap-2 bg-black/70 backdrop-blur-sm rounded-lg px-2 py-1 border border-white/10",children:j?w.jsxs(w.Fragment,{children:[w.jsxs("span",{className:"text-[10px] text-white/70",children:[w.jsx("span",{className:t.team==="red"?"text-red-400":"text-blue-400",children:V.found}),w.jsxs("span",{className:"text-white/40",children:["/",V.total]})]}),V.found===V.total&&V.total>0&&w.jsx("span",{className:"text-[10px]",children:""})]}):w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"text-[10px] text-red-400",children:N.red||0}),w.jsx("span",{className:"text-[10px] text-white/30",children:"vs"}),w.jsx("span",{className:"text-[10px] text-blue-400",children:N.blue||0})]})}),w.jsx(ce.button,{onClick:()=>k(!A),className:`w-7 h-7 rounded-lg backdrop-blur-sm border flex items-center justify-center transition-colors ${A?"bg-white/20 border-white/30 text-white":"bg-black/70 border-white/10 text-white/50"}`,whileTap:{scale:.95},children:w.jsx(gz,{size:14})})]}),w.jsxs("div",{className:"absolute bottom-24 right-4 z-[1000] flex flex-col gap-2",children:[w.jsx(ce.button,{onClick:()=>u(!a),className:`w-8 h-8 rounded-lg backdrop-blur-sm border flex items-center justify-center transition-colors ${a?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/50 border-white/10 text-white/30"}`,whileTap:{scale:.95},children:w.jsx(oz,{size:14})}),a&&w.jsx(ce.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:G,className:"w-8 h-8 rounded-lg bg-black/50 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/30",whileTap:{scale:.95},children:w.jsx(lA,{size:14})})]}),w.jsx(La,{children:A&&w.jsxs(ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"absolute top-24 right-4 z-[1000] w-48 bg-black/90 backdrop-blur-xl rounded-xl border border-white/10 overflow-hidden",children:[w.jsx("div",{className:"p-3 border-b border-white/10",children:w.jsx("h3",{className:"text-xs font-bold text-white/60 uppercase tracking-wider",children:"Display"})}),w.jsx("div",{className:"p-3 border-b border-white/5",children:w.jsxs("button",{onClick:()=>b(!O),className:"w-full flex items-center justify-between",children:[w.jsx("span",{className:"text-sm text-white/70",children:"Show Lines"}),w.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${O?"bg-blue-500":"bg-white/20"}`,children:w.jsx(ce.div,{className:"w-4 h-4 bg-white rounded-full mt-0.5",animate:{x:O?22:2},transition:{type:"spring",stiffness:500,damping:30}})})]})}),w.jsxs("div",{className:"p-3",children:[w.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Territory Style"}),w.jsx("div",{className:"grid grid-cols-2 gap-1",children:eF.map(z=>{const M=z.icon;return w.jsxs("button",{onClick:()=>C(z.id),className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs transition-colors ${P===z.id?"bg-white/20 text-white":"bg-white/5 text-white/50 hover:bg-white/10"}`,children:[w.jsx(M,{size:12}),z.label]},z.id)})})]})]})}),w.jsx(La,{children:a&&w.jsx(ce.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:w.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),w.jsxs(Hz,{center:tA,zoom:nA,minZoom:$6,maxZoom:q6,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[w.jsx(qz,{url:C1.tileUrl,attribution:C1.attribution}),w.jsx(Yz,{}),w.jsx(Kz,{devMode:a}),w.jsx(Qz,{hood:m}),w.jsx(Xz,{}),w.jsx(D1,{positions:I1.map(z=>z.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),I1.map(z=>w.jsx(wA,{center:z.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},z.name)),!j&&S.map((z,M)=>w.jsx($z,{positions:z.coords,pathOptions:{color:td(z.team),fillColor:td(z.team),fillOpacity:.15,weight:1,opacity:.4}},`territory-${z.pointId}`)),!j&&O&&Object.entries(R).map(([z,M])=>M.map((ae,Ye)=>w.jsx(D1,{positions:[ae.from,ae.to],pathOptions:{color:td(z),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${z}-line-${Ye}`))),U.map(z=>{const M=z.status==="ghost",ae=i[z.id],Ye=j?ae?t.team:null:z.capturedBy,Ae=Zz(Ye,M,ae&&!j);return w.jsx(Wz,{position:z.location,icon:Ae,eventHandlers:{click:et=>{et.originalEvent.stopPropagation(),B(z)}}},`${z.id}-${Ye||"none"}-${ae?"d":""}`)})]}),w.jsx(La,{children:r&&w.jsx(Jz,{point:r,onClose:()=>o(null),isDiscovered:i[r.id],isSoloView:j})})]})}function iF(){return w.jsx(ce.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w.jsx(nF,{})})}function rF(){const{player:t}=Ui(),[e,n]=D.useState(!1);return D.useEffect(()=>{if(t.team&&!e){n(!0);const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"}},[t.team,e]),t.team?w.jsx(ce.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:w.jsxs("div",{className:"text-center",children:[w.jsx(ce.div,{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:w.jsx(rf,{size:48,className:"text-white"})}),w.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Opening AR Scanner"}),w.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Point your camera at street art to capture it"}),w.jsx(fz,{className:"w-6 h-6 animate-spin mx-auto text-purple-400"})]})}):w.jsx(ce.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:w.jsx(Y6,{size:36,className:"text-amber-500"})}),w.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),w.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const sF={red:"Red Team",blue:"Blue Team"};function oF({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return w.jsxs(ce.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[w.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${st[t].hex}15 0%, transparent 60%)`}}),w.jsx(ce.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:st[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),w.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${st[t].hex}30`},children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?w.jsx(lz,{size:20,className:"text-white"}):w.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("p",{className:"font-semibold text-white",children:sF[t]}),w.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[w.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:st[t].hex}}),w.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-2xl font-bold",style:{color:st[t].hex},children:e.toLocaleString()}),w.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function aF({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return w.jsxs(ce.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[w.jsx("div",{className:"w-8 flex justify-center",children:i?w.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:w.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):w.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),w.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${st[t.team].hex}20`,color:st[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&w.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),w.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),w.jsx("div",{className:"text-right",children:w.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function lF(){var m;const{teamScores:t,player:e,allPlayers:n}=Ui(),r=Object.entries(t).filter(([g])=>st[g]).sort((g,_)=>_[1]-g[1]),o=Object.values(t).reduce((g,_)=>g+_,0)||1,a=[...n];!a.find(g=>g.name===e.name)&&e.team&&e.name&&a.push({id:"current",name:e.name,team:e.team,score:e.score||0,captures:((m=e.capturedArt)==null?void 0:m.length)||0});const h=a.sort((g,_)=>_.score-g.score),f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return w.jsxs(ce.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:f,children:[w.jsx(ce.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[w.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:w.jsx(sv,{size:20,className:"text-white"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),w.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),w.jsxs("div",{className:"mb-8",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(hA,{size:16,className:"text-white/40"}),w.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),w.jsx("div",{className:"space-y-3",children:r.map(([g,_],T)=>w.jsx(oF,{team:g,score:_,rank:T,totalScore:o},g))})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(iv,{size:16,className:"text-white/40"}),w.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),w.jsx("div",{className:"space-y-2",children:h.map((g,_)=>w.jsx(aF,{player:g,rank:_,isCurrentPlayer:g.id==="current"},g.id))})]})]})}const V1={Vysocany:{name:"Vysoany",color:"#4dabf7"},Hloubetin:{name:"Hloubtn",color:"#ff6b6b"},Podebrady:{name:"Podbrady",color:"#51cf66"}};function uF(){var _,T;const{player:t,artPoints:e,resetAll:n,discoveries:i}=Ui(),[r,o]=D.useState(!1),a=(e==null?void 0:e.filter(A=>t.capturedArt.includes(A.id)))||[],u=D.useMemo(()=>{const A={},k=Object.keys(i||{});return Object.keys(V1).forEach(O=>{const b=bi.filter(C=>C.area===O),P=b.filter(C=>k.includes(C.id));A[O]={total:b.length,found:P.length,complete:P.length===b.length&&b.length>0}}),A},[i]),h=D.useMemo(()=>{const A=bi.length,k=Object.keys(i||{}).length;return{total:A,found:k,percent:Math.round(k/A*100)}},[i]),f=t.team?st[t.team].hex:"#64748b",m=t.team==="red"?"Red Team":"Blue Team",g=async()=>{if(!r){o(!0);try{const A=["red","blue"];let k=0,O=0;for(const b of bi){const P=A[Math.floor(Math.random()*A.length)],C=ja(b);P==="red"?k+=C:O+=C,await ir(Ai(cn,"streetart-captures",b.id),{artId:b.id,capturedBy:P,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:C,isFirstCapture:!0,isRecapture:!1})}await ir(Ai(cn,"streetart-teams","red"),{score:k},{merge:!0}),await ir(Ai(cn,"streetart-teams","blue"),{score:O},{merge:!0})}catch(A){console.error("Failed to randomize:",A)}o(!1)}};return w.jsxs("div",{className:"flex-1 overflow-y-auto pb-24 px-4 pt-6",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[w.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center",style:{backgroundColor:`${f}20`},children:w.jsx("span",{className:"text-xl font-bold",style:{color:f},children:((T=(_=t.name)==null?void 0:_.charAt(0))==null?void 0:T.toUpperCase())||"?"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-lg font-semibold text-white",children:t.name}),w.jsx("p",{className:"text-xs text-white/40",children:m})]})]}),w.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-6",children:[w.jsxs("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/5 text-center",children:[w.jsx(sv,{size:18,className:"mx-auto mb-1.5 text-yellow-500/80"}),w.jsx("p",{className:"text-xl font-semibold text-white",children:t.score}),w.jsx("p",{className:"text-[9px] text-white/30 uppercase",children:"Score"})]}),w.jsxs("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/5 text-center",children:[w.jsx(rf,{size:18,className:"mx-auto mb-1.5 text-green-500/80"}),w.jsx("p",{className:"text-xl font-semibold text-white",children:t.captureCount||a.length}),w.jsx("p",{className:"text-[9px] text-white/30 uppercase",children:"Captures"})]}),w.jsxs("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/5 text-center",children:[w.jsx(iv,{size:18,className:"mx-auto mb-1.5 text-orange-500/80"}),w.jsx("p",{className:"text-xl font-semibold text-white",children:t.maxStreak||0}),w.jsx("p",{className:"text-[9px] text-white/30 uppercase",children:"Best Streak"})]})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("h2",{className:"text-xs font-medium text-white/30 uppercase tracking-wider mb-3",children:"Collection"}),w.jsxs("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/5 mb-2",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(rv,{size:14,className:"text-white/40"}),w.jsx("span",{className:"text-sm text-white/80",children:"Prague"})]}),w.jsxs("span",{className:"text-xs text-white/40",children:[h.found,"/",h.total]})]}),w.jsx("div",{className:"h-1.5 bg-white/5 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{backgroundColor:f,width:`${h.percent}%`}})})]}),w.jsx("div",{className:"space-y-2",children:Object.entries(V1).map(([A,k])=>{const O=u[A]||{found:0,total:0,complete:!1},b=O.total>0?Math.round(O.found/O.total*100):0;return w.jsxs("div",{className:`p-3 rounded-lg border flex items-center gap-3 ${O.complete?"bg-green-500/10 border-green-500/20":"bg-white/[0.02] border-white/5"}`,children:[w.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{backgroundColor:`${k.color}15`},children:O.complete?w.jsx(ez,{size:18,className:"text-green-400"}):w.jsx(J6,{size:18,style:{color:k.color}})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center justify-between mb-1",children:[w.jsx("span",{className:"text-sm text-white/90",children:k.name}),w.jsxs("span",{className:"text-xs text-white/40",children:[O.found,"/",O.total]})]}),w.jsx("div",{className:"h-1 bg-white/5 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{backgroundColor:O.complete?"#22c55e":k.color,width:`${b}%`}})})]})]},A)})})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("h2",{className:"text-xs font-medium text-white/30 uppercase tracking-wider mb-3",children:"Stats"}),w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/5 flex items-center gap-3",children:[w.jsx(cA,{size:16,className:"text-purple-400"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-base font-semibold text-white",children:t.recaptureCount||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Recaptures"})]})]}),w.jsxs("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/5 flex items-center gap-3",children:[w.jsx(oA,{size:16,className:"text-blue-400"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-base font-semibold text-white",children:t.firstCaptureCount||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"First Captures"})]})]}),w.jsxs("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/5 flex items-center gap-3",children:[w.jsx(cz,{size:16,className:"text-green-400"}),w.jsxs("div",{children:[w.jsxs("p",{className:"text-base font-semibold text-white",children:[t.totalDistance?(t.totalDistance/1e3).toFixed(1):"0"," km"]}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Distance"})]})]}),w.jsxs("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/5 flex items-center gap-3",children:[w.jsx(hA,{size:16,className:"text-orange-400"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-base font-semibold text-white",children:t.streak||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Current Streak"})]})]})]})]}),a.length>0&&w.jsxs("div",{className:"mb-6",children:[w.jsx("h2",{className:"text-xs font-medium text-white/30 uppercase tracking-wider mb-3",children:"Recent Discoveries"}),w.jsxs("div",{className:"space-y-1",children:[a.slice(0,5).map(A=>w.jsxs("div",{className:"p-2 rounded-lg bg-white/[0.02] border border-white/5 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center",style:{backgroundColor:`${f}15`},children:w.jsx(rf,{size:14,style:{color:f}})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm text-white/80 truncate",children:A.name}),w.jsx("p",{className:"text-[10px] text-white/30",children:A.area})]})]},A.id)),a.length>5&&w.jsxs("p",{className:"text-[10px] text-white/30 text-center pt-1",children:["+",a.length-5," more"]})]})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("h2",{className:"text-xs font-medium text-white/30 uppercase tracking-wider mb-3",children:"Admin"}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("button",{onClick:g,disabled:r,className:"w-full p-3 rounded-lg bg-white/[0.02] border border-white/5 flex items-center gap-3 text-white/60 hover:text-white/80 transition-colors disabled:opacity-50",children:[w.jsx(uA,{size:16}),w.jsx("span",{className:"text-sm",children:r?"Randomizing...":"Randomize Territories"})]}),w.jsxs("button",{onClick:n,className:"w-full p-3 rounded-lg bg-white/[0.02] border border-white/5 flex items-center gap-3 text-white/40 hover:text-red-400 transition-colors",children:[w.jsx(lA,{size:16}),w.jsx("span",{className:"text-sm",children:"Reset All Data"})]})]})]}),w.jsx("p",{className:"text-center text-[10px] text-white/20",children:"v2.1.0"})]})}const cF="123";function hF(){const t=Sf(),{artPoints:e,allPlayers:n,teamScores:i}=Ui(),[r,o]=D.useState(!1),[a,u]=D.useState(""),[h,f]=D.useState("all"),[m,g]=D.useState({}),[_,T]=D.useState(null);D.useEffect(()=>{sessionStorage.getItem("admin-auth")==="true"&&o(!0)},[]);const A=U=>{U.preventDefault(),a===cF?(o(!0),sessionStorage.setItem("admin-auth","true")):(T({type:"error",text:"Wrong password"}),setTimeout(()=>T(null),2e3))},k=(U,R)=>{T({type:U,text:R}),setTimeout(()=>T(null),3e3)},O=async(U,R)=>{g(S=>({...S,[U]:!0}));try{const S=R==="ghost"?"active":"ghost";await ir(Ai(cn,"streetart-captures",U),{status:S,statusUpdatedAt:new Date},{merge:!0}),k("success",`Point ${U} set to ${S}`)}catch(S){k("error","Failed to update: "+S.message),console.error(S)}g(S=>({...S,[U]:!1}))},b=async U=>{g(R=>({...R,[`reset-${U}`]:!0}));try{await cm(Ai(cn,"streetart-captures",U)),k("success",`Ownership reset for ${U}`)}catch(R){k("error","Failed to reset ownership"),console.error(R)}g(R=>({...R,[`reset-${U}`]:!1}))},P=async()=>{if(confirm("Are you sure? This will reset ALL captures!")){g(U=>({...U,resetAll:!0}));try{const R=(await a1(Pu(cn,"streetart-captures"))).docs.map(S=>cm(S.ref));await Promise.all(R),k("success","All captures reset!")}catch(U){k("error","Failed to reset all captures"),console.error(U)}g(U=>({...U,resetAll:!1}))}},C=async()=>{if(confirm("Are you sure? This will delete ALL player data!")){g(U=>({...U,resetPlayers:!0}));try{const R=(await a1(Pu(cn,"streetart-players"))).docs.map(S=>cm(S.ref));await Promise.all(R),k("success","All players reset!")}catch(U){k("error","Failed to reset players"),console.error(U)}g(U=>({...U,resetPlayers:!1}))}},B=h==="all"?e:e.filter(U=>U.hood===h),G={total:e.length,captured:e.filter(U=>U.capturedBy).length,red:e.filter(U=>U.capturedBy==="red").length,blue:e.filter(U=>U.capturedBy==="blue").length,ghost:e.filter(U=>U.status==="ghost").length,players:n.length};return r?w.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] pb-24 overflow-y-auto",children:[w.jsx("div",{className:"sticky top-0 z-50 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-4 py-3",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2",children:w.jsx(tz,{size:24,className:"text-white/70"})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(R1,{size:18,className:"text-purple-400"}),w.jsx("span",{className:"font-bold",children:"God Mode"})]}),w.jsx("div",{className:"w-10"})]})}),_&&w.jsx(ce.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:`fixed top-16 left-4 right-4 z-50 p-3 rounded-xl text-center text-sm font-medium ${_.type==="error"?"bg-red-500/90":"bg-green-500/90"}`,children:_.text}),w.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.total}),w.jsx("div",{className:"text-xs text-white/40",children:"Points"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-red-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-red-400",children:G.red}),w.jsx("div",{className:"text-xs text-red-400/60",children:"Red"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-blue-400",children:G.blue}),w.jsx("div",{className:"text-xs text-blue-400/60",children:"Blue"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-white/60",children:G.ghost}),w.jsx("div",{className:"text-xs text-white/40",children:"Ghost"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.players}),w.jsx("div",{className:"text-xs text-white/40",children:"Players"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.captured}),w.jsx("div",{className:"text-xs text-white/40",children:"Captured"})]})]}),w.jsxs("div",{className:"px-4 mb-6",children:[w.jsxs("h2",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[w.jsx(dA,{size:14}),"Danger Zone"]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("button",{onClick:P,disabled:m.resetAll,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetAll?w.jsx(bh,{size:16,className:"animate-spin"}):w.jsx(vz,{size:16}),"Reset Captures"]}),w.jsxs("button",{onClick:C,disabled:m.resetPlayers,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetPlayers?w.jsx(bh,{size:16,className:"animate-spin"}):w.jsx(sf,{size:16}),"Reset Players"]})]})]}),w.jsx("div",{className:"px-4 mb-4",children:w.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[w.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h==="all"?"bg-white text-black":"bg-white/10 text-white/60"}`,children:"All"}),Object.values(nf).map(U=>w.jsx("button",{onClick:()=>f(U.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h===U.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:U.name},U.id))]})}),w.jsxs("div",{className:"px-4 space-y-2",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2",children:["Art Points (",B.length,")"]}),B.map(U=>{var S;const R=U.status==="ghost";return w.jsxs("div",{className:`p-4 rounded-xl border ${R?"bg-white/5 border-white/10 opacity-60":"bg-white/5 border-white/10"}`,children:[w.jsxs("div",{className:"flex items-start justify-between mb-2",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-medium",children:U.name}),R&&w.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-white/10 text-white/40",children:"GHOST"})]}),w.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[U.id,"  ",U.area,"  ",U.size,"  ",(S=iA[U.size])==null?void 0:S.points,"pts"]})]}),U.capturedBy&&w.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:U.capturedBy==="red"?"#ff6b6b20":"#4dabf720",color:U.capturedBy==="red"?"#ff6b6b":"#4dabf7"},children:U.capturedBy.toUpperCase()})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>O(U.id,U.status),disabled:m[U.id],className:`flex-1 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-1.5 ${R?"bg-green-500/20 text-green-400":"bg-white/10 text-white/60"}`,children:m[U.id]?w.jsx(bh,{size:14,className:"animate-spin"}):R?w.jsxs(w.Fragment,{children:[w.jsx(uz,{size:14})," Make Active"]}):w.jsxs(w.Fragment,{children:[w.jsx(aA,{size:14})," Make Ghost"]})}),U.capturedBy&&w.jsx("button",{onClick:()=>b(U.id),disabled:m[`reset-${U.id}`],className:"py-2 px-3 rounded-lg bg-white/10 text-white/60 text-xs font-medium flex items-center gap-1.5",children:m[`reset-${U.id}`]?w.jsx(bh,{size:14,className:"animate-spin"}):w.jsxs(w.Fragment,{children:[w.jsx(Tz,{size:14})," Reset"]})})]})]},U.id)})]}),w.jsxs("div",{className:"px-4 mt-8",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2 flex items-center gap-2",children:[w.jsx(sf,{size:14}),"Players (",n.length,")"]}),w.jsx("div",{className:"space-y-2",children:n.map(U=>w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("div",{className:"font-medium",children:U.name}),w.jsxs("div",{className:"text-xs text-white/40",children:[U.captures||0," captures"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-sm font-bold",children:U.score||0}),w.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:U.team==="red"?"#ff6b6b":"#4dabf7"}})]})]},U.id))})]})]}):w.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-6",children:w.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:w.jsx(R1,{size:32,className:"text-purple-400"})}),w.jsx("h1",{className:"text-2xl font-bold",children:"Admin Access"}),w.jsx("p",{className:"text-white/40 text-sm mt-1",children:"God Mode Panel"})]}),w.jsxs("form",{onSubmit:A,className:"space-y-4",children:[w.jsx("input",{type:"password",value:a,onChange:U=>u(U.target.value),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-center focus:outline-none focus:border-purple-500/50"}),w.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-purple-500 text-white font-bold",children:"Enter"})]}),_&&w.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-3 rounded-lg text-center text-sm ${_.type==="error"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:_.text}),w.jsx("button",{onClick:()=>t(-1),className:"mt-6 w-full py-2 text-white/40 text-sm",children:" Back"})]})})}const dF=[{path:"/",icon:dz,label:"Home"},{path:"/map",icon:rv,label:"Map"},{path:"/scanner",icon:mz,label:"Scan"},{path:"/leaderboard",icon:sv,label:"Ranks"},{path:"/profile",icon:wz,label:"You"}];function fF(){return w.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[w.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),w.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:dF.map(({path:t,icon:e,label:n})=>w.jsx(IR,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>w.jsxs(ce.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&w.jsx(ce.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),w.jsx(ce.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:w.jsx(e,{size:20,strokeWidth:i?2.5:2})}),w.jsx(ce.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function pF({color:t}){const e=Array.from({length:12},(n,i)=>({id:i,angle:i/12*360,delay:i*.02}));return w.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map(n=>w.jsx(ce.div,{className:"absolute left-1/2 top-1/2 w-3 h-3 rounded-full",style:{backgroundColor:t},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(n.angle*Math.PI/180)*150,y:Math.sin(n.angle*Math.PI/180)*150,opacity:0,scale:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"}},n.id))})}function mF(){var o;const{captureNotification:t}=Ui();if(!t)return null;const e=((o=st[t.team])==null?void 0:o.hex)||"#888",n=t.team==="red"?"RED":"BLUE",i=t.points||100,r=t.streak||0;return w.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden",children:[w.jsx(ce.div,{className:"absolute inset-0",style:{backgroundColor:e},initial:{opacity:.3},animate:{opacity:[.3,.15,.2]},transition:{duration:.5}}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Array.from({length:8}).map((a,u)=>w.jsx(ce.div,{className:"absolute w-1 origin-bottom",style:{backgroundColor:e,height:"50vh",transform:`rotate(${u*45}deg)`,opacity:.2},initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.3,delay:u*.02}},u))}),w.jsxs(ce.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},exit:{scale:.5,opacity:0},transition:{type:"spring",damping:12,stiffness:200},className:"relative text-center p-8",children:[w.jsx(pF,{color:e}),w.jsxs(ce.div,{className:"relative w-28 h-28 mx-auto mb-4",animate:{scale:[1,1.1,1]},transition:{duration:.5,repeat:2},children:[w.jsx("div",{className:"absolute inset-0 rounded-full blur-xl",style:{backgroundColor:e,opacity:.5}}),w.jsx("div",{className:"relative w-full h-full rounded-full flex items-center justify-center",style:{backgroundColor:e},children:t.isRecapture?w.jsx(cA,{size:56,className:"text-white"}):w.jsx(oA,{size:56,className:"text-white"})})]}),w.jsxs(ce.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[w.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-1",children:t.isRecapture?"STOLEN!":"CAPTURED!"}),w.jsx("p",{className:"text-lg font-semibold text-white/80",children:t.artName})]}),w.jsxs(ce.div,{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"rgba(0,0,0,0.4)"},initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:[w.jsx(rf,{size:20,className:"text-white"}),w.jsxs("span",{className:"text-2xl font-black text-white",children:["+",i]}),r>1&&w.jsxs("span",{className:"flex items-center gap-1 text-orange-400 font-bold",children:[w.jsx(iv,{size:18}),r,"x"]})]}),w.jsxs(ce.div,{className:"mt-4 flex items-center justify-center gap-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[w.jsx("span",{className:"text-white/60 text-sm",children:"by"}),w.jsx("span",{className:"font-bold text-white",children:t.playerName}),w.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-black",style:{backgroundColor:e},children:n})]})]})]})}function kh({children:t}){const{player:e}=Ui();return e.team&&e.name&&e.name!=="Street Artist"?t:w.jsx(oP,{to:"/onboarding",replace:!0})}function gF(){const t=Po(),{player:e}=Ui(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding"||t.pathname==="/admin";return w.jsxs("div",{className:"h-full w-full flex flex-col",children:[w.jsx(La,{children:w.jsx(mF,{})}),w.jsx(La,{mode:"wait",children:w.jsxs(mR,{location:t,children:[w.jsx(Vr,{path:"/onboarding",element:w.jsx(Cz,{})}),w.jsx(Vr,{path:"/",element:n?w.jsx(kz,{}):w.jsx(oP,{to:"/onboarding",replace:!0})}),w.jsx(Vr,{path:"/map",element:w.jsx(kh,{children:w.jsx(iF,{})})}),w.jsx(Vr,{path:"/scanner",element:w.jsx(kh,{children:w.jsx(rF,{})})}),w.jsx(Vr,{path:"/leaderboard",element:w.jsx(kh,{children:w.jsx(lF,{})})}),w.jsx(Vr,{path:"/profile",element:w.jsx(kh,{children:w.jsx(uF,{})})}),w.jsx(Vr,{path:"/admin",element:w.jsx(hF,{})})]},t.pathname)}),!i&&n&&w.jsx(fF,{})]})}function yF(){return w.jsx(K6,{children:w.jsx(gF,{})})}mm.createRoot(document.getElementById("root")).render(w.jsx(uo.StrictMode,{children:w.jsx(ER,{children:w.jsx(yF,{})})}));
